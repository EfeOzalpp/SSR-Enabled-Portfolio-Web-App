{"version":3,"file":"static/js/FrontPage-jsx.247a6465.chunk.js","mappings":"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","sources":["utils/get-project-data.ts","utils/content-utility/lazy-view-mount.tsx","utils/split+drag/pannable-object-position.tsx","utils/loading/loading.tsx","utils/content-utility/color-map.ts","../../../../node_modules/@sanity/image-url/src/parseAssetId.ts","../../../../node_modules/@sanity/image-url/src/parseSource.ts","../../../../node_modules/@sanity/image-url/src/urlForImage.ts","../../../../node_modules/@sanity/image-url/src/builder.ts","ssr/projects/scoop.ssr.tsx","ssr/registry.ts","ssr/projects/rotary.ssr.tsx","ssr/projects/dataviz.ssr.tsx","ssr/projects/dynamic.ssr.tsx","ssr/projects/game.ssr.tsx","utils/context-providers/project-context.tsx","utils/sanity.ts","utils/title/title-context.tsx","utils/seed/index.ts","utils/title/title-observer.tsx","utils/title/view-project-cta.tsx","utils/title/view-project.tsx","utils/content-utility/lazy-in-view.tsx","utils/content-utility/event-mount.tsx","utils/project-pane.tsx","utils/scroll-controller.tsx","FrontPage.jsx","utils/content-utility/component-loader.tsx","utils/media-providers/image-builder.ts"],"sourcesContent":["// src/utils/get-project-data.ts\r\nimport client from './sanity';\r\n\r\nconst queries: Record<string, string> = {\r\n  'data-viz': `*[_type==\"mediaBlock\" && slug.current==\"data-viz\"][0]{\r\n    mediaOne{ alt,image,video{ \"webmUrl\": webm.asset->url, \"mp4Url\": mp4.asset->url, poster } }\r\n  }`,\r\n  'ice-scoop': `*[_type==\"mediaBlock\" && slug.current==\"ice-scoop\"][0]{\r\n    mediaOne{ alt,image,video{ \"webmUrl\": webm.asset->url, \"mp4Url\": mp4.asset->url, poster } },\r\n    mediaTwo{ alt,image,video{ \"webmUrl\": webm.asset->url, \"mp4Url\": mp4.asset->url, poster } }\r\n  }`,\r\n  'rotary-lamp': `*[_type==\"mediaBlock\" && title match \"Rotary Lamp\"][0]{\r\n    mediaOne{ alt, image{asset->{url}}, video{ asset->{url} } },\r\n    mediaTwo{ alt, image{asset->{url}}, video{ asset->{url} } }\r\n  }`,\r\n    'dynamic-frame': `*[_type == \"svgAsset\" && title in [\"Laptop\",\"Tablet\",\"Phone\"]]{\r\n    title, file{ asset->{ url } }\r\n  }`,\r\n    'rock-coin': `*[_type==\"imageDemanded\" && title==\"coin\"][0]{\r\n    alt,\r\n    image{ asset->{ url } } \r\n  }`,\r\n  // add others as I go\r\n};\r\n\r\nexport async function getProjectData<T>(key: string): Promise<T | null> {\r\n  const q = queries[key];\r\n  if (!q) return null;\r\n  try {\r\n    return await client.fetch<T>(q);\r\n  } catch (e) {\r\n    console.error(`[getProjectData] ${key} failed:`, e);\r\n    return null;\r\n  }\r\n}\r\n\r\n","// src/utils/content-utility/lazy-view-mount.tsx\r\nimport { useEffect, useRef, useState, Suspense, type ComponentType, lazy } from 'react';\r\n\r\ntype MountMode = 'io' | 'idle' | 'immediate';\r\n\r\ntype Props = {\r\n  load: () => Promise<{ default: ComponentType<any> }>;\r\n  fallback?: React.ReactNode;\r\n\r\n  /** Mount strategy */\r\n  mountMode?: MountMode;            // 'io' | 'idle' | 'immediate' (default 'io')\r\n\r\n  /** IO config (only when mountMode === 'io') */\r\n  enterThreshold?: number;          // default 0.2   -> start showing at/after this ratio\r\n  exitThreshold?: number;           // default 0.05  -> consider out-of-view at/below\r\n  unmountDelayMs?: number;          // default 150ms -> delay before unmounting after exit\r\n  root?: Element | null;            // viewport by default\r\n  rootMargin?: string;              // default '0px'\r\n  observeTargetId?: string;         // observe specific element; else our own wrapper\r\n\r\n  /** Preloading */\r\n  preloadOnIdle?: boolean;          // default true\r\n  preloadIdleTimeout?: number;      // default 2000\r\n  preloadOnFirstIO?: boolean;       // default true\r\n\r\n  /** Layout/UX */\r\n  placeholderMinHeight?: number;    // default 360\r\n  fadeMs?: number;                  // default 300\r\n  fadeEasing?: string;              // default 'ease'\r\n\r\n  /** Forward child props */\r\n  componentProps?: Record<string, any>;\r\n};\r\n\r\nconst hasWindow = typeof window !== 'undefined';\r\nconst hasRIC = hasWindow && 'requestIdleCallback' in (window as any);\r\nconst hasCIC = hasWindow && 'cancelIdleCallback' in (window as any);\r\nconst ric = (cb: any, opts?: any) =>\r\n  hasRIC ? (window as any).requestIdleCallback(cb, opts) : setTimeout(cb, opts?.timeout ?? 0);\r\nconst cic = (id: any) =>\r\n  hasCIC ? (window as any).cancelIdleCallback(id) : clearTimeout(id);\r\n\r\nexport default function LazyViewMount({\r\n  load,\r\n  fallback = null,\r\n\r\n  // strategy\r\n  mountMode = 'io',\r\n\r\n  // IO\r\n  enterThreshold = 0.2,\r\n  exitThreshold = 0.05,\r\n  unmountDelayMs = 150,\r\n  root = null,\r\n  rootMargin = '0px',\r\n  observeTargetId,\r\n\r\n  // preload\r\n  preloadOnIdle = true,\r\n  preloadIdleTimeout = 2000,\r\n  preloadOnFirstIO = true,\r\n\r\n  // layout/UX\r\n  placeholderMinHeight = 360,\r\n  fadeMs = 300,\r\n  fadeEasing = 'ease',\r\n\r\n  componentProps,\r\n}: Props) {\r\n  const isServer = !hasWindow;\r\n\r\n  const selfRef = useRef<HTMLDivElement | null>(null);\r\n  const [Comp, setComp] = useState<ComponentType | null>(null);\r\n\r\n  // mount/visibility\r\n  const mountedRef = useRef(false);\r\n  const [isMounted, setIsMounted] = useState(false);\r\n  const [isVisible, setIsVisible] = useState(false);\r\n\r\n  // timers\r\n  const unmountTimer = useRef<number | null>(null);\r\n  const fadeTimer = useRef<number | null>(null);\r\n  const idleId = useRef<any>(null);\r\n\r\n  // preload promise cache\r\n  const preloadPromiseRef = useRef<Promise<{ default: ComponentType<any> }> | null>(null);\r\n\r\n  // IO edge tracking\r\n  const lastRatio = useRef<number>(0);\r\n  const lastIntersecting = useRef<boolean>(false);\r\n  const firstIOSeen = useRef(false);\r\n\r\n  /** Preload once */\r\n  const ensurePreloaded = () => {\r\n    if (!preloadPromiseRef.current) {\r\n      preloadPromiseRef.current = load();\r\n    }\r\n    return preloadPromiseRef.current;\r\n  };\r\n\r\n  const clearTimers = () => {\r\n    if (unmountTimer.current != null) { window.clearTimeout(unmountTimer.current); unmountTimer.current = null; }\r\n    if (fadeTimer.current != null)     { window.clearTimeout(fadeTimer.current);   fadeTimer.current = null; }\r\n  };\r\n\r\n  const mountNow = () => {\r\n    if (mountedRef.current) {\r\n      // already mounted; just ensure visible\r\n      setIsVisible(true);\r\n      return;\r\n    }\r\n    mountedRef.current = true;\r\n    const p = ensurePreloaded();\r\n    setComp(prev => prev ?? (lazy(() => p) as unknown as ComponentType));\r\n    setIsMounted(true);\r\n    // next frame -> allow CSS transition\r\n    requestAnimationFrame(() => setIsVisible(true));\r\n  };\r\n\r\n  const unmountSoon = () => {\r\n    if (!mountedRef.current) return;\r\n    clearTimers();\r\n    // fade out -> unmount\r\n    unmountTimer.current = window.setTimeout(() => {\r\n      setIsVisible(false);\r\n      fadeTimer.current = window.setTimeout(() => {\r\n        setIsMounted(false);\r\n        mountedRef.current = false;\r\n      }, fadeMs);\r\n    }, unmountDelayMs);\r\n  };\r\n\r\n  /** Preload on idle */\r\n  useEffect(() => {\r\n    if (isServer || !preloadOnIdle) return;\r\n    if (idleId.current) cic(idleId.current);\r\n    idleId.current = ric(() => { void ensurePreloaded(); }, { timeout: preloadIdleTimeout });\r\n    return () => { if (idleId.current) { cic(idleId.current); idleId.current = null; } };\r\n  }, [isServer, preloadOnIdle, preloadIdleTimeout, load]);\r\n\r\n  /** Mount behavior per mode */\r\n  useEffect(() => {\r\n    if (isServer) return;\r\n\r\n    if (mountMode === 'immediate') {\r\n      mountNow();\r\n      return;\r\n    }\r\n\r\n    if (mountMode === 'idle') {\r\n      const id = ric(() => mountNow(), { timeout: preloadIdleTimeout });\r\n      return () => { if (id) cic(id); };\r\n    }\r\n\r\n    // ---- IO MODE ----\r\n    const target =\r\n      (observeTargetId ? document.getElementById(observeTargetId) : null) ||\r\n      selfRef.current;\r\n\r\n    if (!target) return;\r\n\r\n    if (typeof IntersectionObserver === 'undefined') {\r\n      // no IO support -> just mount\r\n      mountNow();\r\n      return;\r\n    }\r\n\r\n    // ensure sensible thresholds (enter > exit)\r\n    const enter = Math.max(0, Math.min(1, enterThreshold));\r\n    const exit  = Math.max(0, Math.min(enter, exitThreshold)); // cap at enter\r\n    const thresholds = Array.from(new Set([0, exit, enter, 1])).sort((a, b) => a - b);\r\n\r\n    const io = new IntersectionObserver(([entry]) => {\r\n      const ratio = entry?.intersectionRatio ?? 0;\r\n      const intersecting = !!entry?.isIntersecting;\r\n\r\n      // first IO  optional preload\r\n      if (!firstIOSeen.current) {\r\n        firstIOSeen.current = true;\r\n        if (preloadOnFirstIO) void ensurePreloaded();\r\n      }\r\n\r\n      // Compute edge crossings (prevents jitter in the gray zone)\r\n      const crossedEnter = lastRatio.current < enter && ratio >= enter;\r\n      const crossedExit  = lastRatio.current > exit  && ratio <= exit;\r\n      const becameIntersecting = !lastIntersecting.current && intersecting;\r\n      const leftIntersecting   = lastIntersecting.current && !intersecting;\r\n\r\n      // ENTER: on intersection or crossing the enter threshold\r\n      if (becameIntersecting || crossedEnter) {\r\n        clearTimers();\r\n        mountNow();\r\n      }\r\n      // EXIT: when leaving intersection OR crossing exit threshold\r\n      else if (leftIntersecting || crossedExit) {\r\n        unmountSoon();\r\n      }\r\n\r\n      // save last values\r\n      lastRatio.current = ratio;\r\n      lastIntersecting.current = intersecting;\r\n    }, { root, rootMargin, threshold: thresholds });\r\n\r\n    io.observe(target);\r\n    return () => { io.disconnect(); clearTimers(); };\r\n  }, [\r\n    isServer,\r\n    mountMode,\r\n    root,\r\n    rootMargin,\r\n    enterThreshold,\r\n    exitThreshold,\r\n    observeTargetId,\r\n    preloadIdleTimeout,\r\n    preloadOnFirstIO,\r\n    fadeMs,\r\n    unmountDelayMs,\r\n  ]);\r\n\r\n  const CompAny = Comp as any;\r\n\r\n  return (\r\n    <div\r\n      ref={selfRef}\r\n      style={{ width: '100%', minHeight: placeholderMinHeight, position: 'relative' }}\r\n    >\r\n      {isMounted && CompAny ? (\r\n        <div\r\n          style={{\r\n            opacity: isVisible ? 1 : 0,                 // 1 in view, 0 out of view\r\n            transition: `opacity ${fadeMs}ms ${fadeEasing}`,\r\n            willChange: 'opacity',\r\n          }}\r\n        >\r\n          <Suspense fallback={fallback}>\r\n            <CompAny {...(componentProps || {})} />\r\n          </Suspense>\r\n        </div>\r\n      ) : (\r\n        fallback\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useRef } from 'react';\r\n\r\ntype Sensitivity = number | { x?: number; y?: number };\r\n\r\n/**\r\n * Wraps a single <img> or <video>.\r\n * - Pan by dragging (via CSS object-position)\r\n * - Zoom inside the component only (pinch on touch devices, Ctrl+wheel on desktop)\r\n * - Double-click resets both pan and zoom\r\n * - Marks itself with data-allow-zoom=\"1\" so the page-level blocker skips it\r\n */\r\nexport default function PannableViewport({\r\n  className,\r\n  style,\r\n  children,\r\n  sensitivity = 1.75,\r\n  minScale = 1,\r\n  maxScale = 3,\r\n}: {\r\n  className?: string;\r\n  style?: React.CSSProperties;\r\n  children: React.ReactNode;\r\n  sensitivity?: Sensitivity;\r\n  minScale?: number;\r\n  maxScale?: number;\r\n}) {\r\n  const hostRef = useRef<HTMLDivElement | null>(null);\r\n  const draggingRef = useRef(false);\r\n  const scaleRef = useRef(1);\r\n\r\n  useEffect(() => {\r\n    const host = hostRef.current;\r\n    if (!host) return;\r\n\r\n    const media = host.querySelector('img, video') as HTMLImageElement | HTMLVideoElement | null;\r\n    if (!media) return;\r\n\r\n    const styleMedia = (media as HTMLElement).style;\r\n    const clamp = (v: number, lo: number, hi: number) => Math.max(lo, Math.min(hi, v));\r\n\r\n    // Object-fit defaults and object-position baseline\r\n    if (!styleMedia.objectFit) styleMedia.objectFit = 'cover';\r\n    const computed = window.getComputedStyle(media);\r\n    if (!computed.objectPosition || computed.objectPosition === 'initial') {\r\n      styleMedia.objectPosition = '50% 50%';\r\n    }\r\n    (media as any).draggable = false;\r\n\r\n    // Element-scoped zoom via transform scale\r\n    styleMedia.transformOrigin = '50% 50%';\r\n    const applyScale = (s: number) => {\r\n      scaleRef.current = clamp(s, minScale, maxScale);\r\n      styleMedia.transform = scaleRef.current === 1 ? '' : `scale(${scaleRef.current})`;\r\n    };\r\n\r\n    const sensX =\r\n      typeof sensitivity === 'number' ? sensitivity : clamp(sensitivity?.x ?? 1, 0.1, 10);\r\n    const sensY =\r\n      typeof sensitivity === 'number' ? sensitivity : clamp(sensitivity?.y ?? 1, 0.1, 10);\r\n\r\n    let cw = 0, ch = 0; // container\r\n    let mw = 0, mh = 0; // intrinsic\r\n    let dispW = 0, dispH = 0;\r\n\r\n    let canPanX = false, canPanY = false;\r\n    let pctPerPxX = 0, pctPerPxY = 0;\r\n\r\n    const parseOP = () => {\r\n      const op = window.getComputedStyle(media).objectPosition || '50% 50%';\r\n      const [oxRaw, oyRaw] = op.split(/\\s+/).map((t) => t.trim());\r\n      const toPct = (v: string) => {\r\n        if (v.endsWith('%')) return parseFloat(v);\r\n        const n = parseFloat(v);\r\n        return Number.isFinite(n) ? clamp(n, 0, 100) : 50;\r\n      };\r\n      return [toPct(oxRaw), toPct(oyRaw)] as [number, number];\r\n    };\r\n\r\n    const setOP = (xPct: number, yPct: number) => {\r\n      const x = clamp(xPct, 0, 100);\r\n      const y = clamp(yPct, 0, 100);\r\n      styleMedia.objectPosition = `${x}% ${y}%`;\r\n    };\r\n\r\n    const computeCover = () => {\r\n      const rect = host.getBoundingClientRect();\r\n      cw = rect.width; ch = rect.height;\r\n\r\n      if (media instanceof HTMLImageElement) {\r\n        mw = media.naturalWidth || 0; mh = media.naturalHeight || 0;\r\n      } else if (media instanceof HTMLVideoElement) {\r\n        mw = media.videoWidth || 0; mh = media.videoHeight || 0;\r\n      }\r\n\r\n      if (!mw || !mh || !cw || !ch) {\r\n        dispW = dispH = 0; canPanX = canPanY = false; pctPerPxX = pctPerPxY = 0;\r\n        return;\r\n      }\r\n\r\n      const scale = Math.max(cw / mw, ch / mh); // cover\r\n      dispW = mw * scale; dispH = mh * scale;\r\n\r\n      const overflowX = dispW - cw;\r\n      const overflowY = dispH - ch;\r\n\r\n      canPanX = overflowX > 1;\r\n      canPanY = overflowY > 1;\r\n\r\n      pctPerPxX = canPanX ? (100 / overflowX) * sensX : 0;\r\n      pctPerPxY = canPanY ? (100 / overflowY) * sensY : 0;\r\n    };\r\n\r\n    computeCover();\r\n\r\n    // Resize observer to keep math fresh\r\n    let ro: ResizeObserver | null = null;\r\n    if ('ResizeObserver' in window) {\r\n      ro = new ResizeObserver(() => computeCover());\r\n      ro.observe(host);\r\n    }\r\n\r\n    // Videos: wait for metadata for intrinsic sizes\r\n    let onMeta: (() => void) | null = null;\r\n    if (media instanceof HTMLVideoElement) {\r\n      onMeta = () => computeCover();\r\n      media.addEventListener('loadedmetadata', onMeta);\r\n    }\r\n\r\n    // Drag-to-pan\r\n    let startX = 0, startY = 0;\r\n    let startOPX = 50, startOPY = 50;\r\n\r\n    const setGestureLock = (on: boolean) => {\r\n      draggingRef.current = on;\r\n      if (on) {\r\n        host.dataset.gestureLock = '1';\r\n        host.style.touchAction = 'none';\r\n        host.style.cursor = 'grabbing';\r\n      } else {\r\n        delete host.dataset.gestureLock;\r\n        host.style.touchAction = '';\r\n        host.style.cursor = '';\r\n      }\r\n    };\r\n\r\n    const onPointerDown = (e: PointerEvent) => {\r\n      if (e.pointerType === 'mouse' && e.button !== 0) return;\r\n      if ((e.target as HTMLElement)?.closest('a,button,[role=\"button\"]')) return;\r\n\r\n      const [ox, oy] = parseOP();\r\n      startOPX = ox; startOPY = oy;\r\n      startX = e.clientX; startY = e.clientY;\r\n\r\n      (e.currentTarget as HTMLElement).setPointerCapture?.(e.pointerId);\r\n      setGestureLock(true);\r\n    };\r\n\r\n    const onPointerMove = (e: PointerEvent) => {\r\n      if (!draggingRef.current) return;\r\n      const dx = e.clientX - startX;\r\n      const dy = e.clientY - startY;\r\n      let nextX = startOPX, nextY = startOPY;\r\n      if (canPanX) nextX = startOPX + dx * pctPerPxX;\r\n      if (canPanY) nextY = startOPY + dy * pctPerPxY;\r\n      setOP(nextX, nextY);\r\n    };\r\n\r\n    const endDrag = (e?: PointerEvent) => {\r\n      if (!draggingRef.current) return;\r\n      if (e) (e.currentTarget as HTMLElement).releasePointerCapture?.(e.pointerId);\r\n      setGestureLock(false);\r\n    };\r\n\r\n    // Double-click to reset both pan and zoom\r\n    const onDblClick = () => {\r\n      setOP(50, 50);\r\n      applyScale(1);\r\n    };\r\n\r\n    // Element-scoped zoom\r\n    // Desktop/trackpad: Ctrl + wheel is treated as pinch by browsers\r\n    const onWheel = (e: WheelEvent) => {\r\n      if (!e.ctrlKey) return;       // only consume pinch-zoom wheels\r\n      e.preventDefault();           // keep zoom local to this element\r\n      const delta = -e.deltaY;      // wheel up -> zoom in\r\n      const next = scaleRef.current * (1 + delta * 0.0015);\r\n      applyScale(next);\r\n    };\r\n\r\n    // iOS Safari: gesture events\r\n    let startScale = 1;\r\n    const onGestureStart = () => { startScale = scaleRef.current; };\r\n    const onGestureChange = (e: any) => {\r\n      const rel = typeof e?.scale === 'number' ? e.scale : 1;\r\n      applyScale(startScale * rel);\r\n    };\r\n    const onGestureEnd = () => {};\r\n\r\n    // Listeners\r\n    if ('PointerEvent' in window) {\r\n      host.addEventListener('pointerdown', onPointerDown);\r\n      window.addEventListener('pointermove', onPointerMove, { passive: true });\r\n      window.addEventListener('pointerup', endDrag as any, { passive: true });\r\n    }\r\n    host.addEventListener('dblclick', onDblClick);\r\n\r\n    host.addEventListener('wheel', onWheel, { passive: false });\r\n    host.addEventListener('gesturestart', onGestureStart as any);\r\n    host.addEventListener('gesturechange', onGestureChange as any);\r\n    host.addEventListener('gestureend', onGestureEnd as any);\r\n\r\n    return () => {\r\n      ro?.disconnect();\r\n      if (media instanceof HTMLVideoElement && onMeta) {\r\n        media.removeEventListener('loadedmetadata', onMeta);\r\n      }\r\n      if ('PointerEvent' in window) {\r\n        host.removeEventListener('pointerdown', onPointerDown);\r\n        window.removeEventListener('pointermove', onPointerMove as any);\r\n        window.removeEventListener('pointerup', endDrag as any);\r\n      }\r\n      host.removeEventListener('dblclick', onDblClick);\r\n      host.removeEventListener('wheel', onWheel as any);\r\n      host.removeEventListener('gesturestart', onGestureStart as any);\r\n      host.removeEventListener('gesturechange', onGestureChange as any);\r\n      host.removeEventListener('gestureend', onGestureEnd as any);\r\n\r\n      setGestureLock(false);\r\n      applyScale(1);\r\n    };\r\n  }, [sensitivity, minScale, maxScale]);\r\n\r\n  return (\r\n    <div\r\n      ref={hostRef}\r\n      className={['pannable-viewport', className].filter(Boolean).join(' ')}\r\n      data-gesture-lock={draggingRef.current ? '1' : undefined}\r\n      data-allow-zoom=\"1\" // opt-in so FrontPage allows pinch here\r\n      style={{\r\n        position: 'relative',\r\n        width: '100%',\r\n        height: '100%',\r\n        overflow: 'hidden',\r\n        cursor: 'grab',\r\n        ...style,\r\n      }}\r\n    >\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect, useRef, useState } from 'react';\r\nimport lottie from 'lottie-web';\r\nimport loading from '../../svg/loading.json';\r\n\r\nimport '../../styles/loading-overlay.css';\r\n\r\ntype LoadingScreenProps = {\r\n  isFullScreen?: boolean;\r\n  /** Delay before showing loader (ms) */\r\n  delayMs?: number;\r\n};\r\n\r\nconst LoadingScreen = ({ isFullScreen = true, delayMs = 400 }: LoadingScreenProps) => {\r\n  const container = useRef<HTMLDivElement>(null);\r\n  const [size, setSize] = useState(70); // default to largest\r\n  const [show, setShow] = useState(false);\r\n\r\n  // Delay before showing loader\r\n  useEffect(() => {\r\n    const t = setTimeout(() => setShow(true), delayMs);\r\n    return () => clearTimeout(t);\r\n  }, [delayMs]);\r\n\r\n  // Lottie setup (only if visible)\r\n  useEffect(() => {\r\n    if (!show || !container.current) return;\r\n    const width = window.innerWidth;\r\n    if (width <= 767) {\r\n      setSize(32);\r\n    } else if (width <= 1024) {\r\n      setSize(40);\r\n    } else {\r\n      setSize(56);\r\n    }\r\n\r\n    const anim = lottie.loadAnimation({\r\n      container: container.current,\r\n      renderer: 'svg',\r\n      loop: true,\r\n      autoplay: true,\r\n      animationData: loading,\r\n    });\r\n\r\n    return () => anim.destroy();\r\n  }, [show]);\r\n\r\n  if (!show) {\r\n    // Empty placeholder to keep structure aligned\r\n    return (\r\n      <div\r\n        className={`loading-screen-wrapper ${isFullScreen ? 'fullscreen' : 'contained'}`}\r\n        aria-hidden=\"true\"\r\n      />\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={`loading-screen-wrapper ${isFullScreen ? 'fullscreen' : 'contained'}`}>\r\n      <div\r\n        className=\"loading-lottie\"\r\n        ref={container}\r\n        style={{\r\n          width: `${size}px`,\r\n          height: `${size}px`,\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoadingScreen;\r\n","// Master color config\r\nexport interface ProjectColor {\r\n  rgb: string;         // \"204, 85, 41\"\r\n  tooltipAlpha?: number;\r\n  defaultAlpha?: number;\r\n  darkThemeTop?: string; // optional override for theme-color\r\n}\r\n\r\nexport const projectColors: Record<string, ProjectColor> = {\r\n  'Rotary Lamp': {\r\n    rgb: '204, 85, 41',\r\n    tooltipAlpha: 0.6,\r\n    defaultAlpha: 0.6,\r\n    darkThemeTop: 'rgba(72, 161, 161, 1)'\r\n  },\r\n  'Ice Cream Scoop': {\r\n    rgb: '234, 103, 97',\r\n    tooltipAlpha: 0.6,\r\n    defaultAlpha: 0.6,\r\n    darkThemeTop: 'rgba(23, 27, 24, 1)'\r\n  },\r\n  'Data Visualization': {\r\n    rgb: '153, 199, 7',\r\n    tooltipAlpha: 0.8,\r\n    defaultAlpha: 0.6,\r\n    darkThemeTop: 'rgba(28, 30, 31, 1)'\r\n  },\r\n  'Evade the Rock': {\r\n    rgb: '101, 86, 175',\r\n    tooltipAlpha: 0.6,\r\n    defaultAlpha: 0.6,\r\n    darkThemeTop: 'rgb(25, 25, 25)'\r\n  },\r\n  'Dynamic App': {\r\n    rgb: '120, 211, 255',\r\n    tooltipAlpha: 0.6,\r\n    defaultAlpha: 0.6,\r\n    darkThemeTop: 'rgba(17, 17, 17, 1)'\r\n  }\r\n};\r\n","const example = 'image-Tb9Ew8CXIwaY6R1kjMvI0uRR-2000x3000-jpg'\n\nexport default function parseAssetId(ref: string) {\n  const [, id, dimensionString, format] = ref.split('-')\n\n  if (!id || !dimensionString || !format) {\n    throw new Error(`Malformed asset _ref '${ref}'. Expected an id like \"${example}\".`)\n  }\n\n  const [imgWidthStr, imgHeightStr] = dimensionString.split('x')\n\n  const width = +imgWidthStr\n  const height = +imgHeightStr\n\n  const isValidAssetId = isFinite(width) && isFinite(height)\n  if (!isValidAssetId) {\n    throw new Error(`Malformed asset _ref '${ref}'. Expected an id like \"${example}\".`)\n  }\n\n  return {id, width, height, format}\n}\n","import {\n  SanityAsset,\n  SanityImageObject,\n  SanityImageSource,\n  SanityImageWithAssetStub,\n  SanityReference,\n} from './types'\n\nconst isRef = (src: SanityImageSource): src is SanityReference => {\n  const source = src as SanityReference\n  return source ? typeof source._ref === 'string' : false\n}\n\nconst isAsset = (src: SanityImageSource): src is SanityAsset => {\n  const source = src as SanityAsset\n  return source ? typeof source._id === 'string' : false\n}\n\nconst isAssetStub = (src: SanityImageSource): src is SanityImageWithAssetStub => {\n  const source = src as SanityImageWithAssetStub\n  return source && source.asset ? typeof source.asset.url === 'string' : false\n}\n\n// Convert an asset-id, asset or image to an image record suitable for processing\n// eslint-disable-next-line complexity\nexport default function parseSource(source?: SanityImageSource) {\n  if (!source) {\n    return null\n  }\n\n  let image: SanityImageObject\n\n  if (typeof source === 'string' && isUrl(source)) {\n    // Someone passed an existing image url?\n    image = {\n      asset: {_ref: urlToId(source)},\n    }\n  } else if (typeof source === 'string') {\n    // Just an asset id\n    image = {\n      asset: {_ref: source},\n    }\n  } else if (isRef(source)) {\n    // We just got passed an asset directly\n    image = {\n      asset: source,\n    }\n  } else if (isAsset(source)) {\n    // If we were passed an image asset document\n    image = {\n      asset: {\n        _ref: source._id || '',\n      },\n    }\n  } else if (isAssetStub(source)) {\n    // If we were passed a partial asset (`url`, but no `_id`)\n    image = {\n      asset: {\n        _ref: urlToId(source.asset.url),\n      },\n    }\n  } else if (typeof source.asset === 'object') {\n    // Probably an actual image with materialized asset\n    image = {...source}\n  } else {\n    // We got something that does not look like an image, or it is an image\n    // that currently isn't sporting an asset.\n    return null\n  }\n\n  const img = source as SanityImageObject\n  if (img.crop) {\n    image.crop = img.crop\n  }\n\n  if (img.hotspot) {\n    image.hotspot = img.hotspot\n  }\n\n  return applyDefaults(image)\n}\n\nfunction isUrl(url: string) {\n  return /^https?:\\/\\//.test(`${url}`)\n}\n\nfunction urlToId(url: string) {\n  const parts = url.split('/').slice(-1)\n  return `image-${parts[0]}`.replace(/\\.([a-z]+)$/, '-$1')\n}\n\n// Mock crop and hotspot if image lacks it\nfunction applyDefaults(image: SanityImageObject) {\n  if (image.crop && image.hotspot) {\n    return image as Required<SanityImageObject>\n  }\n\n  // We need to pad in default values for crop or hotspot\n  const result = {...image}\n\n  if (!result.crop) {\n    result.crop = {\n      left: 0,\n      top: 0,\n      bottom: 0,\n      right: 0,\n    }\n  }\n\n  if (!result.hotspot) {\n    result.hotspot = {\n      x: 0.5,\n      y: 0.5,\n      height: 1.0,\n      width: 1.0,\n    }\n  }\n\n  return result as Required<SanityImageObject>\n}\n","import parseAssetId from './parseAssetId'\nimport parseSource from './parseSource'\nimport {\n  CropSpec,\n  HotspotSpec,\n  ImageUrlBuilderOptions,\n  ImageUrlBuilderOptionsWithAsset,\n  SanityAsset,\n  SanityImageFitResult,\n  SanityImageRect,\n  SanityReference,\n} from './types'\n\nexport const SPEC_NAME_TO_URL_NAME_MAPPINGS = [\n  ['width', 'w'],\n  ['height', 'h'],\n  ['format', 'fm'],\n  ['download', 'dl'],\n  ['blur', 'blur'],\n  ['sharpen', 'sharp'],\n  ['invert', 'invert'],\n  ['orientation', 'or'],\n  ['minHeight', 'min-h'],\n  ['maxHeight', 'max-h'],\n  ['minWidth', 'min-w'],\n  ['maxWidth', 'max-w'],\n  ['quality', 'q'],\n  ['fit', 'fit'],\n  ['crop', 'crop'],\n  ['saturation', 'sat'],\n  ['auto', 'auto'],\n  ['dpr', 'dpr'],\n  ['pad', 'pad'],\n  ['frame', 'frame']\n]\n\nexport default function urlForImage(options: ImageUrlBuilderOptions): string {\n  let spec = {...(options || {})}\n  const source = spec.source\n  delete spec.source\n\n  const image = parseSource(source)\n  if (!image) {\n    throw new Error(`Unable to resolve image URL from source (${JSON.stringify(source)})`)\n  }\n\n  const id = (image.asset as SanityReference)._ref || (image.asset as SanityAsset)._id || ''\n  const asset = parseAssetId(id)\n\n  // Compute crop rect in terms of pixel coordinates in the raw source image\n  const cropLeft = Math.round(image.crop.left * asset.width)\n  const cropTop = Math.round(image.crop.top * asset.height)\n  const crop = {\n    left: cropLeft,\n    top: cropTop,\n    width: Math.round(asset.width - image.crop.right * asset.width - cropLeft),\n    height: Math.round(asset.height - image.crop.bottom * asset.height - cropTop),\n  }\n\n  // Compute hot spot rect in terms of pixel coordinates\n  const hotSpotVerticalRadius = (image.hotspot.height * asset.height) / 2\n  const hotSpotHorizontalRadius = (image.hotspot.width * asset.width) / 2\n  const hotSpotCenterX = image.hotspot.x * asset.width\n  const hotSpotCenterY = image.hotspot.y * asset.height\n  const hotspot = {\n    left: hotSpotCenterX - hotSpotHorizontalRadius,\n    top: hotSpotCenterY - hotSpotVerticalRadius,\n    right: hotSpotCenterX + hotSpotHorizontalRadius,\n    bottom: hotSpotCenterY + hotSpotVerticalRadius,\n  }\n\n  // If irrelevant, or if we are requested to: don't perform crop/fit based on\n  // the crop/hotspot.\n  if (!(spec.rect || spec.focalPoint || spec.ignoreImageParams || spec.crop)) {\n    spec = {...spec, ...fit({crop, hotspot}, spec)}\n  }\n\n  return specToImageUrl({...spec, asset})\n}\n\n// eslint-disable-next-line complexity\nfunction specToImageUrl(spec: ImageUrlBuilderOptionsWithAsset) {\n  const cdnUrl = (spec.baseUrl || 'https://cdn.sanity.io').replace(/\\/+$/, '')\n  const vanityStub = spec.vanityName ? `/${spec.vanityName}` : '' \n  const filename = `${spec.asset.id}-${spec.asset.width}x${spec.asset.height}.${spec.asset.format}${vanityStub}`\n  const baseUrl = `${cdnUrl}/images/${spec.projectId}/${spec.dataset}/${filename}` \n\n  const params = []\n\n  if (spec.rect) {\n    // Only bother url with a crop if it actually crops anything\n    const {left, top, width, height} = spec.rect\n    const isEffectiveCrop =\n      left !== 0 || top !== 0 || height !== spec.asset.height || width !== spec.asset.width\n\n    if (isEffectiveCrop) {\n      params.push(`rect=${left},${top},${width},${height}`)\n    }\n  }\n\n  if (spec.bg) {\n    params.push(`bg=${spec.bg}`)\n  }\n\n  if (spec.focalPoint) {\n    params.push(`fp-x=${spec.focalPoint.x}`)\n    params.push(`fp-y=${spec.focalPoint.y}`)\n  }\n\n  const flip = [spec.flipHorizontal && 'h', spec.flipVertical && 'v'].filter(Boolean).join('')\n  if (flip) {\n    params.push(`flip=${flip}`)\n  }\n\n  // Map from spec name to url param name, and allow using the actual param name as an alternative\n  SPEC_NAME_TO_URL_NAME_MAPPINGS.forEach((mapping) => {\n    const [specName, param] = mapping\n    if (typeof spec[specName] !== 'undefined') {\n      params.push(`${param}=${encodeURIComponent(spec[specName])}`)\n    } else if (typeof spec[param] !== 'undefined') {\n      params.push(`${param}=${encodeURIComponent(spec[param])}`)\n    }\n  })\n\n  if (params.length === 0) {\n    return baseUrl\n  }\n\n  return `${baseUrl}?${params.join('&')}`\n}\n\nfunction fit(\n  source: {crop: CropSpec; hotspot: HotspotSpec},\n  spec: ImageUrlBuilderOptions\n): SanityImageFitResult {\n  let cropRect: SanityImageRect\n\n  const imgWidth = spec.width\n  const imgHeight = spec.height\n\n  // If we are not constraining the aspect ratio, we'll just use the whole crop\n  if (!(imgWidth && imgHeight)) {\n    return {width: imgWidth, height: imgHeight, rect: source.crop}\n  }\n\n  const crop = source.crop\n  const hotspot = source.hotspot\n\n  // If we are here, that means aspect ratio is locked and fitting will be a bit harder\n  const desiredAspectRatio = imgWidth / imgHeight\n  const cropAspectRatio = crop.width / crop.height\n\n  if (cropAspectRatio > desiredAspectRatio) {\n    // The crop is wider than the desired aspect ratio. That means we are cutting from the sides\n    const height = Math.round(crop.height)\n    const width = Math.round(height * desiredAspectRatio)\n    const top = Math.max(0, Math.round(crop.top))\n\n    // Center output horizontally over hotspot\n    const hotspotXCenter = Math.round((hotspot.right - hotspot.left) / 2 + hotspot.left)\n    let left = Math.max(0, Math.round(hotspotXCenter - width / 2))\n\n    // Keep output within crop\n    if (left < crop.left) {\n      left = crop.left\n    } else if (left + width > crop.left + crop.width) {\n      left = crop.left + crop.width - width\n    }\n\n    cropRect = {left, top, width, height}\n  } else {\n    // The crop is taller than the desired ratio, we are cutting from top and bottom\n    const width = crop.width\n    const height = Math.round(width / desiredAspectRatio)\n    const left = Math.max(0, Math.round(crop.left))\n\n    // Center output vertically over hotspot\n    const hotspotYCenter = Math.round((hotspot.bottom - hotspot.top) / 2 + hotspot.top)\n    let top = Math.max(0, Math.round(hotspotYCenter - height / 2))\n\n    // Keep output rect within crop\n    if (top < crop.top) {\n      top = crop.top\n    } else if (top + height > crop.top + crop.height) {\n      top = crop.top + crop.height - height\n    }\n\n    cropRect = {left, top, width, height}\n  }\n\n  return {\n    width: imgWidth,\n    height: imgHeight,\n    rect: cropRect,\n  }\n}\n\n// For backwards-compatibility\nexport {parseSource}\n","import type {\n  AutoMode,\n  CropMode,\n  FitMode,\n  ImageFormat,\n  ImageUrlBuilderOptions,\n  ImageUrlBuilderOptionsWithAliases,\n  SanityModernClientLike,\n  Orientation,\n  SanityClientLike,\n  SanityImageSource,\n  SanityProjectDetails,\n} from './types'\nimport urlForImage, {SPEC_NAME_TO_URL_NAME_MAPPINGS} from './urlForImage'\n\nconst validFits = ['clip', 'crop', 'fill', 'fillmax', 'max', 'scale', 'min']\nconst validCrops = ['top', 'bottom', 'left', 'right', 'center', 'focalpoint', 'entropy']\nconst validAutoModes = ['format']\n\nfunction isSanityModernClientLike(\n  client?: SanityClientLike | SanityProjectDetails | SanityModernClientLike\n): client is SanityModernClientLike {\n  return client && 'config' in client ? typeof client.config === 'function' : false\n}\n\nfunction isSanityClientLike(\n  client?: SanityClientLike | SanityProjectDetails | SanityModernClientLike\n): client is SanityClientLike {\n  return client && 'clientConfig' in client ? typeof client.clientConfig === 'object' : false\n}\n\nfunction rewriteSpecName(key: string) {\n  const specs = SPEC_NAME_TO_URL_NAME_MAPPINGS\n  for (const entry of specs) {\n    const [specName, param] = entry\n    if (key === specName || key === param) {\n      return specName\n    }\n  }\n\n  return key\n}\n\nexport default function urlBuilder(\n  options?: SanityClientLike | SanityProjectDetails | SanityModernClientLike\n) {\n  // Did we get a modernish client?\n  if (isSanityModernClientLike(options)) {\n    // Inherit config from client\n    const {apiHost: apiUrl, projectId, dataset} = options.config()\n    const apiHost = apiUrl || 'https://api.sanity.io'\n    return new ImageUrlBuilder(null, {\n      baseUrl: apiHost.replace(/^https:\\/\\/api\\./, 'https://cdn.'),\n      projectId,\n      dataset,\n    })\n  }\n\n  // Did we get a SanityClient?\n  if (isSanityClientLike(options)) {\n    // Inherit config from client\n    const {apiHost: apiUrl, projectId, dataset} = options.clientConfig\n    const apiHost = apiUrl || 'https://api.sanity.io'\n    return new ImageUrlBuilder(null, {\n      baseUrl: apiHost.replace(/^https:\\/\\/api\\./, 'https://cdn.'),\n      projectId,\n      dataset,\n    })\n  }\n\n  // Or just accept the options as given\n  return new ImageUrlBuilder(null, options || {})\n}\n\nexport class ImageUrlBuilder {\n  public options: ImageUrlBuilderOptions\n\n  constructor(parent: ImageUrlBuilder | null, options: ImageUrlBuilderOptions) {\n    this.options = parent\n      ? {...(parent.options || {}), ...(options || {})} // Merge parent options\n      : {...(options || {})} // Copy options\n  }\n\n  withOptions(options: Partial<ImageUrlBuilderOptionsWithAliases>) {\n    const baseUrl = options.baseUrl || this.options.baseUrl\n\n    const newOptions: {[key: string]: any} = {baseUrl}\n    for (const key in options) {\n      if (options.hasOwnProperty(key)) {\n        const specKey = rewriteSpecName(key)\n        newOptions[specKey] = options[key]\n      }\n    }\n\n    return new ImageUrlBuilder(this, {baseUrl, ...newOptions})\n  }\n\n  // The image to be represented. Accepts a Sanity 'image'-document, 'asset'-document or\n  // _id of asset. To get the benefit of automatic hot-spot/crop integration with the content\n  // studio, the 'image'-document must be provided.\n  image(source: SanityImageSource) {\n    return this.withOptions({source})\n  }\n\n  // Specify the dataset\n  dataset(dataset: string) {\n    return this.withOptions({dataset})\n  }\n\n  // Specify the projectId\n  projectId(projectId: string) {\n    return this.withOptions({projectId})\n  }\n\n  // Specify background color\n  bg(bg: string) {\n    return this.withOptions({bg})\n  }\n\n  // Set DPR scaling factor\n  dpr(dpr: number) {\n    // A DPR of 1 is the default - so only include it if we have a different value\n    return this.withOptions(dpr && dpr !== 1 ? {dpr} : {})\n  }\n\n  // Specify the width of the image in pixels\n  width(width: number) {\n    return this.withOptions({width})\n  }\n\n  // Specify the height of the image in pixels\n  height(height: number) {\n    return this.withOptions({height})\n  }\n\n  // Specify focal point in fraction of image dimensions. Each component 0.0-1.0\n  focalPoint(x: number, y: number) {\n    return this.withOptions({focalPoint: {x, y}})\n  }\n\n  maxWidth(maxWidth: number) {\n    return this.withOptions({maxWidth})\n  }\n\n  minWidth(minWidth: number) {\n    return this.withOptions({minWidth})\n  }\n\n  maxHeight(maxHeight: number) {\n    return this.withOptions({maxHeight})\n  }\n\n  minHeight(minHeight: number) {\n    return this.withOptions({minHeight})\n  }\n\n  // Specify width and height in pixels\n  size(width: number, height: number) {\n    return this.withOptions({width, height})\n  }\n\n  // Specify blur between 0 and 100\n  blur(blur: number) {\n    return this.withOptions({blur})\n  }\n\n  sharpen(sharpen: number) {\n    return this.withOptions({sharpen})\n  }\n\n  // Specify the desired rectangle of the image\n  rect(left: number, top: number, width: number, height: number) {\n    return this.withOptions({rect: {left, top, width, height}})\n  }\n\n  // Specify the image format of the image. 'jpg', 'pjpg', 'png', 'webp'\n  format(format?: ImageFormat | undefined) {\n    return this.withOptions({format})\n  }\n\n  invert(invert: boolean) {\n    return this.withOptions({invert})\n  }\n\n  // Rotation in degrees 0, 90, 180, 270\n  orientation(orientation: Orientation) {\n    return this.withOptions({orientation})\n  }\n\n  // Compression quality 0-100\n  quality(quality: number) {\n    return this.withOptions({quality})\n  }\n\n  // Make it a download link. Parameter is default filename.\n  forceDownload(download: boolean | string) {\n    return this.withOptions({download})\n  }\n\n  // Flip image horizontally\n  flipHorizontal() {\n    return this.withOptions({flipHorizontal: true})\n  }\n\n  // Flip image vertically\n  flipVertical() {\n    return this.withOptions({flipVertical: true})\n  }\n\n  // Ignore crop/hotspot from image record, even when present\n  ignoreImageParams() {\n    return this.withOptions({ignoreImageParams: true})\n  }\n\n  fit(value: FitMode) {\n    if (validFits.indexOf(value) === -1) {\n      throw new Error(`Invalid fit mode \"${value}\"`)\n    }\n\n    return this.withOptions({fit: value})\n  }\n\n  crop(value: CropMode) {\n    if (validCrops.indexOf(value) === -1) {\n      throw new Error(`Invalid crop mode \"${value}\"`)\n    }\n\n    return this.withOptions({crop: value})\n  }\n\n  // Saturation\n  saturation(saturation: number) {\n    return this.withOptions({saturation})\n  }\n\n  auto(value: AutoMode) {\n    if (validAutoModes.indexOf(value) === -1) {\n      throw new Error(`Invalid auto mode \"${value}\"`)\n    }\n\n    return this.withOptions({auto: value})\n  }\n\n  // Specify the number of pixels to pad the image\n  pad(pad: number) {\n    return this.withOptions({pad})\n  }\n\n  // Vanity URL for more SEO friendly URLs\n  vanityName(value: string) {\n    return this.withOptions({vanityName: value})\n  }\n\n  frame(frame: number) {\n    if (frame !== 1) {\n      throw new Error(`Invalid frame value \"${frame}\"`)\n    }\n\n    return this.withOptions({frame})\n  }\n\n  // Gets the url based on the submitted parameters\n  url() {\n    return urlForImage(this.options)\n  }\n\n  // Alias for url()\n  toString() {\n    return this.url()\n  }\n}\n","// src/ssr/projects/scoop.ssr.tsx\r\nimport type { SsrDescriptor } from '../types';\r\nimport { getProjectData } from '../../utils/get-project-data';\r\nimport {\r\n  getMediumImageUrl,\r\n  getHighQualityImageUrl,\r\n} from '../../utils/media-providers/image-builder';\r\nimport PannableViewport from '../../utils/split+drag/pannable-object-position';\r\n\r\nexport const scoopSSR: SsrDescriptor = {\r\n  fetch: () => getProjectData('ice-scoop'),\r\n  render: (data) => {\r\n    const m1 = data?.mediaOne || {};\r\n    const m2 = data?.mediaTwo || {};\r\n\r\n    // LEFT / TOP media (image only)\r\n    const m1Medium =\r\n      m1?.image\r\n        ? getMediumImageUrl(m1.image)\r\n        : (m1?.imageUrl as string | undefined);\r\n    const m1High =\r\n      m1?.image\r\n        ? getHighQualityImageUrl(m1.image, 1920, 1080, 90)\r\n        : (m1?.imageUrl as string | undefined);\r\n\r\n    // RIGHT / BOTTOM media (video always)\r\n    const m2PosterMedium = m2?.video?.poster\r\n      ? getMediumImageUrl(m2.video.poster)\r\n      : undefined;\r\n\r\n    const m2PosterHigh = m2?.video?.poster\r\n      ? getHighQualityImageUrl(m2.video.poster, 1920, 1080, 90)\r\n      : undefined;\r\n\r\n    return (\r\n      <section\r\n        id=\"scoop-ssr\"\r\n        className=\"block-type-1 ssr-initial-split\"\r\n        style={{\r\n          position: 'relative',\r\n          width: '100%',\r\n          overflow: 'hidden',\r\n        }}\r\n      >\r\n        {/* LEFT / TOP container */}\r\n        <div\r\n          id=\"scoop-media-1-container\"\r\n          className=\"media-content-1\"\r\n          style={{ position: 'absolute' }}\r\n        >\r\n          {m1Medium && (\r\n            <PannableViewport sensitivity={2}>\r\n              <img\r\n                id=\"icecream-media-1\"\r\n                className=\"media-item-1 tooltip-ice-scoop\"\r\n                src={m1Medium}\r\n                {...(m1High ? { 'data-src-full': m1High } : {})}\r\n                alt={m1?.alt ?? 'Ice Cream Scoop media'}\r\n                draggable={false}\r\n                decoding=\"async\"\r\n                fetchPriority=\"high\"\r\n                style={{\r\n                  width: '100%',\r\n                  height: '100%',\r\n                  objectFit: 'cover',\r\n                  display: 'block',\r\n                }}\r\n              />\r\n            </PannableViewport>\r\n          )}\r\n        </div>\r\n\r\n        {/* SPLITTER mount point */}\r\n        <div id=\"scoop-enhancer-mount\" />\r\n\r\n        {/* RIGHT / BOTTOM container (video always) */}\r\n        <div\r\n          id=\"scoop-media-2-container\"\r\n          className=\"media-content-2\"\r\n          style={{ position: 'absolute' }}\r\n        >\r\n          {m2PosterMedium && (\r\n            <PannableViewport sensitivity={2}>\r\n              <video\r\n                id=\"icecream-media-2\"\r\n                className=\"media-item-2 tooltip-ice-scoop\"\r\n                poster={m2PosterMedium}\r\n                {...(m2PosterHigh ? { 'data-src-full': m2PosterHigh } : {})}\r\n                muted\r\n                playsInline\r\n                loop\r\n                preload=\"auto\"\r\n                style={{\r\n                  width: '100%',\r\n                  height: '100%',\r\n                  objectFit: 'cover',\r\n                  display: 'block',\r\n                }}\r\n              >\r\n                {m2?.video?.webmUrl && (\r\n                  <source src={m2.video.webmUrl} type=\"video/webm\" />\r\n                )}\r\n                {m2?.video?.mp4Url && (\r\n                  <source src={m2.video.mp4Url} type=\"video/mp4\" />\r\n                )}\r\n              </video>\r\n            </PannableViewport>\r\n          )}\r\n        </div>\r\n      </section>\r\n    );\r\n  },\r\n  criticalCssFiles: ['src/styles/block-type-1.css'],\r\n};\r\n","// src/ssr/registry.ts\r\nimport type { SsrRegistry } from './types';\r\nimport { scoopSSR }   from './projects/scoop.ssr';\r\nimport { rotarySSR }  from './projects/rotary.ssr';\r\nimport { datavizSSR } from './projects/dataviz.ssr';\r\nimport { dynamicSSR } from './projects/dynamic.ssr';\r\nimport { gameSSR } from './projects/game.ssr';\r\n\r\nexport const ssrRegistry: SsrRegistry = {\r\n  scoop:   scoopSSR,\r\n  rotary:  rotarySSR,\r\n  dataviz: datavizSSR,\r\n  dynamic: dynamicSSR,\r\n  game: gameSSR,\r\n};\r\n","// src/ssr/projects/rotary.ssr.tsx\r\nimport type { SsrDescriptor } from '../types';\r\nimport { getProjectData } from '../../utils/get-project-data';\r\nimport {\r\n  getMediumImageUrl,\r\n  getHighQualityImageUrl,\r\n} from '../../utils/media-providers/image-builder';\r\nimport PannableViewport from '../../utils/split+drag/pannable-object-position';\r\n\r\nexport const rotarySSR: SsrDescriptor = {\r\n  fetch: () => getProjectData('rotary-lamp'),\r\n  render: (data) => {\r\n    const m1 = data?.mediaOne || {};\r\n    const m2 = data?.mediaTwo || {};\r\n\r\n    // Build medium + high URLs safely\r\n    const m1Medium =\r\n      m1?.image ? getMediumImageUrl(m1.image) : (m1?.imageUrl as string | undefined);\r\n    const m1High =\r\n      m1?.image ? getHighQualityImageUrl(m1.image, 1920, 1080, 90) : (m1?.imageUrl as string | undefined);\r\n\r\n    const m2Medium =\r\n      m2?.image ? getMediumImageUrl(m2.image) : (m2?.imageUrl as string | undefined);\r\n    const m2High =\r\n      m2?.image ? getHighQualityImageUrl(m2.image, 1920, 1080, 90) : (m2?.imageUrl as string | undefined);\r\n\r\n    return (\r\n      <section\r\n        id=\"rotary-ssr\"\r\n        className=\"block-type-1 ssr-initial-split\"\r\n        style={{\r\n          position: 'relative',\r\n          width: '100%',\r\n          overflow: 'hidden',\r\n        }}\r\n      >\r\n        {/* LEFT / TOP container */}\r\n        <div id=\"rotary-media-1-container\" className=\"media-content-1\" style={{ position: 'absolute' }}>\r\n          {m1Medium && (\r\n            <PannableViewport sensitivity={2}>\r\n              <img\r\n                id=\"rotary-media-1\"\r\n                className=\"media-item-1 tooltip-rotary-lamp\"\r\n                src={m1Medium}\r\n                {...(m1High ? { 'data-src-full': m1High } : {})}\r\n                alt={m1?.alt ?? 'Rotary Lamp media'}\r\n                draggable={false}\r\n                decoding=\"async\"\r\n                fetchPriority=\"high\"\r\n                style={{ width: '100%', height: '100%', objectFit: 'cover', display: 'block' }}\r\n              />\r\n            </PannableViewport>\r\n          )}\r\n        </div>\r\n\r\n        {/* SPLITTER mount point */}\r\n        <div id=\"rotary-enhancer-mount\" />\r\n\r\n        {/* RIGHT / BOTTOM container */}\r\n        <div id=\"rotary-media-2-container\" className=\"media-content-2\" style={{ position: 'absolute' }}>\r\n          {m2Medium && (\r\n            <PannableViewport sensitivity={2}>\r\n              <img\r\n                id=\"rotary-media-2\"\r\n                className=\"media-item-2 tooltip-rotary-lamp\"\r\n                src={m2Medium}\r\n                {...(m2High ? { 'data-src-full': m2High } : {})}\r\n                alt={m2?.alt ?? 'Rotary Lamp media'}\r\n                draggable={false}\r\n                decoding=\"async\"\r\n                fetchPriority=\"high\"\r\n                style={{ width: '100%', height: '100%', objectFit: 'cover', display: 'block' }}\r\n              />\r\n            </PannableViewport>\r\n          )}\r\n        </div>\r\n      </section>\r\n    );\r\n  },\r\n  criticalCssFiles: ['src/styles/block-type-1.css'],\r\n};\r\n","// src/ssr/dataviz.ssr.tsx\r\nimport type { SsrDescriptor } from '../types';\r\nimport { getProjectData } from '../../utils/get-project-data';\r\nimport { getMediumImageUrl, getHighQualityImageUrl } from '../../utils/media-providers/image-builder';\r\nimport PannableViewport from '../../utils/split+drag/pannable-object-position';\r\n\r\nexport const datavizSSR: SsrDescriptor = {\r\n  fetch: () => getProjectData('data-viz'),\r\n  render: (data) => {\r\n    const m1 = data?.mediaOne || {};\r\n    const video = m1.video || {};\r\n\r\n    const posterMedium = video.poster ? getMediumImageUrl(video.poster) : undefined;\r\n    const posterHigh = video.poster\r\n      ? getHighQualityImageUrl(video.poster, 1920, 1080, 90)\r\n      : undefined;\r\n\r\n    return (\r\n      <section\r\n        id=\"dataviz-ssr\"\r\n        className=\"block-type-1\"\r\n        style={{\r\n          position: 'relative',\r\n          width: '100%',\r\n          overflow: 'hidden',\r\n        }}\r\n      >\r\n        <div\r\n          id=\"dataviz-media-container\"\r\n          className=\"media-content\"\r\n          style={{\r\n            position: 'absolute',\r\n            width: '100%',\r\n            height: '100%',\r\n          }}\r\n        >\r\n          {posterMedium && (\r\n            <PannableViewport sensitivity={2}>\r\n              <video\r\n                id=\"dataviz-media-video\"\r\n                className=\"tooltip-data-viz\"\r\n                poster={posterMedium}\r\n                {...(posterHigh ? { 'data-src-full': posterHigh } : {})}\r\n                muted\r\n                playsInline\r\n                loop\r\n                preload=\"auto\"\r\n                style={{\r\n                  width: '100%',\r\n                  height: '100%',\r\n                  objectFit: 'cover',\r\n                  objectPosition: '50% 50%', // ensures SSR/client match\r\n                  display: 'block',\r\n                }}\r\n              >\r\n                {video.webmUrl && <source src={video.webmUrl} type=\"video/webm\" />}\r\n                {video.mp4Url && <source src={video.mp4Url} type=\"video/mp4\" />}\r\n              </video>\r\n            </PannableViewport>\r\n          )}\r\n        </div>\r\n      </section>\r\n    );\r\n  },\r\n  criticalCssFiles: ['src/styles/block-type-1.css'],\r\n};\r\n","// src/ssr/projects/dynamic.ssr.tsx\r\nimport type { SsrDescriptor } from '../types';\r\nimport { getProjectData } from '../../utils/get-project-data';\r\n\r\ntype SvgDoc = { title?: string; file?: { asset?: { url?: string } } };\r\ntype SvgMap = Record<'laptop' | 'tablet' | 'phone', string | undefined>;\r\n\r\nexport const dynamicSSR: SsrDescriptor = {\r\n  fetch: async (): Promise<SvgMap> => {\r\n    const rows = (await getProjectData<SvgDoc[]>('dynamic-frame')) ?? [];\r\n    const byTitle = Object.fromEntries(\r\n      rows.map(r => [String(r.title || '').toLowerCase(), r.file?.asset?.url])\r\n    ) as Record<string, string | undefined>;\r\n\r\n    return {\r\n      laptop: byTitle['laptop'],\r\n      tablet: byTitle['tablet'],\r\n      phone : byTitle['phone'],\r\n    };\r\n  },\r\n\r\n  render: (svgMap: SvgMap) => {\r\n    const laptop = svgMap.laptop ?? undefined;\r\n    const tablet = svgMap.tablet ?? undefined;\r\n    const phone  = svgMap.phone  ?? undefined;\r\n    const fallback = laptop ?? tablet ?? phone;\r\n\r\n    return (\r\n      <section className=\"block-type-a\">\r\n        <div className=\"device-wrapper\">\r\n          {fallback && (\r\n            <picture>\r\n              {phone  ? <source media=\"(max-width: 767.98px)\" srcSet={phone} /> : null}\r\n              {tablet ? <source media=\"(min-width: 768px) and (max-width: 1025px)\" srcSet={tablet} /> : null}\r\n              <img\r\n                id=\"dynamic-device-frame\"\r\n                src={fallback}\r\n                alt=\"device\"\r\n                className=\"device-frame\"\r\n                decoding=\"async\"\r\n                loading=\"eager\"\r\n                draggable={false}\r\n              />\r\n            </picture>\r\n          )}\r\n          <div className=\"screen-overlay\" />\r\n        </div>\r\n      </section>\r\n    );\r\n  },\r\n\r\n  // Tell the server how to build preloads for the first project\r\n  buildPreloads: (svgMap: SvgMap) => {\r\n    const links: string[] = [];\r\n    const push = (u?: string) => { if (u) links.push(`<link rel=\"preload\" as=\"image\" href=\"${u}\">`); };\r\n    push(svgMap.phone);\r\n    push(svgMap.tablet);\r\n    push(svgMap.laptop);\r\n    return links;\r\n  },\r\n\r\n  criticalCssFiles: ['src/styles/block-type-a.css'],\r\n};\r\n","// src/ssr/projects/game.ssr.tsx\r\nimport type { SsrDescriptor } from '../types';\r\nimport { getProjectData } from '../../utils/get-project-data';\r\nimport {\r\n  getMediumImageUrl,\r\n  getHighQualityImageUrl,\r\n} from '../../utils/media-providers/image-builder';\r\n\r\ntype CoinDoc = { alt?: string; image?: any };\r\n\r\nexport const gameSSR: SsrDescriptor = {\r\n  fetch: async (): Promise<CoinDoc | null> =>\r\n    await getProjectData<CoinDoc>('rock-coin'),\r\n\r\n  render: (coin: CoinDoc | null) => {\r\n    const alt = coin?.alt ?? 'Loading';\r\n\r\n    // Build responsive URLs\r\n    const mediumUrl = coin?.image ? getMediumImageUrl(coin.image) : undefined;\r\n    const highUrl = coin?.image\r\n      ? getHighQualityImageUrl(coin.image, 512, 512, 80) // coin doesnt need 2k res\r\n      : undefined;\r\n\r\n    return (\r\n      <section\r\n        tabIndex={-1}\r\n        className=\"block-type-g\"\r\n        style={{ position: 'relative' }}\r\n        data-ssr-shell=\"block-game\"\r\n      >\r\n        {/* REQUIRED wrapper  enhancer portals into this and animates it away */}\r\n        <div\r\n          className=\"block-g-onboarding tooltip-block-g\"\r\n          aria-live=\"polite\"\r\n          style={{ display: 'flex', alignItems: 'center' }}\r\n        >\r\n          <div className=\"coin\" style={{ pointerEvents: 'none' }}>\r\n            {mediumUrl && (\r\n              <img\r\n                src={mediumUrl}\r\n                {...(highUrl ? { 'data-src-full': highUrl } : {})}\r\n                alt={alt}\r\n                decoding=\"async\"\r\n                loading=\"eager\"\r\n                draggable={false}\r\n                style={{\r\n                  display: 'block',\r\n                  width: '100%',\r\n                  height: '100%',\r\n                  objectFit: 'contain',\r\n                }}\r\n              />\r\n            )}\r\n          </div>\r\n\r\n          <h1 className=\"onboarding-text\" style={{ pointerEvents: 'none' }}>\r\n            Loading Game\r\n          </h1>\r\n        </div>\r\n\r\n        {/* REQUIRED: the enhancer will mount the stage/canvas here */}\r\n      </section>\r\n    );\r\n  },\r\n\r\n  buildPreloads: (coin: CoinDoc | null) =>\r\n    coin?.image ? [`<link rel=\"preload\" as=\"image\" href=\"${getMediumImageUrl(coin.image)}\">`] : [],\r\n\r\n  criticalCssFiles: ['src/styles/block-type-g.css'],\r\n};\r\n","// src/utils/context-providers/project-context.tsx\r\nimport React, {\r\n  createContext,\r\n  useState,\r\n  useContext,\r\n  useRef,\r\n  ReactNode,\r\n} from 'react';\r\n\r\ntype ViewportAlignArgs = {\r\n  /** Prefer one of these to identify the block to align */\r\n  id?: string;              // e.g. 'block-game'\r\n  key?: string;             // e.g. 'game' -> resolves to #block-game in your aligner\r\n  el?: HTMLElement | null;  // direct element if you have it\r\n  /** Re-verify/re-apply on next rAF (helps on mobile Safari) */\r\n  retry?: boolean;\r\n};\r\n\r\ninterface ProjectVisibilityContextType {\r\n  activeProject?: string;\r\n  setActiveProject: (title: string) => void;\r\n\r\n  blockGClick: boolean;\r\n  setBlockGClick: (clicked: boolean) => void;\r\n\r\n  currentIndex: number;\r\n  setCurrentIndex: React.Dispatch<React.SetStateAction<number>>;\r\n\r\n  scrollContainerRef: React.RefObject<HTMLDivElement>;\r\n\r\n  isDragging: boolean;\r\n  setIsDragging: React.Dispatch<React.SetStateAction<boolean>>;\r\n\r\n  focusedProjectKey: string | null;\r\n  setFocusedProjectKey: React.Dispatch<React.SetStateAction<string | null>>;\r\n\r\n  previousScrollY: number | null;\r\n  setPreviousScrollY: React.Dispatch<React.SetStateAction<number | null>>;\r\n\r\n  /** Ask ScrollController to instantly align a block to the top (no smooth, no bump) */\r\n  requestViewportAlign: (args: ViewportAlignArgs) => void;\r\n\r\n  /**\r\n   * Register the actual align function (implemented inside ScrollController).\r\n   * ScrollController should call this once on mount and clean up on unmount.\r\n   */\r\n  registerViewportAlign: (fn: (args: ViewportAlignArgs) => void) => void;\r\n}\r\n\r\ninterface ProjectVisibilityProviderProps {\r\n  children: ReactNode;\r\n}\r\n\r\nconst ProjectVisibilityContext = createContext<ProjectVisibilityContextType | undefined>(undefined);\r\n\r\nexport const ProjectVisibilityProvider = ({ children }: ProjectVisibilityProviderProps) => {\r\n  const [activeProject, setActiveProject] = useState<string | undefined>(undefined);\r\n  const [blockGClick, setBlockGClick] = useState(false);\r\n  const [currentIndex, setCurrentIndex] = useState(0);\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [focusedProjectKey, setFocusedProjectKey] = useState<string | null>(null);\r\n  const [previousScrollY, setPreviousScrollY] = useState<number | null>(null);\r\n\r\n  const scrollContainerRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  // The ScrollController will register its implementation here.\r\n  const alignFnRef = useRef<(args: ViewportAlignArgs) => void>(() => { /* no-op by default */ });\r\n\r\n  const requestViewportAlign = React.useCallback((args: ViewportAlignArgs) => {\r\n    alignFnRef.current?.(args);\r\n  }, []);\r\n\r\n  const registerViewportAlign = React.useCallback((fn: (args: ViewportAlignArgs) => void) => {\r\n    alignFnRef.current = fn || (() => {});\r\n  }, []);\r\n\r\n  return (\r\n    <ProjectVisibilityContext.Provider\r\n      value={{\r\n        activeProject,\r\n        setActiveProject,\r\n        blockGClick,\r\n        setBlockGClick,\r\n        currentIndex,\r\n        setCurrentIndex,\r\n        scrollContainerRef,\r\n        isDragging,\r\n        setIsDragging,\r\n        focusedProjectKey,\r\n        setFocusedProjectKey,\r\n        previousScrollY,\r\n        setPreviousScrollY,\r\n        requestViewportAlign,\r\n        registerViewportAlign,\r\n      }}\r\n    >\r\n      {children}\r\n    </ProjectVisibilityContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useProjectVisibility = () => {\r\n  const context = useContext(ProjectVisibilityContext);\r\n  if (!context) {\r\n    throw new Error('useProjectVisibility must be used within ProjectVisibilityProvider');\r\n  }\r\n  return context;\r\n};\r\n","// utils/sanity.ts\r\nimport {createClient} from '@sanity/client'\r\n\r\nconst client = createClient({\r\n  projectId: 'uyghamp6',\r\n  dataset: 'production',\r\n  apiVersion: '2023-01-01',\r\n  useCdn: true,\r\n})\r\n\r\nexport default client\r\n","// title-context.tsx\r\nimport React, { createContext, useContext, useState } from 'react';\r\n\r\nexport const TitleContext = createContext<{\r\n  activeTitle: string;\r\n  setActiveTitle: (t: string) => void;\r\n}>({ activeTitle: '', setActiveTitle: () => {} });\r\n\r\nexport const TitleProvider = ({ children }) => {\r\n  const [activeTitle, setActiveTitle] = useState('');\r\n  return (\r\n    <TitleContext.Provider value={{ activeTitle, setActiveTitle }}>\r\n      {children}\r\n    </TitleContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useActiveTitle = () => useContext(TitleContext);\r\n","// src/utils/seed/index.ts\r\n\r\n// --- PRNG (splitmix32) ---\r\nexport function splitmix32(seed: number) {\r\n  let a = seed >>> 0;\r\n  return function () {\r\n    a = (a + 0x9e3779b9) >>> 0;\r\n    let t = a ^ (a >>> 16);\r\n    t = Math.imul(t, 0x85ebca6b) >>> 0;\r\n    t ^= t >>> 13;\r\n    t = Math.imul(t, 0xc2b2ae35) >>> 0;\r\n    t ^= t >>> 16;\r\n    return (t >>> 0) / 4294967296;\r\n  };\r\n}\r\n\r\n// --- seed from string (FNV-1a-ish) ---\r\nexport function stringToSeed(s: string): number {\r\n  let h = 2166136261 >>> 0;\r\n  for (let i = 0; i < s.length; i++) {\r\n    h ^= s.charCodeAt(i);\r\n    h = Math.imul(h, 16777619);\r\n  }\r\n  return h >>> 0;\r\n}\r\n\r\n// --- deterministic FisherYates ---\r\nexport function seededShuffle<T>(arr: readonly T[], seed: number): T[] {\r\n  const rand = splitmix32(seed);\r\n  const a = arr.slice();\r\n  for (let i = a.length - 1; i > 0; i--) {\r\n    const j = Math.floor(rand() * (i + 1));\r\n    [a[i], a[j]] = [a[j], a[i]];\r\n  }\r\n  return a;\r\n}\r\n","import { useEffect, useRef } from 'react';\r\nimport { baseProjects } from '../content-utility/component-loader';\r\nimport { useActiveTitle } from './title-context';\r\nimport { useSsrData } from '../context-providers/ssr-data-context';\r\nimport { seededShuffle } from '../seed';\r\nimport { useProjectVisibility } from '../context-providers/project-context';\r\n\r\nconst TitleObserver = () => {\r\n  const { setActiveTitle } = useActiveTitle();\r\n  const { focusedProjectKey } = useProjectVisibility();\r\n  const { seed = 12345 } = useSsrData() || {};\r\n\r\n  // Stable order for this session\r\n  const projectsRef = useRef(seededShuffle(baseProjects, seed));\r\n  const lastTitleRef = useRef<string | null>(null);\r\n  const observerRef = useRef<IntersectionObserver | null>(null);\r\n  const moRef = useRef<MutationObserver | null>(null);\r\n\r\n  // Helper: pick the element whose center is closest to viewport center\r\n  const pickCenteredNow = () => {\r\n    // While focused, never mutate the title from visibility.\r\n    if (focusedProjectKey) return;\r\n\r\n    const vh = window.innerHeight || document.documentElement.clientHeight || 0;\r\n    const viewportCenter = vh * 0.5;\r\n\r\n    let bestTitle: string | null = null;\r\n    let bestDist = Infinity;\r\n\r\n    for (const p of projectsRef.current) {\r\n      const el = document.getElementById(`block-${p.key}`);\r\n      if (!el || el.style.display === 'none') continue;\r\n\r\n      const r = el.getBoundingClientRect();\r\n      if (r.bottom <= 0 || r.top >= vh) continue;\r\n\r\n      const center = r.top + r.height / 2;\r\n      const dist = Math.abs(center - viewportCenter);\r\n      if (dist < bestDist) {\r\n        bestDist = dist;\r\n        bestTitle = p.title;\r\n      }\r\n    }\r\n\r\n    if (bestTitle && bestTitle !== lastTitleRef.current) {\r\n      lastTitleRef.current = bestTitle;\r\n      setActiveTitle(bestTitle);\r\n    }\r\n  };\r\n\r\n  // Build observer once\r\n  useEffect(() => {\r\n    const io = new IntersectionObserver(\r\n      () => {\r\n        if (focusedProjectKey) return; // ignore while focused\r\n        requestAnimationFrame(pickCenteredNow);\r\n      },\r\n      { threshold: [0, 0.25, 0.5, 0.75, 1] }\r\n    );\r\n    observerRef.current = io;\r\n\r\n    // Observe all blocks that exist (will keep observing through display:none)\r\n    for (const p of projectsRef.current) {\r\n      const el = document.getElementById(`block-${p.key}`);\r\n      if (el) io.observe(el);\r\n    }\r\n\r\n    // Also react to late-mounted blocks\r\n    const mo = new MutationObserver(() => {\r\n      const cur = observerRef.current;\r\n      if (!cur) return;\r\n      for (const p of projectsRef.current) {\r\n        const el = document.getElementById(`block-${p.key}`);\r\n        if (el) cur.observe(el);\r\n      }\r\n    });\r\n    mo.observe(document.body, { childList: true, subtree: true });\r\n    moRef.current = mo;\r\n\r\n    // Initial pick\r\n    requestAnimationFrame(pickCenteredNow);\r\n\r\n    return () => {\r\n      io.disconnect();\r\n      mo.disconnect();\r\n      observerRef.current = null;\r\n      moRef.current = null;\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []); // once per mount\r\n\r\n  // NEW: Freeze title on focus & pause the observer; resume on unfocus\r\n  useEffect(() => {\r\n    const io = observerRef.current;\r\n\r\n    if (focusedProjectKey) {\r\n      // 1) Set title to the focused project's title exactly once on enter\r\n      const focused = projectsRef.current.find(p => p.key === focusedProjectKey);\r\n      if (focused && focused.title !== lastTitleRef.current) {\r\n        lastTitleRef.current = focused.title;\r\n        setActiveTitle(focused.title);\r\n      }\r\n      // 2) Pause the observer work during focus\r\n      io?.disconnect();\r\n    } else {\r\n      // Resubscribe and immediately pick based on visibility when leaving focus\r\n      if (io) {\r\n        for (const p of projectsRef.current) {\r\n          const el = document.getElementById(`block-${p.key}`);\r\n          if (el) io.observe(el);\r\n        }\r\n      }\r\n      requestAnimationFrame(pickCenteredNow);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [focusedProjectKey, setActiveTitle]);\r\n\r\n  return null;\r\n};\r\n\r\nexport default TitleObserver;\r\n","// src/utils/title/view-project-cta.tsx\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport lottie from '../../utils/load-lottie';\r\nimport arrowData from '../../svg/arrow.json';\r\nimport arrowData3 from '../../svg/arrow3.json';\r\nimport linkData from '../../svg/link.json';\r\n\r\n// Minimal shape for what we use from Lottie\r\ntype AnimationItemLike = {\r\n  goToAndStop: (value: number, isFrame?: boolean) => void;\r\n  playSegments: (segments: [number, number] | number[], forceFlag?: boolean) => void;\r\n  addEventListener: (name: string, cb: () => void) => void;\r\n  removeEventListener: (name: string, cb: () => void) => void;\r\n  destroy: () => void;\r\n};\r\n\r\ntype BaseProps = {\r\n  displayTitle: string;\r\n  isLink?: boolean;\r\n  currentKey?: string;\r\n  focusedProjectKey: string | null;\r\n  setFocusedProjectKey: (k: string | null) => void;\r\n  showBackground: boolean;\r\n  backgroundColor: string;\r\n  onHover: (v: boolean) => void;\r\n};\r\n\r\ntype Variant = 'title-icon' | 'icon-title';\r\n\r\n/* --------------------------\r\n   Hook: arrow/link animation\r\n   -------------------------- */\r\nfunction useArrowLottie(\r\n  displayTitle: string,\r\n  isLink: boolean | undefined,\r\n  isFocused: boolean,\r\n  container: React.RefObject<HTMLDivElement>\r\n) {\r\n  const animRef = useRef<AnimationItemLike | null>(null);\r\n  const lastTitleRef = useRef<string | null>(null);\r\n\r\n  // Mount: load + play once (recreate when lottie type changes)\r\n  useEffect(() => {\r\n    const el = container.current;\r\n    if (!el) return;\r\n\r\n    let mounted = true;\r\n\r\n    (async () => {\r\n      // keep link.json priority; otherwise use arrow3 when focused, else arrow\r\n      const animationData = isLink ? linkData : (isFocused ? arrowData3 : arrowData);\r\n\r\n      const anim = await lottie.loadAnimation({\r\n        container: el,\r\n        renderer: 'svg',\r\n        loop: false,\r\n        autoplay: false,\r\n        animationData,\r\n      });\r\n\r\n      if (!mounted) return;\r\n      animRef.current = anim;\r\n\r\n      // add CSS hook\r\n      const onDomLoaded = () => {\r\n        const svg = el.querySelector('svg');\r\n        if (svg) svg.classList.add('arrow-svg');\r\n      };\r\n      anim.addEventListener('DOMLoaded', onDomLoaded);\r\n\r\n      // Play initial [0  40]\r\n      anim.goToAndStop(0, true);\r\n      anim.playSegments([0, 40], true);\r\n\r\n      lastTitleRef.current = displayTitle;\r\n\r\n      return () => {\r\n        anim.removeEventListener('DOMLoaded', onDomLoaded);\r\n      };\r\n    })();\r\n\r\n    return () => {\r\n      mounted = false;\r\n      animRef.current?.destroy();\r\n      animRef.current = null;\r\n    };\r\n  }, [container, isLink, isFocused]);\r\n\r\n  // On title change: play [40  90]\r\n  useEffect(() => {\r\n    if (!animRef.current) return;\r\n    if (lastTitleRef.current !== displayTitle) {\r\n      animRef.current.goToAndStop(40, true);\r\n      animRef.current.playSegments([40, 90], true);\r\n      lastTitleRef.current = displayTitle;\r\n    }\r\n  }, [displayTitle]);\r\n}\r\n\r\n/* --------------------------\r\n   Base Project Button\r\n   -------------------------- */\r\nfunction BaseProjectButton({\r\n  displayTitle,\r\n  isLink,\r\n  currentKey,\r\n  focusedProjectKey,\r\n  setFocusedProjectKey,\r\n  showBackground,\r\n  backgroundColor,\r\n  onHover,\r\n  variant,\r\n}: BaseProps & { variant: Variant }) {\r\n  const arrowContainer = useRef<HTMLDivElement>(null);\r\n  const isFocused = focusedProjectKey === currentKey;\r\n\r\n  // short-lived class for styling the swipe/toggle moment\r\n  const [isSwiping, setIsSwiping] = useState(false);\r\n\r\n  // Lottie hook\r\n  useArrowLottie(displayTitle, isLink, isFocused, arrowContainer);\r\n\r\n  // IMPORTANT: when focus state or the rendered key changes, clear hover\r\n  useEffect(() => {\r\n    onHover(false);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [isFocused, currentKey]);\r\n\r\n  const handleToggleOpen = () => {\r\n    if (!currentKey) return;\r\n\r\n    // flip focus\r\n    const next = focusedProjectKey === currentKey ? null : currentKey;\r\n    setFocusedProjectKey(next);\r\n\r\n    // brief CSS hook\r\n    setIsSwiping(true);\r\n    const t = window.setTimeout(() => setIsSwiping(false), 900);\r\n\r\n    if (next) {\r\n      requestAnimationFrame(() => {\r\n        const el = document.getElementById(`block-${next}`);\r\n        el?.scrollIntoView({ block: 'start', behavior: 'smooth' });\r\n      });\r\n    }\r\n\r\n    return () => window.clearTimeout(t);\r\n  };\r\n\r\n  const Element: any = isLink ? 'a' : 'button';\r\n  const sharedProps = {\r\n    className: [\r\n      'view-project-btn',\r\n      !showBackground ? 'no-bg' : '',\r\n      isFocused ? 'is-focused' : '',\r\n      isSwiping ? 'is-swiping' : '',\r\n    ]\r\n      .filter(Boolean)\r\n      .join(' '),\r\n    onMouseEnter: () => onHover(true),\r\n    onMouseLeave: () => onHover(false),\r\n    'data-project-key': currentKey ?? undefined,\r\n    'aria-pressed': currentKey ? focusedProjectKey === currentKey : undefined,\r\n    ...(isLink\r\n      ? { href: '/dynamic-theme', target: '_blank', rel: 'noopener noreferrer' }\r\n      : { onClick: handleToggleOpen }),\r\n  };\r\n\r\n  const TitleEl = (\r\n    <h2 className=\"project-view\" style={{ position: 'relative', zIndex: 1 }}>\r\n      {displayTitle}\r\n    </h2>\r\n  );\r\n\r\n  const IconEl = (\r\n    <div\r\n      ref={arrowContainer}\r\n      className=\"view-project-arrow\"\r\n      style={{ position: 'relative', zIndex: 1 }}\r\n    />\r\n  );\r\n\r\n  return (\r\n    <Element {...sharedProps}>\r\n      <div\r\n        className={`view-project-background ${!showBackground ? 'no-bg' : ''}`}\r\n        style={{\r\n          backgroundColor,\r\n          position: 'absolute',\r\n          inset: 0,\r\n          borderRadius: 'inherit',\r\n          zIndex: 0,\r\n          pointerEvents: 'none', // ensure bg doesn't swallow hover\r\n        }}\r\n        aria-hidden=\"true\"\r\n      />\r\n      {variant === 'icon-title' ? (\r\n        <>\r\n          {IconEl}\r\n          {TitleEl}\r\n        </>\r\n      ) : (\r\n        <>\r\n          {TitleEl}\r\n          {IconEl}\r\n        </>\r\n      )}\r\n    </Element>\r\n  );\r\n}\r\n\r\n/* --------------------------\r\n   Public Variants\r\n   -------------------------- */\r\nexport function ProjectButtonTitleIcon(props: BaseProps) {\r\n  return <BaseProjectButton {...props} variant=\"title-icon\" />;\r\n}\r\n\r\nexport function ProjectButtonIconTitle(props: BaseProps) {\r\n  return <BaseProjectButton {...props} variant=\"icon-title\" />;\r\n}\r\n","// src/utils/title/view-project.tsx\r\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\r\n\r\nimport { useActiveTitle } from './title-context';\r\nimport { baseProjects } from '../content-utility/component-loader';\r\nimport { projectColors } from '../content-utility/color-map';\r\nimport { useSsrData } from '../context-providers/ssr-data-context';\r\nimport { seededShuffle } from '../seed';\r\n\r\nimport TitleObserver from './title-observer';\r\nimport { useProjectVisibility } from '../context-providers/project-context';\r\n\r\nimport {\r\n  ProjectButtonTitleIcon,\r\n  ProjectButtonIconTitle,\r\n} from './view-project-cta';\r\n\r\nconst ViewProject = () => {\r\n  const { activeTitle } = useActiveTitle();\r\n  const { seed = 12345 } = useSsrData() || {};\r\n  const projects = useMemo(() => seededShuffle(baseProjects, seed), [seed]);\r\n\r\n  const { focusedProjectKey, setFocusedProjectKey } = useProjectVisibility();\r\n\r\n  const focusedProject = useMemo(\r\n    () => projects.find(p => p.key === focusedProjectKey!),\r\n    [projects, focusedProjectKey]\r\n  );\r\n\r\n  // Freeze the title (and everything derived from it) when focused\r\n  const displayTitle = focusedProjectKey ? (focusedProject?.title ?? activeTitle) : activeTitle;\r\n\r\n  const currentProject = useMemo(\r\n    () => projects.find((p) => p.title === displayTitle),\r\n    [projects, displayTitle]\r\n  );\r\n  const isLink = currentProject?.isLink;\r\n  const currentKey = currentProject?.key;\r\n\r\n  // background / hover logic\r\n  const [hovered, _setHovered] = useState(false);\r\n  const hoveredRef = useRef(false);\r\n  const [showBackground, setShowBackground] = useState(true);\r\n  const hideTimeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null);\r\n\r\n  const clearHide = () => {\r\n    if (hideTimeoutRef.current) {\r\n      clearTimeout(hideTimeoutRef.current);\r\n      hideTimeoutRef.current = null;\r\n    }\r\n  };\r\n\r\n  // single place to schedule/clear hides respecting hover\r\n  const scheduleHide = (delay = 1500) => {\r\n    clearHide();\r\n    hideTimeoutRef.current = setTimeout(() => {\r\n      if (!hoveredRef.current) setShowBackground(false);\r\n    }, delay);\r\n  };\r\n\r\n  const setHovered = (v: boolean) => {\r\n    hoveredRef.current = v;\r\n    _setHovered(v);\r\n    if (v) {\r\n      clearHide();\r\n      setShowBackground(true);\r\n    } else {\r\n      scheduleHide(1500);\r\n    }\r\n  };\r\n\r\n  // RESET hover/background appropriately when focus toggles\r\n  useEffect(() => {\r\n    if (focusedProjectKey) {\r\n      // entering focus: make bg visible and don't auto-hide\r\n      clearHide();\r\n      setShowBackground(true);\r\n      hoveredRef.current = false;\r\n      _setHovered(false);\r\n    } else {\r\n      // leaving focus: briefly show, then allow auto-hide if not hovered\r\n      setShowBackground(true);\r\n      hoveredRef.current = false;\r\n      _setHovered(false);\r\n      scheduleHide(1500);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [focusedProjectKey]);\r\n\r\n  // on title change: flash bg on, then hide later ONLY if not hovered\r\n  const lastTitleRef = useRef(displayTitle);\r\n  useEffect(() => {\r\n    if (lastTitleRef.current !== displayTitle) {\r\n      lastTitleRef.current = displayTitle;\r\n      setShowBackground(true);\r\n      if (!hoveredRef.current && !focusedProjectKey) {\r\n        scheduleHide(1500);\r\n      }\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [displayTitle]);\r\n\r\n  // light bring it back when user interacts near bottom  but don't hide if hovered\r\n  useEffect(() => {\r\n    const handleMouseMove = (e: MouseEvent) => {\r\n      const viewportH = window.innerHeight || document.documentElement.clientHeight;\r\n      if (e.clientY >= viewportH * 0.65) {\r\n        setShowBackground(true);\r\n        if (!hoveredRef.current && !focusedProjectKey) scheduleHide(1500);\r\n      }\r\n    };\r\n    const handleTouch = () => {\r\n      setShowBackground(true);\r\n      if (!hoveredRef.current && !focusedProjectKey) scheduleHide(1500);\r\n    };\r\n\r\n    window.addEventListener('mousemove', handleMouseMove);\r\n    window.addEventListener('touchstart', handleTouch, { passive: true });\r\n    window.addEventListener('touchmove', handleTouch, { passive: true });\r\n\r\n    return () => {\r\n      window.removeEventListener('mousemove', handleMouseMove);\r\n      window.removeEventListener('touchstart', handleTouch);\r\n      window.removeEventListener('touchmove', handleTouch);\r\n      clearHide();\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  // compute background color (hovered = higher alpha)\r\n  const backgroundColor = useMemo(() => {\r\n    const colorInfo = projectColors[displayTitle];\r\n    if (!colorInfo) return 'rgba(240, 240, 240, 0.5)';\r\n    const alpha = hovered ? 1 : (colorInfo.defaultAlpha ?? 0.8);\r\n    return `rgba(${colorInfo.rgb}, ${alpha})`;\r\n  }, [displayTitle, hovered]);\r\n\r\n  // choose variant based on focus state\r\n  const ButtonComp = focusedProjectKey ? ProjectButtonIconTitle : ProjectButtonTitleIcon;\r\n\r\n  return (\r\n    <div className=\"view-project-wrapper\">\r\n      {/* Dont observe while focused, so title stays frozen */}\r\n      {!focusedProjectKey && <TitleObserver />}\r\n\r\n      <ButtonComp\r\n        displayTitle={displayTitle}\r\n        isLink={isLink}\r\n        currentKey={currentKey}\r\n        focusedProjectKey={focusedProjectKey}\r\n        setFocusedProjectKey={setFocusedProjectKey}\r\n        showBackground={showBackground}\r\n        backgroundColor={backgroundColor}\r\n        onHover={setHovered}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ViewProject;\r\n","// src/utils/content-utility/lazy-in-view.tsx\r\nimport { useEffect, useRef, useState, Suspense, type ComponentType } from 'react';\r\n\r\ntype Props = {\r\n  load?: () => Promise<{ default: ComponentType<any> }>;\r\n  fallback?: React.ReactNode;\r\n  serverRender?: React.ReactNode; // SSR-provided markup for first paint\r\n  eager?: boolean;                // start visible immediately (SSR and client)\r\n  allowIdle?: boolean;\r\n\r\n  // NEW\r\n  observeTargetId?: string;      // observe external element if provided\r\n  rootMargin?: string;           // IO margin\r\n  threshold?: number | number[]; // IO threshold(s)\r\n  placeholderMinHeight?: number;\r\n  debugLabel?: string;           // console tag\r\n};\r\n\r\nconst hasWindow = typeof window !== 'undefined';\r\nconst hasRIC = hasWindow && 'requestIdleCallback' in (window as any);\r\nconst hasCIC = hasWindow && 'cancelIdleCallback' in (window as any);\r\nconst ric = (cb: any, opts?: any) =>\r\n  hasRIC ? (window as any).requestIdleCallback(cb, opts) : setTimeout(cb, opts?.timeout ?? 0);\r\nconst cic = (id: any) =>\r\n  hasCIC ? (window as any).cancelIdleCallback(id) : clearTimeout(id);\r\n\r\nexport default function LazyInView({\r\n  load,\r\n  fallback = null,\r\n  serverRender,\r\n  eager = false,\r\n  allowIdle = false,\r\n\r\n  observeTargetId,\r\n  rootMargin = '0px',\r\n  threshold = 0.05,\r\n  placeholderMinHeight = 360,\r\n  debugLabel,\r\n}: Props) {\r\n  const isServer = !hasWindow;\r\n\r\n  // Make SSR and client's first render agree:\r\n  // If we SSR-ed content (serverRender) or set eager, start visible; otherwise start hidden.\r\n  const initialVisible = eager || !!serverRender;\r\n  const [isVisible, setIsVisible] = useState<boolean>(initialVisible);\r\n\r\n  const [Component, setComponent] = useState<ComponentType | null>(null);\r\n  const selfRef = useRef<HTMLDivElement | null>(null);\r\n  const idleId = useRef<any>(null);\r\n\r\n  // IntersectionObserver: flip visible when in view\r\n  useEffect(() => {\r\n    // If already visible (SSR or eager), nothing to observe.\r\n    if (isVisible) return;\r\n\r\n    const target =\r\n      (observeTargetId ? document.getElementById(observeTargetId) : null) ||\r\n      selfRef.current;\r\n\r\n    if (!target || typeof IntersectionObserver === 'undefined') {\r\n      setIsVisible(true);\r\n      return;\r\n    }\r\n\r\n    const io = new IntersectionObserver(([entry]) => {\r\n      const vis = !!entry.isIntersecting;\r\n      const ratio = entry.intersectionRatio ?? 0;\r\n      if (debugLabel) console.log(`[LazyInView:${debugLabel}] IO`, { ratio, vis });\r\n\r\n      if (vis) {\r\n        setIsVisible(true);\r\n        io.disconnect();\r\n        if (idleId.current) {\r\n          cic(idleId.current);\r\n          idleId.current = null;\r\n        }\r\n      }\r\n    }, { threshold, root: null, rootMargin });\r\n\r\n    io.observe(target);\r\n    return () => io.disconnect();\r\n  }, [isVisible, observeTargetId, rootMargin, threshold, debugLabel]);\r\n\r\n  // Idle preloading (optional): if still hidden and allowed, show after an idle slot\r\n  useEffect(() => {\r\n    if (isVisible || !allowIdle) return;\r\n    idleId.current = ric(() => setIsVisible(true), { timeout: 2000 });\r\n    return () => {\r\n      if (idleId.current) {\r\n        cic(idleId.current);\r\n        idleId.current = null;\r\n      }\r\n    };\r\n  }, [isVisible, allowIdle]);\r\n\r\n  // Load component when visible\r\n  useEffect(() => {\r\n    if (!isVisible || Component || !load) return;\r\n    let cancelled = false;\r\n    load().then((mod) => { if (!cancelled) setComponent(() => mod.default); });\r\n    return () => { cancelled = true; };\r\n  }, [isVisible, Component, load]);\r\n\r\n  const content = Component\r\n    ? <Suspense fallback={fallback}><Component /></Suspense>\r\n    : (serverRender ?? fallback);\r\n\r\n  return (\r\n    <div\r\n      ref={selfRef}\r\n      className={debugLabel ? `liv--${debugLabel}` : undefined}\r\n      style={{\r\n        width: '100%',\r\n        height: '100%',\r\n        minHeight: placeholderMinHeight,\r\n        position: 'relative',\r\n        //  First render matches SSR exactly via initialVisible\r\n        opacity: isVisible ? 1 : 0,\r\n        transition: 'opacity 220ms ease',\r\n      }}\r\n    >\r\n      {content}\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect, useRef, useState, type ComponentType } from 'react';\r\n\r\ntype Props = {\r\n  /** dynamic import that returns { default: ReactComponent } */\r\n  load: () => Promise<{ default: ComponentType<any> }>;\r\n  /** when true: mount immediately; when false: unmount (but keep chunk in memory) */\r\n  active: boolean;\r\n  /** optional loading UI while the chunk fetches */\r\n  fallback?: React.ReactNode;\r\n  /** pass arbitrary props to the loaded component */\r\n  componentProps?: Record<string, any>;\r\n  /** simple fade; 0 disables */\r\n  fadeMs?: number;\r\n};\r\n\r\nexport default function EventMount({\r\n  load,\r\n  active,\r\n  fallback = null,\r\n  componentProps,\r\n  fadeMs = 200,\r\n}: Props) {\r\n  const [Comp, setComp] = useState<ComponentType<any> | null>(null);\r\n  const [visible, setVisible] = useState(false);\r\n  const loadingRef = useRef<Promise<any> | null>(null);\r\n\r\n  // Load code-split chunk when first activated\r\n  useEffect(() => {\r\n    if (!active) { setVisible(false); return; }\r\n    if (!Comp) {\r\n      if (!loadingRef.current) loadingRef.current = load().then(mod => {\r\n        setComp(() => mod.default);\r\n      });\r\n    }\r\n    // show as soon as we have the component\r\n    let alive = true;\r\n    (async () => {\r\n      if (!Comp && loadingRef.current) await loadingRef.current;\r\n      if (alive) setVisible(true);\r\n    })();\r\n    return () => { alive = false; };\r\n  }, [active, load, Comp]);\r\n\r\n  if (!active) return null;               // unmount when not active\r\n  if (!Comp) return <>{fallback}</>;      // show fallback until chunk arrives\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        opacity: fadeMs ? (visible ? 1 : 0) : 1,\r\n        transition: fadeMs ? `opacity ${fadeMs}ms ease` : undefined,\r\n        willChange: fadeMs ? 'opacity' : undefined,\r\n      }}\r\n    >\r\n      <Comp {...(componentProps ?? {})} />\r\n    </div>\r\n  );\r\n}\r\n","// src/utils/project-pane.tsx\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport LazyInView from './content-utility/lazy-in-view';\r\nimport LazyViewMount from './content-utility/lazy-view-mount';\r\nimport LoadingScreen from './loading/loading';\r\nimport { useProjectLoader } from './content-utility/component-loader';\r\nimport { useProjectVisibility } from './context-providers/project-context';\r\nimport { useSsrData } from './context-providers/ssr-data-context';\r\nimport { ssrRegistry } from '../ssr/registry';\r\n\r\n/* event-driven details for case study section */\r\nimport EventMount from './content-utility/event-mount';\r\n\r\n// Map project keys to their detail component loaders\r\nconst caseStudyLoaders: Record<string, () => Promise<any>> = {\r\n  game: () => import('../components/case-studies/project-case-studies/rock-escapade'),\r\n  rotary: () => import('../components/case-studies/project-case-studies/rotary'),\r\n};\r\n\r\ntype Props = {\r\n  item: any;\r\n  isFocused: boolean;\r\n  setRef: (el: HTMLDivElement | null) => void;\r\n  isFirst?: boolean;\r\n  /** When true AND not focused, hide this pane completely (display:none) */\r\n  collapseBelow?: boolean;\r\n};\r\n\r\nexport function ProjectPane({\r\n  item,\r\n  isFocused,\r\n  setRef,\r\n  isFirst = false,\r\n  collapseBelow = false,\r\n}: Props) {\r\n  const { scrollContainerRef } = useProjectVisibility();\r\n  const load = useProjectLoader(item.key);\r\n  const ssr = useSsrData();\r\n  const payload = ssr?.preloaded?.[item.key];\r\n  const desc = ssrRegistry[item.key];\r\n  const hasSSR = Boolean(payload && desc?.render);\r\n\r\n  const [isHydrated, setIsHydrated] = useState(false);\r\n  useEffect(() => { setIsHydrated(true); }, []);\r\n\r\n  const serverRender =\r\n    payload && desc?.render ? desc.render((payload as any).data ?? payload) : null;\r\n\r\n  const isDynamic = item.key === 'dynamic';\r\n  const isGame = item.key === 'game';\r\n  const usesCustomLoader = isDynamic || isGame;\r\n\r\n  const fallbackNode =\r\n    !payload && isHydrated && !usesCustomLoader ? (\r\n      <LoadingScreen isFullScreen={false} />\r\n    ) : null;\r\n\r\n  const blockId = `block-${item.key}`;\r\n  const rootRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  // --- Collapsed state (must NOT short-circuit hooks) ---\r\n  const isCollapsed = collapseBelow && !isFocused;\r\n\r\n  // --- Delay unmount on unfocus ---\r\n  const EXIT_DELAY_MS = 100;\r\n  const FADE_MS = 100; // keep in sync with <EventMount fadeMs>\r\n  const [activeDelayed, setActiveDelayed] = useState<boolean>(isFocused);\r\n  const exitTimerRef = useRef<number | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (isCollapsed) return; // do nothing while collapsed\r\n    if (isFocused) {\r\n      if (exitTimerRef.current) {\r\n        clearTimeout(exitTimerRef.current);\r\n        exitTimerRef.current = null;\r\n      }\r\n      setActiveDelayed(true);\r\n    } else {\r\n      exitTimerRef.current = window.setTimeout(() => {\r\n        setActiveDelayed(false);\r\n        exitTimerRef.current = null;\r\n      }, EXIT_DELAY_MS);\r\n    }\r\n    return () => {\r\n      if (exitTimerRef.current) {\r\n        clearTimeout(exitTimerRef.current);\r\n        exitTimerRef.current = null;\r\n      }\r\n    };\r\n  }, [isFocused, isCollapsed]);\r\n\r\n  // --- Height reservation during exit fade to prevent layout jump ---\r\n  const [reserveH, setReserveH] = useState<number | null>(null);\r\n  const detailsHostRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (isCollapsed) return; // no reservation when collapsed\r\n    if (!isFocused) {\r\n      const rafId = requestAnimationFrame(() => {\r\n        const h = detailsHostRef.current?.getBoundingClientRect().height ?? 0;\r\n        if (h > 0) setReserveH(h);\r\n\r\n        const release = window.setTimeout(() => {\r\n          setReserveH(null);\r\n        }, EXIT_DELAY_MS + FADE_MS + 50);\r\n\r\n        const cleanup = () => clearTimeout(release);\r\n        (detailsHostRef as any)._cleanup = cleanup;\r\n      });\r\n\r\n      return () => {\r\n        cancelAnimationFrame(rafId);\r\n        (detailsHostRef as any)._cleanup?.();\r\n        (detailsHostRef as any)._cleanup = undefined;\r\n      };\r\n    } else {\r\n      setReserveH(null);\r\n    }\r\n  }, [isFocused, isCollapsed]);\r\n\r\n  // --- Local opacity control (per-pane observer) ---\r\n  useEffect(() => {\r\n    const el = rootRef.current;\r\n    if (!el) return;\r\n    if (isCollapsed) {\r\n      el.style.opacity = '1';\r\n      return;\r\n    }\r\n\r\n    if (isFocused || (!isFocused && activeDelayed)) {\r\n      el.style.opacity = '1';\r\n      return;\r\n    }\r\n\r\n    const isRealMobile = (() => {\r\n      const coarse = window.matchMedia?.('(pointer: coarse)').matches ?? false;\r\n      const touch = (navigator as any).maxTouchPoints > 0;\r\n      const vv = (window as any).visualViewport;\r\n      if (vv) {\r\n        const gap = window.innerHeight - vv.height;\r\n        return coarse && touch && (gap > 48);\r\n      }\r\n      return coarse && touch;\r\n    })();\r\n\r\n    const baseMin = isRealMobile ? 0.1 : 0.3;\r\n    const thresholds = Array.from({ length: 101 }, (_, i) => i / 100);\r\n\r\n    const io = new IntersectionObserver(\r\n      (entries) => {\r\n        for (const entry of entries) {\r\n          const ratio = entry.intersectionRatio ?? 0;\r\n          if (ratio >= 0.75) {\r\n            el.style.opacity = '1';\r\n          } else {\r\n            const mapped = baseMin + (ratio / 0.75) * (1 - baseMin);\r\n            el.style.opacity = String(mapped);\r\n          }\r\n        }\r\n      },\r\n      { threshold: thresholds, root: scrollContainerRef?.current ?? null }\r\n    );\r\n\r\n    io.observe(el);\r\n    el.style.opacity = '1';\r\n\r\n    return () => io.disconnect();\r\n  }, [isFocused, activeDelayed, scrollContainerRef, isCollapsed]);\r\n\r\n  return (\r\n    <div\r\n      id={blockId}\r\n      ref={(el) => { setRef(el); rootRef.current = el; }}\r\n      className={`project-pane ${isFocused ? 'is-focused' : ''} ${isGame ? 'is-game' : ''}`}\r\n      data-viewport-lock={isGame ? 'true' : undefined}\r\n      data-project-key={item.key}\r\n      style={{\r\n        display: isCollapsed ? 'none' : undefined,\r\n        scrollSnapAlign: 'start',\r\n        scrollSnapStop: 'always',\r\n        contentVisibility: 'auto' as any,\r\n        contain: 'layout paint style',\r\n        overflow: isFocused ? 'visible' : 'hidden',\r\n      }}\r\n    >\r\n      {/* Skip heavy children entirely when collapsed */}\r\n      {!isCollapsed && (\r\n        <>\r\n          <div className=\"project-pane-wrapper\">\r\n            {isDynamic ? (\r\n              <>\r\n                <LazyInView\r\n                  load={load}\r\n                  serverRender={serverRender}\r\n                  eager={isFirst}\r\n                  allowIdle\r\n                />\r\n                {!hasSSR && (\r\n                  <LazyViewMount\r\n                    load={() => import('../components/dynamic-app/shadow-entry')}\r\n                    mountMode=\"idle\"\r\n                    preloadOnIdle\r\n                    preloadIdleTimeout={2000}\r\n                    preloadOnFirstIO\r\n                    observeTargetId={blockId}\r\n                    rootMargin=\"0px\"\r\n                    placeholderMinHeight={0}\r\n                    componentProps={{ blockId }}\r\n                  />\r\n                )}\r\n              </>\r\n            ) : isGame ? (\r\n              <LazyInView\r\n                load={load}\r\n                serverRender={serverRender}\r\n                eager={isFirst}\r\n                allowIdle\r\n                observeTargetId={blockId}\r\n                placeholderMinHeight={0}\r\n              />\r\n            ) : (\r\n              <LazyInView\r\n                load={load}\r\n                fallback={fallbackNode}\r\n                serverRender={serverRender}\r\n                eager={isFirst}\r\n                allowIdle={false}\r\n                placeholderMinHeight={0}\r\n              />\r\n            )}\r\n          </div>\r\n\r\n          {/* details host: force visible during fade + freeze height to avoid jank */}\r\n          <div\r\n            ref={detailsHostRef}\r\n            style={{\r\n              height: reserveH != null ? `${reserveH}px` : undefined,\r\n              contentVisibility: activeDelayed ? ('visible' as any) : undefined,\r\n              contain: 'paint',\r\n            }}\r\n          >\r\n            {caseStudyLoaders[item.key] && (\r\n              <EventMount\r\n                load={caseStudyLoaders[item.key]}\r\n                active={activeDelayed}\r\n                fallback={<div style={{ height: '100dvh' }} />}\r\n                componentProps={{ title: item.title ?? item.key }}\r\n                fadeMs={FADE_MS}\r\n              />\r\n            )}\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","// src/utils/scroll-controller.tsx\r\nimport { useEffect, useRef, useState, useMemo } from 'react';\r\nimport { useProjectVisibility } from './context-providers/project-context';\r\nimport { baseProjects } from './content-utility/component-loader';\r\nimport { ProjectPane } from './project-pane';\r\nimport { useSsrData } from './context-providers/ssr-data-context';\r\nimport { seededShuffle } from './seed';\r\n\r\n/* ===========================\r\n   Synthetic Drag & Exit Events\r\n   =========================== */\r\ndeclare global {\r\n  interface DocumentEventMap {\r\n    'synthetic-drag': CustomEvent<{\r\n      phase: 'start' | 'move' | 'end';\r\n      direction: 'up' | 'down';\r\n      magnitude: number;     // px intention applied to the OUTER scroller\r\n      velocity?: number;     // px/ms (optional)\r\n      source: 'touch' | 'wheel';\r\n      ts: number;            // performance.now()\r\n    }>;\r\n    'focus-exit-start': CustomEvent<{ key: string }>;\r\n    'focus-exit-unlock': CustomEvent<{ key: string }>;\r\n  }\r\n}\r\n\r\nconst ScrollController = () => {\r\n  const { scrollContainerRef, focusedProjectKey, currentIndex, setFocusedProjectKey } =\r\n    useProjectVisibility();\r\n  const { seed = 12345 } = useSsrData() || {};\r\n\r\n  // Shuffle once on mount; never recompute order during this session\r\n  const projectsRef = useRef(seededShuffle(baseProjects, seed));\r\n  const projects = projectsRef.current;\r\n\r\n  // Keep DOM refs to each block for precise scrolling\r\n  const projectRefs = useRef<Record<string, HTMLDivElement | null>>({});\r\n\r\n  // Track last outer scrollTop and direction while focused\r\n  const lastScrollTopRef = useRef<number>(0);\r\n  const lastScrollDirRef = useRef<'up' | 'down'>('down');\r\n\r\n  // ---- Tunables ----\r\n  const VIS_RATIO_TO_EXIT = 0.2;     // 20% of any OTHER pane => auto-unfocus\r\n  const VIS_DWELL_MS      = 120;     // must remain candidate for this long\r\n  const MIN_LINGER_MS     = 200;     // shorter: require at least this much time before unlock\r\n  const SNAP_RAMP_MS      = 300;     // proximity ramp\r\n  const KB_FALLBACK_MS    = 900;     // snap re-enable fallback\r\n  const UNLOCK_FALLBACK_MS= 1100;    // unlock fallback if scroll events dont fire\r\n\r\n  // Track the last non-null focused key so we can anchor (fallback) on exit\r\n  const lastFocusedKeyRef = useRef<string | null>(null);\r\n  useEffect(() => {\r\n    if (focusedProjectKey) lastFocusedKeyRef.current = focusedProjectKey;\r\n  }, [focusedProjectKey]);\r\n\r\n  // Preferred exit target (set when user scrolls away during focus)\r\n  const exitTargetKeyRef = useRef<string | null>(null);\r\n\r\n  // Helper: element's offsetTop within a custom scroller\r\n  const getOffsetTopWithin = (el: HTMLElement, scroller: HTMLElement | any) => {\r\n    const r1 = el.getBoundingClientRect();\r\n    const r2 = (scroller as HTMLElement).getBoundingClientRect?.() ?? { top: 0 };\r\n    const st = ('scrollTop' in scroller ? scroller.scrollTop : document.documentElement.scrollTop) || 0;\r\n    return r1.top - r2.top + st;\r\n  };\r\n\r\n  // Temporarily disable snap after index changes, to allow smooth momentum handoff\r\n  // Only do this while focused; when NOT focused we want strong snap.\r\n  useEffect(() => {\r\n    const container = scrollContainerRef.current;\r\n    if (!container) return;\r\n    if (!focusedProjectKey) return; // keep snap strong outside focus\r\n    container.classList.add('no-snap');\r\n    const timeout = setTimeout(() => container.classList.remove('no-snap'), 800);\r\n    return () => clearTimeout(timeout);\r\n  }, [currentIndex, focusedProjectKey, scrollContainerRef]);\r\n\r\n  /* ===========================\r\n     Focus entry scroll choreography\r\n     - On entering focus: align the focused block, then bump ~90dvh\r\n     =========================== */\r\n  useEffect(() => {\r\n    if (!focusedProjectKey) return;\r\n\r\n    const scroller = scrollContainerRef.current ?? (document.scrollingElement as any);\r\n    if (!scroller) return;\r\n\r\n    const targetEl =\r\n      projectRefs.current[focusedProjectKey] ??\r\n      (document.getElementById(`block-${focusedProjectKey}`) as HTMLDivElement | null);\r\n\r\n    const getViewportH = () =>\r\n      (scroller?.clientHeight as number) ||\r\n      (scroller?.getBoundingClientRect?.().height as number) ||\r\n      (window.visualViewport?.height ?? window.innerHeight ?? document.documentElement.clientHeight ?? 0);\r\n\r\n    requestAnimationFrame(() => {\r\n      if (targetEl?.scrollIntoView) {\r\n        targetEl.scrollIntoView({ block: 'start', behavior: 'smooth' });\r\n      }\r\n      const bump = Math.round(getViewportH() * 0.9);\r\n      requestAnimationFrame(() => {\r\n        requestAnimationFrame(() => {\r\n          scroller.scrollBy?.({ top: bump, left: 0, behavior: 'smooth' });\r\n        });\r\n      });\r\n    });\r\n  }, [focusedProjectKey, scrollContainerRef]);\r\n\r\n  // --------------------------\r\n  // Scrolling helpers\r\n  // --------------------------\r\n  const setScrollTop = (scroller: any, top: number) => {\r\n    if ('scrollTop' in scroller) {\r\n      scroller.scrollTop = top;\r\n    } else {\r\n      scroller.scrollTo?.({ top, left: 0, behavior: 'auto' });\r\n    }\r\n  };\r\n\r\n  // Kill inertia, then instantly place (used for re-anchors after layout changes)\r\n  const hardPlaceAtKey = (key: string) => {\r\n    const scroller = scrollContainerRef.current ?? (document.scrollingElement as any);\r\n    if (!scroller) return;\r\n    const el =\r\n      projectRefs.current[key] ??\r\n      (document.getElementById(`block-${key}`) as HTMLDivElement | null);\r\n    if (!el) return;\r\n\r\n    const targetTop = getOffsetTopWithin(el, scroller);\r\n\r\n    const prevBehavior = (scroller as HTMLElement).style.scrollBehavior;\r\n    const prevOverflow = (scroller as HTMLElement).style.overflowY;\r\n\r\n    (scroller as HTMLElement).style.scrollBehavior = 'auto';\r\n    (scroller as HTMLElement).style.overflowY = 'hidden';\r\n    // @ts-ignore force sync\r\n    void scroller.offsetHeight;\r\n\r\n    setScrollTop(scroller, targetTop);\r\n\r\n    // @ts-ignore force sync\r\n    void scroller.offsetHeight;\r\n\r\n    (scroller as HTMLElement).style.overflowY = prevOverflow || 'scroll';\r\n    (scroller as HTMLElement).style.scrollBehavior = prevBehavior || '';\r\n\r\n    lastScrollTopRef.current = scroller.scrollTop || 0;\r\n  };\r\n\r\n  // Kill inertia, then tween to a key over ~260ms ease-out (nice transition)\r\n  const animatePlaceToKey = (key: string, ms = 260) => {\r\n    const scroller = scrollContainerRef.current ?? (document.scrollingElement as any);\r\n    if (!scroller) return;\r\n\r\n    const el =\r\n      projectRefs.current[key] ??\r\n      (document.getElementById(`block-${key}`) as HTMLDivElement | null);\r\n    if (!el) return;\r\n\r\n    const targetTop = getOffsetTopWithin(el, scroller);\r\n    const startTop = scroller.scrollTop || 0;\r\n    const delta = targetTop - startTop;\r\n    if (Math.abs(delta) < 1) {\r\n      hardPlaceAtKey(key);\r\n      return;\r\n    }\r\n\r\n    const reduce =\r\n      typeof window !== 'undefined' &&\r\n      (window.matchMedia?.('(prefers-reduced-motion: reduce)').matches ?? false);\r\n\r\n    const duration = reduce ? 80 : ms;\r\n    const start = performance.now();\r\n\r\n    const prevBehavior = (scroller as HTMLElement).style.scrollBehavior;\r\n    const prevOverflow = (scroller as HTMLElement).style.overflowY;\r\n    (scroller as HTMLElement).style.scrollBehavior = 'auto';\r\n    (scroller as HTMLElement).style.overflowY = 'hidden';\r\n\r\n    // cubic ease-out\r\n    const easeOutCubic = (t: number) => 1 - Math.pow(1 - t, 3);\r\n\r\n    let raf = 0;\r\n    const step = (now: number) => {\r\n      const t = Math.min(1, (now - start) / duration);\r\n      const y = startTop + delta * easeOutCubic(t);\r\n      setScrollTop(scroller, y);\r\n      if (t < 1) {\r\n        raf = requestAnimationFrame(step);\r\n      } else {\r\n        // restore\r\n        (scroller as HTMLElement).style.overflowY = prevOverflow || 'scroll';\r\n        (scroller as HTMLElement).style.scrollBehavior = prevBehavior || '';\r\n        lastScrollTopRef.current = scroller.scrollTop || 0;\r\n      }\r\n    };\r\n\r\n    // start\r\n    // @ts-ignore\r\n    void scroller.offsetHeight;\r\n    raf = requestAnimationFrame(step);\r\n    return () => {\r\n      if (raf) cancelAnimationFrame(raf);\r\n      // Always restore styles if cancelled mid-flight\r\n      (scroller as HTMLElement).style.overflowY = 'scroll';\r\n      (scroller as HTMLElement).style.scrollBehavior = '';\r\n    };\r\n  };\r\n\r\n  /* ===========================\r\n     AUTO-UNFOCUS while focused\r\n     =========================== */\r\n  useEffect(() => {\r\n    const scroller = scrollContainerRef.current ?? (document.scrollingElement as any);\r\n    if (!focusedProjectKey || !scroller) return;\r\n\r\n    let raf = 0;\r\n    let dwellTimer: number | null = null;\r\n    let pendingKey: string | null = null;\r\n\r\n    const getViewportH = () =>\r\n      (scroller?.clientHeight as number) ||\r\n      (scroller?.getBoundingClientRect?.().height as number) ||\r\n      (window.visualViewport?.height ?? window.innerHeight ?? document.documentElement.clientHeight ?? 0);\r\n\r\n    const focusedIdx = projects.findIndex(p => p.key === focusedProjectKey);\r\n    const clampAdjacentKey = (dir: 'up' | 'down') => {\r\n      if (focusedIdx < 0) return null;\r\n      const nextIdx = dir === 'down' ? Math.min(focusedIdx + 1, projects.length - 1)\r\n                                     : Math.max(focusedIdx - 1, 0);\r\n      if (nextIdx === focusedIdx) return null;\r\n      return projects[nextIdx].key;\r\n    };\r\n\r\n    const pickCandidate = () => {\r\n      const vh = getViewportH();\r\n      const viewportCenter = vh * 0.5;\r\n\r\n      let bestKey: string | null = null;\r\n      let bestDist = Infinity;\r\n\r\n      for (const p of projects) {\r\n        if (p.key === focusedProjectKey) continue;\r\n        const el = document.getElementById(`block-${p.key}`) as HTMLElement | null;\r\n        if (!el) continue;\r\n\r\n        const r = el.getBoundingClientRect();\r\n        if (r.bottom <= 0 || r.top >= vh) continue;\r\n\r\n        const visible = Math.min(r.bottom, vh) - Math.max(r.top, 0);\r\n        const ratio = Math.max(0, visible) / Math.max(1, r.height);\r\n        if (ratio < VIS_RATIO_TO_EXIT) continue;\r\n\r\n        const center = r.top + r.height / 2;\r\n        const dist = Math.abs(center - viewportCenter);\r\n        if (dist < bestDist) {\r\n          bestDist = dist;\r\n          bestKey = p.key;\r\n        }\r\n      }\r\n      return bestKey;\r\n    };\r\n\r\n    const onTick = () => {\r\n      raf = 0;\r\n      const curr = scroller.scrollTop || 0;\r\n      const dir: 'up' | 'down' = curr < lastScrollTopRef.current ? 'up'\r\n                            : curr > lastScrollTopRef.current ? 'down'\r\n                            : lastScrollDirRef.current;\r\n      lastScrollDirRef.current = dir;\r\n      lastScrollTopRef.current = curr;\r\n\r\n      const anyVisibleOther = Boolean(pickCandidate());\r\n      if (anyVisibleOther) {\r\n        const neighbor = clampAdjacentKey(dir) ?? pickCandidate();\r\n        if (neighbor && pendingKey !== neighbor) {\r\n          pendingKey = neighbor;\r\n          if (dwellTimer) window.clearTimeout(dwellTimer);\r\n          dwellTimer = window.setTimeout(() => {\r\n            exitTargetKeyRef.current = neighbor; // lock to adjacent pane\r\n            setFocusedProjectKey(null);          // triggers robust exit\r\n          }, VIS_DWELL_MS);\r\n        }\r\n      } else {\r\n        pendingKey = null;\r\n        if (dwellTimer) {\r\n          window.clearTimeout(dwellTimer);\r\n          dwellTimer = null;\r\n        }\r\n      }\r\n    };\r\n\r\n    const onScroll = () => { if (!raf) raf = requestAnimationFrame(onTick); };\r\n\r\n    scroller.addEventListener('scroll', onScroll, { passive: true });\r\n    onScroll(); // prime once\r\n\r\n    return () => {\r\n      scroller.removeEventListener('scroll', onScroll as any);\r\n      if (raf) cancelAnimationFrame(raf);\r\n      if (dwellTimer) window.clearTimeout(dwellTimer);\r\n    };\r\n  }, [focusedProjectKey, projects, scrollContainerRef, setFocusedProjectKey]);\r\n\r\n  /* ===========================\r\n     Focus EXIT choreography (now user-cancelable)\r\n     =========================== */\r\n  const exitOrchRef = useRef<{\r\n    cancelTween?: () => void;\r\n    timers: number[];\r\n    inputAttached: boolean;\r\n  }>({ timers: [], inputAttached: false });\r\n\r\n  useEffect(() => {\r\n    const container = scrollContainerRef.current;\r\n    if (!container) return;\r\n\r\n    // Only act when we EXIT focus (focusedProjectKey === null)\r\n    if (focusedProjectKey) return;\r\n\r\n    const preferredKey = exitTargetKeyRef.current || lastFocusedKeyRef.current;\r\n    if (!preferredKey) return;\r\n\r\n    const scroller = scrollContainerRef.current ?? (document.scrollingElement as any);\r\n    const state = exitOrchRef.current;\r\n\r\n    // prevent native snap fighting during handoff\r\n    container.classList.add('no-snap');\r\n\r\n    // helper: cleanup everything\r\n    const cleanup = () => {\r\n      state.cancelTween?.();\r\n      state.cancelTween = undefined;\r\n      state.timers.forEach(t => clearTimeout(t));\r\n      state.timers = [];\r\n      if (state.inputAttached) {\r\n        detachInputCancels();\r\n      }\r\n      container.classList.remove('no-snap');\r\n      container.classList.remove('snap-proximity');\r\n    };\r\n\r\n    // tell panes which key is exiting (for listeners)\r\n    document.dispatchEvent(new CustomEvent('focus-exit-start', { detail: { key: preferredKey } }));\r\n\r\n    // 1) Tween to the intended neighbor after killing inertia\r\n    state.cancelTween = animatePlaceToKey(preferredKey, 240);\r\n\r\n    // 1a) If the user interacts, cancel choreography immediately\r\n    const INTERACTION_EVENTS: Array<keyof DocumentEventMap | 'mousedown'> =\r\n      ['wheel', 'touchstart', 'keydown', 'mousedown', 'synthetic-drag'];\r\n    const onUserCancel = () => {\r\n      // cancel everything and re-enable input/snap right away\r\n      cleanup();\r\n      // small snap proximity to let native snap settle, then fully restore\r\n      container.classList.add('snap-proximity');\r\n      const t = window.setTimeout(() => container.classList.remove('snap-proximity'), SNAP_RAMP_MS);\r\n      state.timers.push(t);\r\n    };\r\n\r\n    const attachInputCancels = () => {\r\n      if (state.inputAttached) return;\r\n      state.inputAttached = true;\r\n      for (const ev of INTERACTION_EVENTS) {\r\n        // @ts-ignore\r\n        document.addEventListener(ev, onUserCancel, { passive: true });\r\n      }\r\n    };\r\n    const detachInputCancels = () => {\r\n      state.inputAttached = false;\r\n      for (const ev of INTERACTION_EVENTS) {\r\n        // @ts-ignore\r\n        document.removeEventListener(ev, onUserCancel as any);\r\n      }\r\n    };\r\n    attachInputCancels();\r\n\r\n    // 2) Re-anchor once the old focused block actually shrinks (details unmount)\r\n    const oldKey = lastFocusedKeyRef.current;\r\n    const oldEl = oldKey\r\n      ? (projectRefs.current[oldKey] ??\r\n         (document.getElementById(`block-${oldKey}`) as HTMLDivElement | null))\r\n      : null;\r\n\r\n    let ro: ResizeObserver | null = null;\r\n    if (oldEl && typeof ResizeObserver !== 'undefined') {\r\n      let prevH = oldEl.offsetHeight || 0;\r\n      ro = new ResizeObserver(() => {\r\n        const h = oldEl.offsetHeight || 0;\r\n        if (h < prevH - 8) {\r\n          hardPlaceAtKey(preferredKey);\r\n          ro?.disconnect();\r\n          ro = null;\r\n        }\r\n        prevH = h;\r\n      });\r\n      ro.observe(oldEl);\r\n    }\r\n\r\n    // 3) Small dwell, then unlock + gently re-enable snapping (proximity ramp)\r\n    const unlockTimer = window.setTimeout(() => {\r\n      document.dispatchEvent(new CustomEvent('focus-exit-unlock', { detail: { key: preferredKey } }));\r\n\r\n      requestAnimationFrame(() => {\r\n        container.classList.add('snap-proximity');\r\n        container.classList.remove('no-snap');\r\n        const ramp = window.setTimeout(() => container.classList.remove('snap-proximity'), SNAP_RAMP_MS);\r\n        state.timers.push(ramp);\r\n      });\r\n\r\n      // Clear the used target\r\n      exitTargetKeyRef.current = null;\r\n      detachInputCancels();\r\n    }, MIN_LINGER_MS);\r\n    state.timers.push(unlockTimer);\r\n\r\n    // Fallback re-anchor and final cleanup\r\n    const postAnchor = window.setTimeout(() => hardPlaceAtKey(preferredKey), 600);\r\n    const kbFallback = window.setTimeout(() => container.classList.remove('no-snap'), KB_FALLBACK_MS);\r\n    const unlockFallback = window.setTimeout(() => {\r\n      document.dispatchEvent(new CustomEvent('focus-exit-unlock', { detail: { key: preferredKey } }));\r\n      container.classList.add('snap-proximity');\r\n      const ramp = window.setTimeout(() => container.classList.remove('snap-proximity'), SNAP_RAMP_MS);\r\n      state.timers.push(ramp);\r\n      detachInputCancels();\r\n    }, UNLOCK_FALLBACK_MS);\r\n    state.timers.push(postAnchor, kbFallback, unlockFallback);\r\n\r\n    return () => {\r\n      ro?.disconnect();\r\n      cleanup();\r\n    };\r\n  }, [focusedProjectKey, scrollContainerRef]);\r\n\r\n  /* ===========================\r\n     Edge signalling only (no cancel, no programmatic scroll)\r\n     =========================== */\r\n  useEffect(() => {\r\n    const scrollContainer = scrollContainerRef.current;\r\n    if (!scrollContainer) return;\r\n\r\n    let attachedEl: HTMLElement | null = null;\r\n\r\n    const atTop = (el: HTMLElement) => el.scrollTop <= 0;\r\n    const atBottom = (el: HTMLElement) => {\r\n      const EPS = Math.max(8, Math.ceil((window.devicePixelRatio || 1) * 12));\r\n      const max = (el.scrollHeight - el.clientHeight);\r\n      return (max - el.scrollTop) <= EPS;\r\n    };\r\n\r\n    const fireSyntheticDrag = (\r\n      phase: 'start' | 'move' | 'end',\r\n      direction: 'up' | 'down',\r\n      magnitude: number,\r\n      source: 'touch' | 'wheel',\r\n      velocity?: number\r\n    ) => {\r\n      const evt = new CustomEvent('synthetic-drag', {\r\n        detail: { phase, direction, magnitude, velocity, source, ts: performance.now() },\r\n        bubbles: true,\r\n        composed: true,\r\n      });\r\n      scrollContainer.dispatchEvent(evt);\r\n    };\r\n\r\n    let lastY = 0;\r\n    let lastTs = 0;\r\n\r\n    const handleTouchStart = (e: TouchEvent) => {\r\n      if (!attachedEl) return;\r\n      if (e.touches.length === 1) {\r\n        lastY = e.touches[0].clientY;\r\n        lastTs = performance.now();\r\n        fireSyntheticDrag('start', 'down', 0, 'touch');\r\n      }\r\n    };\r\n\r\n    const handleTouchMove = (e: TouchEvent) => {\r\n      if (!attachedEl) return;\r\n      if (e.touches.length !== 1) return;\r\n      const y = e.touches[0].clientY;\r\n      const dy = y - lastY; // >0 down, <0 up\r\n      const now = performance.now();\r\n      const dt = Math.max(1, now - lastTs);\r\n      const velocity = Math.abs(dy) / dt;\r\n      lastY = y;\r\n      lastTs = now;\r\n\r\n      if ((dy > 0 && atTop(attachedEl)) || (dy < 0 && atBottom(attachedEl))) {\r\n        fireSyntheticDrag('move', dy < 0 ? 'down' : 'up', Math.min(600, Math.abs(dy)), 'touch', velocity);\r\n      }\r\n    };\r\n\r\n    const handleTouchEnd = () => {\r\n      fireSyntheticDrag('end', 'down', 0, 'touch');\r\n    };\r\n\r\n    const handleWheel = (e: WheelEvent) => {\r\n      if (!attachedEl) return;\r\n      const { deltaY } = e;\r\n      const top = atTop(attachedEl);\r\n      const bottom = atBottom(attachedEl);\r\n      if ((deltaY < 0 && top) || (deltaY > 0 && bottom)) {\r\n        fireSyntheticDrag('move', deltaY > 0 ? 'down' : 'up', Math.min(600, Math.abs(deltaY)), 'wheel');\r\n      }\r\n    };\r\n\r\n    const cleanupFrom = (el: HTMLElement | null) => {\r\n      if (!el) return;\r\n      el.removeEventListener('touchstart', handleTouchStart as any);\r\n      el.removeEventListener('touchmove', handleTouchMove as any);\r\n      el.removeEventListener('touchend', handleTouchEnd as any);\r\n      el.removeEventListener('wheel', handleWheel as any);\r\n    };\r\n\r\n    const maybeAttach = () => {\r\n      const el = document.querySelector('.embedded-app') as HTMLElement | null;\r\n      if (!el || el === attachedEl) return;\r\n      cleanupFrom(attachedEl);\r\n      attachedEl = el;\r\n      attachedEl.addEventListener('touchstart', handleTouchStart, { passive: true });\r\n      attachedEl.addEventListener('touchmove', handleTouchMove, { passive: true });\r\n      attachedEl.addEventListener('touchend', handleTouchEnd, { passive: true });\r\n      attachedEl.addEventListener('wheel', handleWheel, { passive: true });\r\n    };\r\n\r\n    const mo = new MutationObserver(maybeAttach);\r\n    mo.observe(document.body, { childList: true, subtree: true });\r\n    maybeAttach();\r\n\r\n    return () => {\r\n      mo.disconnect();\r\n      cleanupFrom(attachedEl);\r\n      attachedEl = null;\r\n    };\r\n  }, [scrollContainerRef, focusedProjectKey]);\r\n\r\n  const blockIds = useMemo(() => projects.map(p => `#block-${p.key}`), [projects]);\r\n\r\n  // Example consumer  left in place to react to synthetic-drag if you want\r\n  useEffect(() => {\r\n    const el = scrollContainerRef.current;\r\n    if (!el) return;\r\n    const onSynthetic = (_e: Event) => {};\r\n    el.addEventListener('synthetic-drag', onSynthetic as EventListener);\r\n    return () => el.removeEventListener('synthetic-drag', onSynthetic as EventListener);\r\n  }, [scrollContainerRef]);\r\n\r\n  // Compute once per render: which index is focused?\r\n  const focusedIdx = focusedProjectKey\r\n    ? projects.findIndex(p => p.key === focusedProjectKey)\r\n    : -1;\r\n\r\n  return (\r\n    <div\r\n      ref={scrollContainerRef}\r\n      className=\"SnappyScrollThingy\"\r\n      style={{\r\n        overflowY: 'scroll',\r\n        // STRONG snap whenever not focused; focus mode disables via inline/logic above.\r\n        scrollSnapType: focusedProjectKey ? 'none' : 'y mandatory',\r\n        scrollBehavior: 'smooth',\r\n        scrollbarWidth: 'none',\r\n        msOverflowStyle: 'none',\r\n      }}\r\n    >\r\n      <style>{`\r\n        .SnappyScrollThingy::-webkit-scrollbar { display: none; }\r\n        /* Allow native edge handoff */\r\n        .SnappyScrollThingy { overscroll-behavior: auto; }\r\n        .embedded-app { touch-action: pan-y; overscroll-behavior: auto; }\r\n\r\n        /* Snap control helpers */\r\n        .SnappyScrollThingy.no-snap { scroll-snap-type: none !important; }\r\n        .SnappyScrollThingy.snap-proximity { scroll-snap-type: y proximity !important; }\r\n      `}</style>\r\n\r\n      {projects.map((item, idx) => {\r\n        const isFocused = focusedProjectKey === item.key;\r\n        const collapseBelow = focusedIdx >= 0 && idx > focusedIdx;\r\n        return (\r\n          <ProjectPane\r\n            key={item.key}\r\n            item={item}\r\n            isFocused={isFocused}\r\n            collapseBelow={collapseBelow}\r\n            isFirst={idx === 0}\r\n            setRef={(el) => { projectRefs.current[item.key] = el; }}\r\n          />\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ScrollController;\r\n","import { useEffect } from 'react';\nimport loadable from '@loadable/component';\nimport ViewProject from './utils/title/view-project.tsx';\nimport { TitleProvider } from './utils/title/title-context.tsx';\nimport ScrollController from './utils/scroll-controller.tsx';\nimport { ProjectVisibilityProvider } from './utils/context-providers/project-context.tsx';\n\n// NavMenu is client-only; SSR markup stays identical.\nconst NavMenu = loadable(() => import('./utils/navigation/nav-menu.tsx'), {\n  ssr: false,\n  fallback: null,\n});\n\nfunction Frontpage() {\n  useEffect(() => {\n    // --- Clear prehydrate flag ASAP after hydration ---\n    const root = document.getElementById('landing');\n    requestAnimationFrame(() => root?.removeAttribute('data-prehydrate'));\n\n    // Allow pinch-zoom only inside elements that explicitly opt in.\n    const isAllowZoomTarget = (ev) => {\n      const el = ev?.target;\n      if (!el || typeof el.closest !== 'function') return false;\n      return Boolean(el.closest('[data-allow-zoom=\"1\"], .allow-pinch'));\n    };\n\n    // Prevent global pinch zoom (iOS/Android touchmove and Safari gesture*)\n    const preventPinchZoom = (event) => {\n      const tag = event?.target?.tagName?.toLowerCase?.() || '';\n      if (tag === 'video') return;                // let videos use native gestures\n      if (isAllowZoomTarget(event)) return;       // opt-in: allow inside pannable\n      if ('touches' in event && event.touches?.length > 1) event.preventDefault();\n    };\n\n    const preventGesture = (e) => {\n      // Safari iOS fires these for pinch\n      const tag = e?.target?.tagName?.toLowerCase?.() || '';\n      if (tag === 'video') return;\n      if (isAllowZoomTarget(e)) return;           // opt-in: allow inside pannable\n      e.preventDefault();\n    };\n\n    document.addEventListener('touchmove', preventPinchZoom, { passive: false });\n    document.addEventListener('gesturestart', preventGesture);\n    document.addEventListener('gesturechange', preventGesture);\n    document.addEventListener('gestureend', preventGesture);\n\n    return () => {\n      document.removeEventListener('touchmove', preventPinchZoom);\n      document.removeEventListener('gesturestart', preventGesture);\n      document.removeEventListener('gesturechange', preventGesture);\n      document.removeEventListener('gestureend', preventGesture);\n    };\n  }, []);\n\n  return (\n    <ProjectVisibilityProvider>\n      <div\n        className=\"HereGoesNothing\"\n        id=\"landing\"\n        data-prehydrate\n        style={{ position: 'relative' }}\n      >\n        <NavMenu />\n        <TitleProvider>\n          <ViewProject />\n        </TitleProvider>\n        <ScrollController />\n      </div>\n    </ProjectVisibilityProvider>\n  );\n}\n\nexport default Frontpage;\n","// src/utils/content-utility/component-loader.tsx\r\nimport React, { type ComponentType } from 'react';\r\nimport { useSsrData } from '../context-providers/ssr-data-context';\r\nimport { ssrRegistry } from '../../ssr/registry';\r\n\r\n// ----- Async loaders for non-dynamic projects\r\nexport const componentMap = {\r\n  rotary: () => import('../../components/block-type-1/rotary-lamp'),\r\n  scoop: () => import('../../components/block-type-1/ice-cream-scoop'),\r\n  dataviz: () => import('../../components/block-type-1/data-visualization'),\r\n} as const;\r\n\r\n// ----- Split loaders for dynamic (frame & shadow)\r\nexport const dynamicLoaders = {\r\n  frame: () =>\r\n    import(\r\n      /* webpackChunkName: \"dynamic-frame\" */\r\n      '../../components/dynamic-app/frame'\r\n    ),\r\n  shadow: () =>\r\n    import(\r\n      /* webpackChunkName: \"dynamic-shadow\" */\r\n      '../../components/dynamic-app/shadow-entry'\r\n    ),\r\n} as const;\r\n\r\nexport const gameLoaders = {\r\n  components: () =>\r\n    import(\r\n      /* webpackChunkName: \"components\" */\r\n      '../../components/rock-escapade/block-g-host'\r\n    ),\r\n  game: () =>\r\n    import(\r\n      /* webpackChunkName: \"game\" */\r\n      '../../components/rock-escapade/game-canvas'\r\n    ),\r\n} as const;\r\n\r\n// Explicit union preserves \"dynamic\" as a valid key\r\nexport type ProjectKey = 'rotary' | 'scoop' | 'dataviz' | 'game' | 'dynamic';\r\n\r\nexport interface ProjectMeta {\r\n  key: ProjectKey;\r\n  title: string;\r\n  isLink?: boolean;\r\n}\r\n\r\nexport interface Project extends ProjectMeta {\r\n  lazyImport: () => Promise<{ default: ComponentType<any> }>;\r\n}\r\n\r\nconst toComponent = <T extends ComponentType<any>>(\r\n  p: Promise<{ default: T }>\r\n): Promise<{ default: ComponentType<any> }> =>\r\n  p as unknown as Promise<{ default: ComponentType<any> }>;\r\n\r\n// Stable base list (default client loaders).\r\n// For \"dynamic\", point to the lightweight frame by default.\r\n// Shadow chunk is mounted separately by the SSR enhancer (SSR path)\r\n// or by ProjectPane's LazyViewMount (client-only path).\r\nexport const baseProjects: Project[] = [\r\n  {\r\n    key: 'scoop',\r\n    title: 'Ice Cream Scoop',\r\n    lazyImport: () => toComponent(import('../../components/block-type-1/ice-cream-scoop')),\r\n  },\r\n  {\r\n    key: 'rotary',\r\n    title: 'Rotary Lamp',\r\n    lazyImport: () => toComponent(import('../../components/block-type-1/rotary-lamp')),\r\n  },\r\n  {\r\n    key: 'dataviz',\r\n    title: 'Data Visualization',\r\n    lazyImport: () => toComponent(import('../../components/block-type-1/data-visualization')),\r\n  },\r\n  {\r\n    key: 'game',\r\n    title: 'Evade the Rock',\r\n    lazyImport: () => toComponent(gameLoaders.components()),\r\n  },\r\n  {\r\n    key: 'dynamic',\r\n    title: 'Dynamic App',\r\n    isLink: true,\r\n    lazyImport: () => toComponent(dynamicLoaders.frame()),\r\n  },\r\n];\r\n\r\n// Hook that returns a loader respecting SSR (when present) and client lazy loading.\r\nexport function useProjectLoader(key: ProjectKey) {\r\n  const ssr = useSsrData();\r\n  const project = baseProjects.find((p) => p.key === key);\r\n  if (!project) throw new Error(`Unknown project key: ${key}`);\r\n\r\n  const payload = ssr?.preloaded?.[key];\r\n  const desc = ssrRegistry[key];\r\n\r\n  // --- SSR path: render prebuilt HTML (and attach enhancers) ---\r\n  if (payload && desc?.render) {\r\n    const data = (payload as any).data ?? payload;\r\n\r\n    if (key === 'rotary') {\r\n      return async () => {\r\n        const Enhancer = (await import('../../ssr/projects/rotary.enhancer')).default;\r\n        return {\r\n          default: () => (\r\n            <>\r\n              {desc.render!(data)}\r\n              <Enhancer />\r\n            </>\r\n          ),\r\n        };\r\n      };\r\n    }\r\n\r\n    if (key === 'scoop') {\r\n      return async () => {\r\n        const Enhancer = (await import('../../ssr/projects/scoop.enhancer')).default;\r\n        return {\r\n          default: () => (\r\n            <>\r\n              {desc.render!(data)}\r\n              <Enhancer />\r\n            </>\r\n          ),\r\n        };\r\n      };\r\n    }\r\n\r\n    if (key === 'dataviz') {\r\n      return async () => {\r\n        const Enhancer = (await import('../../ssr/projects/dataviz.enhancer')).default;\r\n        return {\r\n          default: () => (\r\n            <>\r\n              {desc.render!(data)}\r\n              <Enhancer />\r\n            </>\r\n          ),\r\n        };\r\n      };\r\n    }\r\n\r\n    if (key === 'dynamic') {\r\n      // Option A: the dynamic SSR enhancer computes overlay sizing AND mounts shadow app\r\n      return async () => {\r\n        const Enhancer = (await import('../../ssr/projects/dynamic.enhancer')).default;\r\n        return {\r\n          default: () => (\r\n            <>\r\n              {desc.render!(data)} {/* SSR frame HTML (picture + img + overlay + spinner) */}\r\n              <Enhancer />          {/* overlay sizing + shadow attach (lazy by IO/idle) */}\r\n            </>\r\n          ),\r\n        };\r\n      };\r\n    }\r\n\r\n     if (key === 'game') {\r\n    return async () => {\r\n      const Enhancer = (await import('../../ssr/projects/game.enhancer')).default;\r\n      return {\r\n        default: () => (\r\n          <>\r\n            {desc.render!(data)} {/* SSR onboarding (coin + text) */}\r\n            <Enhancer />         {/* Hydrates into BlockGHost when visible/idle */}\r\n          </>\r\n        ),\r\n      };\r\n    };\r\n  }\r\n\r\n\r\n    // Default SSR (no enhancer)\r\n    return async () => ({ default: () => <>{desc.render!(data)}</> });\r\n  }\r\n\r\n  // --- Client lazy path ---\r\n  if (key === 'dynamic') {\r\n    // Ensure the default loader is just the lightweight frame\r\n    return dynamicLoaders.frame as unknown as () => Promise<{ default: ComponentType<any> }>;\r\n  }\r\n\r\n    if (key === 'game') {\r\n    // Ensure the default loader is just the lightweight frame\r\n    return gameLoaders.components as unknown as () => Promise<{ default: ComponentType<any> }>;\r\n  }\r\n\r\n  return project.lazyImport;\r\n}\r\n","// src/utils/image-builder.ts\r\nimport imageUrlBuilder from '@sanity/image-url';\r\nimport client from '../sanity';\r\n\r\nconst builder = imageUrlBuilder(client);\r\n\r\n// Base builder\r\nexport const urlFor = (source: any) => builder.image(source);\r\n\r\n// Ultra-low-res (LQIP)\r\nexport const getLowResImageUrl = (source: any) =>\r\n  urlFor(source).ignoreImageParams().width(128).height(128).quality(30).auto('format').url();\r\n\r\n// Medium\r\nexport const getMediumImageUrl = (source: any) =>\r\n  urlFor(source).ignoreImageParams().width(640).height(360).quality(60).auto('format').url();\r\n\r\n// High\r\nexport const getHighQualityImageUrl = (source: any, width = 1920, height = 1080, quality = 100) =>\r\n  urlFor(source).ignoreImageParams().width(width).height(height).quality(quality).auto('format').url();\r\n"],"names":["queries","async","getProjectData","key","q","client","fetch","e","console","error","concat","hasWindow","window","hasRIC","hasCIC","ric","cb","opts","_opts$timeout","requestIdleCallback","setTimeout","timeout","cic","id","cancelIdleCallback","clearTimeout","LazyViewMount","_ref","load","fallback","mountMode","enterThreshold","exitThreshold","unmountDelayMs","root","rootMargin","observeTargetId","preloadOnIdle","preloadIdleTimeout","preloadOnFirstIO","placeholderMinHeight","fadeMs","fadeEasing","componentProps","isServer","selfRef","useRef","Comp","setComp","useState","mountedRef","isMounted","setIsMounted","isVisible","setIsVisible","unmountTimer","fadeTimer","idleId","preloadPromiseRef","lastRatio","lastIntersecting","firstIOSeen","ensurePreloaded","current","clearTimers","mountNow","p","prev","lazy","requestAnimationFrame","useEffect","target","document","getElementById","IntersectionObserver","enter","Math","max","min","exit","thresholds","Array","from","Set","sort","a","b","io","_ref2","_entry$intersectionRa","entry","ratio","intersectionRatio","intersecting","isIntersecting","crossedEnter","crossedExit","becameIntersecting","leftIntersecting","threshold","observe","disconnect","CompAny","_jsx","ref","style","width","minHeight","position","children","opacity","transition","willChange","Suspense","_objectSpread","PannableViewport","className","sensitivity","minScale","maxScale","hostRef","draggingRef","scaleRef","_sensitivity$x","_sensitivity$y","host","media","querySelector","styleMedia","clamp","v","lo","hi","objectFit","computed","getComputedStyle","objectPosition","draggable","transformOrigin","applyScale","s","transform","sensX","x","sensY","y","cw","ch","mw","mh","dispW","dispH","canPanX","canPanY","pctPerPxX","pctPerPxY","setOP","xPct","yPct","computeCover","rect","getBoundingClientRect","height","HTMLImageElement","naturalWidth","naturalHeight","HTMLVideoElement","videoWidth","videoHeight","scale","overflowX","overflowY","ro","ResizeObserver","onMeta","addEventListener","startX","startY","startOPX","startOPY","setGestureLock","on","dataset","gestureLock","touchAction","cursor","onPointerDown","_e$target","_setPointerCapture","pointerType","button","closest","ox","oy","parseOP","op","oxRaw","oyRaw","split","map","t","trim","toPct","endsWith","parseFloat","n","Number","isFinite","clientX","clientY","currentTarget","setPointerCapture","call","pointerId","onPointerMove","dx","dy","nextX","nextY","endDrag","_releasePointerCaptur","_ref3","releasePointerCapture","onDblClick","onWheel","ctrlKey","preventDefault","delta","deltaY","next","startScale","onGestureStart","onGestureChange","rel","onGestureEnd","passive","_ro","removeEventListener","filter","Boolean","join","undefined","overflow","isFullScreen","delayMs","container","size","setSize","show","setShow","innerWidth","anim","lottie","renderer","loop","autoplay","animationData","loading","destroy","projectColors","rgb","tooltipAlpha","defaultAlpha","darkThemeTop","example","parseAssetId","_ref$split","dimensionString","format","Error","_dimensionString$spli","isRef","src","isAsset","_id","isAssetStub","source","asset","url","parseSource","image","isUrl","urlToId","_extends","img","crop","hotspot","applyDefaults","test","slice","replace","result","left","top","bottom","right","SPEC_NAME_TO_URL_NAME_MAPPINGS","urlForImage","options","spec","JSON","stringify","cropLeft","round","cropTop","hotSpotVerticalRadius","hotSpotHorizontalRadius","hotSpotCenterX","hotSpotCenterY","focalPoint","ignoreImageParams","fit","specToImageUrl","cdnUrl","baseUrl","vanityStub","vanityName","filename","projectId","params","_spec$rect","push","bg","flip","flipHorizontal","flipVertical","forEach","mapping","specName","param","encodeURIComponent","length","cropRect","imgWidth","imgHeight","desiredAspectRatio","hotspotXCenter","_width","_height","_left","hotspotYCenter","_top","validFits","validCrops","validAutoModes","isSanityModernClientLike","config","isSanityClientLike","clientConfig","rewriteSpecName","_step","_iterator","_createForOfIteratorHelperLoose","done","value","urlBuilder","_options$config","apiUrl","apiHost","ImageUrlBuilder","_options$clientConfig","_apiUrl","_projectId","_dataset","parent","this","_proto","prototype","withOptions","newOptions","hasOwnProperty","_dataset2","_projectId2","_bg","dpr","_dpr","maxWidth","_maxWidth","minWidth","_minWidth","maxHeight","_maxHeight","_minHeight","blur","_blur","sharpen","_sharpen","_format","invert","_invert","orientation","_orientation","quality","_quality","forceDownload","download","indexOf","saturation","_saturation","auto","pad","_pad","frame","_frame","toString","ssrRegistry","scoop","render","data","_m2$video","_m2$video2","_m1$alt","_m2$video3","_m2$video4","m1","mediaOne","m2","mediaTwo","m1Medium","getMediumImageUrl","imageUrl","m1High","getHighQualityImageUrl","m2PosterMedium","video","poster","m2PosterHigh","_jsxs","alt","decoding","fetchPriority","display","muted","playsInline","preload","webmUrl","type","mp4Url","criticalCssFiles","rotary","_m2$alt","m2Medium","m2High","dataviz","posterMedium","posterHigh","dynamic","_await$getProjectData","rows","byTitle","Object","fromEntries","r","_r$file","_r$file$asset","String","title","toLowerCase","file","laptop","tablet","phone","svgMap","_svgMap$laptop","_svgMap$tablet","_svgMap$phone","srcSet","buildPreloads","links","u","game","coin","_coin$alt","mediumUrl","highUrl","tabIndex","alignItems","pointerEvents","ProjectVisibilityContext","createContext","ProjectVisibilityProvider","activeProject","setActiveProject","blockGClick","setBlockGClick","currentIndex","setCurrentIndex","isDragging","setIsDragging","focusedProjectKey","setFocusedProjectKey","previousScrollY","setPreviousScrollY","scrollContainerRef","alignFnRef","requestViewportAlign","React","args","_alignFnRef$current","registerViewportAlign","fn","Provider","useProjectVisibility","context","useContext","createClient","apiVersion","useCdn","TitleContext","activeTitle","setActiveTitle","TitleProvider","useActiveTitle","seededShuffle","arr","seed","rand","imul","splitmix32","i","j","floor","TitleObserver","useSsrData","projectsRef","baseProjects","lastTitleRef","observerRef","moRef","pickCenteredNow","vh","innerHeight","documentElement","clientHeight","viewportCenter","bestTitle","bestDist","Infinity","el","center","dist","abs","mo","MutationObserver","cur","body","childList","subtree","focused","find","BaseProjectButton","displayTitle","isLink","currentKey","showBackground","backgroundColor","onHover","variant","arrowContainer","isFocused","isSwiping","setIsSwiping","animRef","mounted","linkData","arrowData3","arrowData","loadAnimation","onDomLoaded","svg","classList","add","goToAndStop","playSegments","_animRef$current","useArrowLottie","Element","sharedProps","onMouseEnter","onMouseLeave","href","onClick","handleToggleOpen","scrollIntoView","block","behavior","TitleEl","zIndex","IconEl","inset","borderRadius","_Fragment","ProjectButtonTitleIcon","props","ProjectButtonIconTitle","ViewProject","_focusedProject$title","projects","useMemo","focusedProject","currentProject","hovered","_setHovered","hoveredRef","setShowBackground","hideTimeoutRef","clearHide","scheduleHide","delay","arguments","handleMouseMove","viewportH","handleTouch","_colorInfo$defaultAlp","colorInfo","alpha","ButtonComp","LazyInView","serverRender","eager","allowIdle","debugLabel","initialVisible","Component","setComponent","vis","log","cancelled","then","mod","default","content","EventMount","active","visible","setVisible","loadingRef","alive","caseStudyLoaders","ProjectPane","_ssr$preloaded","_data","_item$title","item","setRef","isFirst","collapseBelow","useProjectLoader","ssr","payload","preloaded","desc","hasSSR","isHydrated","setIsHydrated","isDynamic","isGame","fallbackNode","LoadingScreen","blockId","rootRef","isCollapsed","activeDelayed","setActiveDelayed","exitTimerRef","reserveH","setReserveH","detailsHostRef","rafId","_detailsHostRef$curre","_detailsHostRef$curre2","h","release","EXIT_DELAY_MS","_cleanup","cleanup","cancelAnimationFrame","_scrollContainerRef$c","baseMin","_window$matchMedia$ma","_window$matchMedia","_window","coarse","matchMedia","matches","touch","navigator","maxTouchPoints","vv","visualViewport","gap","_","entries","mapped","scrollSnapAlign","scrollSnapStop","contentVisibility","contain","ScrollController","projectRefs","lastScrollTopRef","lastScrollDirRef","lastFocusedKeyRef","exitTargetKeyRef","getOffsetTopWithin","scroller","_getBoundingClientRec","_getBoundingClientRec2","r1","r2","st","scrollTop","remove","_projectRefs$current$","scrollingElement","targetEl","bump","getViewportH","_scroller$getBounding","_window$visualViewpor","_window$visualViewpor2","_scroller$scrollBy","scrollBy","setScrollTop","_scroller$scrollTo","scrollTo","hardPlaceAtKey","_scrollContainerRef$c2","_projectRefs$current$2","targetTop","prevBehavior","scrollBehavior","prevOverflow","offsetHeight","animatePlaceToKey","_scrollContainerRef$c3","_projectRefs$current$3","ms","startTop","duration","start","performance","now","raf","step","pow","easeOutCubic","_scrollContainerRef$c4","dwellTimer","pendingKey","focusedIdx","findIndex","pickCandidate","_scroller$getBounding2","_ref4","_ref5","_window$visualViewpor3","_window$visualViewpor4","bestKey","onTick","curr","dir","_clampAdjacentKey","neighbor","nextIdx","clampAdjacentKey","onScroll","exitOrchRef","timers","inputAttached","_scrollContainerRef$c5","_projectRefs$current$4","preferredKey","state","_state$cancelTween","cancelTween","detachInputCancels","dispatchEvent","CustomEvent","detail","INTERACTION_EVENTS","onUserCancel","ev","attachInputCancels","oldKey","oldEl","prevH","unlockTimer","ramp","postAnchor","kbFallback","unlockFallback","_ro2","scrollContainer","attachedEl","atTop","atBottom","EPS","ceil","devicePixelRatio","scrollHeight","fireSyntheticDrag","phase","direction","magnitude","velocity","evt","ts","bubbles","composed","lastY","lastTs","handleTouchStart","touches","handleTouchMove","dt","handleTouchEnd","handleWheel","cleanupFrom","maybeAttach","onSynthetic","_e","scrollSnapType","scrollbarWidth","msOverflowStyle","idx","NavMenu","loadable","resolved","chunkName","isReady","resolve","__webpack_modules__","importAsync","requireAsync","requireSync","__webpack_require__","removeAttribute","isAllowZoomTarget","preventPinchZoom","event","_event$target","_event$target$tagName","_event$target$tagName2","_event$touches","tagName","preventGesture","_e$target$tagName","_e$target$tagName$toL","dynamicLoaders","shadow","gameLoaders","components","lazyImport","project","Enhancer","builder","imageUrlBuilder","urlFor","getLowResImageUrl"],"sourceRoot":""}