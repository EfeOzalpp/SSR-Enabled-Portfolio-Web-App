{"version":3,"file":"static/js/946.362cd743.chunk.js","mappings":"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","sources":["utils/content-utility/real-mobile.ts","utils/media-providers/image-upgrade-manager.ts","utils/media-providers/media-loader.tsx","utils/media-providers/video-observer.tsx","utils/tooltip/tooltip.ts","utils/tooltip/tooltipInit.ts","components/block-type-1/data-visualization.tsx"],"sourcesContent":["// useRealMobileViewport.ts\r\nimport { useEffect, useState } from 'react';\r\n\r\nexport function useRealMobileViewport() {\r\n  const [isRealMobile, setIsRealMobile] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const checkMobile = () => {\r\n      const touch = navigator.maxTouchPoints > 0;\r\n      const coarse = window.matchMedia?.('(pointer: coarse)').matches ?? false;\r\n      const width = window.innerWidth;\r\n      const ua = navigator.userAgent || navigator.vendor || (window as any).opera;\r\n\r\n      // iOS detection (iPhone / iPad)\r\n      const isIOS = /iPad|iPhone|iPod/.test(ua) ||\r\n        (navigator.platform === 'MacIntel' && touch); // iPadOS pretends to be Mac\r\n\r\n      // Android detection\r\n      const isAndroid = /Android/.test(ua);\r\n\r\n      // Consider it real mobile if:\r\n      // - Touch exists, and viewport is small, or\r\n      // - Known mobile UA\r\n      const realMobile =\r\n        (touch && width <= 1024) ||\r\n        isIOS ||\r\n        isAndroid ||\r\n        coarse;\r\n\r\n      setIsRealMobile(realMobile);\r\n    };\r\n\r\n    checkMobile();\r\n    window.addEventListener('resize', checkMobile);\r\n    window.addEventListener('orientationchange', checkMobile);\r\n\r\n    return () => {\r\n      window.removeEventListener('resize', checkMobile);\r\n      window.removeEventListener('orientationchange', checkMobile);\r\n    };\r\n  }, []);\r\n\r\n  return isRealMobile;\r\n}\r\n","// src/utils/image-upgrade-manager.ts\r\nlet totalImages = 0;\r\nlet loadedLowRes = 0;\r\nlet listeners: (() => void)[] = [];\r\nlet upgradeTimeout: ReturnType<typeof setTimeout> | null = null;\r\n\r\nexport const setUpgradeTimeout = (ms: number = 5000) => {\r\n  if (upgradeTimeout) return;\r\n  upgradeTimeout = setTimeout(() => {\r\n    listeners.forEach(fn => fn());\r\n    listeners = [];\r\n  }, ms);\r\n};\r\n\r\nexport const registerImage = () => {\r\n  totalImages++;\r\n  setUpgradeTimeout();\r\n};\r\n\r\nexport const notifyLowResLoaded = () => {\r\n  loadedLowRes++;\r\n  if (loadedLowRes >= totalImages) {\r\n    listeners.forEach(fn => fn());\r\n    listeners = [];\r\n  }\r\n};\r\n\r\nexport const onAllLowResLoaded = (callback: () => void) => {\r\n  listeners.push(callback);\r\n};\r\n","// src/utils/media-providers/media-loader.tsx\r\nimport { useRef, useState, useEffect } from 'react';\r\nimport { useVideoVisibility } from './video-observer';\r\nimport LoadingScreen from '../loading/loading';\r\nimport { SanityImageSource } from '@sanity/image-url/lib/types/types';\r\nimport {\r\n  getLowResImageUrl,\r\n  getMediumImageUrl,\r\n  getHighQualityImageUrl,\r\n  urlFor,\r\n} from './image-builder';\r\nimport {\r\n  registerImage,\r\n  notifyLowResLoaded,\r\n  onAllLowResLoaded,\r\n} from './image-upgrade-manager';\r\n\r\nfunction useNearViewport<T extends Element>(\r\n  ref: React.RefObject<T>,\r\n  { rootMargin = '900px 0px', threshold = 0, once = true } = {}\r\n) {\r\n  const [near, setNear] = useState(false);\r\n  useEffect(() => {\r\n    if (!ref.current || near) return;\r\n    const io = new IntersectionObserver(\r\n      (entries) => {\r\n        if (entries.some((e) => e.isIntersecting)) {\r\n          setNear(true);\r\n          if (once) io.disconnect();\r\n        }\r\n      },\r\n      { rootMargin, threshold }\r\n    );\r\n    io.observe(ref.current);\r\n    return () => io.disconnect();\r\n  }, [ref, near, rootMargin, threshold, once]);\r\n  return near;\r\n}\r\n\r\ntype VideoSetSrc = {\r\n  webmUrl?: string;\r\n  mp4Url?: string;\r\n  poster?: SanityImageSource | string;\r\n};\r\n\r\ntype MediaLoaderProps = {\r\n  type: 'image' | 'video';\r\n  src: string | SanityImageSource | VideoSetSrc | null | undefined;\r\n  alt?: string;\r\n  id?: string;\r\n  className?: string;\r\n  style?: React.CSSProperties;\r\n  objectPosition?: string;\r\n  loop?: boolean;\r\n  muted?: boolean;\r\n  playsInline?: boolean;\r\n  preload?: 'auto' | 'metadata' | 'none';\r\n  enableVisibilityControl?: boolean;\r\n  priority?: boolean;\r\n  controls?: boolean;\r\n};\r\n\r\nconst MediaLoader = ({\r\n  type,\r\n  src,\r\n  alt = '',\r\n  id,\r\n  className = '',\r\n  style = {},\r\n  objectPosition = 'center center',\r\n  loop = true,\r\n  muted = true,\r\n  playsInline = true,\r\n  preload = 'metadata',\r\n  enableVisibilityControl = true,\r\n  priority = false,\r\n  controls = false,\r\n}: MediaLoaderProps) => {\r\n  const isSSR = typeof window === 'undefined';\r\n\r\n  // Start as loaded in SSR to avoid fade-in on hydration\r\n  const [loaded, setLoaded] = useState(isSSR);\r\n  const [showMedium, setShowMedium] = useState(false);\r\n  const [showHigh, setShowHigh] = useState(false);\r\n\r\n  // Native poster control (no overlay)\r\n  const [posterRemoved, setPosterRemoved] = useState(false);\r\n\r\n  const videoRef = useRef<HTMLVideoElement>(null);\r\n  const imgRef = useRef<HTMLImageElement>(null);\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n\r\n  const isNear = useNearViewport(containerRef);\r\n  const shouldStart = priority || isNear;\r\n\r\n  // If already cached, skip fade-in\r\n  useEffect(() => {\r\n    if (type === 'image' && imgRef.current?.complete) setLoaded(true);\r\n    if (type === 'video' && videoRef.current?.readyState >= 2) setLoaded(true);\r\n  }, [type]);\r\n\r\n  // IMAGE progressive upgrade\r\n  useEffect(() => {\r\n    if (type !== 'image') return;\r\n    registerImage();\r\n\r\n    const t1 = setTimeout(() => setShowMedium(true), shouldStart ? 0 : 2000);\r\n    if (shouldStart) setShowMedium(true);\r\n\r\n    const off = () => setTimeout(() => setShowHigh(true), 300);\r\n    onAllLowResLoaded(off);\r\n    const t2 = setTimeout(() => setShowHigh(true), 5000);\r\n\r\n    return () => {\r\n      clearTimeout(t1);\r\n      clearTimeout(t2);\r\n    };\r\n  }, [type, shouldStart]);\r\n\r\n  const onMediaLoaded = () => {\r\n    setLoaded(true);\r\n    if (type === 'image') notifyLowResLoaded();\r\n    if (id) {\r\n      const event = new CustomEvent('mediaReady', { detail: { id } });\r\n      window.dispatchEvent(event);\r\n    }\r\n  };\r\n\r\n  // ----- Video source parsing + poster URL -----\r\n  const isVideoSetObj =\r\n    typeof src === 'object' &&\r\n    src !== null &&\r\n    !('asset' in (src as any)) &&\r\n    (('webmUrl' in (src as any)) || ('mp4Url' in (src as any)));\r\n\r\n  const vs = (isVideoSetObj ? (src as VideoSetSrc) : undefined);\r\n  const legacyVideoUrl = typeof src === 'string' ? src : undefined;\r\n\r\n  const posterUrl =\r\n    vs?.poster\r\n      ? (typeof vs.poster === 'string'\r\n          ? vs.poster\r\n          : urlFor(vs.poster).width(1200).quality(80).auto('format').url())\r\n      : undefined;\r\n\r\n  // ✅ Keep native poster visible until the first *painted* frame, then remove it.\r\n  useEffect(() => {\r\n    if (type !== 'video' || !videoRef.current) return;\r\n    const v = videoRef.current;\r\n\r\n    const hidePoster = () => {\r\n      setPosterRemoved(true);\r\n      v.removeAttribute('poster');\r\n    };\r\n\r\n    const onPlay = () => {\r\n      const anyV = v as any;\r\n      if (typeof anyV.requestVideoFrameCallback === 'function') {\r\n        anyV.requestVideoFrameCallback(() => hidePoster());\r\n      } else {\r\n        const onTime = () => {\r\n          if (v.currentTime > 0 && v.readyState >= 2) {\r\n            v.removeEventListener('timeupdate', onTime);\r\n            hidePoster();\r\n          }\r\n        };\r\n        v.addEventListener('timeupdate', onTime);\r\n        const timer = setTimeout(() => {\r\n          v.removeEventListener('timeupdate', onTime);\r\n          hidePoster();\r\n        }, 1200);\r\n        return () => clearTimeout(timer);\r\n      }\r\n    };\r\n\r\n    v.addEventListener('play', onPlay, { once: true });\r\n    return () => v.removeEventListener('play', onPlay);\r\n  }, [type]);\r\n\r\n  // VIDEO visibility/autoplay (your existing hook takes care of play/pause)\r\n  useVideoVisibility(\r\n    videoRef,\r\n    containerRef,\r\n    type === 'video' && enableVisibilityControl ? 0.35 : (undefined as unknown as number)\r\n  );\r\n\r\n  // ─────────────────────────────────────────────────────────────\r\n  // VIDEO RELIABILITY PATCHES\r\n  // - Kick load when near\r\n  // - Retry once, then promote preload to 'auto'\r\n  // - Decode nudge for iOS Safari after loadedmetadata\r\n  // - Early \"loaded\" on loadedmetadata to remove spinner sooner\r\n  // - Gentle play kick when data is ready (muted+inline)\r\n  // ─────────────────────────────────────────────────────────────\r\n  useEffect(() => {\r\n    if (type !== 'video' || !videoRef.current) return;\r\n    const v = videoRef.current;\r\n\r\n    let retryTimer: number | null = null;\r\n    let promoteTimer: number | null = null;\r\n\r\n    const clearTimers = () => {\r\n      if (retryTimer) { window.clearTimeout(retryTimer); retryTimer = null; }\r\n      if (promoteTimer) { window.clearTimeout(promoteTimer); promoteTimer = null; }\r\n    };\r\n\r\n    // If we’re near (or priority), ensure the browser actually fetches metadata\r\n    const kickLoad = () => {\r\n      try {\r\n        // set the DOM property; the attribute React renders can be different and that's OK\r\n        v.preload = preload ?? 'metadata';\r\n        if (v.preload !== 'none') v.load(); // important: actually trigger the fetch\r\n      } catch {}\r\n    };\r\n\r\n    const nudgeDecode = () => {\r\n      // iOS Safari sometimes stalls after metadata; a tiny seek wakes decode\r\n      try {\r\n        if (v.readyState < 2) return;\r\n        const t = v.currentTime;\r\n        v.currentTime = t > 0 ? t : 0.001;\r\n      } catch {}\r\n    };\r\n\r\n    const tryPlay = async () => {\r\n      if (!enableVisibilityControl) return;\r\n      try {\r\n        if (v.muted && v.playsInline && v.paused && v.readyState >= 2) {\r\n          await v.play().catch(() => {});\r\n        }\r\n      } catch {}\r\n    };\r\n\r\n    const onLoadedMeta = () => {\r\n      // spinner can go away on metadata (poster is still covering until first frame)\r\n      setLoaded(true);\r\n      nudgeDecode();\r\n    };\r\n\r\n    const onLoadedData = () => { setLoaded(true); void tryPlay(); };\r\n    const onCanPlay = () => { setLoaded(true); void tryPlay(); };\r\n\r\n    if (shouldStart) {\r\n      kickLoad();\r\n\r\n      // If nothing after ~2.5s, try load() once more\r\n      retryTimer = window.setTimeout(() => {\r\n        if (v.readyState < 2) kickLoad();\r\n      }, 2500);\r\n\r\n      // Still nothing after ~5s? Promote preload to 'auto'\r\n      promoteTimer = window.setTimeout(() => {\r\n        if (v.readyState < 2) {\r\n          try { v.preload = 'auto'; v.load(); } catch {}\r\n        }\r\n      }, 5000);\r\n    }\r\n\r\n    v.addEventListener('loadedmetadata', onLoadedMeta);\r\n    v.addEventListener('loadeddata', onLoadedData);\r\n    v.addEventListener('canplay', onCanPlay);\r\n\r\n    // Optional: diagnostics for flaky networks\r\n    const onError = (e: Event) => console.warn('Video error', e);\r\n    const onStalled = () => console.warn('Video stalled');\r\n    const onSuspend = () => {/* benign on many browsers */};\r\n    v.addEventListener('error', onError);\r\n    v.addEventListener('stalled', onStalled);\r\n    v.addEventListener('suspend', onSuspend);\r\n\r\n    return () => {\r\n      clearTimers();\r\n      v.removeEventListener('loadedmetadata', onLoadedMeta);\r\n      v.removeEventListener('loadeddata', onLoadedData);\r\n      v.removeEventListener('canplay', onCanPlay);\r\n      v.removeEventListener('error', onError);\r\n      v.removeEventListener('stalled', onStalled);\r\n      v.removeEventListener('suspend', onSuspend);\r\n    };\r\n  }, [\r\n    type,\r\n    shouldStart,\r\n    preload,\r\n    enableVisibilityControl,\r\n    // if any URL changes, re-run the loader watchdog\r\n    isVideoSetObj,\r\n    (vs && vs.webmUrl) || '',\r\n    (vs && vs.mp4Url) || '',\r\n    legacyVideoUrl || '',\r\n  ]);\r\n\r\n  const hasVideoSource = Boolean(vs?.webmUrl || vs?.mp4Url || legacyVideoUrl);\r\n  if (!src || (type === 'video' && !hasVideoSource)) return null;\r\n\r\n  // ====== IMAGE ======\r\n  if (type === 'image') {\r\n    const ultraLowSrc = typeof src === 'string' ? src : getLowResImageUrl(src);\r\n    const mediumSrc   = typeof src === 'string' ? src : getMediumImageUrl(src);\r\n    const highResSrc  = typeof src === 'string' ? src : getHighQualityImageUrl(src);\r\n\r\n    const resolvedSrc = showHigh ? highResSrc : showMedium ? mediumSrc : ultraLowSrc;\r\n    if (!resolvedSrc) return null;\r\n\r\n    return (\r\n      <div ref={containerRef} style={{ position: 'relative', width: '100%', height: '100%' }}>\r\n        {!loaded && (\r\n          <div className=\"absolute-inset\">\r\n            <LoadingScreen isFullScreen={false} />\r\n          </div>\r\n        )}\r\n        <img\r\n          ref={imgRef}\r\n          loading={priority ? 'eager' : undefined}\r\n          fetchPriority={showHigh || priority ? 'high' : showMedium ? 'auto' : 'low'}\r\n          id={id}\r\n          src={resolvedSrc || undefined}\r\n          alt={alt}\r\n          onLoad={onMediaLoaded}\r\n          onError={(e) => console.warn('Image failed', (e.target as HTMLImageElement).src)}\r\n          className={className}\r\n          draggable={false}\r\n          style={{\r\n            ...style,\r\n            objectFit: 'cover',\r\n            objectPosition,\r\n            opacity: loaded ? 1 : 0,\r\n            transition: isSSR ? 'none' : 'filter 0.5s ease, opacity 0.3s ease',\r\n          }}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // ====== VIDEO ======\r\n  const showSpinner = !loaded;\r\n\r\n  return (\r\n    <div ref={containerRef} style={{ position: 'relative', width: '100%', height: '100%' }}>\r\n      {showSpinner && (\r\n        <div className=\"absolute-inset\">\r\n          <LoadingScreen isFullScreen={false} />\r\n        </div>\r\n      )}\r\n\r\n      <video\r\n        id={id}\r\n        ref={videoRef}\r\n        // treat loadeddata & metadata as “ready enough” for UI\r\n        onLoadedData={onMediaLoaded}\r\n        onLoadedMetadata={() => setLoaded(true)}\r\n        onError={(e) => console.warn('Video failed', e)}\r\n        className={className}\r\n        style={{\r\n          ...style,\r\n          objectFit: 'cover',\r\n          objectPosition,\r\n          opacity: loaded ? 1 : 0,\r\n          transition: isSSR ? 'none' : 'opacity 0.3s ease',\r\n          pointerEvents: 'all',\r\n          zIndex: 1,\r\n        }}\r\n        loop={loop}\r\n        muted={muted}\r\n        playsInline={playsInline}\r\n        preload={preload ?? 'metadata'}\r\n        controls={controls}\r\n        // If you host poster/video on different origins and ever read pixels to <canvas>,\r\n        // uncomment next line and ensure CORS headers exist:\r\n        // crossOrigin=\"anonymous\"\r\n        poster={posterRemoved ? undefined : posterUrl}\r\n      >\r\n        {/* Order matters: prefer MP4 first for Safari reliability */}\r\n        {vs?.mp4Url  && <source src={vs.mp4Url  || undefined} type=\"video/mp4\"  />}\r\n        {vs?.webmUrl && <source src={vs.webmUrl || undefined} type=\"video/webm\" />}\r\n        {!vs?.webmUrl && !vs?.mp4Url && legacyVideoUrl && (\r\n          <source src={legacyVideoUrl || undefined} />\r\n        )}\r\n      </video>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MediaLoader;\r\n","// video-observer.tsx\r\nimport { useEffect } from 'react';\r\n\r\nexport const useVideoVisibility = (\r\n  videoRef: React.RefObject<HTMLVideoElement> | null,\r\n  containerRef: React.RefObject<HTMLElement> | null,\r\n  threshold: number = 0.4\r\n) => {\r\n  useEffect(() => {\r\n    if (!videoRef?.current || !containerRef?.current) return;\r\n\r\n    const t = typeof threshold === 'number' && threshold >= 0 && threshold <= 1 ? threshold : 0.4;\r\n\r\n    let observer: IntersectionObserver | undefined;\r\n\r\n    const video = videoRef.current!;\r\n    const container = containerRef.current!;\r\n\r\n    // IMPORTANT: load even when using <source> children\r\n    // (video.src is empty in that case; currentSrc is set after load())\r\n    video.load();\r\n    video.muted = true;\r\n\r\n    observer = new IntersectionObserver(\r\n      ([entry]) => {\r\n        if (entry.isIntersecting) {\r\n          video.play().catch(() => setTimeout(() => video.play().catch(() => {}), 500));\r\n        } else {\r\n          video.pause();\r\n        }\r\n      },\r\n      { threshold: t }\r\n    );\r\n\r\n    observer.observe(container);\r\n\r\n    // kick once if already in view\r\n    const rect = container.getBoundingClientRect();\r\n    const ratio = Math.min(Math.max((window.innerHeight - rect.top) / window.innerHeight, 0), 1);\r\n    if (ratio >= t) video.play().catch(() => {});\r\n\r\n    return () => observer?.disconnect();\r\n  }, [videoRef, containerRef, threshold]);\r\n};\r\n","// utils/tooltip/global-tooltip.ts\r\nimport '../../styles/tooltip.css';\r\nimport { projectColors } from '../content-utility/color-map';\r\n\r\ntype TooltipInfo = { tags: string[]; backgroundColor: string };\r\nconst tooltipDataCache: Record<string, TooltipInfo> = {};\r\n\r\nconst LOCAL_FALLBACK_TAGS: Record<string, string[]> = {\r\n  'block-g': ['#q5.js Canvas', '#Gamification', '#Lottie Animation'],\r\n};\r\n\r\nconst TITLE_BY_KEY: Record<string, string> = {\r\n  'rotary-lamp': 'Rotary Lamp',\r\n  'ice-scoop': 'Ice Cream Scoop',\r\n  'data-viz': 'Data Visualization',\r\n  'block-g': 'Evade the Rock',\r\n  'dynamic': 'Dynamic App',\r\n};\r\n\r\nfunction bgForKey(key: string) {\r\n  const colorInfo = projectColors[TITLE_BY_KEY[key]];\r\n  const alpha = colorInfo?.tooltipAlpha ?? 0.6;\r\n  return colorInfo ? `rgba(${colorInfo.rgb}, ${alpha})` : 'rgba(85,95,90,0.6)';\r\n}\r\n\r\nfunction createTooltipDOM() {\r\n  const el = document.createElement('div');\r\n  el.id = 'custom-global-tooltip';\r\n  el.style.position = 'fixed';\r\n  el.style.pointerEvents = 'none';\r\n  el.style.zIndex = '9999';\r\n  el.style.opacity = '0';\r\n  el.style.visibility = 'hidden';\r\n  el.style.backdropFilter = 'blur(8px)';\r\n  el.style.color = '#fff';\r\n  el.style.transition = 'opacity 0.3s ease, visibility 0.3s ease';\r\n  el.className = 'custom-tooltip-blur';\r\n  const root = document.getElementById('efe-portfolio') || document.body;\r\n  root.appendChild(el);\r\n  return el as HTMLDivElement;\r\n}\r\n\r\nlet tooltipEl: HTMLDivElement | null = null;\r\nlet currentKey = '';\r\nlet hideTimeout: ReturnType<typeof setTimeout> | null = null;\r\n\r\nexport const fetchTooltipDataForKey = async (key: string): Promise<TooltipInfo> => {\r\n  if (tooltipDataCache[key]) return tooltipDataCache[key];\r\n\r\n  const bg = bgForKey(key);\r\n\r\n  // local fallback\r\n  if (LOCAL_FALLBACK_TAGS[key]) {\r\n    const info = { tags: LOCAL_FALLBACK_TAGS[key], backgroundColor: bg };\r\n    tooltipDataCache[key] = info;\r\n    return info;\r\n  }\r\n\r\n  // CMS fetch by slug\r\n  try {\r\n    const client = (await import('../sanity')).default;\r\n    const res = await client.fetch<{ tags?: string[] } | null>(\r\n      `*[_type==\"mediaBlock\" && slug.current == $key][0]{ tags }`,\r\n      { key }\r\n    );\r\n    const info: TooltipInfo = { tags: res?.tags ?? [], backgroundColor: bg };\r\n    tooltipDataCache[key] = info;\r\n    return info;\r\n  } catch {\r\n    const info: TooltipInfo = { tags: [], backgroundColor: bg };\r\n    tooltipDataCache[key] = info;\r\n    return info;\r\n  }\r\n};\r\n\r\nconst showTooltip = () => {\r\n  if (!tooltipEl) return;\r\n  if (hideTimeout) clearTimeout(hideTimeout);\r\n  tooltipEl.style.opacity = '1';\r\n  tooltipEl.style.visibility = 'visible';\r\n  hideTimeout = setTimeout(() => hideTooltip(), 1_500);\r\n};\r\n\r\nconst hideTooltip = () => {\r\n  if (!tooltipEl) return;\r\n  if (hideTimeout) clearTimeout(hideTimeout);\r\n  tooltipEl.style.opacity = '0';\r\n  tooltipEl.style.visibility = 'hidden';\r\n  currentKey = '';\r\n};\r\n\r\nfunction positionTooltip(x: number, y: number) {\r\n  if (!tooltipEl) return;\r\n  const rect = tooltipEl.getBoundingClientRect();\r\n  const padding = 0;\r\n  const vw = window.innerWidth;\r\n  const vh = window.innerHeight;\r\n\r\n  const nearTop = y < rect.height + padding + 20;\r\n  const nearBottom = y + rect.height + padding > vh - 20;\r\n  const nearRight = x + rect.width + padding > vw - 20;\r\n  const nearLeft = x < rect.width + padding + 20;\r\n\r\n  let left: number, top: number;\r\n  if (nearBottom) { top = y - rect.height - padding - 8; left = x - rect.width * 0; }\r\n  else if (nearTop) { top = y + padding - 14; left = x - rect.width * 0; }\r\n  else if (nearRight) { top = y - rect.height / 2; left = x - rect.width - padding - 24; }\r\n  else if (nearLeft) { top = y - rect.height / 2; left = x + padding - 4; }\r\n  else { top = y - rect.height / 1.6; left = x + padding - 2; }\r\n\r\n  left = Math.max(padding, Math.min(left, vw - rect.width - padding));\r\n  top  = Math.max(padding, Math.min(top,  vh - rect.height - padding));\r\n\r\n  tooltipEl.style.left = `${left}px`;\r\n  tooltipEl.style.top  = `${top}px`;\r\n}\r\n\r\nexport function initGlobalTooltip(isRealMobile: boolean) {\r\n  if (tooltipEl) return () => {};\r\n  tooltipEl = createTooltipDOM();\r\n\r\n  let lastMouseX = -1;\r\n  let lastMouseY = -1;\r\n  let ticking = false;\r\n  let scrollCheckTimeout: ReturnType<typeof setTimeout> | null = null;\r\n\r\n  const updateForElement = async (el: Element | null) => {\r\n    if (!(el instanceof HTMLElement)) { hideTooltip(); return; }\r\n    const tooltipClass = [...el.classList].find(c => c.startsWith('tooltip-'));\r\n    if (!tooltipClass) { hideTooltip(); return; }\r\n\r\n    const key = tooltipClass.replace('tooltip-', '');\r\n    if (key !== currentKey) {\r\n      currentKey = key;\r\n      const info = await fetchTooltipDataForKey(key);\r\n\r\n      if (!info.tags.length) { hideTooltip(); return; }\r\n      tooltipEl!.innerHTML = info.tags.map(t => `<p class=\"tooltip-tag\">${t}</p>`).join('');\r\n      tooltipEl!.style.backgroundColor = info.backgroundColor;\r\n      showTooltip();\r\n    } else if (tooltipEl!.style.opacity === '0' || tooltipEl!.style.visibility === 'hidden') {\r\n      showTooltip();\r\n    }\r\n  };\r\n\r\n  const onMouseMove = (e: MouseEvent) => {\r\n    lastMouseX = e.clientX;\r\n    lastMouseY = e.clientY;\r\n    requestAnimationFrame(() => positionTooltip(lastMouseX, lastMouseY));\r\n    updateForElement(e.target as Element);\r\n  };\r\n\r\n  const checkHoveredElementOnScroll = () => {\r\n    const el = document.elementFromPoint(lastMouseX, lastMouseY);\r\n    updateForElement(el);\r\n    requestAnimationFrame(() => positionTooltip(lastMouseX, lastMouseY));\r\n  };\r\n\r\n  const onScroll = () => {\r\n    if (!ticking) {\r\n      window.requestAnimationFrame(() => { checkHoveredElementOnScroll(); ticking = false; });\r\n      ticking = true;\r\n    }\r\n    if (scrollCheckTimeout) clearTimeout(scrollCheckTimeout);\r\n    scrollCheckTimeout = setTimeout(() => {}, 120);\r\n  };\r\n\r\n  const onMouseOut = (e: MouseEvent) => {\r\n    if (!e.relatedTarget) hideTooltip();\r\n  };\r\n\r\n  // only attach scroll observer for non-mobile real viewports\r\n  if (!isRealMobile) window.addEventListener('scroll', onScroll, true);\r\n  document.addEventListener('mousemove', onMouseMove, { passive: true });\r\n  document.addEventListener('mouseout', onMouseOut, { passive: true });\r\n\r\n  return () => {\r\n    if (!tooltipEl) return;\r\n    if (!isRealMobile) window.removeEventListener('scroll', onScroll, true);\r\n    document.removeEventListener('mousemove', onMouseMove);\r\n    document.removeEventListener('mouseout', onMouseOut);\r\n    tooltipEl.remove();\r\n    tooltipEl = null;\r\n    if (hideTimeout) clearTimeout(hideTimeout);\r\n  };\r\n}","// utils/tooltip/tooltipInit.ts\r\nimport { useEffect } from 'react';\r\nimport { initGlobalTooltip } from './tooltip';\r\nimport { useRealMobileViewport } from '../content-utility/real-mobile';\r\n\r\nexport const useTooltipInit = () => {\r\n  const isRealMobile = useRealMobileViewport();\r\n\r\n  useEffect(() => {\r\n    const dispose = initGlobalTooltip(isRealMobile);\r\n    return () => dispose?.();\r\n  }, [isRealMobile]);\r\n};\r\n","import { useEffect, useState } from 'react';\r\nimport client from '../../utils/sanity';\r\nimport MediaLoader from '../../utils/media-providers/media-loader';\r\nimport PannableViewport from '../../utils/split+drag/pannable-object-position';\r\nimport { useTooltipInit } from '../../utils/tooltip/tooltipInit';\r\nimport { useSsrData } from '../../utils/context-providers/ssr-data-context';\r\nimport { getHighQualityImageUrl } from '../../utils/media-providers/image-builder';\r\nimport '../../styles/block-type-1.css';\r\n\r\ntype VideoSet = { webmUrl?: string; mp4Url?: string; poster?: any };\r\ntype MediaSlot = { alt?: string; image?: any; video?: VideoSet };\r\ntype DataVizData = { mediaOne: MediaSlot };\r\n\r\nexport default function DataVisualizationBlock() {\r\n  const ssrData = useSsrData();\r\n  const [data, setData] = useState<DataVizData | null>(\r\n    (ssrData?.preloaded?.dataviz as DataVizData) || null\r\n  );\r\n\r\n  useTooltipInit();\r\n\r\n  useEffect(() => {\r\n    if (data) return;\r\n    client\r\n      .fetch<DataVizData>(\r\n        `*[_type == \"mediaBlock\" && slug.current == $slug][0]{\r\n          mediaOne{\r\n            alt,\r\n            image,\r\n            video{\r\n              \"webmUrl\": webm.asset->url,\r\n              \"mp4Url\": mp4.asset->url,\r\n              poster\r\n            }\r\n          }\r\n        }`,\r\n        { slug: 'data-viz' }\r\n      )\r\n      .then(setData)\r\n      .catch((err) => {\r\n        console.warn('[DataVisualizationBlock] GROQ fetch failed:', err);\r\n        setData(null);\r\n      });\r\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\r\n\r\n  if (!data?.mediaOne) return null;\r\n\r\n  const { alt = 'Data Visualization', image, video } = data.mediaOne;\r\n  const isVideo = Boolean(video?.webmUrl || video?.mp4Url);\r\n  const highPoster = video?.poster\r\n    ? getHighQualityImageUrl(video.poster, 1920, 1080, 90)\r\n    : undefined;\r\n\r\n  return (\r\n    <section\r\n      className=\"block-type-1\"\r\n      style={{ position: 'relative', width: '100%', height: '100dvh', overflow: 'hidden' }}\r\n    >\r\n      <div\r\n        className=\"media-content\"\r\n        style={{\r\n          width: '100%',\r\n          height: '100%',\r\n          position: 'absolute',\r\n          inset: 0,\r\n        }}\r\n      >\r\n        <PannableViewport sensitivity={2}>\r\n          <MediaLoader\r\n            type={isVideo ? 'video' : 'image'}\r\n            src={isVideo ? (video as VideoSet) : image}\r\n            alt={alt}\r\n            id={isVideo ? 'dataviz-media-video' : 'dataviz-media'}\r\n            {...(highPoster ? { 'data-src-full': highPoster } : {})}\r\n            className=\"tooltip-data-viz\"\r\n            objectPosition=\"center center\"\r\n            style={{ width: '100%', height: '100%' }}\r\n            // priority // uncomment if this is the hero\r\n          />\r\n        </PannableViewport>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n"],"names":["useRealMobileViewport","isRealMobile","setIsRealMobile","useState","useEffect","checkMobile","_window$matchMedia$ma","_window$matchMedia","_window","touch","navigator","maxTouchPoints","coarse","window","matchMedia","call","matches","width","innerWidth","ua","userAgent","vendor","opera","isIOS","test","platform","isAndroid","addEventListener","removeEventListener","totalImages","loadedLowRes","listeners","upgradeTimeout","registerImage","setTimeout","forEach","fn","arguments","length","undefined","setUpgradeTimeout","_ref","type","src","alt","id","className","style","objectPosition","loop","muted","playsInline","preload","enableVisibilityControl","priority","controls","isSSR","loaded","setLoaded","showMedium","setShowMedium","showHigh","setShowHigh","posterRemoved","setPosterRemoved","videoRef","useRef","imgRef","containerRef","isNear","ref","rootMargin","threshold","once","near","setNear","current","io","IntersectionObserver","entries","some","e","isIntersecting","disconnect","observe","useNearViewport","shouldStart","_imgRef$current","_videoRef$current","complete","readyState","t1","callback","off","push","t2","clearTimeout","onMediaLoaded","event","CustomEvent","detail","dispatchEvent","isVideoSetObj","vs","legacyVideoUrl","posterUrl","poster","urlFor","quality","auto","url","v","hidePoster","removeAttribute","onPlay","anyV","requestVideoFrameCallback","onTime","currentTime","timer","t","observer","video","container","load","entry","play","catch","pause","rect","getBoundingClientRect","Math","min","max","innerHeight","top","_observer","useVideoVisibility","retryTimer","promoteTimer","kickLoad","_unused","tryPlay","async","paused","_unused3","onLoadedMeta","nudgeDecode","_unused2","onLoadedData","onCanPlay","_unused4","onError","console","warn","onStalled","onSuspend","webmUrl","mp4Url","hasVideoSource","Boolean","ultraLowSrc","getLowResImageUrl","mediumSrc","getMediumImageUrl","highResSrc","getHighQualityImageUrl","resolvedSrc","_jsxs","position","height","children","_jsx","LoadingScreen","isFullScreen","loading","fetchPriority","onLoad","target","draggable","_objectSpread","objectFit","opacity","transition","showSpinner","onLoadedMetadata","pointerEvents","zIndex","tooltipDataCache","LOCAL_FALLBACK_TAGS","TITLE_BY_KEY","tooltipEl","currentKey","hideTimeout","fetchTooltipDataForKey","key","bg","_colorInfo$tooltipAlp","colorInfo","projectColors","alpha","tooltipAlpha","concat","rgb","bgForKey","info","tags","backgroundColor","_res$tags","client","default","res","fetch","showTooltip","visibility","hideTooltip","positionTooltip","x","y","vw","vh","nearTop","nearBottom","nearRight","nearLeft","left","initGlobalTooltip","el","document","createElement","backdropFilter","color","getElementById","body","appendChild","createTooltipDOM","lastMouseX","lastMouseY","ticking","scrollCheckTimeout","updateForElement","HTMLElement","tooltipClass","classList","find","c","startsWith","replace","innerHTML","map","join","onMouseMove","clientX","clientY","requestAnimationFrame","onScroll","checkHoveredElementOnScroll","elementFromPoint","onMouseOut","relatedTarget","passive","remove","useTooltipInit","dispose","DataVisualizationBlock","_ssrData$preloaded","ssrData","useSsrData","data","setData","preloaded","dataviz","slug","then","err","mediaOne","image","isVideo","highPoster","overflow","inset","PannableViewport","sensitivity","MediaLoader"],"sourceRoot":""}