{"version":3,"file":"static/js/787.8a457fe3.chunk.js","mappings":"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","sources":["dynamic-app/lib/palette-controller.ts","dynamic-app/components/fireworksDisplay.jsx","dynamic-app/components/sortBy.jsx","styles/dynamic-app/sortByStyles.css?raw","styles/dynamic-app/UIcards.css?raw","dynamic-app/components/homepage-UIcards.jsx","dynamic-app/lib/observedCard.jsx","dynamic-app/lib/shadowObserver.ts","dynamic-app/lib/setupAltObserver.js","dynamic-app/components/IntroOverlay.jsx","styles/dynamic-app/index.css?raw","styles/loading-overlay.css?raw","dynamic-app/dynamic-app-outgoing.jsx","dynamic-app/dynamic-app-shadow.jsx","dynamic-app/components/footer.jsx","utils/context-providers/shadow-root-context.tsx","utils/context-providers/style-injector.ts","styles/dynamic-app/misc.css?raw","utils/media-providers/image-upgrade-manager.ts","utils/media-providers/media-loader.tsx","utils/media-providers/video-observer.tsx","dynamic-app/components/pauseButton.jsx","dynamic-app/components/title.jsx","styles/dynamic-app/title.css?raw","dynamic-app/lib/colorString.ts"],"sourcesContent":["// src/dynamic-app/lib/palette-controller.ts\r\n\r\nexport type Quartet = [string, string, string, string];\r\nexport type Triplet = [string, string, string];\r\n\r\nconst WHITE = '#FFFFFF';\r\n\r\n// resolve alt → palette (handles trailing spaces too)\r\nexport function resolvePalette(\r\n  altRaw: string | null | undefined,\r\n  colorMapping: Record<string, Quartet | undefined>\r\n): Quartet | null {\r\n  if (!altRaw) return null;\r\n  const exact = colorMapping[altRaw];\r\n  if (Array.isArray(exact)) return exact as Quartet;\r\n  const trimmed = colorMapping[altRaw.trim()];\r\n  if (Array.isArray(trimmed)) return trimmed as Quartet;\r\n  return null;\r\n}\r\n\r\n// compute state from a quartet\r\nexport function computeStateFromPalette(\r\n  q: Quartet | null,\r\n  win: Window = window\r\n): { activeColor: string; movingText: Triplet; lastKnown: string } {\r\n  const palette: Quartet = q ?? [WHITE, WHITE, WHITE, WHITE];\r\n  const [c0, c1, c2, c3] = palette;\r\n\r\n  // desktop/mobile branching for first slot\r\n  const isDesktop = win.innerWidth >= 1024;\r\n  const first = isDesktop ? (c1 ?? WHITE) : (c0 ?? WHITE);\r\n\r\n  const movingText: Triplet = [first, c1 ?? WHITE, c3 ?? c2 ?? WHITE];\r\n  const activeColor = c2 ?? WHITE;\r\n\r\n  return { activeColor, movingText, lastKnown: activeColor };\r\n}\r\n","// Firework Animation Code\r\nimport React, { useRef, useEffect, useState, useCallback } from 'react';\r\nimport q5 from 'q5';\r\nimport { useRealMobileViewport } from '../../utils/content-utility/real-mobile.ts';\r\n\r\nconst FireworksDisplay = ({ colorMapping = {}, items = [], lastKnownColor, onToggleFireworks }) => {\r\n  const canvasRef = useRef(null);\r\n  const [fireworksEnabled, setFireworksEnabled] = useState(true);\r\n  const fireworksRef = useRef([]);\r\n  const fireworksEnabledRef = useRef(true);\r\n\r\n  const isPageHiddenRef = useRef(false);\r\n  const hiddenStartTimeRef = useRef(0);\r\n  const hiddenDurationRef = useRef(0);\r\n\r\n  const isRealMobile = useRealMobileViewport();\r\n  const isRealMobileRef = useRef(isRealMobile);\r\n\r\n  useEffect(() => {\r\n    isRealMobileRef.current = isRealMobile;\r\n  }, [isRealMobile]);\r\n\r\n  // Documént visibility\r\n  useEffect(() => {\r\n    const handleVisibilityChange = () => {\r\n      if (document.visibilityState === 'hidden') {\r\n        isPageHiddenRef.current = true;\r\n        hiddenStartTimeRef.current = performance.now();\r\n      } else if (document.visibilityState === 'visible') {\r\n        isPageHiddenRef.current = false;\r\n        const now = performance.now();\r\n        hiddenDurationRef.current += now - hiddenStartTimeRef.current;\r\n      }\r\n    };\r\n\r\n    document.addEventListener('visibilitychange', handleVisibilityChange);\r\n    return () => {\r\n      document.removeEventListener('visibilitychange', handleVisibilityChange);\r\n    };\r\n  }, []);\r\n\r\n  // Function to adjust brightness of a hex color\r\n  function adjustBrightness(hex, multiplier) {\r\n    // Convert hex to RGB\r\n    let r = parseInt(hex.slice(1, 3), 16);\r\n    let g = parseInt(hex.slice(3, 5), 16);\r\n    let b = parseInt(hex.slice(5, 7), 16);\r\n\r\n    // Apply brightness multiplier\r\n    r = Math.min(255, Math.max(0, Math.floor(r * multiplier)));\r\n    g = Math.min(255, Math.max(0, Math.floor(g * multiplier)));\r\n    b = Math.min(255, Math.max(0, Math.floor(b * multiplier)));\r\n\r\n    // Convert back to hex and return\r\n    return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;\r\n  }\r\n\r\n    const p5InstanceRef = useRef(null); // Track single p5 instance\r\n    const latestItems = useRef(items);\r\n    const latestColorMapping = useRef(colorMapping);\r\n    const latestLastKnownColor = useRef(lastKnownColor);\r\n\r\n  useEffect(() => {\r\n    latestItems.current = items;\r\n    latestColorMapping.current = colorMapping;\r\n    latestLastKnownColor.current = lastKnownColor;\r\n    }, [items, colorMapping, lastKnownColor]);\r\n\r\n  useEffect(() => {\r\n    let destroyed = false;\r\n\r\n    if (!canvasRef.current || p5InstanceRef.current || destroyed) return;\r\n\r\n\r\n      const sketch = (p) => {\r\n        let fireworks = fireworksRef.current;\r\n        let lastFireworkTime = -8000;\r\n        let lastLaunchPosition = p.createVector(p.width / 2, p.height);\r\n        const minDistance = 1000;\r\n\r\n        class Particle {\r\n          constructor(x, y, c, firework, size, type, hasTrail = false) {\r\n            this.pos = p.createVector(x, y);\r\n            this.vel = firework\r\n              ? p.createVector(0, p.random(-10, -20)) // Firework launch velocity\r\n              : p.createVector(p.random(-1, 1), p.random(-1, 1)).mult(p.random(0, 18)); // Explosion velocity\r\n            this.acc = p.createVector(0, 0);\r\n          \r\n            // Adjust brightness based on firework type and size\r\n            this.col = this.adjustBrightness(\r\n              c,\r\n              size > 10\r\n                ? p.random(1.4, 2) // Larger particles\r\n                : size > 5\r\n                ? p.random(1.1, 1.3) // Mid-size particles\r\n                : p.random(0.7, 1.1) // Smaller particles\r\n            );\r\n          \r\n            this.firework = firework;\r\n            this.size = size;\r\n            this.type = type;\r\n            this.hasTrail = hasTrail;\r\n          \r\n            this.shapeType = p.random(['circle', 'square', 'triangle']); // Add random shape selection\r\n          \r\n            // Randomize lifespan based on size (larger particles live longer)\r\n            let minLifespan, maxLifespan;\r\n\r\n            if (p.windowWidth < 768) {\r\n              minLifespan = p.random(30, 60);\r\n              maxLifespan = p.random(40, 80);\r\n            } else if (p.windowWidth <= 1024) {\r\n              minLifespan = p.random(50, 80);\r\n              maxLifespan = p.random(70, 100);\r\n            } else {\r\n              minLifespan = p.random(50, 90);\r\n              maxLifespan = p.random(80, 140);\r\n            }\r\n\r\n            this.lifespan = p.map(size, 1, 12, minLifespan, maxLifespan);\r\n\r\n          \r\n            // Adjust trail length based on particle size\r\n            this.trailLength = size >= 4 && size <= 12 ? 8 : 1; // Longer trail for larger particles\r\n            this.trail = Array(this.trailLength).fill(p.createVector(x, y)); // Set trail array\r\n          \r\n            // Map trailLifespan to speed (higher speed -> higher alpha, lower speed -> fade out)\r\n            const initialSpeed = this.vel.mag();\r\n            this.trailLifespan = Array(this.trailLength).fill(p.map(initialSpeed, 0, 20, 0, 100)); // Dynamically set based on speed\r\n          \r\n            this.fadeFactor = p.map(size, 1, 15, 0.6, 0.5); // Smaller particles fade faster\r\n          \r\n            // Blinking properties (only for explosion particles)\r\n            this.blinkingSpeed = firework ? 0 : p.random(5, 30); // Blinking speed for explosion particles\r\n            this.blinkingAlpha = firework ? 255 : 255; // Default alpha value for explosion particles\r\n          }           \r\n        \r\n          // Adjust brightness of the color\r\n          adjustBrightness(baseColor, multiplier) {\r\n            const r = Math.min(255, Math.max(0, baseColor.levels[0] * multiplier));\r\n            const g = Math.min(255, Math.max(0, baseColor.levels[1] * multiplier));\r\n            const b = Math.min(255, Math.max(0, baseColor.levels[2] * multiplier));\r\n            return p.color(r, g, b);\r\n          }\r\n        \r\n          applyForce(force) {\r\n            this.acc.add(force);\r\n          }\r\n        \r\n          update() {\r\n            this.vel.add(this.acc);\r\n            this.pos.add(this.vel);\r\n            this.acc.mult(0);\r\n        \r\n            if (!this.firework) {\r\n              this.vel.mult(0.927); // Slow down over time\r\n              this.lifespan -= this.fadeFactor; // Decrease lifespan\r\n        \r\n              // Make sure lifespan does not go below 0\r\n              if (this.lifespan <= 0) {\r\n                this.lifespan = 0;\r\n              }\r\n      \r\n              // Trail\r\n              if (this.hasTrail) {\r\n                this.trail.pop(); // Remove the oldest trail point\r\n                this.trail.unshift(this.pos.copy()); // Add the newest trail point\r\n                for (let i = 0; i < this.trailLifespan.length; i++) {\r\n                  this.trailLifespan[i] -= this.fadeFactor; // Gradually fade trail points\r\n                  this.trailLifespan[i] = Math.max(0, this.trailLifespan[i]); // Clamp lifespan to 0\r\n                }\r\n              }\r\n        \r\n              // Apply gravity based on particle size\r\n              let gravityForce;\r\n              if (this.size >= 1 && this.size < 2) {\r\n                gravityForce = p.random(-0.151, -0.161); // Weaker gravity for size 1\r\n              } else if (this.size >= 2 && this.size < 3) {\r\n                gravityForce = p.random(-0.146, -0.156); // Gravity for size 2\r\n              } else if (this.size >= 3 && this.size < 4) {\r\n                gravityForce = p.random(-0.144, -0.145); // Gravity for size 3\r\n              } else if (this.size >= 4 && this.size < 5) {\r\n                gravityForce = p.random(-0.141, -0.143); // Gravity for size 4\r\n              } else if (this.size >= 5 && this.size < 6) {\r\n                gravityForce = p.random(-0.139, -0.14); // Gravity for size 5\r\n              } else if (this.size >= 6 && this.size < 7) {\r\n                gravityForce = p.random(-0.137, -0.138); // Gravity for size 6\r\n              } else if (this.size >= 7 && this.size < 8) {\r\n                gravityForce = p.random(-0.135, -0.136); // Gravity for size 7\r\n              } else if (this.size >= 8 && this.size < 9) {\r\n                gravityForce = p.random(-0.134, -0.136); // Gravity for size 8\r\n              } else if (this.size <= 9) {\r\n                gravityForce = p.random(-0.135, -0.137); // Stronger gravity for size 9\r\n              } else if (this.size >= 10 && this.size <= 12) {\r\n                gravityForce = p.random(-0.094, -0.137); // Stronger gravity for size 9\r\n              }\r\n\r\n              this.applyForce(p.createVector(0, gravityForce)); // Apply gravity\r\n            }\r\n        \r\n            // Update blinking alpha for explosion particles\r\n            if (!this.firework && this.type === 'BLINKING') {\r\n              this.blinkingAlpha = Math.abs(255 * Math.sin((p.millis() / 1000) * this.blinkingSpeed));\r\n            }\r\n          }\r\n        \r\n          show() {\r\n            let alpha = this.firework\r\n              ? p.map(this.lifespan, 0, 255, 0, 255) // Normal fading for firework particles\r\n              : this.type === 'BLINKING'\r\n              ? this.blinkingAlpha // Blinking for explosion particles\r\n              : p.map(this.lifespan, 0, 255, 0, 255); // Fading for explosion particles\r\n          \r\n            p.noStroke();\r\n          \r\n            // Shrinking logic for the particle\r\n            let shrinkSize = this.size;\r\n            if (!this.firework) {\r\n              // Lifespan timing: calculate elapsed time (255 lifespan = full life)\r\n              const elapsedTime = p.map(this.lifespan, 255, 0, 0, 5); // 5 seconds total lifespan\r\n              const shrinkFactor = elapsedTime <= 2\r\n                ? 1 // No shrinking for the first 2 seconds\r\n                : p.map(this.lifespan, 255, 0, 1, 0); // Start shrinking after 2 seconds\r\n          \r\n              // Exponential shrinking towards the end\r\n              shrinkSize = this.size * (1 - Math.pow(1 - shrinkFactor, 6)); \r\n            }\r\n          \r\n            const normalizedSize = Math.max(shrinkSize * 1.1, 1); // Clamp minimum size to 1\r\n          \r\n            // Calculate rotation angle based on velocity vector\r\n            const rotationAngle = p.atan2(this.vel.y, this.vel.x); // Angle in radians\r\n          \r\n            // Draw trails first\r\n            if (this.hasTrail) {\r\n              for (let i = 0; i < this.trail.length; i++) {\r\n                const trailAlpha = this.trailLifespan[i];\r\n                if (trailAlpha > 0) {\r\n                  // Use a fixed size for trail points\r\n                  const trailSize = this.firework ? this.size * 0.9 : this.size * 0.8;\r\n            \r\n                  p.strokeWeight(trailSize); // Fixed trail size\r\n                  p.stroke(\r\n                    this.col.levels[0],\r\n                    this.col.levels[1],\r\n                    this.col.levels[2],\r\n                    trailAlpha\r\n                  );\r\n                  p.point(this.trail[i].x, this.trail[i].y);\r\n                }\r\n              }\r\n            }\r\n          \r\n            // Draw the main particle shape\r\n            p.push();\r\n            p.translate(this.pos.x, this.pos.y); // Move to particle position\r\n            p.rotate(rotationAngle); // Rotate based on velocity direction\r\n          \r\n            // Apply speed-based rotation scaling (optional)\r\n            const rotationSpeed = this.vel.mag() * 0.01; // Scale speed to adjust rotation dynamics\r\n            p.rotate(p.frameCount * rotationSpeed);\r\n          \r\n            p.fill(this.col.levels[0], this.col.levels[1], this.col.levels[2], alpha);\r\n          \r\n            // Draw shape based on shapeType\r\n            if (this.shapeType === 'circle') {\r\n              p.ellipse(0, 0, normalizedSize, normalizedSize);\r\n            } else if (this.shapeType === 'square') {\r\n              const halfSize = normalizedSize / 2;\r\n              p.rect(-halfSize, -halfSize, normalizedSize, normalizedSize);\r\n            } else if (this.shapeType === 'triangle') {\r\n              const halfSize = normalizedSize / 2;\r\n              p.triangle(\r\n                0, -halfSize, // Top vertex\r\n                -halfSize, halfSize, // Bottom-left vertex\r\n                halfSize, halfSize // Bottom-right vertex\r\n              );\r\n            }\r\n          \r\n            p.pop(); // Reset transformations\r\n          }        \r\n                      \r\n          // Check if the particle is done (lifespan is 0)\r\n          isDone() {\r\n            return this.lifespan <= 0; // Particle is done when lifespan is depleted\r\n          }\r\n        }\r\n        \r\n        class Firework {\r\n          constructor(x, y, targetX, targetY, col, type) {\r\n            this.firework = new Particle(x, y, col, true, 4, type);\r\n            this.particles = [];\r\n            this.exploded = false;\r\n            this.targetX = targetX;\r\n        \r\n            // Adjust explosion location based on screen width\r\n            if (p.windowWidth < 768) {\r\n              // For screens smaller than 768px, make the explosion higher on the screen\r\n              this.targetX = p.random(p.width * 0.5, p.width * 0.9);  \r\n              this.targetY = p.random(p.height * 0.1, p.height * 0.3);  \r\n              } else if (p.windowWidth >= 768 && p.windowWidth <= 1024) {\r\n              // For screens between 768px and 1024px, make the explosion in the middle\r\n              this.targetX = p.random(p.width * 0.65, p.width * 0.9);  \r\n              this.targetY = p.random(p.height * 0.05, p.height * 0.3);  \r\n              } else {\r\n              // For screens larger than 1024px, make the explosion lower on the screen\r\n              this.targetX = p.random(p.width * 0.3, p.width * 0.7);  \r\n              this.targetY = p.random(p.height * 0.05, p.height * 0.4);  \r\n            }\r\n        \r\n            this.col = col;\r\n            this.type = type;\r\n            this.explosionStartTime = -1;\r\n\r\n            // Particle amount logic\r\n            let baseCount;\r\n          if (p.windowWidth < 768) {\r\n            baseCount = type === 'BLINKING'\r\n              ? p.random(150, 275)\r\n              : p.random(125, 225);\r\n          } else if (p.windowWidth <= 1024) {\r\n            baseCount = type === 'BLINKING'\r\n              ? p.random(275, 325)\r\n              : p.random(200, 250); // Fewer PROJECTILE particles on medium screens\r\n          } else {\r\n            baseCount = type === 'BLINKING'\r\n              ? p.random(250, 300)\r\n              : p.random(300, 350);\r\n            }\r\n            this.numParticles = Math.floor(baseCount);\r\n          }\r\n        \r\n          explode() {\r\n            // Capture the firework's initial velocity to influence explosion particles\r\n            let initialVel = this.firework.vel.copy(); // Copy firework's velocity to influence explosion\r\n            \r\n            //limit particle count for larger ones between 25 to 50\r\n            const largerParticleCount = this.type === 'PROJECTILE' ? Math.floor(p.random(25, 50)) : 0;\r\n\r\n            for (let i = 0; i < this.numParticles; i++) {\r\n              let size;\r\n          \r\n              // Assign size based on whether it's a larger particle or a regular one\r\n              if (this.type === 'PROJECTILE' && i < largerParticleCount) {\r\n                size = p.random(10, 12); // Extra large particles for PROJECTILE\r\n              } else {\r\n                size = this.type === 'BLINKING' ? p.random(1, 9) : p.random(1, 8); // Smaller particles\r\n              }\r\n          \r\n              let speed = this.type === 'BLINKING'\r\n              ? (() => {\r\n                  // Inline definition for BLINKING firework speed calculation\r\n                  let speed;\r\n                  if (size >= 1 && size < 2) {\r\n                    speed = p.random(0.5, 2.7);\r\n                  } else if (size >= 2 && size < 3) {\r\n                    speed = p.random(2.5, 4.7);\r\n                  } else if (size >= 3 && size < 4) {\r\n                    speed = p.random(4.5, 6.7);\r\n                  } else if (size >= 4 && size < 5) {\r\n                    speed = p.random(6.5, 8.7);\r\n                  } else if (size >= 5 && size < 6) {\r\n                    speed = p.random(8.5, 8.7);\r\n                  } else if (size >= 6 && size < 7) {\r\n                    speed = p.random(8.8, 9);\r\n                  } else if (size >= 7 && size < 8) {\r\n                    speed = p.random(9.1, 9.2);\r\n                  } else if (size >= 8 && size < 9) {\r\n                    speed = p.random(9.2, 9.3);\r\n                  } else {\r\n                    speed = p.random(9.4, 9.5);\r\n                  }\r\n                  return adjustForScreenWidth(speed);\r\n                })()\r\n              : (() => {\r\n                  // Inline definition for PROJECTILE firework speed calculation\r\n                  let speed;\r\n                  if (size >= 1 && size < 7) {\r\n                    speed = p.random(1, 9);\r\n                  } else if (size >= 7 && size < 9) {\r\n                    speed = p.random(8, 9);\r\n                  } else if (size >= 10 && size < 12) {\r\n                    speed = p.random(9, 9.2);\r\n                  } else {\r\n                    speed = p.random(1, 4);\r\n                  }\r\n                  return adjustForScreenWidth(speed);\r\n                })();\r\n            \r\n            // Function to adjust speed based on screen size\r\n            function adjustForScreenWidth(speed) {\r\n              let screenWidth = p.windowWidth;\r\n              let screenMultiplier = 1; // Default multiplier\r\n            \r\n              if (screenWidth < 768) {\r\n                screenMultiplier = p.random(1.8, 2.6);\r\n              } else if (screenWidth >= 768 && screenWidth <= 1024) {\r\n                screenMultiplier = p.random(1.6, 2.2);\r\n              } else if (screenWidth > 1024) {\r\n                screenMultiplier = p.random(1.2, 2.2);\r\n              } \r\n              return speed * screenMultiplier;\r\n            }\r\n          \r\n              let angle = p.random(p.TWO_PI);\r\n              let velocity = p.createVector(p.cos(angle), p.sin(angle)).mult(speed);\r\n              \r\n              // Apply a smaller influence from firework velocity if particle is in line with the projectile\r\n              let angleDiff = Math.abs(p.atan2(velocity.y, velocity.x) - p.atan2(initialVel.y, initialVel.x));\r\n              \r\n              // If angle difference is small (i.e., the particle is moving along the same vector as the firework's trajectory), apply less multiplier\r\n              let velocityMultiplier = angleDiff < p.HALF_PI / 4 ? p.random(0, 0.5) : p.random(0.5, 0.8);\r\n              velocity.add(initialVel.mult(velocityMultiplier)); // Small influence from projectile velocity\r\n          \r\n              let hasTrail = size > 6; // Larger particles have trails\r\n                  \r\n              let type = 'BLINKING';\r\n              let particle = new Particle(\r\n                this.firework.pos.x + p.random(-2, 6),\r\n                this.firework.pos.y + p.random(-2, 6),\r\n                this.col,\r\n                false,\r\n                size,\r\n                type,\r\n                hasTrail\r\n              );\r\n                  \r\n              particle.vel = velocity;\r\n              this.particles.push(particle);\r\n            }\r\n            this.exploded = true;\r\n            this.explosionStartTime = p.millis();\r\n          }\r\n          \r\n          update() {\r\n            if (!this.exploded) {\r\n              let direction = p.createVector(this.targetX - this.firework.pos.x, this.targetY - this.firework.pos.y);\r\n              direction.normalize();\r\n              let launchSpeed;\r\n                if (p.windowWidth < 768) {\r\n                  launchSpeed = p.random(6, 11);\r\n                } else if (p.windowWidth <= 1024) {\r\n                  launchSpeed = p.random(5, 9); // Moderate speed boost for medium screens\r\n                } else {\r\n                  launchSpeed = p.random(3, 8);\r\n                }\r\n\r\n              direction.mult(launchSpeed);\r\n              this.firework.vel = direction;\r\n              this.firework.update();\r\n              if (p.dist(this.firework.pos.x, this.firework.pos.y, this.targetX, this.targetY) < 10) {\r\n                this.explode();\r\n              }\r\n            }\r\n            for (let i = this.particles.length - 1; i >= 0; i--) {\r\n              let particle = this.particles[i];\r\n              particle.applyForce(p.createVector(0, 0.160));  // Apply gravity force\r\n              particle.update();\r\n              if (particle.isDone()) {\r\n                this.particles.splice(i, 1);\r\n              }\r\n            }\r\n          }\r\n\r\n          show() {\r\n            if (!this.exploded) {\r\n              this.firework.show();\r\n            }\r\n            for (let particle of this.particles) {\r\n              particle.show();\r\n            }\r\n          }\r\n        }\r\n\r\n        function addNewFirework(fireworkType) {\r\n\r\n          const startX = p.width / 2;\r\n          const startY = p.height;\r\n\r\n          const selectedAlt1 = latestItems.current?.[0]?.alt1 || '';\r\n          const colorArray = latestColorMapping.current[selectedAlt1] || [];\r\n\r\n          // Early exit if no colors are available\r\n          if (!colorArray.length) {\r\n            console.warn(`No colors available for alt1: '${selectedAlt1}'`);\r\n            return;\r\n          }\r\n\r\n          let topColorCount;\r\n          if (p.windowWidth >= 1025) {\r\n            topColorCount = 3;\r\n          } else if (p.windowWidth >= 768) {\r\n            topColorCount = 2;\r\n          } else {\r\n            topColorCount = 1;\r\n          }\r\n\r\n          // Safely extract just 0, 1, and 3 (skip index 2)\r\n          const usableColors = [\r\n            colorArray[0],\r\n            colorArray[1],\r\n            colorArray[3],\r\n          ].filter(Boolean); // filter out undefined if array is incomplete\r\n          if (usableColors.length === 0) return;\r\n\r\n          const randomHex = usableColors[Math.floor(p.random(usableColors.length))]; // Pick one color\r\n\r\n          const brightnessMultiplier = p.random(1, 1.4);\r\n          const adjustedHex = adjustBrightness(randomHex, brightnessMultiplier);\r\n          const fireworkColor = p.color(adjustedHex);\r\n\r\n          const targetX = p.width / 2 + p.random(-50, 50);\r\n          const targetY = fireworkType === 'BLINKING' ? p.height * 0.2 : p.height * 0.7;\r\n\r\n          lastLaunchPosition = p.createVector(targetX, targetY);\r\n          fireworks.push(new Firework(startX, startY, targetX, targetY, fireworkColor, fireworkType));\r\n        }\r\n\r\n        p.setup = () => {\r\n          p.createCanvas(p.windowWidth, p.windowHeight);\r\n          const firstFireworkType = Math.random() < 0.5 ? 'BLINKING' : 'PROJECTILE'; // Randomize first firework type\r\n          addNewFirework(firstFireworkType); // Launch the first firework\r\n          lastFireworkTime = p.millis(); // Reset lastFireworkTime after the first launch\r\n        };      \r\n\r\n        hiddenDurationRef.current = 0;\r\n        lastFireworkTime = 0;\r\n        \r\n        let fireworkToggle = true; // Starts with BLINKING\r\n        let nextFireworkDelay = p.random(3000, 7000); // Random delay between 2000ms and 5000ms\r\n\r\n        p.draw = () => {\r\n          if (isRealMobileRef.current) {\r\n            p.clear(); // transparent\r\n          } else {\r\n            p.background('#1e1e1f'); // fallback\r\n          }\r\n            \r\n          if (!fireworksEnabledRef.current) {\r\n            fireworksRef.current.length = 0;\r\n            return;\r\n          }\r\n\r\n          for (let firework of fireworks) {\r\n            firework.update();\r\n            firework.show();\r\n          }\r\n\r\n          const adjustedTime = p.millis() - hiddenDurationRef.current;\r\n\r\n          // Fix: fallback in case adjustedTime went backward or got corrupted\r\n          if (adjustedTime < lastFireworkTime) {\r\n            console.warn(\"Adjusted time went backward or stale. Forcing firework reset.\");\r\n            lastFireworkTime = adjustedTime - nextFireworkDelay - 1;\r\n          }\r\n\r\n          // Regular triggering condition\r\n          if (adjustedTime - lastFireworkTime > nextFireworkDelay) {\r\n            const fireworkType = fireworkToggle ? 'BLINKING' : 'PROJECTILE';\r\n            addNewFirework(fireworkType);\r\n            fireworkToggle = !fireworkToggle;\r\n            lastFireworkTime = adjustedTime;\r\n            nextFireworkDelay = p.random(2000, 8000);\r\n          }\r\n        };\r\n      };\r\n      \r\n    p5InstanceRef.current = new q5(sketch, canvasRef.current);\r\n\r\n    return () => {\r\n      destroyed = true;\r\n      if (p5InstanceRef.current) {\r\n        p5InstanceRef.current.remove();\r\n        p5InstanceRef.current = null;\r\n      }\r\n      fireworksRef.current = [];\r\n    };\r\n  }, []);\r\n\r\n  const toggleFireworks = useCallback((isEnabled) => {\r\n    setFireworksEnabled(isEnabled);\r\n    fireworksEnabledRef.current = isEnabled; // update live value for q5\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (onToggleFireworks) {\r\n      onToggleFireworks(toggleFireworks);\r\n    }\r\n  }, [onToggleFireworks, toggleFireworks]); // Ensure dependencies are stable  \r\n\r\n  return <div ref={canvasRef}></div>;\r\n};\r\n\r\nexport default FireworksDisplay;","import React, { useState, useRef, useEffect, useMemo } from 'react';\r\n// pull from preloader (images only)\r\nimport { getPreloadedDynamicApp, ensureImagesPreload } from '../preload-dynamic-app';\r\nimport { useStyleInjection } from '../../utils/context-providers/style-injector';\r\nimport sortByCss from '../../styles/dynamic-app/sortByStyles.css?raw';\r\n\r\nconst options = [\r\n  { value: 'random',   label: 'Randomized' },\r\n  { value: 'titleAsc', label: 'A to Z' },\r\n  { value: 'titleDesc',label: 'Z to A' },\r\n];\r\n\r\nconst shuffleArray = (arr) => {\r\n  const a = [...arr];\r\n  for (let i = a.length - 1; i > 0; i--) {\r\n    const j = Math.floor(Math.random() * (i + 1));\r\n    [a[i], a[j]] = [a[j], a[i]];\r\n  }\r\n  return a;\r\n};\r\n\r\nfunction localSort(data, mode) {\r\n  if (!Array.isArray(data)) return [];\r\n  switch (mode) {\r\n    case 'titleAsc':\r\n      return [...data].sort((a, b) => (a?.title || '').localeCompare(b?.title || ''));\r\n    case 'titleDesc':\r\n      return [...data].sort((a, b) => (b?.title || '').localeCompare(a?.title || ''));\r\n    case 'random':\r\n    default:\r\n      return shuffleArray(data);\r\n  }\r\n}\r\n\r\nfunction SortBy({\r\n  onFetchItems,\r\n  customArrowIcon,\r\n  colorMapping,\r\n  getRoot = () => document,\r\n}) {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [selectedValue, setSelectedValue] = useState('random');\r\n\r\n  // force re-shuffle even when already on \"random\"\r\n  const [randomTick, setRandomTick] = useState(0);\r\n\r\n  const [baseItems, setBaseItems] = useState([]);\r\n  const [items, setItems] = useState([]);\r\n\r\n  const dropdownRef = useRef(null);\r\n\r\n  // inject CSS into shadow root (or document)\r\n  useStyleInjection(sortByCss, 'dynamic-app-style-sortby');\r\n\r\n  const handleOptionClick = (value) => {\r\n    setSelectedValue(value);\r\n    if (value === 'random') setRandomTick(t => t + 1); // re-shuffle on every click\r\n    setIsOpen(false);\r\n  };\r\n\r\n  const handleClickOutside = (e) => {\r\n    const root = typeof getRoot === 'function' ? getRoot() : document;\r\n    const pauseButton = root.querySelector?.('.lottie-container');\r\n    const target = e.target;\r\n    if (\r\n      dropdownRef.current &&\r\n      target &&\r\n      !dropdownRef.current.contains(target) &&\r\n      (!pauseButton || !pauseButton.contains(target))\r\n    ) {\r\n      setIsOpen(false);\r\n    }\r\n  };\r\n\r\n  // click-outside listener bound to the same root as the UI\r\n  useEffect(() => {\r\n    const root = typeof getRoot === 'function' ? getRoot() : document;\r\n    root.addEventListener?.('mousedown', handleClickOutside);\r\n    return () => root.removeEventListener?.('mousedown', handleClickOutside);\r\n  }, [getRoot]);\r\n\r\n  // 1) Get images from preload cache (or ensure preload if empty)\r\n  useEffect(() => {\r\n    let cancelled = false;\r\n    const cached = getPreloadedDynamicApp();\r\n\r\n    if (cached.images?.length) {\r\n      if (!cancelled) setBaseItems(cached.images);\r\n    } else {\r\n      ensureImagesPreload()\r\n        .then((images) => { if (!cancelled) setBaseItems(images || []); })\r\n        .catch(() => { if (!cancelled) setBaseItems([]); });\r\n    }\r\n\r\n    return () => { cancelled = true; };\r\n  }, []);\r\n\r\n  // 2) Derive items whenever base or sort option changes\r\n  //    When random is selected, reshuffle on every randomTick bump\r\n  useEffect(() => {\r\n    let derived = [];\r\n    if (selectedValue === 'random') {\r\n      derived = shuffleArray(baseItems);\r\n    } else {\r\n      derived = localSort(baseItems, selectedValue);\r\n    }\r\n    setItems(derived);\r\n    onFetchItems?.(derived);\r\n  }, [baseItems, selectedValue, randomTick, onFetchItems]);\r\n\r\n  // Responsive index logic for color sampling\r\n  const [screenWidth, setScreenWidth] = useState(\r\n    typeof window !== 'undefined' ? window.innerWidth : 1200\r\n  );\r\n  useEffect(() => {\r\n    const onResize = () => setScreenWidth(window.innerWidth);\r\n    window.addEventListener('resize', onResize);\r\n    return () => window.removeEventListener('resize', onResize);\r\n  }, []);\r\n  const itemIndex = screenWidth >= 1025 ? 2 : screenWidth >= 768 ? 1 : 0;\r\n\r\n  const convertHexToRGBA = (hex, alpha) => {\r\n    const h = (hex || '#ffffff').replace('#', '');\r\n    const r = parseInt(h.slice(0, 2) || 'ff', 16);\r\n    const g = parseInt(h.slice(2, 4) || 'ff', 16);\r\n    const b = parseInt(h.slice(4, 6) || 'ff', 16);\r\n    return `rgba(${r}, ${g}, ${b}, ${alpha})`;\r\n  };\r\n\r\n  const borderItemColor = useMemo(() => {\r\n    const alt = items[itemIndex]?.alt1;\r\n    const color = Array.isArray(colorMapping?.[alt]) ? colorMapping[alt][2] : '#ffffff';\r\n    return convertHexToRGBA(color, 0.8);\r\n  }, [items, colorMapping, itemIndex]);\r\n\r\n  const boxShadowItemColor = useMemo(() => {\r\n    const alt = items[itemIndex]?.alt1;\r\n    return Array.isArray(colorMapping?.[alt]) ? colorMapping[alt][3] : '#ffffff';\r\n  }, [items, colorMapping, itemIndex]);\r\n\r\n  return (\r\n    <div className=\"sort-by-container\">\r\n      <div className=\"sort-container\"><p>Sort by:</p></div>\r\n      <div className=\"sort-container2\">\r\n        <div\r\n          className=\"custom-dropdown\"\r\n          ref={dropdownRef}\r\n          style={{\r\n            border: `solid 1.6px ${borderItemColor}`,\r\n            boxShadow: `0 1px 8px rgba(0,0,0,0.1), 0 22px 8px rgba(0,0,0,0.08), 12px 12px ${boxShadowItemColor}`,\r\n          }}\r\n        >\r\n          <div className=\"custom-select\" onClick={() => setIsOpen(!isOpen)}>\r\n            <div className=\"selected-value\">\r\n              <h5>{options.find(opt => opt.value === selectedValue)?.label}</h5>\r\n            </div>\r\n            <span className={`custom-arrow ${isOpen ? 'open' : ''}`}>\r\n              {customArrowIcon && <div dangerouslySetInnerHTML={{ __html: customArrowIcon }} />}\r\n            </span>\r\n          </div>\r\n\r\n          {isOpen && (\r\n            <div\r\n              className=\"options-container\"\r\n              style={{ border: `solid 1.6px ${borderItemColor}`, borderTop: 'none' }}\r\n            >\r\n              {options.map((option) => (\r\n                <div\r\n                  key={option.value}\r\n                  className={`option ${option.value === selectedValue ? 'selected' : ''}`}\r\n                  onClick={() => handleOptionClick(option.value)}\r\n                >\r\n                  {option.label}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SortBy;\r\n","export default \"/* Sort by filtering styles for mobile devices */\\r\\n/* Global */\\r\\n.sort-by-divider {padding-left: 1.6em; padding-right: 1.6em; display: flex; justify-content: space-between; flex-wrap: wrap; align-items: flex-end; z-index: 350; position: relative; }\\r\\n.lottie-container {cursor: pointer;} \\r\\n.custom-dropdown:hover div.selected-value, .custom-dropdown:hover span.custom-arrow {scale: 1.02; transition: ease-in 0.1s;}\\r\\n.students-heading, .sort-container, .selected-value h5 {pointer-events: none; user-select: none; touch-action: none;}\\r\\ndiv.option.selected {background-color: #323235;}\\r\\n\\r\\n/* Sort by filtering for mobile devices */\\r\\n@media screen and (max-width: 370px) {\\r\\n#shadow-dynamic-app .sort-container2, .sort-container2 {min-width: 130% !important;}\\r\\n}\\r\\n@media screen and (max-width: 767px) { \\r\\n/* Sort by general styles */    \\r\\n#sort {width: 100%; height: 14.4vw; border-radius: 1px; padding-left: 16px;}\\r\\n.sort-by-container {width: clamp(48%, 48vw, 48%); display: flex; align-items: center; z-index: 10; position: relative;flex-direction: column; align-items: center; padding-right: 12px; padding-top: 8px;}\\r\\n.sort-container2 {min-width: 100%; align-items: center;} \\r\\n\\r\\n#shadow-dynamic-app .sort-container , .sort-container {display: none;}\\r\\n\\r\\n#shadow-dynamic-app  .sort-container2 {min-width: 120%; align-items: center;}\\r\\n\\r\\n.sort-by-divider, #shadow-dynamic-app .sort-by-divider {gap: 24px; flex-direction: column; align-items: center; padding-left: 0em; padding-right: 0.4em;}\\r\\n\\r\\n/* Drop-down */\\r\\n.custom-dropdown {border-radius: 2px; position: relative; cursor: pointer; background: #222222; \\r\\nappearance: none; -webkit-appearance: none; -moz-appearance: none;}\\r\\n\\r\\n/* Arrow state */\\r\\n.custom-arrow {position: absolute; right: 18px; top: 50%; transform: translateY(-50%); pointer-events: none;}\\r\\n.custom-arrow div {width: 17px; height: 17px;}\\r\\n.custom-arrow.open {transform: translateY(-50%) rotate(180deg);}\\r\\n\\r\\n/* Selected option style changes */\\r\\n.selected-value {padding: 18px 18px 18px 22px;}\\r\\n.option, div.option.selected {color: #ffffff; margin-top: 2px; margin-bottom: 2px; font-size: clamp(16px, 0.8em, 32px); font-family: 'rubik'; font-weight: 300; letter-spacing: 0.4px; padding-left: 16px; }\\r\\n.option {padding-bottom: 8px; padding-top: 8px;}\\r\\n.option:hover {scale: 1.02; transition: 0.05s ease-in; transform: translateX(2px);}\\r\\ndiv.option.selected:hover {scale: 1; transform: translateX(0px);}\\r\\n.option {padding-bottom: 12px; padding-top: 12px;} div.option.selected {padding-top: 16px; padding-bottom: 16px;}\\r\\n.options-container {position: absolute; z-index: 1000; background: #202020; width: 100%; right: -1.8px;  top: calc(100% - 8px); padding-top: 8px; padding-bottom: 8px; border-bottom-left-radius: 2px; border-bottom-right-radius: 2px;}\\r\\n\\r\\n#shadow-dynamic-app div.option.selected {padding-bottom: 10px; padding-top: 10px;} \\r\\n#shadow-dynamic-app .option, #shadow-dynamic-app  div.option.selected {font-size: clamp(14px, 0.75em, 28px);}\\r\\n/* Students Heading */\\r\\n.students-heading {position: relative; top: 24px; }\\r\\n\\r\\n/* Pause Button styles */\\r\\n.pause-button-wrapper {padding-bottom: 3.6em; padding-left: 1.6em; }\\r\\n#shadow-dynamic-app .pause-button-wrapper {padding-bottom: 2.4em;}\\r\\n.lottie-container {width: 2.4em; height: 2.4em; z-index: 100; position: relative; top: 1.2em;}\\r\\n#shadow-dynamic-app .lottie-container {width: 3em; height: 3em; top: 0.8em;}\\r\\n}\\r\\n\\r\\n/* Sort by filtering for tablet devices */\\r\\n@media screen and (min-width: 768px) and (max-width: 1024px) { \\r\\n/* Sort by general styles */  \\r\\n#shadow-dynamic-app .sort-by-divider {padding-left: 4em; padding-right: 6.2em; }\\r\\n.sort-by-divider {padding-top: 2.8em; padding-left: 2.8em; padding-right: 5.4em; z-index: 350; position: relative;}\\r\\n#sort {width: 100%; height: 14.4vw; border-radius: 1px; padding-left: 16px;}\\r\\n.sort-by-container {display: flex; align-items: center; z-index: 10; position: relative;flex-direction: column; align-items: center; padding-right: 16px; min-width: 26%;}\\r\\n#shadow-dynamic-app .sort-by-container {min-width: 32%;}\\r\\n.sort-container2 {min-width: 100%; align-self: flex-end;} \\r\\n.sort-container {align-self: flex-start; position: relative; bottom: -6px; left: 4px;}\\r\\n\\r\\n/* Drop-down */\\r\\n.custom-dropdown {border-radius: 2px; position: relative; font-size: 16px; cursor: pointer; box-shadow: 12px 12px #b1c9bb; background: #222222; \\r\\nappearance: none; -webkit-appearance: none; -moz-appearance: none; }\\r\\n\\r\\n/* Arrow state */\\r\\n.custom-arrow {position: absolute; right: 20px; top: 50%; transform: translateY(-50%); pointer-events: none;}\\r\\n.custom-arrow div {width: 15px; height: 15px;}\\r\\n#shadow-dynamic-app .custom-arrow div {width: 1em; height: 1em;}\\r\\n#shadow-dynamic-app .custom-arrow {top: 46%;}\\r\\n#shadow-dynamic-app .custom-arrow.open {top: 50%;}\\r\\n.custom-arrow.open {transform: translateY(-50%) rotate(180deg);}\\r\\n\\r\\n/* Selected option style changes */\\r\\n.selected-value {padding: 16px 16px 16px 20px;}\\r\\n#shadow-dynamic-app .selected-value {padding: 12px 12px 12px 16px;}\\r\\n.option, div.option.selected {color: #ffffff; font-size: clamp(8px, 1em, 16px); font-family: 'rubik'; font-weight: 300; letter-spacing: 0.4px; padding-left: 20px;}\\r\\n#shadow-dynamic-app div.option.selected {padding-top: 12px; padding-bottom: 12px; }\\r\\n#shadow-dynamic-app .option {padding-bottom: 10px; padding-top: 10px;}\\r\\n#shadow-dynamic-app .option.selected, #shadow-dynamic-app .option {font-size: clamp(6px, 0.9em, 14px); padding-left: 14px;}\\r\\n.option:hover {scale: 1.02; transition: 0.05s ease-in; transform: translateX(2px);}\\r\\ndiv.option.selected:hover {scale: 1; transform: translateX(0px);}\\r\\n.option {padding-bottom: 16px; padding-top: 16px;} div.option.selected {padding-top: 18px; padding-bottom: 18px;}\\r\\n.options-container {position: absolute; z-index: 1000; background: #222222; width: 100%; right: -1.6px;  top: calc(100% - 6px); padding-top: 8px; padding-bottom: 8px; border-bottom-left-radius: 2px; border-bottom-right-radius: 2px;}\\r\\n\\r\\n/* Students Heading */\\r\\n.students-heading {position: relative; top: 36px; left: 0.7em;}\\r\\n#shadow-dynamic-app .students-heading { left: 0.75em;}\\r\\n\\r\\n/* Pause Button styles */\\r\\n#shadow-dynamic-app .pause-button-wrapper, .pause-button-wrapper {padding-bottom: 4em; padding-left: 2.4em;}\\r\\n#shadow-dynamic-app .lottie-container {width: 2.6em; height: 2.6em;}\\r\\n.lottie-container {width: 2.4em; height: 2.4em; z-index: 100; position: relative;}\\r\\n}\\r\\n\\r\\n/* Sort by filtering for desktop */\\r\\n@media screen and (min-width: 1025px) { \\r\\n/* Sort by general styles */  \\r\\n.sort-by-divider {padding-right: 3.2em; padding-top: 3.2em;}\\r\\n#sort {width: 100%; height: 14.4vw; border-radius: 1px; padding-left: 16px;}\\r\\n.sort-by-container {display: flex; z-index: 10; position: relative; flex-direction: column; align-items: center; padding-right: 0px; width: 50%;}\\r\\n.sort-container2 {width: clamp(34%, 3em, 240px); align-self: flex-end;} \\r\\n.sort-container {width: clamp(34%, 3em, 240px); align-self: flex-end; position: relative; bottom: -4px; left: 4px;}\\r\\n\\r\\n/* Drop-down */\\r\\n.custom-dropdown {position: relative; cursor: pointer; box-shadow: 12px 12px #b1c9bb; background: #222222; \\r\\nappearance: none; -webkit-appearance: none; -moz-appearance: none; border-radius: 2px;}\\r\\n/* Arrow state */\\r\\n.custom-arrow {position: absolute; right: 14px; top: 50%; transform: translateY(-50%); pointer-events: none;}\\r\\n.custom-arrow div {width: 16px; height: 16px;}\\r\\n.custom-arrow.open {transform: translateY(-50%) rotate(180deg);}\\r\\n\\r\\n/* Selected option style changes */\\r\\n.selected-value {padding: 14px 13px 15px 19px;}\\r\\n.option, div.option.selected {color: #ffffff; margin-top: 2px; margin-bottom: 2px; font-size: clamp(16px, 1.4em, 20px); font-family: 'rubik'; font-weight: 300; letter-spacing: 0.4px; padding-left: 20px;}\\r\\n.option:hover {scale: 1.02; transition: 0.05s ease-in; transform: translateX(2px);}\\r\\ndiv.option.selected:hover {scale: 1; transform: translateX(0px);}\\r\\n.option {padding-bottom: 8px; padding-top: 8px;} div.option.selected {padding-top: 12px; padding-bottom: 12px;}\\r\\n.options-container {position: absolute; z-index: 1000; background: #222222; width: 100%; right: -1.6px;  top: calc(100% - 8px); padding-top: 8px; padding-bottom: 8px; border-bottom-left-radius: 2px; border-bottom-right-radius: 2px;}\\r\\n\\r\\n/* Students Heading */\\r\\n.students-heading {position: relative; top: 28px;}\\r\\n\\r\\n/* Pause Button styles */\\r\\n.pause-button-wrapper {padding-left: 20%; padding-top: 24px;}\\r\\n.lottie-container {width: 2.4em; height: 2.4em; z-index: 100; position: relative;}\\r\\n#shadow-dynamic-app .lottie-container {width: 2.6em; height: 2.6em; z-index: 100;}\\r\\n\\r\\n#shadow-dynamic-app .sort-by-container {transform: scale(0.8);}\\r\\n#shadow-dynamic-app .sort-by-divider {padding-left: 8.8em; padding-right: 8.8em; padding-bottom: 1.6em; padding-top: 1.6em;}\\r\\n#shadow-dynamic-app .sort-container2, #shadow-dynamic-app .sort-container  {min-width: 176px;} \\r\\n#shadow-dynamic-app .custom-arrow {top: 50%;}\\r\\n#shadow-dynamic-app .pause-button-wrapper {padding-left: 16.8em; padding-top: 2.4em;}\\r\\n#shadow-dynamic-app .students-heading {left: 0px;}\\r\\n#shadow-dynamic-app span.custom-arrow.open {transform: translateY(-50%) rotate(180deg) !important; top: 50% !important;}\\r\\n}\\r\\n\\r\\n@media screen and (min-width: 1175px) and (max-width: 1574px) {\\r\\n.sort-container, .sort-container2 {width: clamp(40%, 3em, 240px);}\\r\\n}\\r\\n\\r\\n@media screen and (min-width: 1575px) and (max-width: 2024px) {\\r\\n.sort-container, .sort-container2 {width: clamp(35%, 3em, 240px);}\\r\\n}\\r\\n\\r\\n@media screen and (min-width: 2025px) { \\r\\n#shadow-dynamic-app .sort-by-container {transform: scale(0.95) !important;}\\r\\n#shadow-dynamic-app .sort-container2, #shadow-dynamic-app .sort-container {min-width: 33% !important;}\\r\\n.sort-by-container {transform: scale(1.1) !important; align-content: flex-end; flex-wrap: wrap; margin-right: 3%;}\\r\\n.sort-container2, .sort-container {min-width: 30% !important; width: clamp(30%, 3em, 240px);}\\r\\n.sort-by-divider {padding-top: 96px; padding-left: 4%; padding-right: 4%;}\\r\\n#shadow-dynamic-app .sort-by-divider {padding-left: 8em; padding-right: 8em; padding-top: 16em !important; padding-bottom: 1.2em; padding-top: 0px;}\\r\\n.selected-value {padding: 16px 14px 16px 21px;}\\r\\n#shadow-dynamic-app .students-heading {left: 48px;}\\r\\n.sort-by-divider {padding-top: 256px;}\\r\\n.lottie-container {width: 4.2m; height: 4.2em;}\\r\\n}\";","export default \"/* Global Styles for UI-cards (homepage) */\\r\\n.image-container:hover .title-text, .image-container:hover .svg-icon {scale: 1.04; transition: scale 0.1s ease-in;}\\r\\n.image-container:hover, .image-container2:hover {scale: 1.03;}\\r\\n\\r\\n/* Homepage and UI-card styles for mobile  */\\r\\n@media screen and (max-width: 767px) {\\r\\n.homePage-container { background-color: #1e1e1f;}\\r\\n.card-divider {padding-left: 0.8em; padding-right: 0.8em;}\\r\\n.card-container {display: block; height: 36em;}\\r\\n.UI-card-divider {padding-top: 1.2em; z-index: 300;}   \\r\\n#shadow-dynamic-app .UI-card-divider { padding-top: 2.4em;}   \\r\\n#shadow-dynamic-app .card-container {height: 44em;}  \\r\\n\\r\\n/* For profile photos */\\r\\n.image-container img {width: 100%; height: 30em; object-fit: cover; border-radius: 2px; box-shadow: 2px 2px 5px rgba(19, 19, 19, 0.1), 4px 4px 10px rgba(28, 28, 28, 0.2);}\\r\\n.image-container {position: relative; display: flex; flex-direction: column; width: 80%; padding-left: 1.6em; }\\r\\n\\r\\n/* For illustration */\\r\\n.image-container2 img {width: 100%; height: 30em; object-fit: cover; border-radius: 2px;}\\r\\n.image-container2 {position: relative; display: flex; scale: 1.02; flex-direction: column; z-index: 1; width: 80%; padding-left: 10%;}\\r\\n\\r\\n/* Link hit box styles */\\r\\n.ui-link-3::after {content: ''; position: absolute; top: 0; width: 89%; margin-left: 11%; border-radius: 2px; left: 0; height: 30em; background: linear-gradient(to bottom, rgba(0, 0, 0, 0) 78%, rgba(0, 0, 0, 0.753));}\\r\\n.ui-link, .ui-link-3 {width: 100%;}\\r\\n#shadow-dynamic-app .image-container img, #shadow-dynamic-app .image-container2 img, #shadow-dynamic-app .ui-link-3::after { height: 36em;} \\r\\n\\r\\n/* Card title and icon */\\r\\nh-name, h-name a {flex-grow: 1; display: flex; justify-content: space-between; align-items: center; position: relative; color: white; margin-top: auto; z-index: 10; bottom: 1.35em; }\\r\\n.title-text { padding-left: 16px; position: absolute;} \\r\\n.svg-icon { width: 0.9em; height: 1em; padding-right: 16px; display: inline-block; margin-left: auto;} .svg-icon:hover {transform: translateX(2px); transition: transform 150ms ease-out;}\\r\\n#shadow-dynamic-app .svg-icon { height: 1.3em;}  \\r\\n}\\r\\n\\r\\n/* Homepage and UI-card styles for tablet */\\r\\n@media screen and (min-width: 768px) and (max-width: 1024px) {\\r\\n.homePage-container {background-color: #1a1a1a;}\\r\\n.card-divider {padding-left: 0.8em; padding-right: 0.8em;}\\r\\n.UI-card-divider {top: 24em; position: relative; padding-top: 5.6em; z-index: 300; display: grid; grid-template-columns: repeat(2, 1fr); padding-left: 6%; padding-right: 6%;}   \\r\\n.card-container {margin-top: -26em; display: block; height: 100%; }\\r\\n \\r\\n/* For profile photo */\\r\\n.image-container img {height: 30em; width: 80%; margin-left: 10%; object-fit: cover; border-radius: 2px; box-shadow: 0 4px 6px rgba(32, 32, 32, 0.08), 0 1px 3px rgba(33, 34, 32, 0.08);}\\r\\n.image-container {position: relative; display: flex; flex-direction: column;}\\r\\n\\r\\n/* For illustration */\\r\\n.image-container2 img {height: 30em; width: 80%; margin-left: 10%; object-fit: cover; border-radius: 2px; object-fit: cover;}\\r\\n.image-container2 {position: relative; display: flex; flex-direction: column; z-index: 1;}\\r\\n\\r\\n/* Link hit box styles */\\r\\n.ui-link-3::after {width: 80%; margin-left: 10%; height: 30em; content: ''; position: absolute; border-radius: 2px; top: 0; left: 0; background: linear-gradient(to bottom, rgba(0, 0, 0, 0) 78%, rgba(0, 0, 0, 0.753));}\\r\\n.ui-link {width: 100%;}\\r\\n\\r\\n/* Card title and icon */\\r\\nh-name, h-name a {padding-left: 6%; width: 84%; flex-grow: 1; display: flex; justify-content: space-between; align-items: center; position: relative; color: white; margin-top: auto; z-index: 10; bottom: 1.2em; padding-right: 0px;}\\r\\n.title-text {padding-left: 16px; position: absolute;}\\r\\n.svg-icon {width: 1em; height: 1em; padding-right: 20px; display: inline-block; margin-left: auto;} .svg-icon:hover {transform: translateX(2px); transition: transform 150ms ease-out;}\\r\\n#shadow-dynamic-app .title-text {padding-left: 20px;}\\r\\n#shadow-dynamic-app .svg-icon {padding-right: 2%; transform: translateY(-3px); width: 1.1em; } \\r\\n#shadow-dynamic-app .homePage-container {background-color: transparent;}\\r\\n#shadow-dynamic-app .UI-card-divider {top: 18.6em; padding-left: 3.6em; padding-right: 3.6em;}\\r\\n#shadow-dynamic-app .image-container img,  #shadow-dynamic-app .image-container2 img, #shadow-dynamic-app .ui-link-3::after {height: 24em; width: 76%; margin-left: 12%;} \\r\\n#shadow-dynamic-app .card-container {padding-bottom: 1.4em !important; margin-top: -20em;}\\r\\n}\\r\\n\\r\\n\\r\\n/* Homepage and UI-card styles for desktop */\\r\\n@media screen and (min-width: 1025px) {\\r\\n.homePage-container {background-color: #1a1a1a;}\\r\\n.card-divider {padding-left: 0.8em; padding-right: 0.8em;}\\r\\n.UI-card-divider {top: 26.4em; position: relative; padding-top: 4.4em; z-index: 300; display: grid; grid-template-columns: repeat(3, 1fr); gap: 32px;}   \\r\\n.card-container {margin-top: -28em; display: block; height: 100%; padding-bottom: 4.6em;}\\r\\n\\r\\n/* For profile photo */\\r\\n.image-container img {width: 92%; object-fit: cover; height: 28em; border-radius: 4px; box-shadow: 0 4px 6px rgba(32, 32, 32, 0.08), 0 1px 3px rgba(33, 34, 32, 0.08);}\\r\\n.image-container {position: relative; display: flex; flex-direction: column;}\\r\\n\\r\\n/* For illustration */\\r\\n.image-container2 img {width: 92%; height: 28em; object-fit: cover; border-radius: 4px;}\\r\\n.image-container2 {position: relative; display: flex; flex-direction: column; z-index: 1;}\\r\\n\\r\\n/* Link hit box styles */\\r\\n.ui-link-3::after {content: '';position: absolute; border-radius: 4px; top: 0; left: 0; width: 92%; height: 28em; background: linear-gradient(to bottom, rgba(0, 0, 0, 0) 78%, rgba(0, 0, 0, 0.753));}\\r\\n.ui-link {width: 100%;}\\r\\n\\r\\n/* Card title and icon */\\r\\nh-name, h-name a {width: 90%; flex-grow: 1; display: flex; justify-content: space-between; align-items: center; position: relative; color: white; margin-top: auto; z-index: 10; bottom: 1.2em; padding-right: 0px;}\\r\\n#shadow-dynamic-app h-name, #shadow-dynamic-app h-name a {width: calc(98% - 20px); bottom: 1.325em;}\\r\\n.title-text {padding-left: 32px; position: absolute;}\\r\\n#shadow-dynamic-app .title-text{padding-left: 20px;}\\r\\n.svg-icon {width: 1.05em; height: 1em; padding-right: 7%; display: inline-block; margin-left: auto;} .svg-icon:hover {transform: translateX(2px); transition: transform 150ms ease-out;}\\r\\n\\r\\n/* Shadow app stylé */\\r\\n#shadow-dynamic-app .homePage-container {background-color: transparent;}\\r\\n#shadow-dynamic-app .UI-card-divider {top: 24em; padding-left: 8em; padding-right: 8em;}\\r\\n#shadow-dynamic-app .image-container img,  #shadow-dynamic-app .image-container2 img, #shadow-dynamic-app .ui-link-3::after {height: 28em;} \\r\\n#shadow-dynamic-app .card-container {padding-bottom: 2.4em !important; margin-top: -28em;}\\r\\n}\\r\\n\\r\\n@media screen and (min-width: 2025px) {\\r\\n.image-container img, .image-container2 img {height: 44em; width: 90%; margin-left: 6%;}\\r\\n#shadow-dynamic-app .image-container img,  #shadow-dynamic-app .image-container2 img, #shadow-dynamic-app .ui-link-3::after {height: 44em;} \\r\\n.card-container {margin-top: -28em; display: block; height: 100%; margin-bottom: -9.6em;}\\r\\n.ui-link-3::after {margin-left: 6%; height: 44em; width: 90%;} \\r\\n#shadow-dynamic-app .ui-link-3::after {width: 90%;}\\r\\n#shadow-dynamic-app .UI-card-divider {padding-top: 7.4em;}\\r\\n.UI-card-divider {padding-top: 4.2em;}\\r\\n#shadow-dynamic-app h-name, #shadow-dynamic-app h-name a {width: 90%;}\\r\\nh-name, h-name a {width: 95%;}\\r\\n#shadow-dynamic-app .svg-icon {height: 1.2em;}\\r\\n.title-text { padding-left: calc(6% + 1.2em);}\\r\\n.ui-link-2 .custom-card-2 .svg-icon { padding-right: calc(7% + 1.2em);}\\r\\nh-name, h-name a {bottom: 1.6em;}\\r\\n }\";","// src/dynamic-app/components/homepage-UIcards.jsx\r\nimport React from 'react';\r\nimport MediaLoader from '../../utils/media-providers/media-loader';\r\nimport { useStyleInjection } from '../../utils/context-providers/style-injector';\r\nimport uiCardsCss from '../../styles/dynamic-app/UIcards.css?raw';\r\n\r\nconst UIcards = React.forwardRef(function UIcards(\r\n  { title, image1, image2, alt1, alt2, url1, className = '', customArrowIcon2 },\r\n  ref\r\n) {\r\n  useStyleInjection(uiCardsCss, 'dynamic-ui-card-style');\r\n\r\n  return (\r\n    <div ref={ref} className={`card-container ${className}`}>\r\n      <div className={`image-container ${className}`}>\r\n        <a href={url1} className={`ui-link ${className}`}>\r\n          <MediaLoader type=\"image\" src={image2} alt={alt1} className={`ui-image1 ${className}`} priority />\r\n        </a>\r\n      </div>\r\n\r\n      <div className={`image-container2 ${className}-2`}>\r\n        <a href={url1} className={`ui-link-3 ${className}`}>\r\n          <MediaLoader type=\"image\" src={image1} alt={alt2} className={`ui-image2 ${className}-2`} priority />\r\n        </a>\r\n\r\n        <h-name className={`image-title ${className}`}>\r\n          <a href={url1} className={`ui-link-2 ${className}`}>\r\n            <span className=\"title-text\">{title}</span>\r\n            {customArrowIcon2 && (\r\n              <div className=\"svg-icon\" dangerouslySetInnerHTML={{ __html: customArrowIcon2 }} />\r\n            )}\r\n          </a>\r\n        </h-name>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nUIcards.displayName = 'UIcards';\r\nexport default UIcards;\r\n","// src/dynamic-app/lib/observedCard.jsx\r\nimport React, { useRef } from 'react';\r\nimport UIcards from '../components/homepage-UIcards';\r\nimport useIntersectionTransform from './shadowObserver';\r\n\r\nfunction ObservedCard({\r\n  data,\r\n  index,\r\n  getShadowRoot,\r\n  pauseAnimation,\r\n  customArrowIcon2,\r\n}) {\r\n  const ref = useRef(null);\r\n\r\n  // The hook will accept whatever you pass — no TS constraint here\r\n  useIntersectionTransform(ref, getShadowRoot, pauseAnimation);\r\n\r\n  return (\r\n    <div ref={ref} className={`custom-card-${index}`}>\r\n      <UIcards\r\n        title={data.title}\r\n        backgroundColor={data.backgroundColor}\r\n        image1={data.image1}\r\n        image2={data.image2}\r\n        alt1={data.alt1}\r\n        alt2={data.alt2}\r\n        url1={data.url1}\r\n        className={`custom-card-${index}`}\r\n        customArrowIcon2={customArrowIcon2}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ObservedCard;\r\n","// useIntersectionTransform.ts\r\nimport { useEffect } from 'react';\r\n\r\nexport default function useIntersectionTransform(\r\n  ref: React.RefObject<HTMLElement>,\r\n  getShadowRoot: () => ShadowRoot | null,\r\n  pauseAnimation: boolean,\r\n  getScrollRoot?: () => Element | null  // 👈 NEW\r\n) {\r\n\r\n  useEffect(() => {\r\n    if (!ref.current || pauseAnimation) return;\r\n\r\n    // Figure out where we live (shadow/dom) and what to use as IO root.\r\n    const shadow = getShadowRoot?.() ?? null;\r\n    const isInShadow = !!shadow;\r\n    const containerEl =\r\n      (typeof getScrollRoot === 'function' && getScrollRoot()) ||\r\n      // prefer your inner scroller if we can find it:\r\n      (isInShadow ? shadow.querySelector('.embedded-app') as Element | null : null) ||\r\n      null; // fallback = viewport\r\n\r\n    // (optional) gate transforms to when pointer is inside shadow host\r\n    let mouseInside = false;\r\n    const hostEl = isInShadow ? (shadow as ShadowRoot).host as HTMLElement : null;\r\n    const onEnter = () => (mouseInside = true);\r\n    const onLeave = () => (mouseInside = false);\r\n    if (hostEl) {\r\n      hostEl.addEventListener('pointerenter', onEnter);\r\n      hostEl.addEventListener('pointerleave', onLeave);\r\n    }\r\n\r\n    const cardEl = ref.current!;\r\n    const imageContainer  = cardEl.querySelector('.image-container')  as HTMLElement | null;\r\n    const imageContainer2 = cardEl.querySelector('.image-container2') as HTMLElement | null;\r\n    if (!imageContainer || !imageContainer2) return;\r\n\r\n    const applyTransform = (percentage: number) => {\r\n      const width =\r\n        containerEl instanceof Element\r\n          ? (containerEl as HTMLElement).clientWidth\r\n          : window.innerWidth;\r\n\r\n      let imageContainerTransform = 'translate(0em, 0em)';\r\n      let imageContainer2Transform = 'translate(1em, -28em)';\r\n      let imageContainerZIndex = '5';\r\n      let imageContainer2ZIndex = '1';\r\n\r\n      if (width <= 767) {\r\n        if (percentage > 0.35 && percentage <= 1) {\r\n          imageContainerTransform = 'translate(0.5em, 1em)';\r\n          imageContainer2Transform = 'translate(0.5em, -32.5em)';\r\n          imageContainerZIndex = '1';\r\n          imageContainer2ZIndex = '5';\r\n        } else if (percentage > 0.15 && percentage <= 0.35) {\r\n          imageContainerTransform = 'translate(1.5em, 0.5em)';\r\n          imageContainer2Transform = 'translate(-0.25em, -34.5em)';\r\n          imageContainerZIndex = '5';\r\n          imageContainer2ZIndex = '1';\r\n        } else if (percentage >= 0 && percentage <= 0.15) {\r\n          imageContainerTransform = 'translate(0em, 0em)';\r\n          imageContainer2Transform = 'translate(0em, -33.5em)';\r\n        }\r\n      } else if (width <= 1024) {\r\n        if (percentage >= 0.3) {\r\n          imageContainerTransform = 'translate(0em, 0em)';\r\n          imageContainer2Transform = 'translate(0em, -23.5em)';\r\n          imageContainerZIndex = '1';\r\n          imageContainer2ZIndex = '5';\r\n        } else if (percentage < 0.3) {\r\n          imageContainerTransform = 'translate(-0.5em, 0em)';\r\n          imageContainer2Transform = 'translate(1em, -23.5em)';\r\n          imageContainerZIndex = '1';\r\n          imageContainer2ZIndex = '5';\r\n        } else if (percentage < 0.1) {\r\n          imageContainerTransform = 'translate(-0.5em, 0em)';\r\n          imageContainer2Transform = 'translate(1em, -23.5em)';\r\n          imageContainerZIndex = '5';\r\n          imageContainer2ZIndex = '1';\r\n        }\r\n      } else if (width > 1025) {\r\n        if (percentage > 0.6 && percentage <= 1) {\r\n          imageContainerTransform = 'translate(1em, 1em)';\r\n          imageContainer2Transform = 'translate(0em, -28.8em)';\r\n          imageContainerZIndex = '1';\r\n          imageContainer2ZIndex = '5';\r\n        } else if (percentage > 0.3 && percentage <= 0.6) {\r\n          imageContainerTransform = 'translate(1.2em, -0.8em)';\r\n          imageContainer2Transform = 'translate(0em, -28em)';\r\n          imageContainerZIndex = '5';\r\n          imageContainer2ZIndex = '1';\r\n        } else if (percentage >= 0 && percentage <= 0.3) {\r\n          imageContainerTransform = 'translate(0em, 0em)';\r\n          imageContainer2Transform = 'translate(1em, -27.4em)';\r\n          imageContainerZIndex = '5';\r\n          imageContainer2ZIndex = '1';\r\n        }\r\n      } else {\r\n        if (percentage > 0.3 && percentage <= 1) {\r\n          imageContainerTransform = 'translate(0em, 0em)';\r\n          imageContainer2Transform = 'translate(1em, -43em)';\r\n          imageContainerZIndex = '1';\r\n          imageContainer2ZIndex = '5';\r\n        } else if (percentage >= 0 && percentage <= 0.3) {\r\n          imageContainerTransform = 'translate(0em, 0em)';\r\n          imageContainer2Transform = 'translate(1em, -43em)';\r\n        }\r\n      }\r\n\r\n      imageContainer.style.transform = imageContainerTransform;\r\n      imageContainer.style.zIndex = imageContainerZIndex;\r\n      imageContainer2.style.transform = imageContainer2Transform;\r\n      imageContainer2.style.zIndex = imageContainer2ZIndex;\r\n    };\r\n\r\n    // IO now uses the scroll container as root (if available)\r\n    const observer = new IntersectionObserver(\r\n      ([entry]) => {\r\n        if (isInShadow && !mouseInside) return;\r\n\r\n        const rect = entry.boundingClientRect;\r\n\r\n        // use the container’s rect/height instead of window\r\n        const rootRect = containerEl\r\n          ? (containerEl as Element).getBoundingClientRect()\r\n          : document.documentElement.getBoundingClientRect();\r\n\r\n        const rootHeight =\r\n          containerEl instanceof Element\r\n            ? (containerEl as HTMLElement).clientHeight\r\n            : window.innerHeight;\r\n\r\n        const rootCenter = rootRect.top + rootHeight;\r\n\r\n        // replicate your old math but relative to the container center\r\n        const percentage = Math.max(\r\n          0,\r\n          Math.min(rect.height, rootCenter - rect.top)\r\n        ) / rect.height;\r\n\r\n        applyTransform(percentage);\r\n      },\r\n      {\r\n        root: containerEl || null, // ← critical change\r\n        threshold: Array.from({ length: 101 }, (_, i) => i / 100),\r\n      }\r\n    );\r\n\r\n    // initial position apply (also relative to container)\r\n    const rect = cardEl.getBoundingClientRect();\r\n    const rootRect = containerEl\r\n      ? (containerEl as Element).getBoundingClientRect()\r\n      : document.documentElement.getBoundingClientRect();\r\n    const rootHeight =\r\n      containerEl instanceof Element\r\n        ? (containerEl as HTMLElement).clientHeight\r\n        : window.innerHeight;\r\n    const rootCenter = rootRect.top + rootHeight / 1.5;\r\n    const initialPct = Math.max(0, Math.min(rect.height, rootCenter - rect.top)) / rect.height;\r\n    applyTransform(initialPct);\r\n\r\n    observer.observe(cardEl);\r\n\r\n    return () => {\r\n      observer.disconnect();\r\n      if (hostEl) {\r\n        hostEl.removeEventListener('pointerenter', onEnter);\r\n        hostEl.removeEventListener('pointerleave', onLeave);\r\n      }\r\n    };\r\n  }, [ref, pauseAnimation, getShadowRoot, getScrollRoot]);\r\n}\r\n","let currentlyActiveAlt1 = null;\r\nlet highestVisibility = 0;\r\nlet debounceTimeout = null;\r\n\r\nconst setupAltObserver = (onActivate, onDeactivate, rootElement = document) => {\r\n  const observerOptions = {\r\n    root: null,\r\n    rootMargin: '0px',\r\n    threshold: Array.from(Array(101).keys(), (x) => x / 100),\r\n  };\r\n\r\n  const observerCallback = (entries) => {\r\n    entries.sort((a, b) => b.intersectionRatio - a.intersectionRatio);\r\n\r\n    entries.forEach((entry) => {\r\n      const element = entry.target;\r\n      const imageElement = element.querySelector('.ui-image1');\r\n\r\n      if (imageElement) {\r\n        const alt1Value = imageElement.getAttribute('alt');\r\n        const visibility = entry.intersectionRatio;\r\n\r\n        if (visibility > 0.1 && visibility > highestVisibility) {\r\n          if (currentlyActiveAlt1 !== alt1Value) {\r\n            if (currentlyActiveAlt1) {\r\n              onDeactivate(currentlyActiveAlt1);\r\n            }\r\n            onActivate(alt1Value);\r\n            currentlyActiveAlt1 = alt1Value;\r\n            highestVisibility = visibility;\r\n          }\r\n        } else if (visibility <= 0.1 && currentlyActiveAlt1 === alt1Value) {\r\n          onDeactivate(alt1Value);\r\n          currentlyActiveAlt1 = null;\r\n          highestVisibility = 0;\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  const observer = new IntersectionObserver(observerCallback, observerOptions);\r\n\r\n  const triggerInitialActivation = () => {\r\n    clearTimeout(debounceTimeout);\r\n    debounceTimeout = setTimeout(() => {\r\n      const cards = Array.from(rootElement.querySelectorAll('.card-container'));\r\n      const entries = cards.map((card) => {\r\n        const boundingRect = card.getBoundingClientRect();\r\n        const viewportHeight = window.innerHeight;\r\n        const visibility = Math.max(\r\n          0,\r\n          Math.min(boundingRect.height, viewportHeight - boundingRect.top) / boundingRect.height\r\n        );\r\n        return {\r\n          target: card,\r\n          intersectionRatio: visibility,\r\n        };\r\n      });\r\n\r\n      observerCallback(entries);\r\n    }, 50);\r\n  };\r\n\r\n  rootElement.querySelectorAll('.card-container').forEach((card) => observer.observe(card));\r\n  triggerInitialActivation();\r\n};\r\n\r\nexport default setupAltObserver;\r\n","import React, { useEffect, useState } from 'react';\r\n\r\nconst RedIntroOverlay = () => {\r\n  const [visible, setVisible] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => setVisible(false), 500);\r\n    return () => clearTimeout(timer);\r\n  }, []);\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        width: '100vw',\r\n        height: '100vh',\r\n        backgroundColor: '#1e1e1f',\r\n        opacity: visible ? 1 : 0,\r\n        pointerEvents: 'none',\r\n        transition: 'opacity 0.4s ease',\r\n        zIndex: 9999,\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default RedIntroOverlay;\r\n","export default \"/* General styles */\\nbody { background-color: #1e1e1f; margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Orbitron', 'Rubik', 'Oxygen','Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;}\\nbody #homePage {background-color: #1e1e1f; }\\ndiv {background-color: transparent;}\\n.no-overflow {overflow: hidden;}\\na { text-decoration: none;}\\n.section-divider, .section-divider2, .section-divider3 {background-color: #1e1e1f;}\\nh-title a {color: #ffffff;}\\nlabel p {color: #dbdbdb;}\\n.lottie-container, .lottie-container:hover { filter: brightness(1.4);}\\n.custom-arrow { filter: brightness(0.8);}\\n\\n#shadow-dynamic-app {background-color: #1e1e1f; padding-left: 1.2em; padding-right: 1.2em; user-select: none; overflow: hidden;} \\n#shadow-dynamic-app .menu-item {display: none;}\\n\\n/* Mobile general styles */\\n@media screen and (max-width: 768px) {\\n\\n/* Padding and spacers for Mobile */  \\n.section-divider { height: 3.6em;} .section-divider2 { height: 2.2em;} .section-divider3 { height: 0.2em; margin-top: -0.6em;}\\n#shadow-dynamic-app {padding-left: 0.8em; padding-right: 0.8em;}\\n#shadow-dynamic-app h5 { font-size: clamp(14.2px, 0.6em, 24px);}\\n#shadow-dynamic-app h4 { font-size: clamp(16px, 1.1em, 28px);}\\n#shadow-dynamic-app h3 { font-size: clamp(19px, 1.4em, 32px);}\\n#shadow-dynamic-app h-name { font-size: clamp(16px, 0.8em, 46px);}\\n#shadow-dynamic-app #homePage {padding-left: 0.4em; }\\n#shadow-dynamic-app .section-divider { height: 0.8em;} \\n\\n/* Fonts */\\nh1 {\\n  font-size: clamp(40px, 3.2em, 116px); \\n  color: #f0f0f0;\\n  font-family: 'Orbitron', 'Oxygen', 'ubuntu', 'Cantarell', sans-serif; \\n  font-weight: 400;\\n  margin-top: 0px; margin-bottom: 4px; line-height: 1.4;\\n}\\n\\nh1 a:hover {font-size: calc(1.1 * clamp(50px, 8vw, 100px));}\\n\\nh2 {\\n  color: #f4f4f4;\\n  font-size: calc(0.9 * clamp(50px, 2.8em, 100px));\\n  font-family: 'rubik';\\n  font-weight: 500;\\n  text-decoration: none; \\n}\\n\\nh-name { \\n  color: #f7f7f7;\\n  font-size: clamp(20px, 1em, 58px);\\n  font-family: 'rubik'; font-weight: 500; letter-spacing: 1.4px;\\n  margin: 0px;\\n}\\n\\nh3 {\\n  color: #f7f7f7;\\n  font-size: clamp(24px, 1.4em, 66px);\\n  font-family: 'rubik'; font-weight: 400; letter-spacing: 1.4px;\\n  margin: 14px 0 12px 0;\\n}\\n\\nh4 {\\n  color: #f5f5f5;\\n  font-size: clamp(21px, 1.2em, 48px);\\n  font-family: 'rubik';\\n  font-weight: 400;\\n  letter-spacing: 0.4px;\\n  margin: 9px 0 11px 0;\\n}\\n\\nh5 {\\n  color: #f6f6f6;\\n  font-size: clamp(16px, 3.6vw, 40px);\\n  font-family: 'rubik';\\n  font-weight: 500;\\n  letter-spacing: 0.4px;\\n  margin: 0px;\\n}  \\n\\n/*site title special font */\\nh-title {\\n  color: #fff;\\n  font-size: clamp(24px, 4.8vw, 48px);\\n  font-family: 'rubik';\\n  font-weight: 400;\\n  letter-spacing: 0.4px;\\n  margin: 0px;\\n}\\n\\np, .p {\\n  color: #f5f5f5;\\n  font-size: clamp(12px, 3.2vw, 32px);\\n  font-family: 'rubik'; font-weight: 400; letter-spacing: 0.4px;\\n } \\n}\\n\\n\\n/* Tablet general styles */\\n@media screen and (min-width: 768px) and (max-width: 1024px) {\\n#shadow-dynamic-app { padding-left: 0em; padding-right: 0em;}\\n/* General padding and spacers for tablet */ \\n.section-divider {height: 4.6em;} .section-divider2 {height: 0.4em;} .section-divider3 {height: 0.4em; margin-top: -0.6em;}\\n#shadow-dynamic-app .section-divider {height: 1.2em;}\\n#shadow-dynamic-app h1 {font-size: clamp(56px, 3.4em, 100px);}\\n#shadow-dynamic-app h5 {font-size: clamp(12px, 0.9em, 21px);}\\n#shadow-dynamic-app h3 {font-size: clamp(18px, 1.8em, 52px);}\\n#shadow-dynamic-app h4 {font-size: clamp(12px, 1.4em, 28px);}\\n#shadow-dynamic-app h-name,  #shadow-dynamic-app h-name a {font-size: clamp(10px, 1em, 32px); width: 76%; bottom: 1.4em;}\\n\\n/* Fonts */\\nh1 {\\n  font-size: clamp(48px, 3.8em, 120px); \\n  color: #f0f0f0;\\n  font-family: 'Orbitron', 'Oxygen', 'ubuntu', 'Cantarell', sans-serif; \\n  font-weight: 400;\\n  margin-top: 0vw; margin-bottom: 0.2vw; letter-spacing: -0.4px;\\n  line-height: 1.4;\\n}\\n\\nh1 a:hover {font-size: calc(1.1 * clamp(50px, 8vw, 100px));}\\n\\nh2 {\\n  color: #f2f2f2;\\n  font-size: clamp(36px, 3em, 72px);\\n  font-family: 'rubik';\\n  font-weight: 500;\\n  text-decoration: none;\\n}\\n\\nh3 {\\n  color: #f7f7f7;\\n  font-size: clamp(24px, 2.2em, 56px);\\n  font-family: 'rubik'; font-weight: 400; letter-spacing: 1.4px;\\n  margin: 22px 0 18px 0;\\n}\\n\\nh-name {\\n  color: #f4f4f4;\\n  font-size: clamp(10px, 2.2vw, 36px);\\n  font-family: 'rubik';\\n  font-weight: 500;\\n  letter-spacing: 0.4px;  \\n}\\n\\nh4 {\\n  color: #f4f4f4;\\n  font-size: clamp(16px, 1.2em, 32px);\\n  font-family: 'rubik';\\n  font-weight: 400;\\n  letter-spacing: 0.4px;\\n  margin: 16px 0 14px 0;\\n}\\n\\nh5 {\\n  color: #f6f6f6; \\n  font-size: clamp(12px, 2vw, 22px); \\n  font-family: 'rubik'; \\n  font-weight: 500; \\n  letter-spacing: 0.4px;\\n  margin: 0px;\\n}\\n\\n/* Site title special font */\\nh-title {\\n  color: #ffffff;\\n  font-size: clamp(22px, 4vw, 26px);\\n  font-family: 'rubik';\\n  font-weight: 400;\\n  letter-spacing: 0.4px;\\n  margin: 0px;\\n}  \\n\\np, .p {\\n  color: #f5f5f5;\\n  font-size: clamp(10px, 1.8vw, 20px);\\n  font-family: 'rubik'; font-weight: 400; letter-spacing: 0.4px;\\n }  \\n}\\n\\n\\n/* Desktop general styles */\\n@media screen and (min-width: 1025px) {\\n\\n/* General padding and spacers for Desktop */ \\n.section-divider {height: 5.6em;} .section-divider2 {height: 1.6em;} .section-divider3 {height: 0.2em; margin-top: -0.6em;}\\n#shadow-dynamic-app .section-divider {height: 2.4em;} .section-divider2 {height: 1.6em;} .section-divider3 {height: 0.2em; margin-top: -0.6em;}\\n\\n\\n/* Fonts */\\nh1 {\\n  font-size: clamp(76px, 3.4em, 120px); \\n  color: #f0f0f0;\\n  font-family: 'Orbitron', 'Oxygen', 'ubuntu', 'Cantarell', sans-serif; \\n  font-weight: 400; letter-spacing: -1.4px;\\n  margin-top: 0vw; margin-bottom: 0.2vw;\\n}\\n\\n#shadow-dynamic-app h1 {line-height: 1; font-size: clamp(60px, 2.2em, 74px); }\\n#shadow-dynamic-app h4 {font-size: 130%;}\\n\\nh1 a:hover {font-size: calc(1.1 * clamp(50px, 8vw, 100px));}\\n\\nh2 {\\n  color: #f2f2f2;\\n  font-size: clamp(58px, 3vw, 90px); \\n  font-family: 'rubik';\\n  font-weight: 300;\\n  text-decoration: none;\\n}\\n\\nh3 {\\n  color: #f7f7f7;\\n  font-size: clamp(34px, 1.6vw, 52px);\\n  font-family: 'rubik'; font-weight: 400; letter-spacing: 1.4px;\\n  margin: 16px 0 14px 0;\\n}\\n#shadow-dynamic-app h3 {transform: scale(0.75);}\\n\\nh-name {\\n  color: #f4f4f4;\\n  font-size: clamp(10px, 1.1em, 36px);\\n  font-family: 'rubik';\\n  font-weight: 500;\\n  letter-spacing: 0.4px;\\n}\\n\\n#shadow-dynamic-app h-name {\\n  font-size: clamp(10px, 1vw, 36px);\\n}\\n\\nh4 {\\n  color: #f4f4f4;\\n  font-size: clamp(18px, 1.4vw, 44px);\\n  font-family: 'rubik';\\n  font-weight: 400;\\n  letter-spacing: 0.4px;\\n  margin: 16px 0 14px 0;\\n}\\n\\n#shadow-dynamic-app h5 { font-size: clamp(16px, 1.2em, 22px);}\\n\\nh5 {color: #f6f6f6;\\n  font-size: clamp(8px, 1.1vw, 16px);\\n  font-family: 'rubik';\\n  font-weight: 400;\\n  letter-spacing: 0.4px;\\n  margin: 0px;\\n}\\n\\n/* Site title special font */\\nh-title {\\n  color: #ffffff;\\n  font-size: clamp(18px, 3.6vw, 24px);\\n  font-family: 'rubik';\\n  font-weight: 400;\\n  letter-spacing: 0.4px;\\n  margin: 0px;\\n}  \\n\\n\\np, .p {\\n  color: #f5f5f5;\\n  font-size: clamp(6px, 1vw, 24px);\\n  font-family: 'rubik'; font-weight: 400; letter-spacing: 0.4px;\\n }  \\nbody #homePage {padding-left: 8em; padding-right: 8em;}\\n}\\n\\n@media screen and (min-width: 1100px) {\\nbody #homePage {padding-left: 11em; padding-right: 11em;}\\n}\\n\\n@media screen and (min-width: 1200px) {\\nbody #homePage {padding-left: 12em; padding-right: 12em;}\\n}\\n\\n@media screen and (min-width: 1300px) {\\nbody #homePage {padding-left: 14em; padding-right: 14em;}\\n}\\n\\n@media screen and (min-width: 1500px) {\\nbody #homePage {padding-left: 16em; padding-right: 16em;}\\n}\\n\\n@media screen and (min-width: 2025px) {\\n  .dynamic-app {overflow: hidden;}\\n  body #homePage {padding-left: 18.8em; padding-right: 18.8em; overflow: hidden;}\\n  h-title {font-size: clamp(26px, 36px, 42px);}\\n  #shadow-dynamic-app span.title-text {font-size: 100% !important; padding-left: 3em;}\\n  #shadow-dynamic-app h5, h5 {color: #f6f6f6;\\n  font-size: clamp(14px, 1.8vw, 18px);\\n  font-family: 'rubik';\\n  font-weight: 400;\\n  letter-spacing: 0.4px;\\n  margin: 0px;}\\n  h1 { font-size: clamp(92px, 6.2em, 144px); }\\n}\";","export default \"/* Fullscreen loader */\\r\\n.loading-screen-wrapper.fullscreen {  pointer-events: none; position: fixed; inset: 0; z-index: 999; background-color: #272727; display: flex; align-items: center; justify-content: center; overflow: hidden; }\\r\\n\\r\\n/* Contained loader — always forces vertical centering */\\r\\n.loading-screen-wrapper.contained {  pointer-events: none; display: flex; align-items: center; justify-content: center; background: none; background-color: #212121; width: 100%; height: 100%; box-sizing: border-box; position: relative; overflow: hidden; }\\r\\n\\r\\n/* No need to style .loading-lottie dimensions in CSS anymore,\\r\\n   since they're handled inline in React */\\r\\n.loading-lottie { display: block; }\\r\\n.absolute-inset { pointer-events: none; position: absolute; inset: 0; width: 100%; height: 100%; z-index: 10; display: flex; align-items: center; justify-content: center; pointer-events: none; }\\r\\n\\r\\n/* --- Media Queries --- */\\r\\n\\r\\n/* Mobile: ≤768px */\\r\\n@media (max-width: 768px) {\\r\\n  .loading-screen-wrapper.fullscreen { }\\r\\n  .loading-screen-wrapper.contained { }\\r\\n  .loading-lottie { }\\r\\n}\\r\\n\\r\\n/* Tablet: 768px–1024px */\\r\\n@media (min-width: 768px) and (max-width: 1024px) {\\r\\n  .loading-screen-wrapper.fullscreen { }\\r\\n  .loading-screen-wrapper.contained { }\\r\\n  .loading-lottie { }\\r\\n}\\r\\n\\r\\n/* Desktop: ≥1025px */\\r\\n@media (min-width: 1025px) {\\r\\n  .loading-screen-wrapper.fullscreen { }\\r\\n  .loading-screen-wrapper.contained { }\\r\\n  .loading-lottie { }\\r\\n}\\r\\n\";","import React, { useState, useEffect, useCallback, useRef } from 'react';\r\nimport Navigation from './components/navigation';\r\nimport TitleDivider from './components/title';\r\nimport SortBy from './components/sortBy';\r\nimport FireworksDisplay from './components/fireworksDisplay';\r\nimport PauseButton from './components/pauseButton';\r\nimport Footer from './components/footer';\r\nimport ObservedCard from './lib/observedCard.jsx';\r\nimport setupAltObserver from './lib/setupAltObserver';\r\nimport IntroOverlay from './components/IntroOverlay';\r\nimport { colorMapping } from './lib/colorString';\r\nimport { useShadowRoot } from '../utils/context-providers/shadow-root-context';\r\nimport indexCss from '../styles/dynamic-app/index.css?raw';\r\nimport miscCss from '../styles/dynamic-app/misc.css?raw';\r\nimport overlayCss from '../styles/loading-overlay.css?raw';\r\n\r\n// shared preloader (no TS types in this file)\r\nimport {\r\n  getPreloadedDynamicApp,\r\n  whenDynamicPreloadReady,\r\n  ensureDynamicPreload,\r\n} from './preload-dynamic-app';\r\n\r\n// 🔸 single source of truth for palette semantics\r\nimport { resolvePalette, computeStateFromPalette } from './lib/palette-controller';\r\n\r\nfunction DynamicTheme({ onReady }) {\r\n  const [sortedImages, setSortedImages] = useState([]);\r\n  const [svgIcons, setSvgIcons] = useState({});\r\n  const [activeColor, setActiveColor] = useState('#FFFFFF');\r\n  const [movingTextColors, setMovingTextColors] = useState(['#FFFFFF', '#FFFFFF', '#FFFFFF']);\r\n  const [lastKnownColor, setLastKnownColor] = useState('#FFFFFF');\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [pauseAnimation, setPauseAnimation] = useState(false);\r\n  const [showNavigation, setShowNavigation] = useState(false);\r\n\r\n  const toggleFireworksRef = useRef(null);\r\n  const scrollContainerRef = useRef(null);\r\n  const shadowRef = useRef(null);\r\n\r\n  const [showFireworks, setShowFireworks] = useState(true);\r\n  const [isHostVisible, setIsHostVisible] = useState(false);\r\n  const hostVisibleRef = useRef(false);\r\n\r\n  const { getShadowRoot, injectStyle } = useShadowRoot();\r\n\r\n  useEffect(() => {\r\n    [indexCss, miscCss, overlayCss].forEach(injectStyle);\r\n  }, [injectStyle]);\r\n\r\n  // signal ready on first paint (wrapper de-dupes)\r\n  useEffect(() => {\r\n    const id = requestAnimationFrame(() => { try { onReady?.(); } catch {} });\r\n    return () => cancelAnimationFrame(id);\r\n  }, [onReady]);\r\n\r\n  // Prime from cache, then wait for preload (deduped)\r\n  useEffect(() => {\r\n    const snap = getPreloadedDynamicApp();\r\n    if (snap.icons) setSvgIcons(snap.icons);\r\n    if (Array.isArray(snap.images)) setSortedImages(snap.images);\r\n\r\n    let cancelled = false;\r\n    ensureDynamicPreload()\r\n      .catch(() => whenDynamicPreloadReady())\r\n      .then((cache) => {\r\n        if (cancelled || !cache) return;\r\n        if (cache.icons) setSvgIcons(cache.icons);\r\n        if (Array.isArray(cache.images)) setSortedImages(cache.images);\r\n        setIsLoading(false);\r\n        setShowNavigation(true);\r\n      })\r\n      .catch(() => {\r\n        if (!cancelled) setIsLoading(false);\r\n      });\r\n\r\n    return () => { cancelled = true; };\r\n  }, []);\r\n\r\n  const observerRoot = useRef(null);\r\n  useEffect(() => {\r\n    const root = typeof getShadowRoot === 'function' ? getShadowRoot() : document;\r\n    observerRoot.current = root;\r\n  }, [getShadowRoot]);\r\n\r\n  // 🔹 Activation now uses the shared palette-controller\r\n  const handleActivate = useCallback((alt1) => {\r\n    // resolve a quartet [c0, c1, c2, c3] for this alt\r\n    const quartet = resolvePalette(alt1, colorMapping);\r\n    if (!Array.isArray(quartet) || quartet.length < 4) return;\r\n\r\n    // compute state (activeColor, title triplet, lastKnown)\r\n    const { activeColor: nextActive, movingText: nextTriplet, lastKnown } =\r\n      computeStateFromPalette(quartet);\r\n\r\n    // minimize state churn\r\n    if (nextActive !== activeColor) {\r\n      setActiveColor(nextActive);\r\n      setLastKnownColor(lastKnown ?? nextActive);\r\n    }\r\n    // nextTriplet is a [c0, c1, c3] triplet per controller semantics\r\n    setMovingTextColors(nextTriplet);\r\n  }, [activeColor]);\r\n\r\n  const handleDeactivate = useCallback(() => {\r\n    if (activeColor !== lastKnownColor) setActiveColor(lastKnownColor);\r\n  }, [activeColor, lastKnownColor]);\r\n\r\n  const currentAltRef = useRef(null);\r\n  useEffect(() => {\r\n    if (isLoading || sortedImages.length === 0) return;\r\n    const root = observerRoot.current;\r\n    if (!root) return;\r\n\r\n    const guardedActivate = (alt1) => {\r\n      if (!hostVisibleRef.current) return;\r\n      if (currentAltRef.current === alt1) return;\r\n      currentAltRef.current = alt1;\r\n      handleActivate(alt1);\r\n    };\r\n\r\n    const guardedDeactivate = (alt1) => {\r\n      if (!hostVisibleRef.current) return;\r\n      if (currentAltRef.current !== alt1) return;\r\n      handleDeactivate(alt1);\r\n    };\r\n\r\n    const cleanup = setupAltObserver(guardedActivate, guardedDeactivate, root);\r\n    return typeof cleanup === 'function' ? cleanup : undefined;\r\n  }, [isLoading, sortedImages, handleActivate, handleDeactivate]);\r\n\r\n  const handleSetToggleFireworks = useCallback((fn) => {\r\n    toggleFireworksRef.current = fn;\r\n  }, []);\r\n\r\n  const handlePauseToggle = useCallback((isEnabled) => {\r\n    if (toggleFireworksRef.current) toggleFireworksRef.current(isEnabled);\r\n    setPauseAnimation(!isEnabled);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!shadowRef.current) return;\r\n    const ro = new ResizeObserver(() => {\r\n      // optional diagnostics\r\n      // console.log('[Resize observed]', shadowRef.current?.getBoundingClientRect());\r\n    });\r\n    ro.observe(shadowRef.current);\r\n    return () => ro.disconnect();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const container = document.querySelector('#block-dynamic');\r\n    if (!container) {\r\n      console.warn('[FireworkObserver] #block-dynamic not found in DOM');\r\n      return;\r\n    }\r\n\r\n    const io = new IntersectionObserver(\r\n      ([entry]) => {\r\n        const visible = !!entry.isIntersecting;\r\n        hostVisibleRef.current = visible;\r\n        setIsHostVisible(visible);\r\n\r\n        const desired = visible && !pauseAnimation;\r\n        setShowFireworks((prev) => (prev !== desired ? desired : prev));\r\n        if (toggleFireworksRef.current) toggleFireworksRef.current(desired);\r\n      },\r\n      { threshold: 0.3 }\r\n    );\r\n\r\n    io.observe(container);\r\n\r\n    // prime immediately\r\n    const rect = container.getBoundingClientRect();\r\n    const visibleNow = rect.top < window.innerHeight && rect.bottom > 0;\r\n    hostVisibleRef.current = visibleNow;\r\n    setIsHostVisible(visibleNow);\r\n\r\n    const initialDesired = visibleNow && !pauseAnimation;\r\n    setShowFireworks((prev) => (prev !== initialDesired ? initialDesired : prev));\r\n    if (toggleFireworksRef.current) toggleFireworksRef.current(initialDesired);\r\n\r\n    return () => io.disconnect();\r\n  }, [pauseAnimation]);\r\n\r\n  useEffect(() => {\r\n    if (toggleFireworksRef.current) {\r\n      toggleFireworksRef.current(!pauseAnimation && isHostVisible);\r\n    }\r\n  }, [pauseAnimation, isHostVisible]);\r\n\r\n  const cardRefs = useRef([]);\r\n  cardRefs.current = sortedImages.map((_, i) => cardRefs.current[i] ?? React.createRef());\r\n\r\n  return (\r\n    <div className=\"homePage-container\" ref={scrollContainerRef} aria-busy={isLoading ? 'true' : 'false'}>\r\n      <IntroOverlay />\r\n\r\n      <div className=\"navigation-wrapper\">\r\n        {showNavigation && (\r\n          <Navigation\r\n            customArrowIcon2={svgIcons['arrow1']}\r\n            customArrowIcon={svgIcons['arrow2']}\r\n            items={sortedImages}\r\n            activeColor={activeColor}\r\n            isInShadow={typeof getShadowRoot === 'function' && getShadowRoot() !== document}\r\n            scrollLockContainer={scrollContainerRef.current}\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"firework-wrapper\">\r\n        <div className=\"firework-divider\">\r\n          {showFireworks && (\r\n            <FireworksDisplay\r\n              colorMapping={colorMapping}\r\n              items={sortedImages}\r\n              activeColor={activeColor}\r\n              lastKnownColor={lastKnownColor}\r\n              onToggleFireworks={handleSetToggleFireworks}\r\n            />\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"section-divider\"></div>\r\n\r\n      <div className=\"title-divider\">\r\n        <TitleDivider\r\n          svgIcon={svgIcons['logo-small-1']}\r\n          movingTextColors={movingTextColors}\r\n          pauseAnimation={pauseAnimation}\r\n        />\r\n      </div>\r\n\r\n      <div id=\"homePage\">\r\n        <div className=\"no-overflow\">\r\n          <div className=\"pause-button-wrapper\">\r\n            <PauseButton toggleP5Animation={handlePauseToggle} />\r\n          </div>\r\n\r\n          <div className=\"sort-by-divider\">\r\n            <h3 className=\"students-heading\">Students</h3>\r\n            <SortBy\r\n              setSortOption={() => {}}\r\n              onFetchItems={setSortedImages}\r\n              customArrowIcon={svgIcons['arrow2']}\r\n              colorMapping={colorMapping}\r\n              getRoot={getShadowRoot}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"section-divider2\"></div>\r\n\r\n          <div className=\"UI-card-divider\">\r\n            {sortedImages.map((data, index) => (\r\n              <ObservedCard\r\n                key={index}\r\n                data={data}\r\n                index={index}\r\n                getShadowRoot={getShadowRoot}\r\n                pauseAnimation={pauseAnimation}\r\n                customArrowIcon2={svgIcons['arrow1']}\r\n              />\r\n            ))}\r\n          </div>\r\n\r\n          <Footer\r\n            customArrowIcon2={svgIcons['arrow1']}\r\n            linkArrowIcon={svgIcons['link-icon']}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DynamicTheme;\r\n","// dynamic app shadow DOM wrapper\r\nimport React, { useRef, useEffect, useState } from 'react';\r\nimport createShadowRoot from 'react-shadow';\r\nimport DynamicTheme from './dynamic-app-outgoing.jsx';\r\nimport { ShadowRootProvider } from '../utils/context-providers/shadow-root-context.tsx';\r\n\r\nconst DynamicAppInbound = ({ onFocusChange, onReady }) => {\r\n  const shadowRef = useRef(null);\r\n  const [shadowRoot, setShadowRoot] = useState(null);\r\n  const ShadowRoot = createShadowRoot.div;\r\n\r\n  // ensure we only ever signal ready once\r\n  const readySentRef = useRef(false);\r\n  const sendReady = () => {\r\n    if (readySentRef.current) return;\r\n    readySentRef.current = true;\r\n    try { onReady?.(); } catch {}\r\n  };\r\n\r\n  useEffect(() => {\r\n    const t = setTimeout(() => {\r\n      const root = shadowRef.current?.getRootNode?.();\r\n      if (root && root.host) {\r\n        setShadowRoot(root);\r\n        // first visual frame -> tell enhancer we’re ready\r\n        requestAnimationFrame(sendReady);\r\n      } else {\r\n        console.warn('[Not a ShadowRoot]', root);\r\n      }\r\n    }, 0);\r\n    return () => clearTimeout(t);\r\n  }, [onReady]); // safe for HMR\r\n\r\n  useEffect(() => {\r\n    const el = shadowRef.current;\r\n    if (!el) return;\r\n\r\n    let startY = 0;\r\n    let focusTriggered = false;\r\n\r\n    const triggerSyntheticClick = () => {\r\n      const down = new PointerEvent('pointerdown', {\r\n        bubbles: true, cancelable: true, composed: true, pointerType: 'touch',\r\n      });\r\n      el.dispatchEvent(down);\r\n      onFocusChange?.(true);\r\n      console.log('[Focus triggered in embedded app]');\r\n    };\r\n\r\n    const handleTouchStart = (e) => {\r\n      if (e.touches.length === 0) return;\r\n      startY = e.touches[0].clientY;\r\n      focusTriggered = false;\r\n    };\r\n\r\n    const handleTouchMove = (e) => {\r\n      if (focusTriggered || e.touches.length === 0) return;\r\n      const deltaY = e.touches[0].clientY - startY;\r\n      if (Math.abs(deltaY) > 1) {\r\n        el.scrollTop += 1;\r\n        triggerSyntheticClick();\r\n        focusTriggered = true;\r\n      }\r\n    };\r\n\r\n    if ('ontouchstart' in window) {\r\n      el.addEventListener('touchstart', handleTouchStart, { passive: true });\r\n      el.addEventListener('touchmove', handleTouchMove, { passive: true });\r\n    }\r\n    return () => {\r\n      el.removeEventListener('touchstart', handleTouchStart);\r\n      el.removeEventListener('touchmove', handleTouchMove);\r\n    };\r\n  }, [onFocusChange]);\r\n\r\n  return (\r\n    <div className=\"embedded-app\">\r\n      <ShadowRoot>\r\n        <div ref={shadowRef} className=\"dynamic-app\" id=\"shadow-dynamic-app\">\r\n          {shadowRoot ? (\r\n            <ShadowRootProvider getShadowRoot={() => shadowRoot}>\r\n              {/* pass the guarded ready down so either level can signal */}\r\n              <DynamicTheme onReady={sendReady} />\r\n            </ShadowRootProvider>\r\n          ) : null}\r\n        </div> \r\n      </ShadowRoot>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DynamicAppInbound;\r\n","import { Link } from 'react-router-dom';\r\n\r\nconst Footer = ({ customArrowIcon2, linkArrowIcon }) => {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <div className=\"footer-links\">\r\n        <div className=\"nav-item\">\r\n          <div className=\"nav-link-2\" role=\"button\" tabIndex={0}>\r\n            <div className=\"name\">\r\n              <h4>What is DMI?</h4>\r\n            </div>\r\n            {customArrowIcon2 && (\r\n              <div\r\n                className=\"arrow3\"\r\n                dangerouslySetInnerHTML={{ __html: customArrowIcon2 }}\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n        <div className=\"nav-item\">\r\n          <div className=\"nav-link-2\" role=\"button\" tabIndex={0}>\r\n            <h4>Case Studies</h4>\r\n            {customArrowIcon2 && (\r\n              <div\r\n                className=\"arrow3\"\r\n                dangerouslySetInnerHTML={{ __html: customArrowIcon2 }}\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"footer-info\">\r\n        <div className=\"nav-item\">\r\n          <a\r\n            href=\"https://www.linkedin.com/in/efe-ozalp/\" // Replace with your portfolio link\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n            className=\"nav-link-2\"\r\n          >\r\n            <h4>UI/UX & Development by Efe Ozalp</h4>\r\n            {linkArrowIcon && (\r\n              <div\r\n                id=\"link-arrow\"\r\n                className=\"arrow3\"\r\n                dangerouslySetInnerHTML={{ __html: linkArrowIcon }}\r\n              />\r\n            )}\r\n          </a>\r\n        </div>\r\n        <div className=\"nav-item\">\r\n          <a\r\n            href=\"https://www.instagram.com/yxuart/\" // Replace with the illustrator's profile link\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n            className=\"nav-link-2\"\r\n          >\r\n            <h4>Illustrations by Yiner Xu @yxuart</h4>\r\n            {linkArrowIcon && (\r\n              <div\r\n                id=\"link-arrow\"\r\n                className=\"arrow3\"\r\n                dangerouslySetInnerHTML={{ __html: linkArrowIcon }}\r\n              />\r\n            )}\r\n          </a>\r\n        </div>\r\n      </div>\r\n    </footer>\r\n  );\r\n};\r\n\r\nexport default Footer;\r\n","// src/utils/context-providers/shadow-root-context.tsx\r\nimport React, { createContext, useContext, useRef, ReactNode } from 'react';\r\n\r\ntype ShadowRootFn = () => ShadowRoot | null;\r\ntype StyleSheetRaw = string;\r\n\r\nconst hasDOM = typeof document !== 'undefined';\r\nconst hasConstructedSheets =\r\n  hasDOM &&\r\n  typeof (globalThis as any).Document !== 'undefined' &&\r\n  'adoptedStyleSheets' in (Document.prototype as any) &&\r\n  typeof (globalThis as any).CSSStyleSheet !== 'undefined' &&\r\n  'replaceSync' in (CSSStyleSheet.prototype as any);\r\n\r\nconst isShadowRoot = (node: any): node is ShadowRoot =>\r\n  typeof (globalThis as any).ShadowRoot !== 'undefined' && node instanceof (globalThis as any).ShadowRoot;\r\n\r\ntype Ctx = {\r\n  getShadowRoot: ShadowRootFn;\r\n  injectStyle: (css: StyleSheetRaw, id: string) => void;\r\n  injectLink: (href: string, id?: string) => void;\r\n  removeStyle?: (id: string) => void;\r\n} | null;\r\n\r\nconst ShadowRootContext = createContext<Ctx>(null);\r\n\r\nlet warnedOnce = false;\r\n\r\nexport const useShadowRoot = () => {\r\n  const ctx = useContext(ShadowRootContext);\r\n  if (!ctx) {\r\n    if (!warnedOnce) {\r\n      // Dev-friendly, harmless in prod too; only once.\r\n      console.warn('useShadowRoot called outside provider; falling back to document.');\r\n      warnedOnce = true;\r\n    }\r\n\r\n    const injectStyle = (css: string, id: string) => {\r\n      if (!hasDOM) return;\r\n      const existing = document.head.querySelector<HTMLStyleElement>(`style[data-style-id=\"${id}\"]`);\r\n      if (existing) return;\r\n      const style = document.createElement('style');\r\n      style.dataset.styleId = id;\r\n      style.textContent = css;\r\n      document.head.appendChild(style);\r\n    };\r\n\r\n    const injectLink = (href: string, id?: string) => {\r\n      if (!hasDOM) return;\r\n      const selector = id\r\n        ? `link[data-style-id=\"${id}\"]`\r\n        : `link[rel=\"stylesheet\"][href=\"${href}\"]`;\r\n      if (document.head.querySelector(selector)) return;\r\n      const link = document.createElement('link');\r\n      link.rel = 'stylesheet';\r\n      link.href = href;\r\n      if (id) link.dataset.styleId = id;\r\n      document.head.appendChild(link);\r\n    };\r\n\r\n    const removeStyle = (id: string) => {\r\n      if (!hasDOM) return;\r\n      document.head.querySelector(`style[data-style-id=\"${id}\"]`)?.remove();\r\n    };\r\n\r\n    return {\r\n      getShadowRoot: () => null,\r\n      injectStyle,\r\n      injectLink,\r\n      removeStyle,\r\n    };\r\n  }\r\n  return ctx;\r\n};\r\n\r\nexport function ShadowRootProvider({\r\n  getShadowRoot,\r\n  children,\r\n}: {\r\n  getShadowRoot: ShadowRootFn;\r\n  children: ReactNode;\r\n}) {\r\n  // Cache constructed sheets per ID (per provider)\r\n  const sheetCacheRef = useRef<Map<string, CSSStyleSheet>>(new Map());\r\n\r\n  const injectStyle = (css: string, id: string) => {\r\n    const root = getShadowRoot();\r\n\r\n    // If no shadow root, gracefully inject into document.head\r\n    if (!isShadowRoot(root)) {\r\n      if (!hasDOM) return;\r\n      const existing = document.head.querySelector<HTMLStyleElement>(`style[data-style-id=\"${id}\"]`);\r\n      if (existing) return;\r\n      const style = document.createElement('style');\r\n      style.dataset.styleId = id;\r\n      style.textContent = css;\r\n      document.head.appendChild(style);\r\n      return;\r\n    }\r\n\r\n    // Shadow root path\r\n    if (hasConstructedSheets) {\r\n      let sheet = sheetCacheRef.current.get(id);\r\n      if (!sheet) {\r\n        sheet = new (CSSStyleSheet as any)();\r\n        sheet.replaceSync(css);\r\n        sheetCacheRef.current.set(id, sheet);\r\n      }\r\n      if (!root.adoptedStyleSheets.includes(sheet)) {\r\n        root.adoptedStyleSheets = [...root.adoptedStyleSheets, sheet];\r\n      }\r\n      return;\r\n    }\r\n\r\n    // Fallback <style> in shadow root\r\n    if (root.querySelector(`style[data-style-id=\"${id}\"]`)) return;\r\n    const style = document.createElement('style');\r\n    style.textContent = css;\r\n    (style as any).dataset.styleId = id;\r\n    root.appendChild(style);\r\n  };\r\n\r\n  const injectLink = (href: string, id?: string) => {\r\n    const root = getShadowRoot();\r\n\r\n    // If no shadow root, use document.head\r\n    if (!isShadowRoot(root)) {\r\n      if (!hasDOM) return;\r\n      const selector = id\r\n        ? `link[data-style-id=\"${id}\"]`\r\n        : `link[rel=\"stylesheet\"][href=\"${href}\"]`;\r\n      if (document.head.querySelector(selector)) return;\r\n      const link = document.createElement('link');\r\n      link.rel = 'stylesheet';\r\n      link.href = href;\r\n      if (id) (link as any).dataset.styleId = id;\r\n      document.head.appendChild(link);\r\n      return;\r\n    }\r\n\r\n    // Shadow root link injection\r\n    const selector = id ? `link[data-style-id=\"${id}\"]` : `link[rel=\"stylesheet\"][href=\"${href}\"]`;\r\n    if (root.querySelector(selector)) return;\r\n    const link = document.createElement('link');\r\n    link.rel = 'stylesheet';\r\n    link.href = href;\r\n    if (id) (link as any).dataset.styleId = id;\r\n    root.appendChild(link);\r\n  };\r\n\r\n  const removeStyle = (id: string) => {\r\n    const root = getShadowRoot();\r\n\r\n    // Remove from doc head if no shadow root\r\n    if (!isShadowRoot(root)) {\r\n      if (!hasDOM) return;\r\n      document.head.querySelector(`style[data-style-id=\"${id}\"]`)?.remove();\r\n      return;\r\n    }\r\n\r\n    if (hasConstructedSheets) {\r\n      const sheet = sheetCacheRef.current.get(id);\r\n      if (sheet) {\r\n        root.adoptedStyleSheets = root.adoptedStyleSheets.filter((s) => s !== sheet);\r\n      }\r\n      return;\r\n    }\r\n    root.querySelector(`style[data-style-id=\"${id}\"]`)?.remove();\r\n  };\r\n\r\n  return (\r\n    <ShadowRootContext.Provider value={{ getShadowRoot, injectStyle, injectLink, removeStyle }}>\r\n      {children}\r\n    </ShadowRootContext.Provider>\r\n  );\r\n}\r\n","// src/utils/context-providers/style-injector.ts\r\nimport { useEffect } from 'react';\r\nimport { useShadowRoot } from './shadow-root-context';\r\n\r\n// Augment Window locally so TS always sees the field here\r\ndeclare global {\r\n  interface Window {\r\n    __DYNAMIC_STYLE_IDS__?: Set<string>;\r\n  }\r\n}\r\n\r\n// Safe handle to window (SSR-friendly)\r\nconst win: (Window & { __DYNAMIC_STYLE_IDS__?: Set<string> }) | undefined =\r\n  typeof window !== 'undefined' ? window : undefined;\r\n\r\n// Global dedupe set (persisted on window between renders)\r\nconst globalStyleIds: Set<string> = (() => {\r\n  if (!win) return new Set<string>();\r\n  if (!win.__DYNAMIC_STYLE_IDS__) win.__DYNAMIC_STYLE_IDS__ = new Set<string>();\r\n  return win.__DYNAMIC_STYLE_IDS__;\r\n})();\r\n\r\nexport const useStyleInjection = (css: string, id: string) => {\r\n  const { injectStyle, getShadowRoot } = useShadowRoot() || {};\r\n\r\n  useEffect(() => {\r\n    if (!id) {\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        console.warn('useStyleInjection: id is required for dedupe');\r\n      }\r\n      return;\r\n    }\r\n\r\n    const shadowRoot = getShadowRoot?.();\r\n    const isInShadow = shadowRoot && shadowRoot !== document;\r\n\r\n    if (isInShadow && injectStyle) {\r\n      // Shadow DOM dedupe by ID\r\n      if (!shadowRoot.querySelector(`style[data-style-id=\"${id}\"]`)) {\r\n        injectStyle(css, id); // provider handles DOM append\r\n      }\r\n      return;\r\n    }\r\n\r\n    // Global dedupe (memo + DOM check as a safety)\r\n    if (!globalStyleIds.has(id)) {\r\n      const existing = document.head.querySelector(`style[data-style-id=\"${id}\"]`);\r\n      if (!existing) {\r\n        const styleEl = document.createElement('style');\r\n        styleEl.textContent = css;\r\n        styleEl.dataset.styleId = id;\r\n        document.head.appendChild(styleEl);\r\n      }\r\n      globalStyleIds.add(id);\r\n    }\r\n  }, [css, id, injectStyle, getShadowRoot]);\r\n};\r\n","export default \"/* Firework q5-canvas styles */\\r\\n/* canvas {background-color: #1e1e1f;} /* Background colors just incase to avoid color flickering */\\r\\n.firework-divider { pointer-events: none; display: block; position: absolute; background-color: #1e1e1f;}\\r\\n.q5Canvas {z-index: 1 !important; position: relative; display: block; width: 100% !important; height: 100% !important; overflow: hidden;  background: transparent !important;}\\r\\ncanvas {\\r\\n  background-color: transparent !important;\\r\\n  position: fixed; /* or absolute, depending on your setup */\\r\\n  top: 0;\\r\\n  left: 0;\\r\\n  pointer-events: none;\\r\\n}\\r\\n#shadow-dynamic-app .firework-wrapper {position: relative; width: 100%; z-index: 0; background-color: transparent; height: 0px;}\\r\\n#shadow-dynamic-app .firework-divider {position: absolute; top: 0; left: 0;\\r\\nwidth: 100%; z-index: 1; pointer-events: none;} \\r\\n\\r\\n@media screen and (max-width: 767px) {\\r\\n.firework-divider {margin-top: -3.6em; transform: scale(1);}  \\r\\n#shadow-dynamic-app .firework-divider {margin-top: -3.6em; background-color: transparent;} \\r\\n#shadow-dynamic-app .q5-normal {background-color: transparent !important; z-index: 2 !important; position: relative;}\\r\\n.q5Canvas {z-index: 1 !important; position: relative;}\\r\\n}\\r\\n@media screen and (min-width: 768px) and (max-width: 1024px) {\\r\\n.firework-divider {margin-top: -6.8em;}  \\r\\n#shadow-dynamic-app .firework-divider {height: 16em;}\\r\\n}\\r\\n@media screen and (min-width: 1025px) {\\r\\n.firework-divider {margin-top: -6.8em;} \\r\\n#shadow-dynamic-app .firework-divider {height: 100dvh;} \\r\\n}\\r\\n@media screen and (min-width: 1225px) {\\r\\n.firework-divider {margin-top: -6.8em;}  \\r\\n#shadow-dynamic-app .firework-divider {transform: scale(1.1);\\r\\nheight: 36em;} \\r\\n}\\r\\n@media screen and (min-width: 2025px) {\\r\\n#shadow-dynamic-app .firework-divider  {transform: scale(1.3);}\\r\\n.firework-divider  {margin-top: -12.8em; overflow: hidden;}\\r\\n.q5-normal {transform: scale(1.4);}\\r\\n#shadow-dynamic-app .firework-divider-shadow {height: 32vw !important;}\\r\\n}\";","// src/utils/image-upgrade-manager.ts\r\nlet totalImages = 0;\r\nlet loadedLowRes = 0;\r\nlet listeners: (() => void)[] = [];\r\nlet upgradeTimeout: ReturnType<typeof setTimeout> | null = null;\r\n\r\nexport const setUpgradeTimeout = (ms: number = 5000) => {\r\n  if (upgradeTimeout) return;\r\n  upgradeTimeout = setTimeout(() => {\r\n    listeners.forEach(fn => fn());\r\n    listeners = [];\r\n  }, ms);\r\n};\r\n\r\nexport const registerImage = () => {\r\n  totalImages++;\r\n  setUpgradeTimeout();\r\n};\r\n\r\nexport const notifyLowResLoaded = () => {\r\n  loadedLowRes++;\r\n  if (loadedLowRes >= totalImages) {\r\n    listeners.forEach(fn => fn());\r\n    listeners = [];\r\n  }\r\n};\r\n\r\nexport const onAllLowResLoaded = (callback: () => void) => {\r\n  listeners.push(callback);\r\n};\r\n","// src/utils/media-providers/media-loader.tsx\r\nimport { useRef, useState, useEffect } from 'react';\r\nimport { useVideoVisibility } from './video-observer';\r\nimport LoadingScreen from '../loading/loading';\r\nimport { SanityImageSource } from '@sanity/image-url/lib/types/types';\r\nimport {\r\n  getLowResImageUrl,\r\n  getMediumImageUrl,\r\n  getHighQualityImageUrl,\r\n  urlFor,\r\n} from './image-builder';\r\nimport {\r\n  registerImage,\r\n  notifyLowResLoaded,\r\n  onAllLowResLoaded,\r\n} from './image-upgrade-manager';\r\n\r\nfunction useNearViewport<T extends Element>(\r\n  ref: React.RefObject<T>,\r\n  { rootMargin = '900px 0px', threshold = 0, once = true } = {}\r\n) {\r\n  const [near, setNear] = useState(false);\r\n  useEffect(() => {\r\n    if (!ref.current || near) return;\r\n    const io = new IntersectionObserver(\r\n      (entries) => {\r\n        if (entries.some((e) => e.isIntersecting)) {\r\n          setNear(true);\r\n          if (once) io.disconnect();\r\n        }\r\n      },\r\n      { rootMargin, threshold }\r\n    );\r\n    io.observe(ref.current);\r\n    return () => io.disconnect();\r\n  }, [ref, near, rootMargin, threshold, once]);\r\n  return near;\r\n}\r\n\r\ntype VideoSetSrc = {\r\n  webmUrl?: string;\r\n  mp4Url?: string;\r\n  poster?: SanityImageSource | string;\r\n};\r\n\r\ntype MediaLoaderProps = {\r\n  type: 'image' | 'video';\r\n  src: string | SanityImageSource | VideoSetSrc | null | undefined;\r\n  alt?: string;\r\n  id?: string;\r\n  className?: string;\r\n  style?: React.CSSProperties;\r\n  objectPosition?: string;\r\n  loop?: boolean;\r\n  muted?: boolean;\r\n  playsInline?: boolean;\r\n  preload?: 'auto' | 'metadata' | 'none';\r\n  enableVisibilityControl?: boolean;\r\n  priority?: boolean;\r\n  controls?: boolean;\r\n};\r\n\r\nconst MediaLoader = ({\r\n  type,\r\n  src,\r\n  alt = '',\r\n  id,\r\n  className = '',\r\n  style = {},\r\n  objectPosition = 'center center',\r\n  loop = true,\r\n  muted = true,\r\n  playsInline = true,\r\n  preload = 'metadata',\r\n  enableVisibilityControl = true,\r\n  priority = false,\r\n  controls = false,\r\n}: MediaLoaderProps) => {\r\n  const isSSR = typeof window === 'undefined';\r\n\r\n  // Start as loaded in SSR to avoid fade-in on hydration\r\n  const [loaded, setLoaded] = useState(isSSR);\r\n  const [showMedium, setShowMedium] = useState(false);\r\n  const [showHigh, setShowHigh] = useState(false);\r\n\r\n  // Native poster control (no overlay)\r\n  const [posterRemoved, setPosterRemoved] = useState(false);\r\n\r\n  const videoRef = useRef<HTMLVideoElement>(null);\r\n  const imgRef = useRef<HTMLImageElement>(null);\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n\r\n  const isNear = useNearViewport(containerRef);\r\n  const shouldStart = priority || isNear;\r\n\r\n  // If already cached, skip fade-in\r\n  useEffect(() => {\r\n    if (type === 'image' && imgRef.current?.complete) setLoaded(true);\r\n    if (type === 'video' && videoRef.current?.readyState >= 2) setLoaded(true);\r\n  }, [type]);\r\n\r\n  // IMAGE progressive upgrade\r\n  useEffect(() => {\r\n    if (type !== 'image') return;\r\n    registerImage();\r\n\r\n    const t1 = setTimeout(() => setShowMedium(true), shouldStart ? 0 : 2000);\r\n    if (shouldStart) setShowMedium(true);\r\n\r\n    const off = () => setTimeout(() => setShowHigh(true), 300);\r\n    onAllLowResLoaded(off);\r\n    const t2 = setTimeout(() => setShowHigh(true), 5000);\r\n\r\n    return () => {\r\n      clearTimeout(t1);\r\n      clearTimeout(t2);\r\n    };\r\n  }, [type, shouldStart]);\r\n\r\n  const onMediaLoaded = () => {\r\n    setLoaded(true);\r\n    if (type === 'image') notifyLowResLoaded();\r\n    if (id) {\r\n      const event = new CustomEvent('mediaReady', { detail: { id } });\r\n      window.dispatchEvent(event);\r\n    }\r\n  };\r\n\r\n  // ----- Video source parsing + poster URL -----\r\n  const isVideoSetObj =\r\n    typeof src === 'object' &&\r\n    src !== null &&\r\n    !('asset' in (src as any)) &&\r\n    (('webmUrl' in (src as any)) || ('mp4Url' in (src as any)));\r\n\r\n  const vs = (isVideoSetObj ? (src as VideoSetSrc) : undefined);\r\n  const legacyVideoUrl = typeof src === 'string' ? src : undefined;\r\n\r\n  const posterUrl =\r\n    vs?.poster\r\n      ? (typeof vs.poster === 'string'\r\n          ? vs.poster\r\n          : urlFor(vs.poster).width(1200).quality(80).auto('format').url())\r\n      : undefined;\r\n\r\n  // ✅ Keep native poster visible until the first *painted* frame, then remove it.\r\n  useEffect(() => {\r\n    if (type !== 'video' || !videoRef.current) return;\r\n    const v = videoRef.current;\r\n\r\n    const hidePoster = () => {\r\n      setPosterRemoved(true);\r\n      v.removeAttribute('poster');\r\n    };\r\n\r\n    const onPlay = () => {\r\n      const anyV = v as any;\r\n      if (typeof anyV.requestVideoFrameCallback === 'function') {\r\n        anyV.requestVideoFrameCallback(() => hidePoster());\r\n      } else {\r\n        const onTime = () => {\r\n          if (v.currentTime > 0 && v.readyState >= 2) {\r\n            v.removeEventListener('timeupdate', onTime);\r\n            hidePoster();\r\n          }\r\n        };\r\n        v.addEventListener('timeupdate', onTime);\r\n        const timer = setTimeout(() => {\r\n          v.removeEventListener('timeupdate', onTime);\r\n          hidePoster();\r\n        }, 1200);\r\n        return () => clearTimeout(timer);\r\n      }\r\n    };\r\n\r\n    v.addEventListener('play', onPlay, { once: true });\r\n    return () => v.removeEventListener('play', onPlay);\r\n  }, [type]);\r\n\r\n  // VIDEO visibility/autoplay (your existing hook takes care of play/pause)\r\n  useVideoVisibility(\r\n    videoRef,\r\n    containerRef,\r\n    type === 'video' && enableVisibilityControl ? 0.35 : (undefined as unknown as number)\r\n  );\r\n\r\n  // ─────────────────────────────────────────────────────────────\r\n  // VIDEO RELIABILITY PATCHES\r\n  // - Kick load when near\r\n  // - Retry once, then promote preload to 'auto'\r\n  // - Decode nudge for iOS Safari after loadedmetadata\r\n  // - Early \"loaded\" on loadedmetadata to remove spinner sooner\r\n  // - Gentle play kick when data is ready (muted+inline)\r\n  // ─────────────────────────────────────────────────────────────\r\n  useEffect(() => {\r\n    if (type !== 'video' || !videoRef.current) return;\r\n    const v = videoRef.current;\r\n\r\n    let retryTimer: number | null = null;\r\n    let promoteTimer: number | null = null;\r\n\r\n    const clearTimers = () => {\r\n      if (retryTimer) { window.clearTimeout(retryTimer); retryTimer = null; }\r\n      if (promoteTimer) { window.clearTimeout(promoteTimer); promoteTimer = null; }\r\n    };\r\n\r\n    // If we’re near (or priority), ensure the browser actually fetches metadata\r\n    const kickLoad = () => {\r\n      try {\r\n        // set the DOM property; the attribute React renders can be different and that's OK\r\n        v.preload = preload ?? 'metadata';\r\n        if (v.preload !== 'none') v.load(); // important: actually trigger the fetch\r\n      } catch {}\r\n    };\r\n\r\n    const nudgeDecode = () => {\r\n      // iOS Safari sometimes stalls after metadata; a tiny seek wakes decode\r\n      try {\r\n        if (v.readyState < 2) return;\r\n        const t = v.currentTime;\r\n        v.currentTime = t > 0 ? t : 0.001;\r\n      } catch {}\r\n    };\r\n\r\n    const tryPlay = async () => {\r\n      if (!enableVisibilityControl) return;\r\n      try {\r\n        if (v.muted && v.playsInline && v.paused && v.readyState >= 2) {\r\n          await v.play().catch(() => {});\r\n        }\r\n      } catch {}\r\n    };\r\n\r\n    const onLoadedMeta = () => {\r\n      // spinner can go away on metadata (poster is still covering until first frame)\r\n      setLoaded(true);\r\n      nudgeDecode();\r\n    };\r\n\r\n    const onLoadedData = () => { setLoaded(true); void tryPlay(); };\r\n    const onCanPlay = () => { setLoaded(true); void tryPlay(); };\r\n\r\n    if (shouldStart) {\r\n      kickLoad();\r\n\r\n      // If nothing after ~2.5s, try load() once more\r\n      retryTimer = window.setTimeout(() => {\r\n        if (v.readyState < 2) kickLoad();\r\n      }, 2500);\r\n\r\n      // Still nothing after ~5s? Promote preload to 'auto'\r\n      promoteTimer = window.setTimeout(() => {\r\n        if (v.readyState < 2) {\r\n          try { v.preload = 'auto'; v.load(); } catch {}\r\n        }\r\n      }, 5000);\r\n    }\r\n\r\n    v.addEventListener('loadedmetadata', onLoadedMeta);\r\n    v.addEventListener('loadeddata', onLoadedData);\r\n    v.addEventListener('canplay', onCanPlay);\r\n\r\n    // Optional: diagnostics for flaky networks\r\n    const onError = (e: Event) => console.warn('Video error', e);\r\n    const onStalled = () => console.warn('Video stalled');\r\n    const onSuspend = () => {/* benign on many browsers */};\r\n    v.addEventListener('error', onError);\r\n    v.addEventListener('stalled', onStalled);\r\n    v.addEventListener('suspend', onSuspend);\r\n\r\n    return () => {\r\n      clearTimers();\r\n      v.removeEventListener('loadedmetadata', onLoadedMeta);\r\n      v.removeEventListener('loadeddata', onLoadedData);\r\n      v.removeEventListener('canplay', onCanPlay);\r\n      v.removeEventListener('error', onError);\r\n      v.removeEventListener('stalled', onStalled);\r\n      v.removeEventListener('suspend', onSuspend);\r\n    };\r\n  }, [\r\n    type,\r\n    shouldStart,\r\n    preload,\r\n    enableVisibilityControl,\r\n    // if any URL changes, re-run the loader watchdog\r\n    isVideoSetObj,\r\n    (vs && vs.webmUrl) || '',\r\n    (vs && vs.mp4Url) || '',\r\n    legacyVideoUrl || '',\r\n  ]);\r\n\r\n  const hasVideoSource = Boolean(vs?.webmUrl || vs?.mp4Url || legacyVideoUrl);\r\n  if (!src || (type === 'video' && !hasVideoSource)) return null;\r\n\r\n  // ====== IMAGE ======\r\n  if (type === 'image') {\r\n    const ultraLowSrc = typeof src === 'string' ? src : getLowResImageUrl(src);\r\n    const mediumSrc   = typeof src === 'string' ? src : getMediumImageUrl(src);\r\n    const highResSrc  = typeof src === 'string' ? src : getHighQualityImageUrl(src);\r\n\r\n    const resolvedSrc = showHigh ? highResSrc : showMedium ? mediumSrc : ultraLowSrc;\r\n    if (!resolvedSrc) return null;\r\n\r\n    return (\r\n      <div ref={containerRef} style={{ position: 'relative', width: '100%', height: '100%' }}>\r\n        {!loaded && (\r\n          <div className=\"absolute-inset\">\r\n            <LoadingScreen isFullScreen={false} />\r\n          </div>\r\n        )}\r\n        <img\r\n          ref={imgRef}\r\n          loading={priority ? 'eager' : undefined}\r\n          fetchPriority={showHigh || priority ? 'high' : showMedium ? 'auto' : 'low'}\r\n          id={id}\r\n          src={resolvedSrc || undefined}\r\n          alt={alt}\r\n          onLoad={onMediaLoaded}\r\n          onError={(e) => console.warn('Image failed', (e.target as HTMLImageElement).src)}\r\n          className={className}\r\n          draggable={false}\r\n          style={{\r\n            ...style,\r\n            objectFit: 'cover',\r\n            objectPosition,\r\n            opacity: loaded ? 1 : 0,\r\n            transition: isSSR ? 'none' : 'filter 0.5s ease, opacity 0.3s ease',\r\n          }}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // ====== VIDEO ======\r\n  const showSpinner = !loaded;\r\n\r\n  return (\r\n    <div ref={containerRef} style={{ position: 'relative', width: '100%', height: '100%' }}>\r\n      {showSpinner && (\r\n        <div className=\"absolute-inset\">\r\n          <LoadingScreen isFullScreen={false} />\r\n        </div>\r\n      )}\r\n\r\n      <video\r\n        id={id}\r\n        ref={videoRef}\r\n        // treat loadeddata & metadata as “ready enough” for UI\r\n        onLoadedData={onMediaLoaded}\r\n        onLoadedMetadata={() => setLoaded(true)}\r\n        onError={(e) => console.warn('Video failed', e)}\r\n        className={className}\r\n        style={{\r\n          ...style,\r\n          objectFit: 'cover',\r\n          objectPosition,\r\n          opacity: loaded ? 1 : 0,\r\n          transition: isSSR ? 'none' : 'opacity 0.3s ease',\r\n          pointerEvents: 'all',\r\n          zIndex: 1,\r\n        }}\r\n        loop={loop}\r\n        muted={muted}\r\n        playsInline={playsInline}\r\n        preload={preload ?? 'metadata'}\r\n        controls={controls}\r\n        // If you host poster/video on different origins and ever read pixels to <canvas>,\r\n        // uncomment next line and ensure CORS headers exist:\r\n        // crossOrigin=\"anonymous\"\r\n        poster={posterRemoved ? undefined : posterUrl}\r\n      >\r\n        {/* Order matters: prefer MP4 first for Safari reliability */}\r\n        {vs?.mp4Url  && <source src={vs.mp4Url  || undefined} type=\"video/mp4\"  />}\r\n        {vs?.webmUrl && <source src={vs.webmUrl || undefined} type=\"video/webm\" />}\r\n        {!vs?.webmUrl && !vs?.mp4Url && legacyVideoUrl && (\r\n          <source src={legacyVideoUrl || undefined} />\r\n        )}\r\n      </video>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MediaLoader;\r\n","// video-observer.tsx\r\nimport { useEffect } from 'react';\r\n\r\nexport const useVideoVisibility = (\r\n  videoRef: React.RefObject<HTMLVideoElement> | null,\r\n  containerRef: React.RefObject<HTMLElement> | null,\r\n  threshold: number = 0.4\r\n) => {\r\n  useEffect(() => {\r\n    if (!videoRef?.current || !containerRef?.current) return;\r\n\r\n    const t = typeof threshold === 'number' && threshold >= 0 && threshold <= 1 ? threshold : 0.4;\r\n\r\n    let observer: IntersectionObserver | undefined;\r\n\r\n    const video = videoRef.current!;\r\n    const container = containerRef.current!;\r\n\r\n    // IMPORTANT: load even when using <source> children\r\n    // (video.src is empty in that case; currentSrc is set after load())\r\n    video.load();\r\n    video.muted = true;\r\n\r\n    observer = new IntersectionObserver(\r\n      ([entry]) => {\r\n        if (entry.isIntersecting) {\r\n          video.play().catch(() => setTimeout(() => video.play().catch(() => {}), 500));\r\n        } else {\r\n          video.pause();\r\n        }\r\n      },\r\n      { threshold: t }\r\n    );\r\n\r\n    observer.observe(container);\r\n\r\n    // kick once if already in view\r\n    const rect = container.getBoundingClientRect();\r\n    const ratio = Math.min(Math.max((window.innerHeight - rect.top) / window.innerHeight, 0), 1);\r\n    if (ratio >= t) video.play().catch(() => {});\r\n\r\n    return () => observer?.disconnect();\r\n  }, [videoRef, containerRef, threshold]);\r\n};\r\n","/* Pause Animation Option - Accessibility */\r\nimport React, { useRef, useState, useEffect } from 'react';\r\nimport lottie from '../../utils/load-lottie'; // corrected path\r\nimport animationData from '../lottie/pauseButton.json';\r\n\r\nconst PauseButton = ({ toggleP5Animation }) => {\r\n  const containerRef = useRef(null);\r\n  const animRef = useRef(null);\r\n  const [isClicked, setIsClicked] = useState(false);\r\n  const [currentFrame, setCurrentFrame] = useState(3);\r\n\r\n  // Sync initial state with fireworks logic\r\n  useEffect(() => {\r\n    if (toggleP5Animation) {\r\n      toggleP5Animation(!isClicked);\r\n    }\r\n  }, [toggleP5Animation, isClicked]);\r\n\r\n  // Setup the lottie instance\r\n  useEffect(() => {\r\n    if (!containerRef.current) return;\r\n    let mounted = true;\r\n\r\n    lottie.loadAnimation({\r\n      container: containerRef.current,\r\n      renderer: 'svg',\r\n      loop: false,\r\n      autoplay: false,\r\n      animationData,\r\n    }).then((anim) => {\r\n      if (!mounted) return;\r\n      animRef.current = anim;\r\n      anim.goToAndStop(currentFrame, true);\r\n    });\r\n\r\n    return () => {\r\n      mounted = false;\r\n      if (animRef.current) {\r\n        animRef.current.destroy();\r\n        animRef.current = null;\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  const handleMouseEnter = () => {\r\n    if (animRef.current && !isClicked) {\r\n      animRef.current.playSegments([3, 10], true);\r\n    }\r\n  };\r\n\r\n  const handleMouseLeave = () => {\r\n    if (animRef.current && !isClicked) {\r\n      animRef.current.goToAndStop(currentFrame, true);\r\n    }\r\n  };\r\n\r\n  const handleClick = (event) => {\r\n    event.stopPropagation();\r\n\r\n    if (animRef.current) {\r\n      const targetFrame = isClicked ? 3 : 20;\r\n      animRef.current.playSegments([currentFrame, targetFrame], true);\r\n      setCurrentFrame(targetFrame);\r\n      setIsClicked(!isClicked);\r\n\r\n      if (toggleP5Animation) {\r\n        toggleP5Animation(!isClicked);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"lottie-container\"\r\n      ref={containerRef}\r\n      onMouseEnter={handleMouseEnter}\r\n      onMouseLeave={handleMouseLeave}\r\n      onClick={handleClick}\r\n    />\r\n  );\r\n};\r\n\r\nexport default PauseButton;\r\n","// TitleDivider component (no flicker on enter/leave)\r\nimport { useEffect, useMemo, useRef, useState } from 'react';\r\nimport { useStyleInjection } from '../../utils/context-providers/style-injector.ts';\r\nimport titleCss from '../../styles/dynamic-app/title.css?raw';\r\n\r\nconst isTriplet = (v) => Array.isArray(v) && v.length === 3 && v.every(x => typeof x === 'string');\r\n\r\nconst TitleDivider = ({ svgIcon, movingTextColors, pauseAnimation }) => {\r\n  useStyleInjection(titleCss, 'dynamic-app-style-title');\r\n\r\n  // ----- visibility of this component -----\r\n  const rootRef = useRef(null);\r\n  const [isVisible, setIsVisible] = useState(true);\r\n  useEffect(() => {\r\n    const el = rootRef.current;\r\n    if (!el || typeof IntersectionObserver === 'undefined') return;\r\n    const io = new IntersectionObserver(\r\n      ([entry]) => setIsVisible(!!entry.isIntersecting),\r\n      { threshold: 0.01 }\r\n    );\r\n    io.observe(el);\r\n    return () => io.disconnect();\r\n  }, []);\r\n\r\n  // ----- stable palette that only changes when visible -----\r\n  const defaultTriplet = ['#70c6b0', '#5670b5', '#50b0c5'];\r\n  const incoming = isTriplet(movingTextColors) ? movingTextColors : defaultTriplet;\r\n\r\n  const [stableColors, setStableColors] = useState(incoming);\r\n  const pendingRef = useRef(null);\r\n\r\n  // shallow compare helper\r\n  const sameTriplet = (a, b) => a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\r\n\r\n  // When palette prop changes: apply immediately if visible, else stash it.\r\n  useEffect(() => {\r\n    if (!isTriplet(incoming)) return;\r\n    if (isVisible) {\r\n      setStableColors(prev => (sameTriplet(prev, incoming) ? prev : incoming));\r\n      pendingRef.current = null;\r\n    } else {\r\n      // hold for later to avoid flicker while hidden\r\n      pendingRef.current = incoming;\r\n    }\r\n  }, [incoming, isVisible]);\r\n\r\n  // When we become visible, commit any pending palette once.\r\n  useEffect(() => {\r\n    if (isVisible && pendingRef.current && !sameTriplet(stableColors, pendingRef.current)) {\r\n      setStableColors(pendingRef.current);\r\n      pendingRef.current = null;\r\n    }\r\n  }, [isVisible, stableColors]);\r\n\r\n  // ----- brightness adjust + smooth transition -----\r\n  const adjustBrightness = (hex, mul) => {\r\n    if (!/^#[0-9a-f]{6}$/i.test(hex)) return hex;\r\n    let r = parseInt(hex.slice(1, 3), 16);\r\n    let g = parseInt(hex.slice(3, 5), 16);\r\n    let b = parseInt(hex.slice(5, 7), 16);\r\n    r = Math.min(255, Math.max(0, Math.floor(r * mul)));\r\n    g = Math.min(255, Math.max(0, Math.floor(g * mul)));\r\n    b = Math.min(255, Math.max(0, Math.floor(b * mul)));\r\n    return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;\r\n  };\r\n\r\n  const colors = useMemo(() => ([\r\n    adjustBrightness(stableColors[0], 1.05),\r\n    adjustBrightness(stableColors[1], 1.25),\r\n    adjustBrightness(stableColors[2], 1.10),\r\n  ]), [stableColors]);\r\n\r\n  const textSegments = useMemo(() => ([\r\n    { text: 'Institute Gallery', suffix: '' },\r\n    { text: 'Dyna', suffix: 'mic Media' },\r\n    { text: 'Dyn', suffix: 'mic Media' },\r\n  ]), []);\r\n\r\n  const renderMovingContent = (repeatCount = 2) =>\r\n    [...Array(repeatCount)].flatMap((_, repeatIndex) =>\r\n      textSegments.map((segment, i) => (\r\n        <span\r\n          key={`${repeatIndex}-${i}`}\r\n          className=\"moving-text\"\r\n          style={{\r\n            color: colors[i],\r\n            transition: 'color 120ms linear',\r\n          }}\r\n        >\r\n          {segment.text}\r\n          <span className=\"logo-container\">\r\n            <span\r\n              className=\"svg-icon\"\r\n              // If your injected SVG respects currentColor, you could instead set color here.\r\n              style={{ fill: colors[i], transition: 'fill 120ms linear' }}\r\n              dangerouslySetInnerHTML={{ __html: svgIcon }}\r\n            />\r\n          </span>\r\n          {segment.suffix}\r\n        </span>\r\n      ))\r\n    );\r\n\r\n  return (\r\n    <div className=\"title-container\" ref={rootRef}>\r\n      <div className=\"static-title\">\r\n        <h1>MassArt 2024</h1>\r\n      </div>\r\n      <div className={`moving-title ${pauseAnimation ? 'paused' : ''}`}>\r\n        <h1 className=\"title-with-icon moving-text-wrapper\">\r\n          {renderMovingContent()}\r\n        </h1>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TitleDivider;\r\n","export default \"/* General Styles for hero title */\\r\\n.moving-title.paused .moving-text-wrapper, .moving-title.paused #Layer_12 {animation-play-state: paused;}\\r\\n.moving-title {z-index: 6;}\\r\\n@keyframes slide { 0% {transform: translateX(0);} 100% {transform: translateX(-50%);}}\\r\\n@keyframes rotate { 0% {transform: rotate(0deg);} 100% {transform: rotate(360deg);}}\\r\\n\\r\\n/* Hero title for mobile devices */\\r\\n@media screen and (max-width: 768px) {\\r\\n.title-container {background-color: #1e1e1f; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden; padding-top: 1.6em;}\\r\\n.static-title {margin-bottom: 20px; padding-left: 1.6em; padding-right: 0.8em;  z-index: 3;}\\r\\n\\r\\n/* Moving title styles */\\r\\n.title-with-icon {display: flex; align-items: center; white-space: nowrap;}\\r\\n.moving-title {position: relative; margin-top: -2.34em; width: 100%; overflow: hidden; z-index: 2;}\\r\\n.moving-title::before {content: \\\"\\\"; position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 2; \\r\\nbackground: linear-gradient(to right, rgba(30, 30, 31, 1) 0%, rgba(30, 30, 31, 0) 2%), linear-gradient(to left, rgba(30, 30, 31, 1) 0%, rgba(30, 30, 31, 0) 2%);}\\r\\n.moving-title h1 {font-weight: 200 !important; letter-spacing: -1.8px;}\\r\\n.moving-text-wrapper {display: inline-flex; align-items: center; animation: slide var(--animation-speed, 32s) linear infinite;}\\r\\n.moving-text {display: inline-flex; align-items: center; padding-right: 1.8em;}\\r\\n#shadow-dynamic-app .moving-text { padding-right: 2em;}\\r\\n#shadow-dynamic-app .moving-title { margin-top: -2.4em;}\\r\\n#shadow-dynamic-app .logo-container .svg-icon { padding-right: 12px;}\\r\\n\\r\\n/* SVG icon styles for rotation and size */\\r\\n#Layer_12 {padding-left: 0.05em; padding-right: 0.03em; margin-top: 0.5em; width: 1.1em;  height: 1.1em; animation: rotate var(--animation-speed, 12s) linear infinite;}\\r\\n}\\r\\n\\r\\n\\r\\n/* Hero title for tablet devices */\\r\\n@media screen and (min-width: 768px) and (max-width: 1024px) {\\r\\n.title-container {background-color: #1e1e1f; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden; padding-top: 2.6em; padding-bottom: 2.8em; padding-left: 2.4em;}\\r\\n#shadow-dynamic-app .title-container {padding-top: 1.6em;}\\r\\n.static-title {margin-bottom: 20px; padding-left: 0em; padding-right: 50%;  z-index: 3;}\\r\\n/* Moving title styles */\\r\\n.title-with-icon {display: flex; align-items: center; white-space: nowrap;}\\r\\n.moving-title {position: relative; margin-top: -2.3em; width: 100%; overflow: hidden; z-index: 2;}\\r\\n.moving-title::before {content: \\\"\\\"; position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 2; \\r\\nbackground: linear-gradient(to right, rgba(30, 30, 31, 1) 0%, rgba(30, 30, 31, 0) 5%), linear-gradient(to left, rgba(30, 30, 31, 1) 0%, rgba(30, 30, 31, 0) 5%);}\\r\\n.moving-title h1 {font-weight: 200 !important; letter-spacing: -0.4px;}\\r\\n.moving-text-wrapper {display: inline-flex; align-items: center; animation: slide 32s linear infinite;}\\r\\n.moving-text {display: inline-flex; align-items: center; padding-right: 108px;}\\r\\n#shadow-dynamic-app .moving-text {padding-right: 146px;}\\r\\n\\r\\n/* SVG icon styles for rotation and size */\\r\\n#Layer_12 {padding-left: 0.03em; padding-right: 0.03em; margin-top: 0.4em; width: 1.1em;  height: 1.1em;  animation: rotate 10s linear infinite;}\\r\\n}\\r\\n\\r\\n\\r\\n/* Hero title for desktop devices */\\r\\n@media screen and (min-width: 1025px) {\\r\\n.title-container {display: flex; flex-direction: column; align-items: center; justify-content: center; width: 100%; margin: 0 auto; position: relative;}\\r\\n.static-title {z-index: 2; width: 50%; white-space: nowrap; text-align: center;}\\r\\n#shadow-dynamic-app .static-title {width: auto !important; }\\r\\n\\r\\n/* Moving title styles */\\r\\n.title-with-icon {display: flex; align-items: center; white-space: nowrap;}\\r\\n.moving-title {display: flex; justify-content: flex-start; align-items: center; overflow: hidden; width: 66%; position: relative; margin-top: -1.2em;}\\r\\n.moving-title::before {content: \\\"\\\"; position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 2; \\r\\nbackground: linear-gradient(to right, rgba(30, 30, 31, 1) 0%, rgba(30, 30, 31, 0) 10%), linear-gradient(to left, rgba(30, 30, 31, 1) 0%, rgba(30, 30, 31, 0) 10%); background-blend-mode: screen;}\\r\\n#shadow-dynamic-app .moving-title::before { background: linear-gradient(to right, rgba(30, 30, 31, 1) 0%, rgba(30, 30, 31, 0) 24%), linear-gradient(to left, rgba(30, 30, 31, 1) 0%, rgba(30, 30, 31, 0) 24%); }\\r\\n\\r\\n.moving-title h1 {font-weight: 200 !important; letter-spacing: -1.6px;}\\r\\n.moving-text-wrapper {display: flex; white-space: nowrap; align-items: center; animation: slide var(--animation-speed, 48s) linear infinite;}\\r\\n.moving-text {display: inline-flex; align-items: center; padding-right: 74px; mix-blend-mode: difference;}\\r\\n\\r\\n/* SVG icon styles for rotation and size */\\r\\n#Layer_12 {padding-left: 0.04em; padding-right: 0.04em; margin-top: 0.225em; width: 1.3em;  height: 1.05em; animation: rotate var(--animation-speed, 16s) linear infinite;}\\r\\n#shadow-dynamic-app  .moving-title {margin-top: 1.1em; width: 65%;}\\r\\n#shadow-dynamic-app #Layer_12 {width: 1.1em; height: 1.1em;}\\r\\n#shadow-dynamic-app .moving-text {padding-right: 72px;}\\r\\n#shadow-dynamic-app span.svg-icon {width: 1.04em; font-size: 85% !important;}\\r\\n}\\r\\n\\r\\n@media screen and (min-width: 2025px) { \\r\\n.moving-title {margin-top: -1.2em;}\\r\\n#shadow-dynamic-app  .moving-title {margin-top: 0em;}\\r\\n.moving-text {padding-right: 186px;}\\r\\n}\";","// Student → color set mapping\r\nexport const colorMapping: Record<string, [string, string, string, string]> = {\r\n  'Yiner Xu ': ['#e9b2c2', '#ffc3d4', '#5f4f53', '#ffc9d8'],\r\n  'Simone Schwartz': ['#d2b098', '#f0be9b', '#5b4e44', '#f2c5a5'],\r\n  'Seth Abrahamson ': ['#a9a9a9', '#b9b9b9', '#292929', '#c0c0c0'],\r\n  'Sanna Anwar': ['#e9d0a0', '#ffe4af', '#2f2d28', '#ffe7b7'],\r\n  'Javi Ortiz': ['#e9afbd', '#ffbfcf', '#2f2a2b', '#ffc5d4'],\r\n  'Janhvi Gokalgandhi': ['#a0e1e9', '#aff7ff', '#282e2f', '#b7f8ff'],\r\n  'Andrew Adamides': ['#bef9da', '#7ca08d', '#262a28', '#9dccb4'],\r\n  'Shozab Raza': ['#e9e0a7', '#fff6b6', '#2f2e29', '#fff7bd'],\r\n  'Baopu Wang': ['#b3c2e9', '#c4d4ff', '#4f535f', '#cad8ff'],\r\n  'Efe Ozalp': ['#6fc1e9', '#78d3ff', '#242b2f', '#85d7ff'],\r\n  'Harry Liao ': ['#abcdb2', '#b5e7be', '#292d2a', '#bceac5'],\r\n  'Jawad Naik': ['#97cfac', '#9bedb9', '#272d29', '#a5efc0'],\r\n};\r\n\r\nexport const colorMapping2: Record<string, [string, string, string, string]> = {\r\n  'Yiner Xu': ['#e9b2c2', '#ffc3d4', '#5f4f53', '#ffc9d8'],\r\n  'Simone Schwartz': ['#d2b098', '#f0be9b', '#5b4e44', '#f2c5a5'],\r\n  'Seth Abrahamson': ['#a9a9a9', '#b9b9b9', '#292929', '#c0c0c0'],\r\n  'Sanna Anwar': ['#e9d0a0', '#ffe4af', '#2f2d28', '#ffe7b7'],\r\n  'Javi Ortiz': ['#e9afbd', '#ffbfcf', '#2f2a2b', '#ffc5d4'],\r\n  'Janhvi Gokalgandhi': ['#a0e1e9', '#aff7ff', '#282e2f', '#b7f8ff'],\r\n  'Andrew Adamides': ['#bef9da', '#7ca08d', '#262a28', '#9dccb4'],\r\n  'Shozab Raza': ['#e9e0a7', '#fff6b6', '#2f2e29', '#fff7bd'],\r\n  'Baopu Wang': ['#b3c2e9', '#c4d4ff', '#4f535f', '#cad8ff'],\r\n  'Efe Ozalp': ['#6fc1e9', '#78d3ff', '#242b2f', '#85d7ff'],\r\n  'Harry Liao': ['#abcdb2', '#b5e7be', '#292d2a', '#bceac5'],\r\n  'Jawad Naik': ['#97cfac', '#9bedb9', '#272d29', '#a5efc0'],\r\n};\r\n\r\n"],"names":["WHITE","resolvePalette","altRaw","colorMapping","exact","Array","isArray","trimmed","trim","computeStateFromPalette","q","_ref","win","arguments","length","undefined","window","palette","c0","c1","c2","c3","movingText","innerWidth","activeColor","lastKnown","items","lastKnownColor","onToggleFireworks","canvasRef","useRef","fireworksEnabled","setFireworksEnabled","useState","fireworksRef","fireworksEnabledRef","isPageHiddenRef","hiddenStartTimeRef","hiddenDurationRef","isRealMobile","useRealMobileViewport","isRealMobileRef","useEffect","current","handleVisibilityChange","document","visibilityState","performance","now","addEventListener","removeEventListener","p5InstanceRef","latestItems","latestColorMapping","latestLastKnownColor","destroyed","q5","p","fireworks","lastFireworkTime","lastLaunchPosition","createVector","width","height","Particle","constructor","x","y","c","firework","size","type","minLifespan","maxLifespan","hasTrail","this","pos","vel","random","mult","acc","col","adjustBrightness","shapeType","windowWidth","lifespan","map","trailLength","trail","fill","initialSpeed","mag","trailLifespan","fadeFactor","blinkingSpeed","blinkingAlpha","baseColor","multiplier","r","Math","min","max","levels","g","b","color","applyForce","force","add","update","pop","unshift","copy","i","gravityForce","abs","sin","millis","show","alpha","noStroke","shrinkSize","shrinkFactor","pow","normalizedSize","rotationAngle","atan2","trailAlpha","trailSize","strokeWeight","stroke","point","push","translate","rotate","rotationSpeed","frameCount","ellipse","halfSize","rect","triangle","isDone","Firework","targetX","targetY","baseCount","particles","exploded","explosionStartTime","numParticles","floor","explode","initialVel","largerParticleCount","speed","adjustForScreenWidth","screenWidth","screenMultiplier","angle","TWO_PI","velocity","cos","velocityMultiplier","HALF_PI","particle","launchSpeed","direction","normalize","dist","splice","addNewFirework","fireworkType","_latestItems$current","_latestItems$current$","startX","startY","selectedAlt1","alt1","colorArray","console","warn","concat","topColorCount","usableColors","filter","Boolean","adjustedHex","hex","parseInt","slice","toString","padStart","fireworkColor","setup","createCanvas","windowHeight","fireworkToggle","nextFireworkDelay","draw","clear","background","adjustedTime","remove","toggleFireworks","useCallback","isEnabled","_jsx","ref","options","value","label","shuffleArray","arr","a","j","_options$find","onFetchItems","customArrowIcon","getRoot","isOpen","setIsOpen","selectedValue","setSelectedValue","randomTick","setRandomTick","baseItems","setBaseItems","setItems","dropdownRef","useStyleInjection","handleClickOutside","e","_root$querySelector","root","pauseButton","querySelector","call","target","contains","_root$addEventListene","_root$removeEventList","_cached$images","cancelled","cached","getPreloadedDynamicApp","images","ensureImagesPreload","then","catch","derived","data","mode","sort","title","localeCompare","localSort","setScreenWidth","onResize","itemIndex","borderItemColor","useMemo","_items$itemIndex","alt","convertHexToRGBA","h","replace","boxShadowItemColor","_items$itemIndex2","_jsxs","className","children","style","border","boxShadow","onClick","find","opt","dangerouslySetInnerHTML","__html","borderTop","option","handleOptionClick","t","UIcards","React","image1","image2","alt2","url1","customArrowIcon2","href","MediaLoader","src","priority","displayName","index","getShadowRoot","pauseAnimation","getScrollRoot","_getShadowRoot","shadow","isInShadow","containerEl","mouseInside","hostEl","host","onEnter","onLeave","cardEl","imageContainer","imageContainer2","applyTransform","percentage","Element","clientWidth","imageContainerTransform","imageContainer2Transform","imageContainerZIndex","imageContainer2ZIndex","transform","zIndex","observer","IntersectionObserver","entry","boundingClientRect","rootRect","getBoundingClientRect","documentElement","rootHeight","clientHeight","innerHeight","rootCenter","top","threshold","from","_","initialPct","observe","disconnect","useIntersectionTransform","backgroundColor","currentlyActiveAlt1","highestVisibility","debounceTimeout","onActivate","onDeactivate","rootElement","observerOptions","rootMargin","keys","observerCallback","entries","intersectionRatio","forEach","imageElement","alt1Value","getAttribute","visibility","querySelectorAll","card","clearTimeout","setTimeout","boundingRect","viewportHeight","RedIntroOverlay","visible","setVisible","timer","position","left","opacity","pointerEvents","transition","onReady","sortedImages","setSortedImages","svgIcons","setSvgIcons","setActiveColor","movingTextColors","setMovingTextColors","setLastKnownColor","isLoading","setIsLoading","setPauseAnimation","showNavigation","setShowNavigation","toggleFireworksRef","scrollContainerRef","shadowRef","showFireworks","setShowFireworks","isHostVisible","setIsHostVisible","hostVisibleRef","injectStyle","useShadowRoot","indexCss","miscCss","overlayCss","id","requestAnimationFrame","_unused","cancelAnimationFrame","snap","icons","ensureDynamicPreload","whenDynamicPreloadReady","cache","observerRoot","handleActivate","quartet","nextActive","nextTriplet","handleDeactivate","currentAltRef","cleanup","setupAltObserver","handleSetToggleFireworks","fn","handlePauseToggle","ro","ResizeObserver","container","io","_ref2","isIntersecting","desired","prev","visibleNow","bottom","initialDesired","cardRefs","_cardRefs$current$i","IntroOverlay","Navigation","scrollLockContainer","FireworksDisplay","TitleDivider","svgIcon","PauseButton","toggleP5Animation","SortBy","setSortOption","ObservedCard","Footer","linkArrowIcon","onFocusChange","shadowRoot","setShadowRoot","ShadowRoot","createShadowRoot","div","readySentRef","sendReady","_shadowRef$current","_shadowRef$current$ge","getRootNode","el","focusTriggered","handleTouchStart","touches","clientY","handleTouchMove","deltaY","scrollTop","triggerSyntheticClick","down","PointerEvent","bubbles","cancelable","composed","pointerType","dispatchEvent","log","passive","ShadowRootProvider","DynamicTheme","role","tabIndex","rel","hasDOM","hasConstructedSheets","globalThis","Document","prototype","CSSStyleSheet","isShadowRoot","node","ShadowRootContext","createContext","warnedOnce","ctx","useContext","css","head","createElement","dataset","styleId","textContent","appendChild","injectLink","selector","link","removeStyle","_document$head$queryS","sheetCacheRef","Map","Provider","sheet","get","replaceSync","set","adoptedStyleSheets","includes","s","_document$head$queryS2","globalStyleIds","__DYNAMIC_STYLE_IDS__","Set","has","styleEl","totalImages","loadedLowRes","listeners","upgradeTimeout","registerImage","setUpgradeTimeout","objectPosition","loop","muted","playsInline","preload","enableVisibilityControl","controls","isSSR","loaded","setLoaded","showMedium","setShowMedium","showHigh","setShowHigh","posterRemoved","setPosterRemoved","videoRef","imgRef","containerRef","isNear","once","near","setNear","some","useNearViewport","shouldStart","_imgRef$current","_videoRef$current","complete","readyState","t1","callback","off","t2","onMediaLoaded","event","CustomEvent","detail","isVideoSetObj","vs","legacyVideoUrl","posterUrl","poster","urlFor","quality","auto","url","v","hidePoster","removeAttribute","onPlay","anyV","requestVideoFrameCallback","onTime","currentTime","video","load","play","pause","_observer","useVideoVisibility","retryTimer","promoteTimer","kickLoad","tryPlay","async","paused","_unused3","onLoadedMeta","nudgeDecode","_unused2","onLoadedData","onCanPlay","_unused4","onError","onStalled","onSuspend","webmUrl","mp4Url","hasVideoSource","ultraLowSrc","getLowResImageUrl","mediumSrc","getMediumImageUrl","highResSrc","getHighQualityImageUrl","resolvedSrc","LoadingScreen","isFullScreen","loading","fetchPriority","onLoad","draggable","_objectSpread","objectFit","showSpinner","onLoadedMetadata","animRef","isClicked","setIsClicked","currentFrame","setCurrentFrame","mounted","lottie","loadAnimation","renderer","autoplay","animationData","anim","goToAndStop","destroy","onMouseEnter","handleMouseEnter","playSegments","onMouseLeave","handleMouseLeave","stopPropagation","targetFrame","isTriplet","every","rootRef","isVisible","setIsVisible","incoming","stableColors","setStableColors","pendingRef","sameTriplet","mul","test","colors","textSegments","text","suffix","flatMap","repeatIndex","segment","renderMovingContent","colorMapping2"],"sourceRoot":""}