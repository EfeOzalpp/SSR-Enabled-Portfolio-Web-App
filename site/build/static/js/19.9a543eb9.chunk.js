"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[19],{67892:(e,t,i)=>{i.d(t,{A:()=>m});var o=i(89379),n=i(31014);var r=i(13721),s=i(93746);let a=0,l=0,d=[],c=null;const u=()=>{a++,function(){c||(c=setTimeout(()=>{d.forEach(e=>e()),d=[]},arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3))}()};var v=i(46550);const m=e=>{let{type:t,src:i,alt:c="",id:m,className:p="",style:h={},objectPosition:y="center center",loop:f=!0,muted:w=!0,playsInline:g=!0,preload:E="metadata",enableVisibilityControl:b=!0,priority:L=!1,controls:j=!1}=e;const x="undefined"===typeof window,[A,S]=(0,n.useState)(x),[T,U]=(0,n.useState)(!1),[N,_]=(0,n.useState)(!1),[I,C]=(0,n.useState)(!1),D=(0,n.useRef)(null),O=(0,n.useRef)(null),R=(0,n.useRef)(null),F=function(e){let{rootMargin:t="900px 0px",threshold:i=0,once:o=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const[r,s]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{if(!e.current||r)return;const n=new IntersectionObserver(e=>{e.some(e=>e.isIntersecting)&&(s(!0),o&&n.disconnect())},{rootMargin:t,threshold:i});return n.observe(e.current),()=>n.disconnect()},[e,r,t,i,o]),r}(R),H=L||F;(0,n.useEffect)(()=>{var e,i;"image"===t&&null!==(e=O.current)&&void 0!==e&&e.complete&&S(!0),"video"===t&&(null===(i=D.current)||void 0===i?void 0:i.readyState)>=2&&S(!0)},[t]),(0,n.useEffect)(()=>{if("image"!==t)return;u();const e=setTimeout(()=>U(!0),H?0:2e3);H&&U(!0);var i;i=()=>setTimeout(()=>_(!0),300),d.push(i);const o=setTimeout(()=>_(!0),5e3);return()=>{clearTimeout(e),clearTimeout(o)}},[t,H]);const V=()=>{if(S(!0),"image"===t&&(l++,l>=a&&(d.forEach(e=>e()),d=[])),m){const e=new CustomEvent("mediaReady",{detail:{id:m}});window.dispatchEvent(e)}},B="object"===typeof i&&null!==i&&!("asset"in i)&&("webmUrl"in i||"mp4Url"in i),M=B?i:void 0,k="string"===typeof i?i:void 0,P=null!==M&&void 0!==M&&M.poster?"string"===typeof M.poster?M.poster:(0,s.dk)(M.poster).width(1200).quality(80).auto("format").url():void 0;(0,n.useEffect)(()=>{if("video"!==t||!D.current)return;const e=D.current,i=()=>{C(!0),e.removeAttribute("poster")},o=()=>{const t=e;if("function"!==typeof t.requestVideoFrameCallback){const t=()=>{e.currentTime>0&&e.readyState>=2&&(e.removeEventListener("timeupdate",t),i())};e.addEventListener("timeupdate",t);const o=setTimeout(()=>{e.removeEventListener("timeupdate",t),i()},1200);return()=>clearTimeout(o)}t.requestVideoFrameCallback(()=>i())};return e.addEventListener("play",o,{once:!0}),()=>e.removeEventListener("play",o)},[t]),function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.4;(0,n.useEffect)(()=>{if(null===e||void 0===e||!e.current||null===t||void 0===t||!t.current)return;const o="number"===typeof i&&i>=0&&i<=1?i:.4;let n;const r=e.current,s=t.current;r.load(),r.muted=!0,n=new IntersectionObserver(e=>{let[t]=e;t.isIntersecting?r.play().catch(()=>setTimeout(()=>r.play().catch(()=>{}),500)):r.pause()},{threshold:o}),n.observe(s);const a=s.getBoundingClientRect();return Math.min(Math.max((window.innerHeight-a.top)/window.innerHeight,0),1)>=o&&r.play().catch(()=>{}),()=>{var e;return null===(e=n)||void 0===e?void 0:e.disconnect()}},[e,t,i])}(D,R,"video"===t&&b?.35:void 0),(0,n.useEffect)(()=>{if("video"!==t||!D.current)return;const e=D.current;let i=null,o=null;const n=()=>{try{e.preload=null!==E&&void 0!==E?E:"metadata","none"!==e.preload&&e.load()}catch(t){}},r=async()=>{if(b)try{e.muted&&e.playsInline&&e.paused&&e.readyState>=2&&await e.play().catch(()=>{})}catch(t){}},s=()=>{S(!0),(()=>{try{if(e.readyState<2)return;const t=e.currentTime;e.currentTime=t>0?t:.001}catch(t){}})()},a=()=>{S(!0),r()},l=()=>{S(!0),r()};H&&(n(),i=window.setTimeout(()=>{e.readyState<2&&n()},2500),o=window.setTimeout(()=>{if(e.readyState<2)try{e.preload="auto",e.load()}catch(t){}},5e3)),e.addEventListener("loadedmetadata",s),e.addEventListener("loadeddata",a),e.addEventListener("canplay",l);const d=e=>console.warn("Video error",e),c=()=>console.warn("Video stalled"),u=()=>{};return e.addEventListener("error",d),e.addEventListener("stalled",c),e.addEventListener("suspend",u),()=>{i&&(window.clearTimeout(i),i=null),o&&(window.clearTimeout(o),o=null),e.removeEventListener("loadedmetadata",s),e.removeEventListener("loadeddata",a),e.removeEventListener("canplay",l),e.removeEventListener("error",d),e.removeEventListener("stalled",c),e.removeEventListener("suspend",u)}},[t,H,E,b,B,M&&M.webmUrl||"",M&&M.mp4Url||"",k||""]);const q=Boolean((null===M||void 0===M?void 0:M.webmUrl)||(null===M||void 0===M?void 0:M.mp4Url)||k);if(!i||"video"===t&&!q)return null;if("image"===t){const e="string"===typeof i?i:(0,s.DB)(i),t="string"===typeof i?i:(0,s.oA)(i),n="string"===typeof i?i:(0,s.Kn)(i),a=N?n:T?t:e;return a?(0,v.jsxs)("div",{ref:R,style:{position:"relative",width:"100%",height:"100%"},children:[!A&&(0,v.jsx)("div",{className:"absolute-inset",children:(0,v.jsx)(r.A,{isFullScreen:!1})}),(0,v.jsx)("img",{ref:O,loading:L?"eager":void 0,fetchPriority:N||L?"high":T?"auto":"low",id:m,src:a||void 0,alt:c,onLoad:V,onError:e=>console.warn("Image failed",e.target.src),className:p,draggable:!1,style:(0,o.A)((0,o.A)({},h),{},{objectFit:"cover",objectPosition:y,opacity:A?1:0,transition:x?"none":"filter 0.5s ease, opacity 0.3s ease"})})]}):null}const z=!A;return(0,v.jsxs)("div",{ref:R,style:{position:"relative",width:"100%",height:"100%"},children:[z&&(0,v.jsx)("div",{className:"absolute-inset",children:(0,v.jsx)(r.A,{isFullScreen:!1})}),(0,v.jsxs)("video",{id:m,ref:D,onLoadedData:V,onLoadedMetadata:()=>S(!0),onError:e=>console.warn("Video failed",e),className:p,style:(0,o.A)((0,o.A)({},h),{},{objectFit:"cover",objectPosition:y,opacity:A?1:0,transition:x?"none":"opacity 0.3s ease",pointerEvents:"all",zIndex:1}),loop:f,muted:w,playsInline:g,preload:null!==E&&void 0!==E?E:"metadata",controls:j,poster:I?void 0:P,children:[(null===M||void 0===M?void 0:M.mp4Url)&&(0,v.jsx)("source",{src:M.mp4Url||void 0,type:"video/mp4"}),(null===M||void 0===M?void 0:M.webmUrl)&&(0,v.jsx)("source",{src:M.webmUrl||void 0,type:"video/webm"}),!(null!==M&&void 0!==M&&M.webmUrl)&&!(null!==M&&void 0!==M&&M.mp4Url)&&k&&(0,v.jsx)("source",{src:k||void 0})]})]})}},93244:()=>{},97531:(e,t,i)=>{i.r(t),i.d(t,{default:()=>v});var o=i(31014),n=i(6982),r=i(53083),s=i(13430),a=i(67892),l=i(68493),d=(i(93244),i(46550));const c=16,u=.25;function v(){var e,t,i,v;const[m,p]=(0,o.useState)(null),[h,y]=(0,o.useState)(()=>window.innerWidth<768?55:50),[f,w]=(0,o.useState)(window.innerHeight>window.innerWidth);if((0,l.h)(),(0,o.useEffect)(()=>{(0,n.C)("rotary-lamp").then(e=>p(e))},[]),(0,o.useEffect)(()=>{const e=()=>w(window.innerHeight>window.innerWidth);return window.addEventListener("resize",e,{passive:!0}),()=>window.removeEventListener("resize",e)},[]),!m)return null;const g=f?m.mediaOne:m.mediaTwo,E=f?m.mediaTwo:m.mediaOne,b=f&&h<=c+u,L=f&&h>=100-c-u;return(0,d.jsxs)("section",{className:"block-type-1",id:"no-ssr",style:{position:"relative"},children:[(0,d.jsx)("div",{className:"media-content-1",style:f?b?{height:"0%",width:"100%",position:"absolute",top:0,transition:"height 0.1s ease"}:L?{height:"100%",width:"100%",position:"absolute",top:0,transition:"height 0.1s ease"}:{height:"".concat(h,"%"),width:"100%",position:"absolute",top:0}:{width:"".concat(h,"%"),height:"100%",position:"absolute",left:0},children:(0,d.jsx)(s.A,{sensitivity:2,children:(0,d.jsx)(a.A,{type:"image",src:g.image,alt:g.alt||"Rotary Lamp media",id:"rotary-media-1",className:"media-item-1 tooltip-rotary-lamp",style:{width:"100%",height:"100%"}})})}),(0,d.jsx)(r.A,{split:h,setSplit:y}),(0,d.jsx)("div",{className:"media-content-2",style:f?b?{height:"100%",width:"100%",position:"absolute",top:"0%",transition:"height 0.1s ease, top 0.1s ease"}:L?{height:"0%",width:"100%",position:"absolute",top:"100%",transition:"height 0.1s ease, top 0.1s ease"}:{height:"".concat(100-h,"%"),width:"100%",position:"absolute",top:"".concat(h,"%")}:{width:"".concat(100-h,"%"),height:"100%",position:"absolute",left:"".concat(h,"%")},children:(0,d.jsx)(s.A,{sensitivity:2,children:(0,d.jsx)(a.A,{type:null!==E&&void 0!==E&&null!==(e=E.video)&&void 0!==e&&null!==(t=e.asset)&&void 0!==t&&t.url?"video":"image",src:(null===E||void 0===E||null===(i=E.video)||void 0===i||null===(v=i.asset)||void 0===v?void 0:v.url)||E.image,alt:E.alt||"Rotary Lamp media",id:"rotary-media-2",className:"media-item-2 tooltip-rotary-lamp",style:{width:"100%",height:"100%"}})})})]})}}}]);
//# sourceMappingURL=19.9a543eb9.chunk.js.map