{"version":3,"file":"src_dynamic-app_components_IntroOverlay_jsx-src_dynamic-app_components_fireworksDisplay_jsx-s-21d201.server.js","mappings":"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","sources":["webpack://personal-site/./src/dynamic-app/components/IntroOverlay.jsx","webpack://personal-site/./src/dynamic-app/components/fireworksDisplay.jsx","webpack://personal-site/./src/dynamic-app/components/footer.jsx","webpack://personal-site/./src/dynamic-app/components/homepage-UIcards.jsx","webpack://personal-site/./src/dynamic-app/components/navigation.jsx","webpack://personal-site/./src/dynamic-app/components/pauseButton.jsx","webpack://personal-site/./src/dynamic-app/components/sortBy.jsx","webpack://personal-site/./src/dynamic-app/components/title.jsx","webpack://personal-site/./src/dynamic-app/lib/colorString.ts","webpack://personal-site/./src/dynamic-app/lib/fetchGallery.js","webpack://personal-site/./src/dynamic-app/lib/fetchSVGIcons.js","webpack://personal-site/./src/dynamic-app/lib/fetchUser.js","webpack://personal-site/./src/dynamic-app/lib/setupAltObserver.js","webpack://personal-site/./src/utils/context-providers/shadow-root-context.tsx","webpack://personal-site/./src/utils/context-providers/style-injector.ts","webpack://personal-site/./src/utils/media-providers/image-upgrade-manager.ts","webpack://personal-site/./src/utils/media-providers/media-loader.tsx","webpack://personal-site/./src/utils/media-providers/video-observer.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\n\r\nconst RedIntroOverlay = () => {\r\n  const [visible, setVisible] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => setVisible(false), 500);\r\n    return () => clearTimeout(timer);\r\n  }, []);\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        width: '100vw',\r\n        height: '100vh',\r\n        backgroundColor: '#1e1e1f',\r\n        opacity: visible ? 1 : 0,\r\n        pointerEvents: 'none',\r\n        transition: 'opacity 0.4s ease',\r\n        zIndex: 9999,\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default RedIntroOverlay;\r\n","// Firework Animation Code\r\nimport React, { useRef, useEffect, useState, useCallback } from 'react';\r\nimport q5 from 'q5';\r\nimport { useRealMobileViewport } from '../../utils/content-utility/real-mobile.ts';\r\n\r\nconst FireworksDisplay = ({ colorMapping = {}, items = [], lastKnownColor, onToggleFireworks }) => {\r\n  const canvasRef = useRef(null);\r\n  const [fireworksEnabled, setFireworksEnabled] = useState(true);\r\n  const fireworksRef = useRef([]);\r\n  const fireworksEnabledRef = useRef(true);\r\n\r\n  const isPageHiddenRef = useRef(false);\r\n  const hiddenStartTimeRef = useRef(0);\r\n  const hiddenDurationRef = useRef(0);\r\n\r\n  const isRealMobile = useRealMobileViewport();\r\n  const isRealMobileRef = useRef(isRealMobile);\r\n\r\n  useEffect(() => {\r\n    isRealMobileRef.current = isRealMobile;\r\n  }, [isRealMobile]);\r\n\r\n  // Documnt visibility\r\n  useEffect(() => {\r\n    const handleVisibilityChange = () => {\r\n      if (document.visibilityState === 'hidden') {\r\n        isPageHiddenRef.current = true;\r\n        hiddenStartTimeRef.current = performance.now();\r\n      } else if (document.visibilityState === 'visible') {\r\n        isPageHiddenRef.current = false;\r\n        const now = performance.now();\r\n        hiddenDurationRef.current += now - hiddenStartTimeRef.current;\r\n      }\r\n    };\r\n\r\n    document.addEventListener('visibilitychange', handleVisibilityChange);\r\n    return () => {\r\n      document.removeEventListener('visibilitychange', handleVisibilityChange);\r\n    };\r\n  }, []);\r\n\r\n  // Function to adjust brightness of a hex color\r\n  function adjustBrightness(hex, multiplier) {\r\n    // Convert hex to RGB\r\n    let r = parseInt(hex.slice(1, 3), 16);\r\n    let g = parseInt(hex.slice(3, 5), 16);\r\n    let b = parseInt(hex.slice(5, 7), 16);\r\n\r\n    // Apply brightness multiplier\r\n    r = Math.min(255, Math.max(0, Math.floor(r * multiplier)));\r\n    g = Math.min(255, Math.max(0, Math.floor(g * multiplier)));\r\n    b = Math.min(255, Math.max(0, Math.floor(b * multiplier)));\r\n\r\n    // Convert back to hex and return\r\n    return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;\r\n  }\r\n\r\n    const p5InstanceRef = useRef(null); // Track single p5 instance\r\n    const latestItems = useRef(items);\r\n    const latestColorMapping = useRef(colorMapping);\r\n    const latestLastKnownColor = useRef(lastKnownColor);\r\n\r\n  useEffect(() => {\r\n    latestItems.current = items;\r\n    latestColorMapping.current = colorMapping;\r\n    latestLastKnownColor.current = lastKnownColor;\r\n    }, [items, colorMapping, lastKnownColor]);\r\n\r\n  useEffect(() => {\r\n    let destroyed = false;\r\n\r\n    if (!canvasRef.current || p5InstanceRef.current || destroyed) return;\r\n\r\n\r\n      const sketch = (p) => {\r\n        let fireworks = fireworksRef.current;\r\n        let lastFireworkTime = -8000;\r\n        let lastLaunchPosition = p.createVector(p.width / 2, p.height);\r\n        const minDistance = 1000;\r\n\r\n        class Particle {\r\n          constructor(x, y, c, firework, size, type, hasTrail = false) {\r\n            this.pos = p.createVector(x, y);\r\n            this.vel = firework\r\n              ? p.createVector(0, p.random(-10, -20)) // Firework launch velocity\r\n              : p.createVector(p.random(-1, 1), p.random(-1, 1)).mult(p.random(0, 18)); // Explosion velocity\r\n            this.acc = p.createVector(0, 0);\r\n          \r\n            // Adjust brightness based on firework type and size\r\n            this.col = this.adjustBrightness(\r\n              c,\r\n              size > 10\r\n                ? p.random(1.4, 2) // Larger particles\r\n                : size > 5\r\n                ? p.random(1.1, 1.3) // Mid-size particles\r\n                : p.random(0.7, 1.1) // Smaller particles\r\n            );\r\n          \r\n            this.firework = firework;\r\n            this.size = size;\r\n            this.type = type;\r\n            this.hasTrail = hasTrail;\r\n          \r\n            this.shapeType = p.random(['circle', 'square', 'triangle']); // Add random shape selection\r\n          \r\n            // Randomize lifespan based on size (larger particles live longer)\r\n            let minLifespan, maxLifespan;\r\n\r\n            if (p.windowWidth < 768) {\r\n              minLifespan = p.random(30, 60);\r\n              maxLifespan = p.random(40, 80);\r\n            } else if (p.windowWidth <= 1024) {\r\n              minLifespan = p.random(50, 80);\r\n              maxLifespan = p.random(70, 100);\r\n            } else {\r\n              minLifespan = p.random(50, 90);\r\n              maxLifespan = p.random(80, 140);\r\n            }\r\n\r\n            this.lifespan = p.map(size, 1, 12, minLifespan, maxLifespan);\r\n\r\n          \r\n            // Adjust trail length based on particle size\r\n            this.trailLength = size >= 4 && size <= 12 ? 8 : 1; // Longer trail for larger particles\r\n            this.trail = Array(this.trailLength).fill(p.createVector(x, y)); // Set trail array\r\n          \r\n            // Map trailLifespan to speed (higher speed -> higher alpha, lower speed -> fade out)\r\n            const initialSpeed = this.vel.mag();\r\n            this.trailLifespan = Array(this.trailLength).fill(p.map(initialSpeed, 0, 20, 0, 100)); // Dynamically set based on speed\r\n          \r\n            this.fadeFactor = p.map(size, 1, 15, 0.6, 0.5); // Smaller particles fade faster\r\n          \r\n            // Blinking properties (only for explosion particles)\r\n            this.blinkingSpeed = firework ? 0 : p.random(5, 30); // Blinking speed for explosion particles\r\n            this.blinkingAlpha = firework ? 255 : 255; // Default alpha value for explosion particles\r\n          }           \r\n        \r\n          // Adjust brightness of the color\r\n          adjustBrightness(baseColor, multiplier) {\r\n            const r = Math.min(255, Math.max(0, baseColor.levels[0] * multiplier));\r\n            const g = Math.min(255, Math.max(0, baseColor.levels[1] * multiplier));\r\n            const b = Math.min(255, Math.max(0, baseColor.levels[2] * multiplier));\r\n            return p.color(r, g, b);\r\n          }\r\n        \r\n          applyForce(force) {\r\n            this.acc.add(force);\r\n          }\r\n        \r\n          update() {\r\n            this.vel.add(this.acc);\r\n            this.pos.add(this.vel);\r\n            this.acc.mult(0);\r\n        \r\n            if (!this.firework) {\r\n              this.vel.mult(0.927); // Slow down over time\r\n              this.lifespan -= this.fadeFactor; // Decrease lifespan\r\n        \r\n              // Make sure lifespan does not go below 0\r\n              if (this.lifespan <= 0) {\r\n                this.lifespan = 0;\r\n              }\r\n      \r\n              // Trail\r\n              if (this.hasTrail) {\r\n                this.trail.pop(); // Remove the oldest trail point\r\n                this.trail.unshift(this.pos.copy()); // Add the newest trail point\r\n                for (let i = 0; i < this.trailLifespan.length; i++) {\r\n                  this.trailLifespan[i] -= this.fadeFactor; // Gradually fade trail points\r\n                  this.trailLifespan[i] = Math.max(0, this.trailLifespan[i]); // Clamp lifespan to 0\r\n                }\r\n              }\r\n        \r\n              // Apply gravity based on particle size\r\n              let gravityForce;\r\n              if (this.size >= 1 && this.size < 2) {\r\n                gravityForce = p.random(-0.151, -0.161); // Weaker gravity for size 1\r\n              } else if (this.size >= 2 && this.size < 3) {\r\n                gravityForce = p.random(-0.146, -0.156); // Gravity for size 2\r\n              } else if (this.size >= 3 && this.size < 4) {\r\n                gravityForce = p.random(-0.144, -0.145); // Gravity for size 3\r\n              } else if (this.size >= 4 && this.size < 5) {\r\n                gravityForce = p.random(-0.141, -0.143); // Gravity for size 4\r\n              } else if (this.size >= 5 && this.size < 6) {\r\n                gravityForce = p.random(-0.139, -0.14); // Gravity for size 5\r\n              } else if (this.size >= 6 && this.size < 7) {\r\n                gravityForce = p.random(-0.137, -0.138); // Gravity for size 6\r\n              } else if (this.size >= 7 && this.size < 8) {\r\n                gravityForce = p.random(-0.135, -0.136); // Gravity for size 7\r\n              } else if (this.size >= 8 && this.size < 9) {\r\n                gravityForce = p.random(-0.134, -0.136); // Gravity for size 8\r\n              } else if (this.size <= 9) {\r\n                gravityForce = p.random(-0.135, -0.137); // Stronger gravity for size 9\r\n              } else if (this.size >= 10 && this.size <= 12) {\r\n                gravityForce = p.random(-0.094, -0.137); // Stronger gravity for size 9\r\n              }\r\n\r\n              this.applyForce(p.createVector(0, gravityForce)); // Apply gravity\r\n            }\r\n        \r\n            // Update blinking alpha for explosion particles\r\n            if (!this.firework && this.type === 'BLINKING') {\r\n              this.blinkingAlpha = Math.abs(255 * Math.sin((p.millis() / 1000) * this.blinkingSpeed));\r\n            }\r\n          }\r\n        \r\n          show() {\r\n            let alpha = this.firework\r\n              ? p.map(this.lifespan, 0, 255, 0, 255) // Normal fading for firework particles\r\n              : this.type === 'BLINKING'\r\n              ? this.blinkingAlpha // Blinking for explosion particles\r\n              : p.map(this.lifespan, 0, 255, 0, 255); // Fading for explosion particles\r\n          \r\n            p.noStroke();\r\n          \r\n            // Shrinking logic for the particle\r\n            let shrinkSize = this.size;\r\n            if (!this.firework) {\r\n              // Lifespan timing: calculate elapsed time (255 lifespan = full life)\r\n              const elapsedTime = p.map(this.lifespan, 255, 0, 0, 5); // 5 seconds total lifespan\r\n              const shrinkFactor = elapsedTime <= 2\r\n                ? 1 // No shrinking for the first 2 seconds\r\n                : p.map(this.lifespan, 255, 0, 1, 0); // Start shrinking after 2 seconds\r\n          \r\n              // Exponential shrinking towards the end\r\n              shrinkSize = this.size * (1 - Math.pow(1 - shrinkFactor, 6)); \r\n            }\r\n          \r\n            const normalizedSize = Math.max(shrinkSize * 1.1, 1); // Clamp minimum size to 1\r\n          \r\n            // Calculate rotation angle based on velocity vector\r\n            const rotationAngle = p.atan2(this.vel.y, this.vel.x); // Angle in radians\r\n          \r\n            // Draw trails first\r\n            if (this.hasTrail) {\r\n              for (let i = 0; i < this.trail.length; i++) {\r\n                const trailAlpha = this.trailLifespan[i];\r\n                if (trailAlpha > 0) {\r\n                  // Use a fixed size for trail points\r\n                  const trailSize = this.firework ? this.size * 0.9 : this.size * 0.8;\r\n            \r\n                  p.strokeWeight(trailSize); // Fixed trail size\r\n                  p.stroke(\r\n                    this.col.levels[0],\r\n                    this.col.levels[1],\r\n                    this.col.levels[2],\r\n                    trailAlpha\r\n                  );\r\n                  p.point(this.trail[i].x, this.trail[i].y);\r\n                }\r\n              }\r\n            }\r\n          \r\n            // Draw the main particle shape\r\n            p.push();\r\n            p.translate(this.pos.x, this.pos.y); // Move to particle position\r\n            p.rotate(rotationAngle); // Rotate based on velocity direction\r\n          \r\n            // Apply speed-based rotation scaling (optional)\r\n            const rotationSpeed = this.vel.mag() * 0.01; // Scale speed to adjust rotation dynamics\r\n            p.rotate(p.frameCount * rotationSpeed);\r\n          \r\n            p.fill(this.col.levels[0], this.col.levels[1], this.col.levels[2], alpha);\r\n          \r\n            // Draw shape based on shapeType\r\n            if (this.shapeType === 'circle') {\r\n              p.ellipse(0, 0, normalizedSize, normalizedSize);\r\n            } else if (this.shapeType === 'square') {\r\n              const halfSize = normalizedSize / 2;\r\n              p.rect(-halfSize, -halfSize, normalizedSize, normalizedSize);\r\n            } else if (this.shapeType === 'triangle') {\r\n              const halfSize = normalizedSize / 2;\r\n              p.triangle(\r\n                0, -halfSize, // Top vertex\r\n                -halfSize, halfSize, // Bottom-left vertex\r\n                halfSize, halfSize // Bottom-right vertex\r\n              );\r\n            }\r\n          \r\n            p.pop(); // Reset transformations\r\n          }        \r\n                      \r\n          // Check if the particle is done (lifespan is 0)\r\n          isDone() {\r\n            return this.lifespan <= 0; // Particle is done when lifespan is depleted\r\n          }\r\n        }\r\n        \r\n        class Firework {\r\n          constructor(x, y, targetX, targetY, col, type) {\r\n            this.firework = new Particle(x, y, col, true, 4, type);\r\n            this.particles = [];\r\n            this.exploded = false;\r\n            this.targetX = targetX;\r\n        \r\n            // Adjust explosion location based on screen width\r\n            if (p.windowWidth < 768) {\r\n              // For screens smaller than 768px, make the explosion higher on the screen\r\n              this.targetX = p.random(p.width * 0.5, p.width * 0.9);  \r\n              this.targetY = p.random(p.height * 0.1, p.height * 0.3);  \r\n              } else if (p.windowWidth >= 768 && p.windowWidth <= 1024) {\r\n              // For screens between 768px and 1024px, make the explosion in the middle\r\n              this.targetX = p.random(p.width * 0.65, p.width * 0.9);  \r\n              this.targetY = p.random(p.height * 0.05, p.height * 0.3);  \r\n              } else {\r\n              // For screens larger than 1024px, make the explosion lower on the screen\r\n              this.targetX = p.random(p.width * 0.3, p.width * 0.7);  \r\n              this.targetY = p.random(p.height * 0.1, p.height * 0.5);  \r\n            }\r\n        \r\n            this.col = col;\r\n            this.type = type;\r\n            this.explosionStartTime = -1;\r\n\r\n            // Particle amount logic\r\n            let baseCount;\r\n          if (p.windowWidth < 768) {\r\n            baseCount = type === 'BLINKING'\r\n              ? p.random(150, 300)\r\n              : p.random(125, 250);\r\n          } else if (p.windowWidth <= 1024) {\r\n            baseCount = type === 'BLINKING'\r\n              ? p.random(275, 375)\r\n              : p.random(200, 300); // Fewer PROJECTILE particles on medium screens\r\n          } else {\r\n            baseCount = type === 'BLINKING'\r\n              ? p.random(375, 475)\r\n              : p.random(400, 500);\r\n            }\r\n            this.numParticles = Math.floor(baseCount);\r\n          }\r\n        \r\n          explode() {\r\n            // Capture the firework's initial velocity to influence explosion particles\r\n            let initialVel = this.firework.vel.copy(); // Copy firework's velocity to influence explosion\r\n            \r\n            //limit particle count for larger ones between 25 to 50\r\n            const largerParticleCount = this.type === 'PROJECTILE' ? Math.floor(p.random(25, 50)) : 0;\r\n\r\n            for (let i = 0; i < this.numParticles; i++) {\r\n              let size;\r\n          \r\n              // Assign size based on whether it's a larger particle or a regular one\r\n              if (this.type === 'PROJECTILE' && i < largerParticleCount) {\r\n                size = p.random(10, 12); // Extra large particles for PROJECTILE\r\n              } else {\r\n                size = this.type === 'BLINKING' ? p.random(1, 9) : p.random(1, 8); // Smaller particles\r\n              }\r\n          \r\n              let speed = this.type === 'BLINKING'\r\n              ? (() => {\r\n                  // Inline definition for BLINKING firework speed calculation\r\n                  let speed;\r\n                  if (size >= 1 && size < 2) {\r\n                    speed = p.random(0.5, 2.7);\r\n                  } else if (size >= 2 && size < 3) {\r\n                    speed = p.random(2.5, 4.7);\r\n                  } else if (size >= 3 && size < 4) {\r\n                    speed = p.random(4.5, 6.7);\r\n                  } else if (size >= 4 && size < 5) {\r\n                    speed = p.random(6.5, 8.7);\r\n                  } else if (size >= 5 && size < 6) {\r\n                    speed = p.random(8.5, 8.7);\r\n                  } else if (size >= 6 && size < 7) {\r\n                    speed = p.random(8.8, 9);\r\n                  } else if (size >= 7 && size < 8) {\r\n                    speed = p.random(9.1, 9.2);\r\n                  } else if (size >= 8 && size < 9) {\r\n                    speed = p.random(9.2, 9.3);\r\n                  } else {\r\n                    speed = p.random(9.4, 9.5);\r\n                  }\r\n                  return adjustForScreenWidth(speed);\r\n                })()\r\n              : (() => {\r\n                  // Inline definition for PROJECTILE firework speed calculation\r\n                  let speed;\r\n                  if (size >= 1 && size < 7) {\r\n                    speed = p.random(1, 9);\r\n                  } else if (size >= 7 && size < 9) {\r\n                    speed = p.random(8, 9);\r\n                  } else if (size >= 10 && size < 12) {\r\n                    speed = p.random(9, 9.2);\r\n                  } else {\r\n                    speed = p.random(1, 4);\r\n                  }\r\n                  return adjustForScreenWidth(speed);\r\n                })();\r\n            \r\n            // Function to adjust speed based on screen size\r\n            function adjustForScreenWidth(speed) {\r\n              let screenWidth = p.windowWidth;\r\n              let screenMultiplier = 1; // Default multiplier\r\n            \r\n              if (screenWidth < 768) {\r\n                screenMultiplier = p.random(1.8, 2.6);\r\n              } else if (screenWidth >= 768 && screenWidth <= 1024) {\r\n                screenMultiplier = p.random(1.6, 2.2);\r\n              } else if (screenWidth > 1024) {\r\n                screenMultiplier = p.random(1.2, 2.2);\r\n              } \r\n              return speed * screenMultiplier;\r\n            }\r\n          \r\n              let angle = p.random(p.TWO_PI);\r\n              let velocity = p.createVector(p.cos(angle), p.sin(angle)).mult(speed);\r\n              \r\n              // Apply a smaller influence from firework velocity if particle is in line with the projectile\r\n              let angleDiff = Math.abs(p.atan2(velocity.y, velocity.x) - p.atan2(initialVel.y, initialVel.x));\r\n              \r\n              // If angle difference is small (i.e., the particle is moving along the same vector as the firework's trajectory), apply less multiplier\r\n              let velocityMultiplier = angleDiff < p.HALF_PI / 4 ? p.random(0, 0.5) : p.random(0.5, 0.8);\r\n              velocity.add(initialVel.mult(velocityMultiplier)); // Small influence from projectile velocity\r\n          \r\n              let hasTrail = size > 6; // Larger particles have trails\r\n                  \r\n              let type = 'BLINKING';\r\n              let particle = new Particle(\r\n                this.firework.pos.x + p.random(-2, 6),\r\n                this.firework.pos.y + p.random(-2, 6),\r\n                this.col,\r\n                false,\r\n                size,\r\n                type,\r\n                hasTrail\r\n              );\r\n                  \r\n              particle.vel = velocity;\r\n              this.particles.push(particle);\r\n            }\r\n            this.exploded = true;\r\n            this.explosionStartTime = p.millis();\r\n          }\r\n          \r\n          update() {\r\n            if (!this.exploded) {\r\n              let direction = p.createVector(this.targetX - this.firework.pos.x, this.targetY - this.firework.pos.y);\r\n              direction.normalize();\r\n              let launchSpeed;\r\n                if (p.windowWidth < 768) {\r\n                  launchSpeed = p.random(6, 11);\r\n                } else if (p.windowWidth <= 1024) {\r\n                  launchSpeed = p.random(5, 9); // Moderate speed boost for medium screens\r\n                } else {\r\n                  launchSpeed = p.random(3, 8);\r\n                }\r\n\r\n              direction.mult(launchSpeed);\r\n              this.firework.vel = direction;\r\n              this.firework.update();\r\n              if (p.dist(this.firework.pos.x, this.firework.pos.y, this.targetX, this.targetY) < 10) {\r\n                this.explode();\r\n              }\r\n            }\r\n            for (let i = this.particles.length - 1; i >= 0; i--) {\r\n              let particle = this.particles[i];\r\n              particle.applyForce(p.createVector(0, 0.160));  // Apply gravity force\r\n              particle.update();\r\n              if (particle.isDone()) {\r\n                this.particles.splice(i, 1);\r\n              }\r\n            }\r\n          }\r\n\r\n          show() {\r\n            if (!this.exploded) {\r\n              this.firework.show();\r\n            }\r\n            for (let particle of this.particles) {\r\n              particle.show();\r\n            }\r\n          }\r\n        }\r\n\r\n        function addNewFirework(fireworkType) {\r\n\r\n          const startX = p.width / 2;\r\n          const startY = p.height;\r\n\r\n          const selectedAlt1 = latestItems.current?.[0]?.alt1 || '';\r\n          const colorArray = latestColorMapping.current[selectedAlt1] || [];\r\n\r\n          // Early exit if no colors are available\r\n          if (!colorArray.length) {\r\n            console.warn(`No colors available for alt1: '${selectedAlt1}'`);\r\n            return;\r\n          }\r\n\r\n          let topColorCount;\r\n          if (p.windowWidth >= 1025) {\r\n            topColorCount = 3;\r\n          } else if (p.windowWidth >= 768) {\r\n            topColorCount = 2;\r\n          } else {\r\n            topColorCount = 1;\r\n          }\r\n\r\n          // Safely extract just 0, 1, and 3 (skip index 2)\r\n          const usableColors = [\r\n            colorArray[0],\r\n            colorArray[1],\r\n            colorArray[3],\r\n          ].filter(Boolean); // filter out undefined if array is incomplete\r\n          if (usableColors.length === 0) return;\r\n\r\n          const randomHex = usableColors[Math.floor(p.random(usableColors.length))]; // Pick one color\r\n\r\n          const brightnessMultiplier = p.random(1, 1.4);\r\n          const adjustedHex = adjustBrightness(randomHex, brightnessMultiplier);\r\n          const fireworkColor = p.color(adjustedHex);\r\n\r\n          const targetX = p.width / 2 + p.random(-50, 50);\r\n          const targetY = fireworkType === 'BLINKING' ? p.height * 0.2 : p.height * 0.7;\r\n\r\n          lastLaunchPosition = p.createVector(targetX, targetY);\r\n          fireworks.push(new Firework(startX, startY, targetX, targetY, fireworkColor, fireworkType));\r\n        }\r\n\r\n        p.setup = () => {\r\n          p.createCanvas(p.windowWidth, p.windowHeight);\r\n          const firstFireworkType = Math.random() < 0.5 ? 'BLINKING' : 'PROJECTILE'; // Randomize first firework type\r\n          addNewFirework(firstFireworkType); // Launch the first firework\r\n          lastFireworkTime = p.millis(); // Reset lastFireworkTime after the first launch\r\n        };      \r\n\r\n        hiddenDurationRef.current = 0;\r\n        lastFireworkTime = 0;\r\n        \r\n        let fireworkToggle = true; // Starts with BLINKING\r\n        let nextFireworkDelay = p.random(3000, 7000); // Random delay between 2000ms and 5000ms\r\n\r\n        p.draw = () => {\r\n          if (isRealMobileRef.current) {\r\n            p.clear(); // transparent\r\n          } else {\r\n            p.background('#1e1e1f'); // fallback\r\n          }\r\n            \r\n          if (!fireworksEnabledRef.current) {\r\n            fireworksRef.current.length = 0;\r\n            return;\r\n          }\r\n\r\n          for (let firework of fireworks) {\r\n            firework.update();\r\n            firework.show();\r\n          }\r\n\r\n          const adjustedTime = p.millis() - hiddenDurationRef.current;\r\n\r\n          // Fix: fallback in case adjustedTime went backward or got corrupted\r\n          if (adjustedTime < lastFireworkTime) {\r\n            console.warn(\"Adjusted time went backward or stale. Forcing firework reset.\");\r\n            lastFireworkTime = adjustedTime - nextFireworkDelay - 1;\r\n          }\r\n\r\n          // Regular triggering condition\r\n          if (adjustedTime - lastFireworkTime > nextFireworkDelay) {\r\n            const fireworkType = fireworkToggle ? 'BLINKING' : 'PROJECTILE';\r\n            addNewFirework(fireworkType);\r\n            fireworkToggle = !fireworkToggle;\r\n            lastFireworkTime = adjustedTime;\r\n            nextFireworkDelay = p.random(2000, 8000);\r\n          }\r\n        };\r\n      };\r\n      \r\n    p5InstanceRef.current = new q5(sketch, canvasRef.current);\r\n\r\n    return () => {\r\n      destroyed = true;\r\n      if (p5InstanceRef.current) {\r\n        p5InstanceRef.current.remove();\r\n        p5InstanceRef.current = null;\r\n      }\r\n      fireworksRef.current = [];\r\n    };\r\n  }, []);\r\n\r\n  const toggleFireworks = useCallback((isEnabled) => {\r\n    setFireworksEnabled(isEnabled);\r\n    fireworksEnabledRef.current = isEnabled; // update live value for q5\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (onToggleFireworks) {\r\n      onToggleFireworks(toggleFireworks);\r\n    }\r\n  }, [onToggleFireworks, toggleFireworks]); // Ensure dependencies are stable  \r\n\r\n  return <div ref={canvasRef}></div>;\r\n};\r\n\r\nexport default FireworksDisplay;","import { Link } from 'react-router-dom';\r\n\r\nconst Footer = ({ customArrowIcon2, linkArrowIcon }) => {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <div className=\"footer-links\">\r\n        <div className=\"nav-item\">\r\n          <div className=\"nav-link-2\" role=\"button\" tabIndex={0}>\r\n            <div className=\"name\">\r\n              <h4>What is DMI?</h4>\r\n            </div>\r\n            {customArrowIcon2 && (\r\n              <div\r\n                className=\"arrow3\"\r\n                dangerouslySetInnerHTML={{ __html: customArrowIcon2 }}\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n        <div className=\"nav-item\">\r\n          <div className=\"nav-link-2\" role=\"button\" tabIndex={0}>\r\n            <h4>Case Studies</h4>\r\n            {customArrowIcon2 && (\r\n              <div\r\n                className=\"arrow3\"\r\n                dangerouslySetInnerHTML={{ __html: customArrowIcon2 }}\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"footer-info\">\r\n        <div className=\"nav-item\">\r\n          <a\r\n            href=\"https://www.linkedin.com/in/efe-ozalp/\" // Replace with your portfolio link\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n            className=\"nav-link-2\"\r\n          >\r\n            <h4>UI/UX & Development by Efe Ozalp</h4>\r\n            {linkArrowIcon && (\r\n              <div\r\n                id=\"link-arrow\"\r\n                className=\"arrow3\"\r\n                dangerouslySetInnerHTML={{ __html: linkArrowIcon }}\r\n              />\r\n            )}\r\n          </a>\r\n        </div>\r\n        <div className=\"nav-item\">\r\n          <a\r\n            href=\"https://www.instagram.com/yxuart/\" // Replace with the illustrator's profile link\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n            className=\"nav-link-2\"\r\n          >\r\n            <h4>Illustrations by Yiner Xu @yxuart</h4>\r\n            {linkArrowIcon && (\r\n              <div\r\n                id=\"link-arrow\"\r\n                className=\"arrow3\"\r\n                dangerouslySetInnerHTML={{ __html: linkArrowIcon }}\r\n              />\r\n            )}\r\n          </a>\r\n        </div>\r\n      </div>\r\n    </footer>\r\n  );\r\n};\r\n\r\nexport default Footer;\r\n","// src/dynamic-app/components/homepage-UIcards.jsx\r\nimport React from 'react';\r\nimport MediaLoader from '../../utils/media-providers/media-loader';\r\nimport { useStyleInjection } from '../../utils/context-providers/style-injector';\r\nimport uiCardsCss from '../../styles/dynamic-app/UIcards.css?raw';\r\n\r\nconst UIcards = React.forwardRef(function UIcards(\r\n  { title, image1, image2, alt1, alt2, url1, className = '', customArrowIcon2 },\r\n  ref\r\n) {\r\n  useStyleInjection(uiCardsCss, 'dynamic-ui-card-style');\r\n\r\n  return (\r\n    <div ref={ref} className={`card-container ${className}`}>\r\n      <div className={`image-container ${className}`}>\r\n        <a href={url1} className={`ui-link ${className}`}>\r\n          <MediaLoader type=\"image\" src={image2} alt={alt1} className={`ui-image1 ${className}`} priority />\r\n        </a>\r\n      </div>\r\n\r\n      <div className={`image-container2 ${className}-2`}>\r\n        <a href={url1} className={`ui-link-3 ${className}`}>\r\n          <MediaLoader type=\"image\" src={image1} alt={alt2} className={`ui-image2 ${className}-2`} priority />\r\n        </a>\r\n\r\n        <h-name className={`image-title ${className}`}>\r\n          <a href={url1} className={`ui-link-2 ${className}`}>\r\n            <span className=\"title-text\">{title}</span>\r\n            {customArrowIcon2 && (\r\n              <div className=\"svg-icon\" dangerouslySetInnerHTML={{ __html: customArrowIcon2 }} />\r\n            )}\r\n          </a>\r\n        </h-name>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nUIcards.displayName = 'UIcards';\r\nexport default UIcards;\r\n","import React, { useState, useEffect } from 'react';\r\nimport fetchGallery from '../lib/fetchGallery';\r\nimport { useStyleInjection } from '../../utils/context-providers/style-injector.ts'; \r\nimport navCss from '../../styles/dynamic-app/navigation.css?raw';\r\n\r\nconst Navigation = ({ activeColor, customArrowIcon, customArrowIcon2, isInShadow = false }) => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [lastScrollY, setLastScrollY] = useState(0);\r\n  const [isScrollingUp, setIsScrollingUp] = useState(true);\r\n  const [isScrolled, setIsScrolled] = useState(false);\r\n  const [galleryImages, setGalleryImages] = useState([]);\r\n  const [showScrollHint, setShowScrollHint] = useState(false);\r\n  const [hasShownScrollHint, setHasShownScrollHint] = useState(false);\r\n\r\n  useStyleInjection(navCss, 'dynamic-app-style-nav');\r\n\r\n  const toggleMenu = () => {\r\n    if (isInShadow) return; // no nav in shadow mock\r\n    setIsOpen((prev) => !prev);\r\n  };\r\n  const handleCloseMenu = () => setIsOpen(false);\r\n\r\n  const handleScroll = () => {\r\n    const currentScrollY = window.scrollY;\r\n\r\n    // Always visible if near the top\r\n    if (currentScrollY <= 5) {\r\n      setIsScrollingUp(true);\r\n    } else {\r\n      setIsScrollingUp(currentScrollY < lastScrollY);\r\n    }\r\n\r\n    setIsScrolled(currentScrollY > window.innerHeight * 0.1);\r\n    setLastScrollY(currentScrollY);\r\n  };\r\n\r\n  useEffect(() => {\r\n    window.addEventListener('scroll', handleScroll);\r\n    return () => window.removeEventListener('scroll', handleScroll);\r\n  }, [lastScrollY]);\r\n\r\n  useEffect(() => {\r\n    document.body.classList.toggle('no-scroll', isOpen);\r\n    return () => document.body.classList.remove('no-scroll');\r\n  }, [isOpen]);\r\n\r\n  useEffect(() => {\r\n    const fetchImages = async () => {\r\n      try {\r\n        const images = await fetchGallery();\r\n        setGalleryImages(images);\r\n      } catch (error) {\r\n        console.error('Error fetching gallery images:', error);\r\n      }\r\n    };\r\n    fetchImages();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (window.innerWidth > 1024) {\r\n      const galleryContainer = document.querySelector('.image-container-g');\r\n      const handleHorizontalScroll = (e) => {\r\n        if (galleryContainer) {\r\n          e.preventDefault();\r\n          galleryContainer.scrollLeft += e.deltaY;\r\n        }\r\n      };\r\n      if (galleryContainer) {\r\n        galleryContainer.addEventListener('wheel', handleHorizontalScroll);\r\n      }\r\n      return () => {\r\n        if (galleryContainer) {\r\n          galleryContainer.removeEventListener('wheel', handleHorizontalScroll);\r\n        }\r\n      };\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const gallery = document.querySelector('.image-container-g');\r\n    const scrollIndicator = document.querySelector('.scroll-indicator');\r\n\r\n    if (!gallery || !scrollIndicator) return;\r\n\r\n    const updateScrollIndicator = () => {\r\n      if (window.innerWidth > 1024) {\r\n        const scrollWidth = gallery.scrollWidth - gallery.clientWidth;\r\n        const scrollLeft = gallery.scrollLeft;\r\n        const percentage = scrollWidth > 0 ? Math.max(2, (scrollLeft / scrollWidth) * 100) : 2;\r\n        scrollIndicator.style.setProperty('--progress-dimension', `${percentage}%`);\r\n      } else {\r\n        const scrollHeight = gallery.scrollHeight - gallery.clientHeight;\r\n        const scrollTop = gallery.scrollTop;\r\n        if (scrollHeight > 0) {\r\n          const normalPercentage = 100 - (scrollTop / scrollHeight) * 100;\r\n          const reversedPercentage = Math.min(100, Math.max(2, 100 - normalPercentage));\r\n          scrollIndicator.style.setProperty('--progress-dimension', `${reversedPercentage}%`);\r\n        } else {\r\n          scrollIndicator.style.setProperty('--progress-dimension', '2%');\r\n        }\r\n      }\r\n    };\r\n\r\n    updateScrollIndicator();\r\n    gallery.addEventListener('scroll', updateScrollIndicator);\r\n\r\n    return () => {\r\n      gallery.removeEventListener('scroll', updateScrollIndicator);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (isOpen && !hasShownScrollHint) {\r\n      setShowScrollHint(true);\r\n      const fadeOutTimeout = setTimeout(() => {\r\n        const hintElement = document.querySelector('.scroll-hint');\r\n        if (hintElement) hintElement.style.opacity = '0';\r\n      }, 3000);\r\n      const removeTimeout = setTimeout(() => {\r\n        setShowScrollHint(false);\r\n        setHasShownScrollHint(true);\r\n      }, 4000);\r\n\r\n      return () => {\r\n        clearTimeout(fadeOutTimeout);\r\n        clearTimeout(removeTimeout);\r\n      };\r\n    }\r\n  }, [isOpen, hasShownScrollHint]);\r\n\r\n  const hexToRgba = (hex, alpha = 0.1) => {\r\n    const r = parseInt(hex.slice(1, 3), 16);\r\n    const g = parseInt(hex.slice(3, 5), 16);\r\n    const b = parseInt(hex.slice(5, 7), 16);\r\n    return `rgba(${r}, ${g}, ${b}, ${alpha})`;\r\n  };\r\n\r\n  const adjustBrightness = (hex, multiplier) => {\r\n    let r = parseInt(hex.slice(1, 3), 16);\r\n    let g = parseInt(hex.slice(3, 5), 16);\r\n    let b = parseInt(hex.slice(5, 7), 16);\r\n    r = Math.min(255, Math.max(0, Math.floor(r * multiplier)));\r\n    g = Math.min(255, Math.max(0, Math.floor(g * multiplier)));\r\n    b = Math.min(255, Math.max(0, Math.floor(b * multiplier)));\r\n    return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;\r\n  };\r\n\r\n  const darkenedColor = adjustBrightness(activeColor, 0.55);\r\n  const edgeColor = adjustBrightness(activeColor, 0.8);\r\n\r\n  return (\r\n   <nav className={`navigation ${isScrollingUp ? 'visible' : 'hidden'} ${isInShadow ? 'navigation--shadow' : ''}`}>\r\n      <div\r\n        className={`top-bar-items ${isOpen ? 'menu-open' : ''}`}\r\n        style={{\r\n          background: isOpen\r\n            ? 'transparent'\r\n            : isScrolled\r\n            ? hexToRgba(activeColor, 0.8)\r\n            : 'transparent',\r\n          backdropFilter: isScrolled && !isOpen ? 'blur(5px)' : 'none',\r\n        }}\r\n      >\r\n        <div className=\"site-title\">\r\n          <h-title className=\"title\">\r\n            <a href=\"/\" className=\"homepage-link\">DMI</a>\r\n          </h-title>\r\n        </div>\r\n        <div className=\"menu-icon\" onClick={toggleMenu}>\r\n          <div className={`hamburger ${isOpen ? 'open' : ''}`}></div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className={`menu-item ${isOpen ? 'open' : ''}`}>\r\n        <div className=\"menu-item-1\" onClick={handleCloseMenu}></div>\r\n        <div className=\"menu-item-2\" style={{ '--darkenedColor': darkenedColor, '--darkerColor': edgeColor }}>\r\n          <div className=\"menu-nav\">\r\n            <div className=\"nav-item\">\r\n              <a href=\"/dynamic-theme\" className=\"nav-link\">\r\n                <div className=\"name\"><h4>What is DMI?</h4></div>\r\n                {customArrowIcon2 && (\r\n                  <div className=\"arrow1\" dangerouslySetInnerHTML={{ __html: customArrowIcon2 }} />\r\n                )}\r\n              </a>\r\n            </div>\r\n            <div className=\"nav-item\">\r\n              <a href=\"/dynamic-theme\" className=\"nav-link\">\r\n                <h4>Case Studies</h4>\r\n                {customArrowIcon2 && (\r\n                  <div className=\"arrow1\" dangerouslySetInnerHTML={{ __html: customArrowIcon2 }} />\r\n                )}\r\n              </a>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"gallery-wrapper\">\r\n            <div className=\"scroll-indicator\"></div>\r\n            <div className=\"gallery-container\">\r\n              {showScrollHint && (\r\n                <div className=\"scroll-hint\">\r\n                  <h5>Scroll to explore</h5>\r\n                  <span\r\n                    className=\"arrow2\"\r\n                    dangerouslySetInnerHTML={{ __html: customArrowIcon }}\r\n                  ></span>\r\n                </div>\r\n              )}\r\n              <div className=\"image-container-g\">\r\n                {galleryImages.map((img, index) => (\r\n                  <img\r\n                    key={index}\r\n                    src={img.url}\r\n                    alt={img.alt}\r\n                    draggable=\"false\"\r\n                    className={`gallery-image image-${index}`}\r\n                  />\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default Navigation;\r\n","/* Pause Animation Option - Accessibility */\r\nimport React, { useRef, useState, useEffect } from 'react';\r\nimport Lottie from 'lottie-react'; // Import Lottie React\r\nimport animationData from '../lottie/pauseButton.json'; // Import your JSON animation\r\n\r\nconst PauseButton = ({ toggleP5Animation }) => {\r\n  const lottieRef = useRef(); // Ref for Lottie animation\r\n  const [isClicked, setIsClicked] = useState(false); // Track click state\r\n  const [currentFrame, setCurrentFrame] = useState(3); // Start at frame 3\r\n\r\n  // Sync initial state with the fireworks rendering logic\r\n  useEffect(() => {\r\n    if (toggleP5Animation) {\r\n      toggleP5Animation(!isClicked); // Initial sync\r\n    }\r\n  }, [toggleP5Animation, isClicked]);\r\n\r\n  const handleMouseEnter = () => {\r\n    if (lottieRef.current && !isClicked) {\r\n      // Play the animation from frame 3 to frame 10 on hover\r\n      lottieRef.current.playSegments([3, 10], true);\r\n    }\r\n  };\r\n\r\n  const handleMouseLeave = () => {\r\n    if (lottieRef.current && !isClicked) {\r\n      // Pause the animation and leave it at the last hovered frame\r\n      lottieRef.current.goToAndStop(currentFrame, true);\r\n    }\r\n  };\r\n\r\n  const handleClick = (event) => {\r\n    event.stopPropagation(); // Prevent the event from reaching parent components\r\n  \r\n    if (lottieRef.current) {\r\n      let targetFrame = isClicked ? 3 : 20; // Toggle between frames\r\n      lottieRef.current.playSegments([currentFrame, targetFrame], true);\r\n      setCurrentFrame(targetFrame);\r\n      setIsClicked(!isClicked);\r\n  \r\n      // Notify the parent about the toggle\r\n      if (toggleP5Animation) {\r\n        toggleP5Animation(!isClicked);\r\n      }\r\n    }\r\n  };\r\n  \r\n  return (\r\n    <div\r\n      className=\"lottie-container\"\r\n      onMouseEnter={handleMouseEnter}\r\n      onMouseLeave={handleMouseLeave}\r\n      onClick={handleClick} // Trigger click behavior\r\n    >\r\n      <Lottie\r\n        lottieRef={lottieRef}\r\n        animationData={animationData}\r\n        loop={false} // Disable looping\r\n        autoplay={false} // Start paused\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PauseButton;\r\n","import React, { useState, useRef, useEffect, useMemo } from 'react';\r\nimport fetchImages from '../lib/fetchUser';\r\nimport { useStyleInjection } from '../../utils/context-providers/style-injector.ts'; \r\nimport sortByCss from '../../styles/dynamic-app/sortByStyles.css?raw';\r\n\r\nconst options = [\r\n  { value: 'random', label: 'Randomized' },\r\n  { value: 'titleAsc', label: 'A to Z' },\r\n  { value: 'titleDesc', label: 'Z to A' },\r\n];\r\n\r\nconst shuffleArray = (array) => {\r\n  const shuffled = [...array];\r\n  for (let i = shuffled.length - 1; i > 0; i--) {\r\n    const j = Math.floor(Math.random() * (i + 1));\r\n    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];\r\n  }\r\n  return shuffled;\r\n};\r\n\r\nfunction SortBy({ onFetchItems, customArrowIcon, colorMapping, getRoot = () => document }) {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [selectedValue, setSelectedValue] = useState('random');\r\n  const [items, setItems] = useState([]);\r\n  const dropdownRef = useRef(null);\r\n\r\n  useStyleInjection(sortByCss, 'dynamic-app-style-sortby');\r\n\r\n  const handleOptionClick = (value) => {\r\n    setSelectedValue(value);\r\n    setIsOpen(false);\r\n  };\r\n\r\n  const handleClickOutside = (e) => {\r\n    const root = typeof getRoot === 'function' ? getRoot() : document;\r\n    const pauseButton = root.querySelector('.lottie-container');\r\n    if (\r\n      dropdownRef.current &&\r\n      !dropdownRef.current.contains(e.target) &&\r\n      (!pauseButton || !pauseButton.contains(e.target))\r\n    ) {\r\n      setIsOpen(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const root = typeof getRoot === 'function' ? getRoot() : document;\r\n    root.addEventListener('mousedown', handleClickOutside);\r\n    return () => root.removeEventListener('mousedown', handleClickOutside);\r\n  }, [getRoot]);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      let fetched = await fetchImages(selectedValue);\r\n      if (selectedValue === 'random') {\r\n        fetched = shuffleArray(fetched);\r\n      }\r\n      setItems(fetched);\r\n      onFetchItems?.(fetched);\r\n    };\r\n    fetchData();\r\n  }, [selectedValue]);\r\n\r\n  // Responsive index logic\r\n  const [screenWidth, setScreenWidth] = useState(window.innerWidth);\r\n  useEffect(() => {\r\n    const onResize = () => setScreenWidth(window.innerWidth);\r\n    window.addEventListener('resize', onResize);\r\n    return () => window.removeEventListener('resize', onResize);\r\n  }, []);\r\n\r\n  const itemIndex = screenWidth >= 1025 ? 2 : screenWidth >= 768 ? 1 : 0;\r\n\r\n  const convertHexToRGBA = (hex, alpha) => {\r\n    const hexWithoutHash = hex.replace('#', '');\r\n    const r = parseInt(hexWithoutHash.slice(0, 2), 16);\r\n    const g = parseInt(hexWithoutHash.slice(2, 4), 16);\r\n    const b = parseInt(hexWithoutHash.slice(4, 6), 16);\r\n    return `rgba(${r}, ${g}, ${b}, ${alpha})`;\r\n  };\r\n\r\n  const borderItemColor = useMemo(() => {\r\n    const alt = items[itemIndex]?.alt1;\r\n    const color = Array.isArray(colorMapping?.[alt]) ? colorMapping[alt][2] : '#ffffff';\r\n    return convertHexToRGBA(color, 0.8);\r\n  }, [items, colorMapping, itemIndex]);\r\n\r\n  const boxShadowItemColor = useMemo(() => {\r\n    const alt = items[itemIndex]?.alt1;\r\n    return Array.isArray(colorMapping?.[alt]) ? colorMapping[alt][3] : '#ffffff';\r\n  }, [items, colorMapping, itemIndex]);\r\n\r\n  return (\r\n    <div className=\"sort-by-container\">\r\n      <div className=\"sort-container\"><p>Sort by:</p></div>\r\n      <div className=\"sort-container2\">\r\n        <div\r\n          className=\"custom-dropdown\"\r\n          ref={dropdownRef}\r\n          style={{\r\n            border: `solid 1.6px ${borderItemColor}`,\r\n            boxShadow: `0 1px 8px rgba(0,0,0,0.1), 0 22px 8px rgba(0,0,0,0.08), 12px 12px ${boxShadowItemColor}`,\r\n          }}\r\n        >\r\n          <div className=\"custom-select\" onClick={() => setIsOpen(!isOpen)}>\r\n            <div className=\"selected-value\">\r\n              <h5>{options.find(opt => opt.value === selectedValue)?.label}</h5>\r\n            </div>\r\n            <span className={`custom-arrow ${isOpen ? 'open' : ''}`}>\r\n              {customArrowIcon && <div dangerouslySetInnerHTML={{ __html: customArrowIcon }} />}\r\n            </span>\r\n          </div>\r\n          {isOpen && (\r\n            <div className=\"options-container\" style={{ border: `solid 1.6px ${borderItemColor}`, borderTop: 'none' }}>\r\n              {options.map((option) => (\r\n                <div\r\n                  key={option.value}\r\n                  className={`option ${option.value === selectedValue ? 'selected' : ''}`}\r\n                  onClick={() => handleOptionClick(option.value)}\r\n                >\r\n                  {option.label}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SortBy;\r\n","// TitleDivider component (no flicker on enter/leave)\r\nimport { useEffect, useMemo, useRef, useState } from 'react';\r\nimport { useStyleInjection } from '../../utils/context-providers/style-injector.ts';\r\nimport titleCss from '../../styles/dynamic-app/title.css?raw';\r\n\r\nconst isTriplet = (v) => Array.isArray(v) && v.length === 3 && v.every(x => typeof x === 'string');\r\n\r\nconst TitleDivider = ({ svgIcon, movingTextColors, pauseAnimation }) => {\r\n  useStyleInjection(titleCss, 'dynamic-app-style-title');\r\n\r\n  // ----- visibility of this component -----\r\n  const rootRef = useRef(null);\r\n  const [isVisible, setIsVisible] = useState(true);\r\n  useEffect(() => {\r\n    const el = rootRef.current;\r\n    if (!el || typeof IntersectionObserver === 'undefined') return;\r\n    const io = new IntersectionObserver(\r\n      ([entry]) => setIsVisible(!!entry.isIntersecting),\r\n      { threshold: 0.01 }\r\n    );\r\n    io.observe(el);\r\n    return () => io.disconnect();\r\n  }, []);\r\n\r\n  // ----- stable palette that only changes when visible -----\r\n  const defaultTriplet = ['#70c6b0', '#5670b5', '#50b0c5'];\r\n  const incoming = isTriplet(movingTextColors) ? movingTextColors : defaultTriplet;\r\n\r\n  const [stableColors, setStableColors] = useState(incoming);\r\n  const pendingRef = useRef(null);\r\n\r\n  // shallow compare helper\r\n  const sameTriplet = (a, b) => a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\r\n\r\n  // When palette prop changes: apply immediately if visible, else stash it.\r\n  useEffect(() => {\r\n    if (!isTriplet(incoming)) return;\r\n    if (isVisible) {\r\n      setStableColors(prev => (sameTriplet(prev, incoming) ? prev : incoming));\r\n      pendingRef.current = null;\r\n    } else {\r\n      // hold for later to avoid flicker while hidden\r\n      pendingRef.current = incoming;\r\n    }\r\n  }, [incoming, isVisible]);\r\n\r\n  // When we become visible, commit any pending palette once.\r\n  useEffect(() => {\r\n    if (isVisible && pendingRef.current && !sameTriplet(stableColors, pendingRef.current)) {\r\n      setStableColors(pendingRef.current);\r\n      pendingRef.current = null;\r\n    }\r\n  }, [isVisible, stableColors]);\r\n\r\n  // ----- brightness adjust + smooth transition -----\r\n  const adjustBrightness = (hex, mul) => {\r\n    if (!/^#[0-9a-f]{6}$/i.test(hex)) return hex;\r\n    let r = parseInt(hex.slice(1, 3), 16);\r\n    let g = parseInt(hex.slice(3, 5), 16);\r\n    let b = parseInt(hex.slice(5, 7), 16);\r\n    r = Math.min(255, Math.max(0, Math.floor(r * mul)));\r\n    g = Math.min(255, Math.max(0, Math.floor(g * mul)));\r\n    b = Math.min(255, Math.max(0, Math.floor(b * mul)));\r\n    return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;\r\n  };\r\n\r\n  const colors = useMemo(() => ([\r\n    adjustBrightness(stableColors[0], 1.05),\r\n    adjustBrightness(stableColors[1], 1.25),\r\n    adjustBrightness(stableColors[2], 1.10),\r\n  ]), [stableColors]);\r\n\r\n  const textSegments = useMemo(() => ([\r\n    { text: 'Institute Gallery', suffix: '' },\r\n    { text: 'Dyna', suffix: 'mic Media' },\r\n    { text: 'Dyn', suffix: 'mic Media' },\r\n  ]), []);\r\n\r\n  const renderMovingContent = (repeatCount = 2) =>\r\n    [...Array(repeatCount)].flatMap((_, repeatIndex) =>\r\n      textSegments.map((segment, i) => (\r\n        <span\r\n          key={`${repeatIndex}-${i}`}\r\n          className=\"moving-text\"\r\n          style={{\r\n            color: colors[i],\r\n            transition: 'color 180ms linear',\r\n          }}\r\n        >\r\n          {segment.text}\r\n          <span className=\"logo-container\">\r\n            <span\r\n              className=\"svg-icon\"\r\n              // If your injected SVG respects currentColor, you could instead set color here.\r\n              style={{ fill: colors[i], transition: 'fill 180ms linear' }}\r\n              dangerouslySetInnerHTML={{ __html: svgIcon }}\r\n            />\r\n          </span>\r\n          {segment.suffix}\r\n        </span>\r\n      ))\r\n    );\r\n\r\n  return (\r\n    <div className=\"title-container\" ref={rootRef}>\r\n      <div className=\"static-title\">\r\n        <h1>MassArt 2024</h1>\r\n      </div>\r\n      <div className={`moving-title ${pauseAnimation ? 'paused' : ''}`}>\r\n        <h1 className=\"title-with-icon moving-text-wrapper\">\r\n          {renderMovingContent()}\r\n        </h1>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TitleDivider;\r\n","// Student  color set mapping\r\nexport const colorMapping: Record<string, [string, string, string, string]> = {\r\n  'Yiner Xu ': ['#e9b2c2', '#ffc3d4', '#5f4f53', '#ffc9d8'],\r\n  'Simone Schwartz': ['#d2b098', '#f0be9b', '#5b4e44', '#f2c5a5'],\r\n  'Seth Abrahamson ': ['#a9a9a9', '#b9b9b9', '#292929', '#c0c0c0'],\r\n  'Sanna Anwar': ['#e9d0a0', '#ffe4af', '#2f2d28', '#ffe7b7'],\r\n  'Javi Ortiz': ['#e9afbd', '#ffbfcf', '#2f2a2b', '#ffc5d4'],\r\n  'Janhvi Gokalgandhi': ['#a0e1e9', '#aff7ff', '#282e2f', '#b7f8ff'],\r\n  'Andrew Adamides': ['#bef9da', '#7ca08d', '#262a28', '#9dccb4'],\r\n  'Shozab Raza': ['#e9e0a7', '#fff6b6', '#2f2e29', '#fff7bd'],\r\n  'Baopu Wang': ['#b3c2e9', '#c4d4ff', '#4f535f', '#cad8ff'],\r\n  'Efe Ozalp': ['#6fc1e9', '#78d3ff', '#242b2f', '#85d7ff'],\r\n  'Harry Liao ': ['#abcdb2', '#b5e7be', '#292d2a', '#bceac5'],\r\n  'Jawad Naik': ['#97cfac', '#9bedb9', '#272d29', '#a5efc0'],\r\n};\r\n","// Fetch gallery images for the navigation menu\r\nimport sanityClient from '../../utils/sanity';\r\n\r\nconst fetchGallery = async () => {\r\n  const query = `\r\n    *[_type == \"gallery\"]{\r\n      _id,\r\n      images[] {\r\n        image {\r\n          asset-> {\r\n            url\r\n          }\r\n        },\r\n        altText\r\n      }\r\n    }\r\n  `;\r\n\r\n  try {\r\n    const data = await sanityClient.fetch(query);\r\n\r\n    // Flatten and randomize images\r\n    const flattenedImages = data.flatMap((gallery) =>\r\n      gallery.images.map((img, index) => ({\r\n        url: img.image?.asset?.url || '',\r\n        alt: img.altText || 'Default Alt Text',\r\n        cssClass: `gallery-image-${index}`, // Generate unique class names here if needed\r\n      }))\r\n    );\r\n\r\n    const shuffledImages = flattenedImages.sort(() => Math.random() - 0.5);\r\n\r\n    return shuffledImages;\r\n  } catch (error) {\r\n    console.error('Error fetching gallery data:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\nexport default fetchGallery;\r\n","/* Fetch SVG icons */\r\nimport sanityClient from '../../utils/sanity';\r\n\r\nexport default async function fetchSVGIcons() {\r\n  const query = '*[_type == \"svgIcon\"]{title, icon}';\r\n  const icons = await sanityClient.fetch(query);\r\n  return icons;\r\n}\r\n\r\n","/* Sort by function and image fetch for the UI-cards */\r\nimport sanityClient from '../../utils/sanity';\r\n\r\nexport const fetchImages = async (sortOption = 'default') => {\r\n  let orderClause = '';\r\n\r\n  switch (sortOption) {\r\n    case 'titleAsc':\r\n      orderClause = '| order(title asc)';\r\n      break;\r\n    case 'titleDesc':\r\n      orderClause = '| order(title desc)';\r\n      break;\r\n    case 'dateAsc':\r\n      orderClause = '| order(_createdAt asc)';\r\n      break;\r\n    case 'dateDesc':\r\n      orderClause = '| order(_createdAt desc)';\r\n      break;\r\n    default:\r\n      orderClause = '';\r\n  }\r\n\r\n  const query = `*[_type == \"imageAsset\"] ${orderClause} {\r\n    _id,\r\n    title,\r\n    description,\r\n    image1,\r\n    image2,\r\n    caption1,\r\n    alt1,\r\n    alt2,\r\n    url1,\r\n    iconName\r\n  }`;\r\n\r\n  try {\r\n    const data = await sanityClient.fetch(query);\r\n    return data; // don't process URLs here\r\n  } catch (error) {\r\n    console.error('Error fetching images', error);\r\n    return [];\r\n  }\r\n};\r\n\r\nexport default fetchImages;\r\n","let currentlyActiveAlt1 = null;\r\nlet highestVisibility = 0;\r\nlet debounceTimeout = null;\r\n\r\nconst setupAltObserver = (onActivate, onDeactivate, rootElement = document) => {\r\n  const observerOptions = {\r\n    root: null,\r\n    rootMargin: '0px',\r\n    threshold: Array.from(Array(101).keys(), (x) => x / 100),\r\n  };\r\n\r\n  const observerCallback = (entries) => {\r\n    entries.sort((a, b) => b.intersectionRatio - a.intersectionRatio);\r\n\r\n    entries.forEach((entry) => {\r\n      const element = entry.target;\r\n      const imageElement = element.querySelector('.ui-image1');\r\n\r\n      if (imageElement) {\r\n        const alt1Value = imageElement.getAttribute('alt');\r\n        const visibility = entry.intersectionRatio;\r\n\r\n        if (visibility > 0.1 && visibility > highestVisibility) {\r\n          if (currentlyActiveAlt1 !== alt1Value) {\r\n            if (currentlyActiveAlt1) {\r\n              onDeactivate(currentlyActiveAlt1);\r\n            }\r\n            onActivate(alt1Value);\r\n            currentlyActiveAlt1 = alt1Value;\r\n            highestVisibility = visibility;\r\n          }\r\n        } else if (visibility <= 0.1 && currentlyActiveAlt1 === alt1Value) {\r\n          onDeactivate(alt1Value);\r\n          currentlyActiveAlt1 = null;\r\n          highestVisibility = 0;\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  const observer = new IntersectionObserver(observerCallback, observerOptions);\r\n\r\n  const triggerInitialActivation = () => {\r\n    clearTimeout(debounceTimeout);\r\n    debounceTimeout = setTimeout(() => {\r\n      const cards = Array.from(rootElement.querySelectorAll('.card-container'));\r\n      const entries = cards.map((card) => {\r\n        const boundingRect = card.getBoundingClientRect();\r\n        const viewportHeight = window.innerHeight;\r\n        const visibility = Math.max(\r\n          0,\r\n          Math.min(boundingRect.height, viewportHeight - boundingRect.top) / boundingRect.height\r\n        );\r\n        return {\r\n          target: card,\r\n          intersectionRatio: visibility,\r\n        };\r\n      });\r\n\r\n      observerCallback(entries);\r\n    }, 50);\r\n  };\r\n\r\n  rootElement.querySelectorAll('.card-container').forEach((card) => observer.observe(card));\r\n  triggerInitialActivation();\r\n};\r\n\r\nexport default setupAltObserver;\r\n","// shadowRootContext.tsx\r\nimport {\r\n  createContext,\r\n  useContext,\r\n  useRef,\r\n  ReactNode,\r\n} from 'react';\r\n\r\ntype ShadowRootFn = () => ShadowRoot | null;\r\ntype StyleSheetRaw = string;\r\n\r\nconst supportsConstructed =\r\n  'adoptedStyleSheets' in Document.prototype &&\r\n  'replaceSync' in CSSStyleSheet.prototype;\r\n\r\nconst ShadowRootContext = createContext<{\r\n  getShadowRoot: ShadowRootFn;\r\n  injectStyle: (css: StyleSheetRaw, id: string) => void;\r\n  injectLink: (href: string, id?: string) => void;\r\n  removeStyle?: (id: string) => void;\r\n} | null>(null);\r\n\r\nexport const useShadowRoot = () => {\r\n  const ctx = useContext(ShadowRootContext);\r\n  if (!ctx) {\r\n    console.warn('[] useShadowRoot called outside provider');\r\n    return {\r\n      getShadowRoot: () => null,\r\n      injectStyle: () => {},\r\n      injectLink: () => {},\r\n      removeStyle: () => {},\r\n    };\r\n  }\r\n  return ctx;\r\n};\r\n\r\nexport function ShadowRootProvider({\r\n  getShadowRoot,\r\n  children,\r\n}: {\r\n  getShadowRoot: ShadowRootFn;\r\n  children: ReactNode;\r\n}) {\r\n  // Cache Constructed Stylesheets by ID per shadow root provider\r\n  const sheetCacheRef = useRef<Map<string, CSSStyleSheet>>(new Map());\r\n\r\n  const injectStyle = (css: string, id: string) => {\r\n    const root = getShadowRoot();\r\n    if (!(root instanceof ShadowRoot)) return;\r\n\r\n    if (supportsConstructed) {\r\n      let sheet = sheetCacheRef.current.get(id);\r\n      if (!sheet) {\r\n        sheet = new CSSStyleSheet();\r\n        sheet.replaceSync(css);\r\n        sheetCacheRef.current.set(id, sheet);\r\n      }\r\n      if (!root.adoptedStyleSheets.includes(sheet)) {\r\n        root.adoptedStyleSheets = [...root.adoptedStyleSheets, sheet];\r\n      }\r\n      return;\r\n    }\r\n\r\n    // Fallback: DOM-based <style> with ID dedupe\r\n    if (root.querySelector(`style[data-style-id=\"${id}\"]`)) return;\r\n    const style = document.createElement('style');\r\n    style.textContent = css;\r\n    style.dataset.styleId = id;\r\n    root.appendChild(style);\r\n  };\r\n\r\n  const injectLink = (href: string, id?: string) => {\r\n    const root = getShadowRoot();\r\n    if (!(root instanceof ShadowRoot)) return;\r\n\r\n    // Note: adoptedStyleSheets can't attach external CSS; keep <link> for that.\r\n    if (id && root.querySelector(`link[data-style-id=\"${id}\"]`)) return;\r\n    if (\r\n      !id &&\r\n      Array.from(root.querySelectorAll<HTMLLinkElement>('link[rel=\"stylesheet\"]'))\r\n        .some(l => l.href === href)\r\n    ) return;\r\n\r\n    const link = document.createElement('link');\r\n    link.rel = 'stylesheet';\r\n    link.href = href;\r\n    if (id) link.dataset.styleId = id;\r\n    root.appendChild(link);\r\n  };\r\n\r\n  const removeStyle = (id: string) => {\r\n    const root = getShadowRoot();\r\n    if (!(root instanceof ShadowRoot)) return;\r\n\r\n    if (supportsConstructed) {\r\n      const sheet = sheetCacheRef.current.get(id);\r\n      if (sheet) {\r\n        root.adoptedStyleSheets = root.adoptedStyleSheets.filter(s => s !== sheet);\r\n      }\r\n      return;\r\n    }\r\n\r\n    root.querySelector(`style[data-style-id=\"${id}\"]`)?.remove();\r\n  };\r\n\r\n  return (\r\n    <ShadowRootContext.Provider value={{ getShadowRoot, injectStyle, injectLink, removeStyle }}>\r\n      {children}\r\n    </ShadowRootContext.Provider>\r\n  );\r\n}\r\n","// injct styls whN it isnt in shadow dom\r\nimport { useEffect } from 'react';\r\nimport { useShadowRoot } from './shadow-root-context';\r\n\r\nconst injected = (() => {\r\n  if (typeof window !== 'undefined') {\r\n    if (!window.__DYNAMIC_STYLE_IDS__) {\r\n      window.__DYNAMIC_STYLE_IDS__ = new Set<string>();\r\n    }\r\n    return window.__DYNAMIC_STYLE_IDS__;\r\n  }\r\n  return new Set<string>(); // fallback, e.g., SSR\r\n})();\r\n\r\nexport const useStyleInjection = (css: string, id: string) => {\r\n  const { injectStyle, getShadowRoot } = useShadowRoot() || {};\r\n\r\n  useEffect(() => {\r\n    if (!id) {\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        console.warn('useStyleInjection: id is required for dedupe');\r\n      }\r\n      return;\r\n    }\r\n\r\n    const shadowRoot = getShadowRoot?.();\r\n    const isInShadow = shadowRoot && shadowRoot !== document;\r\n\r\n    if (isInShadow && injectStyle) {\r\n      // Shadow DOM dedupe by ID\r\n      if (!shadowRoot.querySelector(`style[data-style-id=\"${id}\"]`)) {\r\n        injectStyle(css, id); // provider handles DOM append\r\n      }\r\n    } else {\r\n      // Global dedupe by ID\r\n      if (!document.head.querySelector(`style[data-style-id=\"${id}\"]`)) {\r\n        const styleEl = document.createElement('style');\r\n        styleEl.textContent = css;\r\n        styleEl.dataset.styleId = id;\r\n        document.head.appendChild(styleEl);\r\n      }\r\n    }\r\n  }, [css, id, injectStyle, getShadowRoot]);\r\n};\r\n\r\n","// src/utils/image-upgrade-manager.ts\r\nlet totalImages = 0;\r\nlet loadedLowRes = 0;\r\nlet listeners: (() => void)[] = [];\r\nlet upgradeTimeout: ReturnType<typeof setTimeout> | null = null;\r\n\r\nexport const setUpgradeTimeout = (ms: number = 5000) => {\r\n  if (upgradeTimeout) return;\r\n  upgradeTimeout = setTimeout(() => {\r\n    listeners.forEach(fn => fn());\r\n    listeners = [];\r\n  }, ms);\r\n};\r\n\r\nexport const registerImage = () => {\r\n  totalImages++;\r\n  setUpgradeTimeout();\r\n};\r\n\r\nexport const notifyLowResLoaded = () => {\r\n  loadedLowRes++;\r\n  if (loadedLowRes >= totalImages) {\r\n    listeners.forEach(fn => fn());\r\n    listeners = [];\r\n  }\r\n};\r\n\r\nexport const onAllLowResLoaded = (callback: () => void) => {\r\n  listeners.push(callback);\r\n};\r\n","// src/utils/media-providers/media-loader.tsx\r\nimport { useRef, useState, useEffect } from 'react';\r\nimport { useVideoVisibility } from './video-observer';\r\nimport LoadingScreen from '../loading/loading';\r\nimport { SanityImageSource } from '@sanity/image-url/lib/types/types';\r\nimport {\r\n  getLowResImageUrl,\r\n  getMediumImageUrl,\r\n  getHighQualityImageUrl,\r\n  urlFor,\r\n} from './image-builder';\r\nimport {\r\n  registerImage,\r\n  notifyLowResLoaded,\r\n  onAllLowResLoaded,\r\n} from './image-upgrade-manager';\r\n\r\nfunction useNearViewport<T extends Element>(\r\n  ref: React.RefObject<T>,\r\n  { rootMargin = '900px 0px', threshold = 0, once = true } = {}\r\n) {\r\n  const [near, setNear] = useState(false);\r\n  useEffect(() => {\r\n    if (!ref.current || near) return;\r\n    const io = new IntersectionObserver(\r\n      (entries) => {\r\n        if (entries.some((e) => e.isIntersecting)) {\r\n          setNear(true);\r\n          if (once) io.disconnect();\r\n        }\r\n      },\r\n      { rootMargin, threshold }\r\n    );\r\n    io.observe(ref.current);\r\n    return () => io.disconnect();\r\n  }, [ref, near, rootMargin, threshold, once]);\r\n  return near;\r\n}\r\n\r\ntype VideoSetSrc = {\r\n  webmUrl?: string;\r\n  mp4Url?: string;\r\n  poster?: SanityImageSource | string;\r\n};\r\n\r\ntype MediaLoaderProps = {\r\n  type: 'image' | 'video';\r\n  src: string | SanityImageSource | VideoSetSrc | null | undefined;\r\n  alt?: string;\r\n  id?: string;\r\n  className?: string;\r\n  style?: React.CSSProperties;\r\n  objectPosition?: string;\r\n  loop?: boolean;\r\n  muted?: boolean;\r\n  playsInline?: boolean;\r\n  preload?: 'auto' | 'metadata' | 'none';\r\n  enableVisibilityControl?: boolean;\r\n  priority?: boolean;\r\n  controls?: boolean;\r\n};\r\n\r\nconst MediaLoader = ({\r\n  type,\r\n  src,\r\n  alt = '',\r\n  id,\r\n  className = '',\r\n  style = {},\r\n  objectPosition = 'center center',\r\n  loop = true,\r\n  muted = true,\r\n  playsInline = true,\r\n  preload = 'metadata',\r\n  enableVisibilityControl = true,\r\n  priority = false,\r\n  controls = false,\r\n}: MediaLoaderProps) => {\r\n  const isSSR = typeof window === 'undefined';\r\n\r\n  // Start as loaded in SSR to avoid fade-in on hydration\r\n  const [loaded, setLoaded] = useState(isSSR);\r\n  const [showMedium, setShowMedium] = useState(false);\r\n  const [showHigh, setShowHigh] = useState(false);\r\n  const [posterRemoved, setPosterRemoved] = useState(false);\r\n\r\n  const videoRef = useRef<HTMLVideoElement>(null);\r\n  const imgRef = useRef<HTMLImageElement>(null);\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n\r\n  const isNear = useNearViewport(containerRef);\r\n  const shouldStart = priority || isNear;\r\n\r\n  // If already cached, skip fade-in\r\n  useEffect(() => {\r\n    if (type === 'image' && imgRef.current?.complete) {\r\n      setLoaded(true);\r\n    }\r\n    if (type === 'video' && videoRef.current?.readyState >= 2) {\r\n      setLoaded(true);\r\n    }\r\n  }, [type]);\r\n\r\n  // IMAGE upgrade flow\r\n  useEffect(() => {\r\n    if (type !== 'image') return;\r\n    registerImage();\r\n\r\n    const t1 = setTimeout(() => setShowMedium(true), shouldStart ? 0 : 2000);\r\n    if (shouldStart) setShowMedium(true);\r\n\r\n    const off = () => setTimeout(() => setShowHigh(true), 300);\r\n    onAllLowResLoaded(off);\r\n    const t2 = setTimeout(() => setShowHigh(true), 5000);\r\n\r\n    return () => {\r\n      clearTimeout(t1);\r\n      clearTimeout(t2);\r\n    };\r\n  }, [type, shouldStart]);\r\n\r\n  const onMediaLoaded = () => {\r\n    setLoaded(true);\r\n    if (type === 'image') notifyLowResLoaded();\r\n    if (id) {\r\n      const event = new CustomEvent('mediaReady', { detail: { id } });\r\n      window.dispatchEvent(event);\r\n    }\r\n  };\r\n\r\n  // VIDEO visibility/autoplay\r\n  useVideoVisibility(\r\n    videoRef,\r\n    containerRef,\r\n    type === 'video' && enableVisibilityControl ? 0.4 : undefined\r\n  );\r\n\r\n  // Only load video once before playback starts\r\n  useEffect(() => {\r\n    if (type !== 'video' || !videoRef.current) return;\r\n    const v = videoRef.current;\r\n    let loadedOnce = false;\r\n\r\n    const start = () => {\r\n      if (loadedOnce) return;\r\n      loadedOnce = true;\r\n      if (v.preload !== 'metadata') v.preload = 'metadata';\r\n      try { v.load(); } catch {}\r\n    };\r\n\r\n    if (shouldStart) {\r\n      start();\r\n    } else {\r\n      const t = setTimeout(start, 2000);\r\n      return () => clearTimeout(t);\r\n    }\r\n  }, [type, shouldStart]);\r\n\r\n  // Remove poster after first frame\r\n  useEffect(() => {\r\n    if (type !== 'video' || !videoRef.current) return;\r\n    const v = videoRef.current;\r\n    const handleLoaded = () => {\r\n      setPosterRemoved(true);\r\n      v.removeAttribute('poster');\r\n      v.play().catch(err => {\r\n        console.warn('Autoplay failed:', err);\r\n      });\r\n    };\r\n    v.addEventListener('loadeddata', handleLoaded, { once: true });\r\n    return () => v.removeEventListener('loadeddata', handleLoaded);\r\n  }, [type]);\r\n\r\n  // Guard: no src  nothing to render\r\n  if (!src) return null;\r\n\r\n  // ====== IMAGE ======\r\n  if (type === 'image') {\r\n    const ultraLowSrc = typeof src === 'string' ? src : getLowResImageUrl(src);\r\n    const mediumSrc   = typeof src === 'string' ? src : getMediumImageUrl(src);\r\n    const highResSrc  = typeof src === 'string' ? src : getHighQualityImageUrl(src);\r\n\r\n    const resolvedSrc = showHigh ? highResSrc : showMedium ? mediumSrc : ultraLowSrc;\r\n\r\n    // Avoid empty string\r\n    if (!resolvedSrc) return null;\r\n\r\n    return (\r\n      <div ref={containerRef} style={{ position: 'relative', width: '100%', height: '100%' }}>\r\n        {!loaded && (\r\n          <div className=\"absolute inset-0 z-10\">\r\n            <LoadingScreen isFullScreen={false} />\r\n          </div>\r\n        )}\r\n        <img\r\n          ref={imgRef}\r\n          loading={priority ? 'eager' : undefined}\r\n          fetchPriority={showHigh || priority ? 'high' : showMedium ? 'auto' : 'low'}\r\n          id={id}\r\n          src={resolvedSrc || undefined}\r\n          alt={alt}\r\n          onLoad={onMediaLoaded}\r\n          onError={(e) => console.warn('Image failed', (e.target as HTMLImageElement).src)}\r\n          className={className}\r\n          draggable={false}\r\n          style={{\r\n            ...style,\r\n            objectFit: 'cover',\r\n            opacity: loaded ? 1 : 0,\r\n            transition: isSSR ? 'none' : 'filter 0.5s ease, opacity 0.3s ease',\r\n          }}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // ====== VIDEO ======\r\n  const isVideoSetObj =\r\n    typeof src === 'object' && !('asset' in (src as any)) &&\r\n    (('webmUrl' in (src as any)) || ('mp4Url' in (src as any)));\r\n\r\n  const vs = (isVideoSetObj ? (src as VideoSetSrc) : undefined);\r\n  const legacyVideoUrl = typeof src === 'string' ? src : undefined;\r\n\r\n  const posterUrl =\r\n    vs?.poster\r\n      ? (typeof vs.poster === 'string'\r\n          ? vs.poster\r\n          : urlFor(vs.poster).width(1200).quality(80).auto('format').url())\r\n      : undefined;\r\n\r\n  const hasVideoSource = Boolean(vs?.webmUrl || vs?.mp4Url || legacyVideoUrl);\r\n  if (!hasVideoSource) return null;\r\n\r\n  return (\r\n    <div ref={containerRef} style={{ position: 'relative', width: '100%', height: '100%' }}>\r\n      {!loaded && (\r\n        <div className=\"absolute inset-0 z-10\">\r\n          <LoadingScreen isFullScreen={false} />\r\n        </div>\r\n      )}\r\n      <video\r\n        id={id}\r\n        ref={videoRef}\r\n        onLoadedData={onMediaLoaded}\r\n        onError={(e) => console.warn('Video failed', e)}\r\n        className={className}\r\n        style={{\r\n          ...style,\r\n          objectFit: 'cover',\r\n          objectPosition,\r\n          opacity: loaded ? 1 : 0,\r\n          transition: isSSR ? 'none' : 'opacity 0.3s ease',\r\n          pointerEvents: 'all',\r\n        }}\r\n        loop={loop}\r\n        muted={muted}\r\n        playsInline={playsInline}\r\n        preload=\"none\"\r\n        controls={controls}\r\n        poster={posterRemoved ? undefined : posterUrl}\r\n      >\r\n        {vs?.webmUrl && <source src={vs.webmUrl || undefined} type=\"video/webm\" />}\r\n        {vs?.mp4Url  && <source src={vs.mp4Url  || undefined} type=\"video/mp4\"  />}\r\n        {!vs?.webmUrl && !vs?.mp4Url && legacyVideoUrl && (\r\n          <source src={legacyVideoUrl || undefined} />\r\n        )}\r\n      </video>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MediaLoader;\r\n","// video-observer.tsx\r\nimport { useEffect } from 'react';\r\n\r\nexport const useVideoVisibility = (\r\n  videoRef: React.RefObject<HTMLVideoElement> | null,\r\n  containerRef: React.RefObject<HTMLElement> | null,\r\n  threshold: number = 0.4\r\n) => {\r\n  useEffect(() => {\r\n    if (!videoRef?.current || !containerRef?.current) return;\r\n\r\n    const t = typeof threshold === 'number' && threshold >= 0 && threshold <= 1 ? threshold : 0.4;\r\n\r\n    let observer: IntersectionObserver | undefined;\r\n\r\n    const video = videoRef.current!;\r\n    const container = containerRef.current!;\r\n\r\n    // IMPORTANT: load even when using <source> children\r\n    // (video.src is empty in that case; currentSrc is set after load())\r\n    video.load();\r\n    video.muted = true;\r\n\r\n    observer = new IntersectionObserver(\r\n      ([entry]) => {\r\n        if (entry.isIntersecting) {\r\n          video.play().catch(() => setTimeout(() => video.play().catch(() => {}), 500));\r\n        } else {\r\n          video.pause();\r\n        }\r\n      },\r\n      { threshold: t }\r\n    );\r\n\r\n    observer.observe(container);\r\n\r\n    // kick once if already in view\r\n    const rect = container.getBoundingClientRect();\r\n    const ratio = Math.min(Math.max((window.innerHeight - rect.top) / window.innerHeight, 0), 1);\r\n    if (ratio >= t) video.play().catch(() => {});\r\n\r\n    return () => observer?.disconnect();\r\n  }, [videoRef, containerRef, threshold]);\r\n};\r\n"],"names":["React","useEffect","useState","jsx","_jsx","RedIntroOverlay","visible","setVisible","timer","setTimeout","clearTimeout","style","position","top","left","width","height","backgroundColor","opacity","pointerEvents","transition","zIndex","useRef","useCallback","q5","useRealMobileViewport","FireworksDisplay","colorMapping","items","lastKnownColor","onToggleFireworks","canvasRef","fireworksEnabled","setFireworksEnabled","fireworksRef","fireworksEnabledRef","isPageHiddenRef","hiddenStartTimeRef","hiddenDurationRef","isRealMobile","isRealMobileRef","current","handleVisibilityChange","document","visibilityState","performance","now","addEventListener","removeEventListener","adjustBrightness","hex","multiplier","r","parseInt","slice","g","b","Math","min","max","floor","toString","padStart","p5InstanceRef","latestItems","latestColorMapping","latestLastKnownColor","destroyed","sketch","p","fireworks","lastFireworkTime","lastLaunchPosition","createVector","minDistance","Particle","constructor","x","y","c","firework","size","type","hasTrail","pos","vel","random","mult","acc","col","shapeType","minLifespan","maxLifespan","windowWidth","lifespan","map","trailLength","trail","Array","fill","initialSpeed","mag","trailLifespan","fadeFactor","blinkingSpeed","blinkingAlpha","baseColor","levels","color","applyForce","force","add","update","pop","unshift","copy","i","length","gravityForce","abs","sin","millis","show","alpha","noStroke","shrinkSize","elapsedTime","shrinkFactor","pow","normalizedSize","rotationAngle","atan2","trailAlpha","trailSize","strokeWeight","stroke","point","push","translate","rotate","rotationSpeed","frameCount","ellipse","halfSize","rect","triangle","isDone","Firework","targetX","targetY","particles","exploded","explosionStartTime","baseCount","numParticles","explode","initialVel","largerParticleCount","speed","adjustForScreenWidth","screenWidth","screenMultiplier","angle","TWO_PI","velocity","cos","angleDiff","velocityMultiplier","HALF_PI","particle","direction","normalize","launchSpeed","dist","splice","addNewFirework","fireworkType","startX","startY","selectedAlt1","alt1","colorArray","console","warn","topColorCount","usableColors","filter","Boolean","randomHex","brightnessMultiplier","adjustedHex","fireworkColor","setup","createCanvas","windowHeight","firstFireworkType","fireworkToggle","nextFireworkDelay","draw","clear","background","adjustedTime","remove","toggleFireworks","isEnabled","ref","Link","jsxs","_jsxs","Footer","customArrowIcon2","linkArrowIcon","className","children","role","tabIndex","dangerouslySetInnerHTML","__html","href","target","rel","id","MediaLoader","useStyleInjection","uiCardsCss","UIcards","forwardRef","title","image1","image2","alt2","url1","src","alt","priority","displayName","fetchGallery","navCss","Navigation","activeColor","customArrowIcon","isInShadow","isOpen","setIsOpen","lastScrollY","setLastScrollY","isScrollingUp","setIsScrollingUp","isScrolled","setIsScrolled","galleryImages","setGalleryImages","showScrollHint","setShowScrollHint","hasShownScrollHint","setHasShownScrollHint","toggleMenu","prev","handleCloseMenu","handleScroll","currentScrollY","window","scrollY","innerHeight","body","classList","toggle","fetchImages","images","error","innerWidth","galleryContainer","querySelector","handleHorizontalScroll","e","preventDefault","scrollLeft","deltaY","gallery","scrollIndicator","updateScrollIndicator","scrollWidth","clientWidth","percentage","setProperty","scrollHeight","clientHeight","scrollTop","normalPercentage","reversedPercentage","fadeOutTimeout","hintElement","removeTimeout","hexToRgba","darkenedColor","edgeColor","backdropFilter","onClick","img","index","url","draggable","Lottie","animationData","PauseButton","toggleP5Animation","lottieRef","isClicked","setIsClicked","currentFrame","setCurrentFrame","handleMouseEnter","playSegments","handleMouseLeave","goToAndStop","handleClick","event","stopPropagation","targetFrame","onMouseEnter","onMouseLeave","loop","autoplay","useMemo","sortByCss","options","value","label","shuffleArray","array","shuffled","j","SortBy","onFetchItems","getRoot","selectedValue","setSelectedValue","setItems","dropdownRef","handleOptionClick","handleClickOutside","root","pauseButton","contains","fetchData","fetched","setScreenWidth","onResize","itemIndex","convertHexToRGBA","hexWithoutHash","replace","borderItemColor","isArray","boxShadowItemColor","border","boxShadow","find","opt","borderTop","option","titleCss","isTriplet","v","every","TitleDivider","svgIcon","movingTextColors","pauseAnimation","rootRef","isVisible","setIsVisible","el","IntersectionObserver","io","entry","isIntersecting","threshold","observe","disconnect","defaultTriplet","incoming","stableColors","setStableColors","pendingRef","sameTriplet","a","mul","test","colors","textSegments","text","suffix","renderMovingContent","repeatCount","flatMap","_","repeatIndex","segment","sanityClient","query","data","fetch","flattenedImages","image","asset","altText","cssClass","shuffledImages","sort","fetchSVGIcons","icons","sortOption","orderClause","currentlyActiveAlt1","highestVisibility","debounceTimeout","setupAltObserver","onActivate","onDeactivate","rootElement","observerOptions","rootMargin","from","keys","observerCallback","entries","intersectionRatio","forEach","element","imageElement","alt1Value","getAttribute","visibility","observer","triggerInitialActivation","cards","querySelectorAll","card","boundingRect","getBoundingClientRect","viewportHeight","createContext","useContext","supportsConstructed","Document","prototype","CSSStyleSheet","ShadowRootContext","useShadowRoot","ctx","getShadowRoot","injectStyle","injectLink","removeStyle","ShadowRootProvider","sheetCacheRef","Map","css","ShadowRoot","sheet","get","replaceSync","set","adoptedStyleSheets","includes","createElement","textContent","dataset","styleId","appendChild","some","l","link","s","Provider","injected","__DYNAMIC_STYLE_IDS__","Set","process","env","NODE_ENV","shadowRoot","head","styleEl","totalImages","loadedLowRes","listeners","upgradeTimeout","setUpgradeTimeout","ms","fn","registerImage","notifyLowResLoaded","onAllLowResLoaded","callback","useVideoVisibility","LoadingScreen","getLowResImageUrl","getMediumImageUrl","getHighQualityImageUrl","urlFor","useNearViewport","once","near","setNear","objectPosition","muted","playsInline","preload","enableVisibilityControl","controls","isSSR","loaded","setLoaded","showMedium","setShowMedium","showHigh","setShowHigh","posterRemoved","setPosterRemoved","videoRef","imgRef","containerRef","isNear","shouldStart","complete","readyState","t1","off","t2","onMediaLoaded","CustomEvent","detail","dispatchEvent","undefined","loadedOnce","start","load","t","handleLoaded","removeAttribute","play","catch","err","ultraLowSrc","mediumSrc","highResSrc","resolvedSrc","isFullScreen","loading","fetchPriority","onLoad","onError","objectFit","isVideoSetObj","vs","legacyVideoUrl","posterUrl","poster","quality","auto","hasVideoSource","webmUrl","mp4Url","onLoadedData","video","container","pause","ratio"],"sourceRoot":""}