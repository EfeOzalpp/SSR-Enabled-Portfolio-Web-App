{"version":3,"file":"src_components_block-type-1_data-visualization_tsx.server.js","mappings":"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","sources":["webpack://personal-site/./src/components/block-type-1/data-visualization.tsx","webpack://personal-site/./src/utils/content-utility/color-map.ts","webpack://personal-site/./src/utils/content-utility/real-mobile.ts","webpack://personal-site/./src/utils/media-providers/image-upgrade-manager.ts","webpack://personal-site/./src/utils/media-providers/media-loader.tsx","webpack://personal-site/./src/utils/media-providers/video-observer.tsx","webpack://personal-site/./src/utils/tooltip/tooltip.ts","webpack://personal-site/./src/utils/tooltip/tooltipInit.ts"],"sourcesContent":["// src/components/DataVisualizationBlock.tsx\r\nimport { useEffect, useState } from 'react';\r\nimport client from '../../utils/sanity';\r\nimport MediaLoader from '../../utils/media-providers/media-loader';\r\nimport { useTooltipInit } from '../../utils/tooltip/tooltipInit';\r\nimport { useSsrData } from '../../utils/context-providers/ssr-data-context';\r\nimport '../../styles/block-type-1.css';\r\n\r\ntype VideoSet = {\r\n  webmUrl?: string;\r\n  mp4Url?: string;\r\n  poster?: any; \r\n};\r\n\r\ntype MediaSlot = {\r\n  alt?: string;\r\n  image?: any;\r\n  video?: VideoSet;\r\n};\r\n\r\ntype DataVizData = {\r\n  mediaOne: MediaSlot;\r\n};\r\n\r\nconst DataVisualizationBlock = () => {\r\n  const ssrData = useSsrData(); // <-- read from SSR context\r\n  const [data, setData] = useState<DataVizData | null>(\r\n    (ssrData?.preloaded?.dataviz as DataVizData) || null\r\n  );\r\n\r\n  useTooltipInit();\r\n\r\n  // Fetch data from Sanity\r\nuseEffect(() => {\r\n  if (data) return; // already have SSR data\r\n  client\r\n   .fetch<DataVizData>(\r\n      `*[_type == \"mediaBlock\" && slug.current == $slug][0]{\r\n        mediaOne{\r\n          alt,\r\n          image,\r\n          video{\r\n            \"webmUrl\": webm.asset->url,\r\n            \"mp4Url\": mp4.asset->url,\r\n            poster\r\n          }\r\n        }\r\n      }`,\r\n      { slug: 'data-viz' }\r\n    )\r\n    .then(setData)\r\n    .catch((err: any) => {\r\n      console.warn('[DataVisualizationBlock] GROQ fetch failed:', err);\r\n      setData(null);\r\n    });\r\n}, []);\r\n\r\n\r\n  if (!data || !data.mediaOne) return null;\r\n\r\n  const { alt = 'Data Visualization', image, video } = data.mediaOne;\r\n\r\n  const isVideo = Boolean(video?.webmUrl || video?.mp4Url);\r\n\r\n  return (\r\n    <section\r\n      className=\"block-type-1\"\r\n      style={{ position: 'relative' }}\r\n    >\r\n      <div\r\n        className=\"media-content\"\r\n        style={{\r\n          width: '100%',\r\n          height: '100vh',\r\n          position: 'relative',\r\n        }}\r\n      >\r\n        <MediaLoader\r\n          type={isVideo ? 'video' : 'image'}\r\n          src={isVideo ? video! : image}\r\n          alt={alt}\r\n          id=\"block-d\"\r\n          className=\"tooltip-data-viz\"\r\n          objectPosition=\"center center\"\r\n          style={{\r\n            width: '100%',\r\n            height: '100%',\r\n          }}\r\n        />\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default DataVisualizationBlock;\r\n","// Master color config\r\nexport interface ProjectColor {\r\n  rgb: string;         // \"204, 85, 41\"\r\n  tooltipAlpha?: number;\r\n  defaultAlpha?: number;\r\n  darkThemeTop?: string; // optional override for theme-color\r\n}\r\n\r\nexport const projectColors: Record<string, ProjectColor> = {\r\n  'Rotary Lamp': {\r\n    rgb: '204, 85, 41',\r\n    tooltipAlpha: 0.6,\r\n    defaultAlpha: 0.6,\r\n    darkThemeTop: 'rgba(72, 161, 161, 1)'\r\n  },\r\n  'Ice Cream Scoop': {\r\n    rgb: '234, 103, 97',\r\n    tooltipAlpha: 0.6,\r\n    defaultAlpha: 0.6,\r\n    darkThemeTop: 'rgba(23, 27, 24, 1)'\r\n  },\r\n  'Data Visualization': {\r\n    rgb: '153, 199, 7',\r\n    tooltipAlpha: 0.8,\r\n    defaultAlpha: 0.6,\r\n    darkThemeTop: 'rgba(28, 30, 31, 1)'\r\n  },\r\n  'Evade the Rock': {\r\n    rgb: '101, 86, 175',\r\n    tooltipAlpha: 0.6,\r\n    defaultAlpha: 0.6,\r\n    darkThemeTop: 'rgb(25, 25, 25)'\r\n  },\r\n  'Dynamic App': {\r\n    rgb: '120, 211, 255',\r\n    tooltipAlpha: 0.6,\r\n    defaultAlpha: 0.6,\r\n    darkThemeTop: 'rgba(17, 17, 17, 1)'\r\n  }\r\n};\r\n","// utils/useRealMobileViewport.ts\r\nimport { useEffect, useState } from 'react';\r\n\r\nexport function useRealMobileViewport() {\r\n  const [isRealMobile, setIsRealMobile] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const coarse = window.matchMedia?.('(pointer: coarse)').matches ?? false;\r\n    const touch = (navigator as any).maxTouchPoints > 0;\r\n\r\n    // detect address-bar/viewport shrink behavior\r\n    const vv = (window as any).visualViewport;\r\n    let shrinks = false;\r\n\r\n    const check = () => {\r\n      if (!vv) return;\r\n      // if visual viewport is meaningfully smaller than layout viewport, assume mobile browser chrome\r\n      const gap = window.innerHeight - vv.height;\r\n      if (gap > 48) shrinks = true; // ~top/bottom bars size\r\n      setIsRealMobile(coarse && touch && (shrinks || gap > 48));\r\n    };\r\n\r\n    check();\r\n    vv?.addEventListener?.('resize', check);\r\n    window.addEventListener('orientationchange', check);\r\n    return () => {\r\n      vv?.removeEventListener?.('resize', check);\r\n      window.removeEventListener('orientationchange', check);\r\n    };\r\n  }, []);\r\n\r\n  return isRealMobile;\r\n}\r\n","// src/utils/image-upgrade-manager.ts\r\nlet totalImages = 0;\r\nlet loadedLowRes = 0;\r\nlet listeners: (() => void)[] = [];\r\nlet upgradeTimeout: ReturnType<typeof setTimeout> | null = null;\r\n\r\nexport const setUpgradeTimeout = (ms: number = 5000) => {\r\n  if (upgradeTimeout) return;\r\n  upgradeTimeout = setTimeout(() => {\r\n    listeners.forEach(fn => fn());\r\n    listeners = [];\r\n  }, ms);\r\n};\r\n\r\nexport const registerImage = () => {\r\n  totalImages++;\r\n  setUpgradeTimeout();\r\n};\r\n\r\nexport const notifyLowResLoaded = () => {\r\n  loadedLowRes++;\r\n  if (loadedLowRes >= totalImages) {\r\n    listeners.forEach(fn => fn());\r\n    listeners = [];\r\n  }\r\n};\r\n\r\nexport const onAllLowResLoaded = (callback: () => void) => {\r\n  listeners.push(callback);\r\n};\r\n","// MediaLoader\r\nimport { useRef, useState, useEffect } from 'react';\r\nimport { useVideoVisibility } from './video-observer';\r\nimport LoadingScreen from '../content-utility/loading';\r\nimport { SanityImageSource } from '@sanity/image-url/lib/types/types';\r\nimport {\r\n  getLowResImageUrl,\r\n  getMediumImageUrl,\r\n  getHighQualityImageUrl,\r\n  urlFor,\r\n} from './image-builder';\r\nimport {\r\n  registerImage,\r\n  notifyLowResLoaded,\r\n  onAllLowResLoaded,\r\n} from './image-upgrade-manager';\r\n\r\nfunction useNearViewport<T extends Element>(\r\n  ref: React.RefObject<T>,\r\n  { rootMargin = '900px 0px', threshold = 0, once = true } = {}\r\n) {\r\n  const [near, setNear] = useState(false);\r\n  useEffect(() => {\r\n    if (!ref.current || near) return;\r\n    const io = new IntersectionObserver(\r\n      (entries) => {\r\n        if (entries.some((e) => e.isIntersecting)) {\r\n          setNear(true);\r\n          if (once) io.disconnect();\r\n        }\r\n      },\r\n      { rootMargin, threshold }\r\n    );\r\n    io.observe(ref.current);\r\n    return () => io.disconnect();\r\n  }, [ref, near, rootMargin, threshold, once]);\r\n  return near;\r\n}\r\n\r\ntype VideoSetSrc = {\r\n  webmUrl?: string;\r\n  mp4Url?: string;\r\n  poster?: SanityImageSource | string;\r\n};\r\n\r\ntype MediaLoaderProps = {\r\n  type: 'image' | 'video';\r\n  src: string | SanityImageSource | VideoSetSrc;\r\n  alt?: string;\r\n  id?: string;\r\n  className?: string;\r\n  style?: React.CSSProperties;\r\n  objectPosition?: string;\r\n  loop?: boolean;\r\n  muted?: boolean;\r\n  playsInline?: boolean;\r\n  preload?: 'auto' | 'metadata' | 'none';\r\n  enableVisibilityControl?: boolean;\r\n  priority?: boolean;\r\n  controls?: boolean;\r\n};\r\n\r\nconst MediaLoader = ({\r\n  type,\r\n  src,\r\n  alt = '',\r\n  id,\r\n  className = '',\r\n  style = {},\r\n  objectPosition = 'center center',\r\n  loop = true,\r\n  muted = true,\r\n  playsInline = true,\r\n  preload = 'metadata',\r\n  enableVisibilityControl = true,\r\n  priority = false,\r\n  controls = false,\r\n}: MediaLoaderProps) => {\r\n  const [loaded, setLoaded] = useState(false);      // first frame/LQIP loaded\r\n  const [showMedium, setShowMedium] = useState(false);\r\n  const [showHigh, setShowHigh] = useState(false);\r\n\r\n  const videoRef = useRef<HTMLVideoElement>(null);\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n\r\n  const isNear = useNearViewport(containerRef);\r\n  const shouldStart = priority || isNear;\r\n\r\n  // IMAGE upgrade flow\r\n  useEffect(() => {\r\n    if (type !== 'image') return;\r\n    registerImage();\r\n\r\n    // start medium once near (or after 2s as a safety)\r\n    const t1 = setTimeout(() => setShowMedium(true), shouldStart ? 0 : 2000);\r\n    if (shouldStart) setShowMedium(true);\r\n\r\n    // upgrade to high when all low-res are in OR 5s safety\r\n    const off = () => setTimeout(() => setShowHigh(true), 300);\r\n    onAllLowResLoaded(off);\r\n    const t2 = setTimeout(() => setShowHigh(true), 5000);\r\n\r\n    return () => {\r\n      clearTimeout(t1);\r\n      clearTimeout(t2);\r\n    };\r\n  }, [type, shouldStart]);\r\n\r\n  const onMediaLoaded = () => {\r\n    setLoaded(true);\r\n    if (type === 'image') notifyLowResLoaded();\r\n\r\n    if (id) {\r\n      const event = new CustomEvent('mediaReady', { detail: { id } });\r\n      window.dispatchEvent(event);\r\n    }\r\n  };\r\n\r\n  // VIDEO visibility/autoplay + fetch control\r\n  useVideoVisibility(\r\n    videoRef,\r\n    containerRef,\r\n    type === 'video' && enableVisibilityControl ? 0.4 : undefined\r\n  );\r\n\r\n  // kick off video fetching when near (or fallback after 2s)\r\n  useEffect(() => {\r\n    if (type !== 'video' || !videoRef.current) return;\r\n    const v = videoRef.current;\r\n    const start = () => {\r\n      // switch to metadata so the browser actually fetches\r\n      if (v.preload !== 'metadata') v.preload = 'metadata';\r\n      // if sources are present, ensure load is called\r\n      try { v.load(); } catch {}\r\n    };\r\n    if (shouldStart) start();\r\n    const t = setTimeout(start, 2000);\r\n    return () => clearTimeout(t);\r\n  }, [type, shouldStart]);\r\n\r\n  if (!src) return null;\r\n\r\n  // ============== IMAGE ==============\r\n  if (type === 'image') {\r\n    // Always render LQIP immediately; upgrade sources via state\r\n    const ultraLowSrc = typeof src === 'string' ? src : getLowResImageUrl(src);\r\n    const mediumSrc   = typeof src === 'string' ? src : getMediumImageUrl(src);\r\n    const highResSrc  = typeof src === 'string' ? src : getHighQualityImageUrl(src);\r\n\r\n    const resolvedSrc = showHigh ? highResSrc : showMedium ? mediumSrc : ultraLowSrc;\r\n\r\n    return (\r\n      <div ref={containerRef} style={{ position: 'relative', width: '100%', height: '100%' }}>\r\n        {!loaded && (\r\n          <div className=\"absolute inset-0 z-10\">\r\n            <LoadingScreen isFullScreen={false} />\r\n          </div>\r\n        )}\r\n\r\n          <img\r\n            loading={priority ? 'eager' : undefined} // undefined â†’ default\r\n            fetchPriority={showHigh || priority ? 'high' : showMedium ? 'auto' : 'low'}\r\n            id={id}\r\n            src={resolvedSrc}\r\n            alt={alt}\r\n            onLoad={onMediaLoaded}\r\n            onError={(e) => console.warn('Image failed', (e.target as HTMLImageElement).src)}\r\n            className={className}\r\n            draggable={false}\r\n            style={{\r\n              ...style,\r\n              objectFit: 'cover',\r\n              opacity: loaded ? 1 : 0,\r\n              transition: 'filter 0.5s ease, opacity 0.3s ease',\r\n            }}\r\n          />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // ============== VIDEO ==============\r\n  const isVideoSetObj =\r\n    typeof src === 'object' && !('asset' in (src as any)) &&\r\n    (('webmUrl' in (src as any)) || ('mp4Url' in (src as any)));\r\n\r\n  const vs = (isVideoSetObj ? (src as VideoSetSrc) : undefined);\r\n  const legacyVideoUrl = typeof src === 'string' ? src : undefined;\r\n\r\n  const posterUrl =\r\n    vs?.poster\r\n      ? (typeof vs.poster === 'string'\r\n          ? vs.poster\r\n          : urlFor(vs.poster).width(1200).quality(80).auto('format').url())\r\n      : undefined;\r\n\r\n  return (\r\n    <div ref={containerRef} style={{ position: 'relative', width: '100%', height: '100%' }}>\r\n      {!loaded && (\r\n        <div className=\"absolute inset-0 z-10\">\r\n          <LoadingScreen isFullScreen={false} />\r\n        </div>\r\n      )}\r\n\r\n      <video\r\n        id={id}\r\n        ref={videoRef}\r\n        onLoadedData={onMediaLoaded}\r\n        onError={(e) => console.warn('Video failed', e)}\r\n        className={className}\r\n        style={{\r\n          ...style,\r\n          objectFit: 'cover',\r\n          objectPosition,\r\n          opacity: loaded ? 1 : 0,\r\n          transition: 'opacity 0.3s ease',\r\n          pointerEvents: 'all',\r\n        }}\r\n        loop={loop}\r\n        muted={muted}\r\n        playsInline={playsInline}\r\n        // start conservative; we'll bump to 'metadata' and call load() when near\r\n        preload=\"none\"\r\n        controls={controls}\r\n        poster={posterUrl}\r\n        {...(muted ? { defaultmuted: true } : {})}\r\n      >\r\n        {vs?.webmUrl && <source src={vs.webmUrl} type=\"video/webm\" />}\r\n        {vs?.mp4Url  && <source src={vs.mp4Url}  type=\"video/mp4\"  />}\r\n        {!vs?.webmUrl && !vs?.mp4Url && legacyVideoUrl && <source src={legacyVideoUrl} />}\r\n      </video>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MediaLoader;\r\n","// video-observer.tsx\r\nimport { useEffect } from 'react';\r\n\r\nexport const useVideoVisibility = (\r\n  videoRef: React.RefObject<HTMLVideoElement> | null,\r\n  containerRef: React.RefObject<HTMLElement> | null,\r\n  threshold: number = 0.4\r\n) => {\r\n  useEffect(() => {\r\n    if (!videoRef?.current || !containerRef?.current) return;\r\n\r\n    const t = typeof threshold === 'number' && threshold >= 0 && threshold <= 1 ? threshold : 0.4;\r\n\r\n    let observer: IntersectionObserver | undefined;\r\n\r\n    const video = videoRef.current!;\r\n    const container = containerRef.current!;\r\n\r\n    // IMPORTANT: load even when using <source> children\r\n    // (video.src is empty in that case; currentSrc is set after load())\r\n    video.load();\r\n    video.muted = true;\r\n\r\n    observer = new IntersectionObserver(\r\n      ([entry]) => {\r\n        if (entry.isIntersecting) {\r\n          video.play().catch(() => setTimeout(() => video.play().catch(() => {}), 500));\r\n        } else {\r\n          video.pause();\r\n        }\r\n      },\r\n      { threshold: t }\r\n    );\r\n\r\n    observer.observe(container);\r\n\r\n    // kick once if already in view\r\n    const rect = container.getBoundingClientRect();\r\n    const ratio = Math.min(Math.max((window.innerHeight - rect.top) / window.innerHeight, 0), 1);\r\n    if (ratio >= t) video.play().catch(() => {});\r\n\r\n    return () => observer?.disconnect();\r\n  }, [videoRef, containerRef, threshold]);\r\n};\r\n","// utils/tooltip/global-tooltip.ts\r\nimport '../../styles/tooltip.css';\r\nimport { projectColors } from '../content-utility/color-map';\r\n\r\ntype TooltipInfo = { tags: string[]; backgroundColor: string };\r\nconst tooltipDataCache: Record<string, TooltipInfo> = {};\r\n\r\nconst LOCAL_FALLBACK_TAGS: Record<string, string[]> = {\r\n  'block-g': ['#q5.js Canvas', '#Gamification', '#Lottie Animation'],\r\n};\r\n\r\nconst TITLE_BY_KEY: Record<string, string> = {\r\n  'rotary-lamp': 'Rotary Lamp',\r\n  'ice-scoop': 'Ice Cream Scoop',\r\n  'data-viz': 'Data Visualization',\r\n  'block-g': 'Evade the Rock',\r\n  'dynamic': 'Dynamic App',\r\n};\r\n\r\nfunction bgForKey(key: string) {\r\n  const colorInfo = projectColors[TITLE_BY_KEY[key]];\r\n  const alpha = colorInfo?.tooltipAlpha ?? 0.6;\r\n  return colorInfo ? `rgba(${colorInfo.rgb}, ${alpha})` : 'rgba(85,95,90,0.6)';\r\n}\r\n\r\nfunction createTooltipDOM() {\r\n  const el = document.createElement('div');\r\n  el.id = 'custom-global-tooltip';\r\n  el.style.position = 'fixed';\r\n  el.style.pointerEvents = 'none';\r\n  el.style.zIndex = '9999';\r\n  el.style.opacity = '0';\r\n  el.style.visibility = 'hidden';\r\n  el.style.backdropFilter = 'blur(8px)';\r\n  el.style.color = '#fff';\r\n  el.style.transition = 'opacity 0.3s ease, visibility 0.3s ease';\r\n  el.className = 'custom-tooltip-blur';\r\n  const root = document.getElementById('efe-portfolio') || document.body;\r\n  root.appendChild(el);\r\n  return el as HTMLDivElement;\r\n}\r\n\r\nlet tooltipEl: HTMLDivElement | null = null;\r\nlet currentKey = '';\r\nlet hideTimeout: ReturnType<typeof setTimeout> | null = null;\r\n\r\nexport const fetchTooltipDataForKey = async (key: string): Promise<TooltipInfo> => {\r\n  if (tooltipDataCache[key]) return tooltipDataCache[key];\r\n\r\n  const bg = bgForKey(key);\r\n\r\n  // local fallback\r\n  if (LOCAL_FALLBACK_TAGS[key]) {\r\n    const info = { tags: LOCAL_FALLBACK_TAGS[key], backgroundColor: bg };\r\n    tooltipDataCache[key] = info;\r\n    return info;\r\n  }\r\n\r\n  // CMS fetch by slug\r\n  try {\r\n    const client = (await import('../sanity')).default;\r\n    const res = await client.fetch<{ tags?: string[] } | null>(\r\n      `*[_type==\"mediaBlock\" && slug.current == $key][0]{ tags }`,\r\n      { key }\r\n    );\r\n    const info: TooltipInfo = { tags: res?.tags ?? [], backgroundColor: bg };\r\n    tooltipDataCache[key] = info;\r\n    return info;\r\n  } catch {\r\n    const info: TooltipInfo = { tags: [], backgroundColor: bg };\r\n    tooltipDataCache[key] = info;\r\n    return info;\r\n  }\r\n};\r\n\r\nconst showTooltip = () => {\r\n  if (!tooltipEl) return;\r\n  if (hideTimeout) clearTimeout(hideTimeout);\r\n  tooltipEl.style.opacity = '1';\r\n  tooltipEl.style.visibility = 'visible';\r\n  hideTimeout = setTimeout(() => hideTooltip(), 2_000);\r\n};\r\n\r\nconst hideTooltip = () => {\r\n  if (!tooltipEl) return;\r\n  if (hideTimeout) clearTimeout(hideTimeout);\r\n  tooltipEl.style.opacity = '0';\r\n  tooltipEl.style.visibility = 'hidden';\r\n  currentKey = '';\r\n};\r\n\r\nfunction positionTooltip(x: number, y: number) {\r\n  if (!tooltipEl) return;\r\n  const rect = tooltipEl.getBoundingClientRect();\r\n  const padding = 0;\r\n  const vw = window.innerWidth;\r\n  const vh = window.innerHeight;\r\n\r\n  const nearTop = y < rect.height + padding + 20;\r\n  const nearBottom = y + rect.height + padding > vh - 20;\r\n  const nearRight = x + rect.width + padding > vw - 20;\r\n  const nearLeft = x < rect.width + padding + 20;\r\n\r\n  let left: number, top: number;\r\n  if (nearBottom) { top = y - rect.height - padding - 12; left = x - rect.width * 0.15; }\r\n  else if (nearTop) { top = y + padding + 6; left = x - rect.width * 0.15; }\r\n  else if (nearRight) { top = y - rect.height / 2; left = x - rect.width - padding - 18; }\r\n  else if (nearLeft) { top = y - rect.height / 2; left = x + padding; }\r\n  else { top = y - rect.height / 2; left = x + padding; }\r\n\r\n  left = Math.max(padding, Math.min(left, vw - rect.width - padding));\r\n  top  = Math.max(padding, Math.min(top,  vh - rect.height - padding));\r\n\r\n  tooltipEl.style.left = `${left}px`;\r\n  tooltipEl.style.top  = `${top}px`;\r\n}\r\n\r\nexport function initGlobalTooltip(isRealMobile: boolean) {\r\n  if (tooltipEl) return () => {};\r\n  tooltipEl = createTooltipDOM();\r\n\r\n  let lastMouseX = -1;\r\n  let lastMouseY = -1;\r\n  let ticking = false;\r\n  let scrollCheckTimeout: ReturnType<typeof setTimeout> | null = null;\r\n\r\n  const updateForElement = async (el: Element | null) => {\r\n    if (!(el instanceof HTMLElement)) { hideTooltip(); return; }\r\n    const tooltipClass = [...el.classList].find(c => c.startsWith('tooltip-'));\r\n    if (!tooltipClass) { hideTooltip(); return; }\r\n\r\n    const key = tooltipClass.replace('tooltip-', '');\r\n    if (key !== currentKey) {\r\n      currentKey = key;\r\n      const info = await fetchTooltipDataForKey(key);\r\n\r\n      if (!info.tags.length) { hideTooltip(); return; }\r\n      tooltipEl!.innerHTML = info.tags.map(t => `<p class=\"tooltip-tag\">${t}</p>`).join('');\r\n      tooltipEl!.style.backgroundColor = info.backgroundColor;\r\n      showTooltip();\r\n    } else if (tooltipEl!.style.opacity === '0' || tooltipEl!.style.visibility === 'hidden') {\r\n      showTooltip();\r\n    }\r\n  };\r\n\r\n  const onMouseMove = (e: MouseEvent) => {\r\n    lastMouseX = e.clientX;\r\n    lastMouseY = e.clientY;\r\n    requestAnimationFrame(() => positionTooltip(lastMouseX, lastMouseY));\r\n    updateForElement(e.target as Element);\r\n  };\r\n\r\n  const checkHoveredElementOnScroll = () => {\r\n    const el = document.elementFromPoint(lastMouseX, lastMouseY);\r\n    updateForElement(el);\r\n    requestAnimationFrame(() => positionTooltip(lastMouseX, lastMouseY));\r\n  };\r\n\r\n  const onScroll = () => {\r\n    if (!ticking) {\r\n      window.requestAnimationFrame(() => { checkHoveredElementOnScroll(); ticking = false; });\r\n      ticking = true;\r\n    }\r\n    if (scrollCheckTimeout) clearTimeout(scrollCheckTimeout);\r\n    scrollCheckTimeout = setTimeout(() => {}, 120);\r\n  };\r\n\r\n  const onMouseOut = (e: MouseEvent) => {\r\n    if (!e.relatedTarget) hideTooltip();\r\n  };\r\n\r\n  // only attach scroll observer for non-mobile real viewports\r\n  if (!isRealMobile) window.addEventListener('scroll', onScroll, true);\r\n  document.addEventListener('mousemove', onMouseMove, { passive: true });\r\n  document.addEventListener('mouseout', onMouseOut, { passive: true });\r\n\r\n  return () => {\r\n    if (!tooltipEl) return;\r\n    if (!isRealMobile) window.removeEventListener('scroll', onScroll, true);\r\n    document.removeEventListener('mousemove', onMouseMove);\r\n    document.removeEventListener('mouseout', onMouseOut);\r\n    tooltipEl.remove();\r\n    tooltipEl = null;\r\n    if (hideTimeout) clearTimeout(hideTimeout);\r\n  };\r\n}\r\n","// utils/tooltip/tooltipInit.ts\r\nimport { useEffect } from 'react';\r\nimport { initGlobalTooltip } from './tooltip';\r\nimport { useRealMobileViewport } from '../content-utility/real-mobile';\r\n\r\nexport const useTooltipInit = () => {\r\n  const isRealMobile = useRealMobileViewport();\r\n\r\n  useEffect(() => {\r\n    const dispose = initGlobalTooltip(isRealMobile);\r\n    return () => dispose?.();\r\n  }, [isRealMobile]);\r\n};\r\n"],"names":["useEffect","useState","client","MediaLoader","useTooltipInit","useSsrData","jsx","_jsx","DataVisualizationBlock","ssrData","data","setData","preloaded","dataviz","fetch","slug","then","catch","err","console","warn","mediaOne","alt","image","video","isVideo","Boolean","webmUrl","mp4Url","className","style","position","children","width","height","type","src","id","objectPosition","projectColors","rgb","tooltipAlpha","defaultAlpha","darkThemeTop","useRealMobileViewport","isRealMobile","setIsRealMobile","coarse","window","matchMedia","matches","touch","navigator","maxTouchPoints","vv","visualViewport","shrinks","check","gap","innerHeight","addEventListener","removeEventListener","totalImages","loadedLowRes","listeners","upgradeTimeout","setUpgradeTimeout","ms","setTimeout","forEach","fn","registerImage","notifyLowResLoaded","onAllLowResLoaded","callback","push","useRef","useVideoVisibility","LoadingScreen","getLowResImageUrl","getMediumImageUrl","getHighQualityImageUrl","urlFor","jsxs","_jsxs","useNearViewport","ref","rootMargin","threshold","once","near","setNear","current","io","IntersectionObserver","entries","some","e","isIntersecting","disconnect","observe","loop","muted","playsInline","preload","enableVisibilityControl","priority","controls","loaded","setLoaded","showMedium","setShowMedium","showHigh","setShowHigh","videoRef","containerRef","isNear","shouldStart","t1","off","t2","clearTimeout","onMediaLoaded","event","CustomEvent","detail","dispatchEvent","undefined","v","start","load","t","ultraLowSrc","mediumSrc","highResSrc","resolvedSrc","isFullScreen","loading","fetchPriority","onLoad","onError","target","draggable","objectFit","opacity","transition","isVideoSetObj","vs","legacyVideoUrl","posterUrl","poster","quality","auto","url","onLoadedData","pointerEvents","defaultmuted","observer","container","entry","play","pause","rect","getBoundingClientRect","ratio","Math","min","max","top","tooltipDataCache","LOCAL_FALLBACK_TAGS","TITLE_BY_KEY","bgForKey","key","colorInfo","alpha","createTooltipDOM","el","document","createElement","zIndex","visibility","backdropFilter","color","root","getElementById","body","appendChild","tooltipEl","currentKey","hideTimeout","fetchTooltipDataForKey","bg","info","tags","backgroundColor","default","res","showTooltip","hideTooltip","positionTooltip","x","y","padding","vw","innerWidth","vh","nearTop","nearBottom","nearRight","nearLeft","left","initGlobalTooltip","lastMouseX","lastMouseY","ticking","scrollCheckTimeout","updateForElement","HTMLElement","tooltipClass","classList","find","c","startsWith","replace","length","innerHTML","map","join","onMouseMove","clientX","clientY","requestAnimationFrame","checkHoveredElementOnScroll","elementFromPoint","onScroll","onMouseOut","relatedTarget","passive","remove","dispose"],"sourceRoot":""}