{"version":3,"file":"src_components_rock-escapade_game-canvas_tsx.server.js","mappings":"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","sources":["webpack://personal-site/./src/components/rock-escapade/game-canvas.tsx"],"sourcesContent":["// src/components/rock-escapade/GameCanvas.tsx\r\nimport { useEffect, useRef } from 'react';\r\nimport { useRealMobileViewport } from '../../utils/content-utility/real-mobile';\r\n\r\ntype Props = {\r\n  onCoinsChange?: (coins: number) => void;\r\n  highScore?: number;\r\n  onGameOver?: (finalCoins: number, isNewHigh: boolean) => void;\r\n  onReady?: (api: { restart: () => void }) => void;\r\n  pauseWhenHidden?: boolean;\r\n  demoMode?: boolean;\r\n  overlayActive?: boolean;\r\n  allowSpawns?: boolean;\r\n};\r\n\r\nexport default function GameCanvas({\r\n  onCoinsChange,\r\n  highScore = 0,\r\n  onGameOver,\r\n  onReady,\r\n  pauseWhenHidden = true,\r\n  demoMode = false,\r\n  overlayActive = false,\r\n  allowSpawns = true,\r\n}: Props) {\r\n  const hostRef = useRef<HTMLDivElement>(null);\r\n  const q5Ref = useRef<any>(null);\r\n  const visibleRef = useRef(true);\r\n  const cleanupRef = useRef<(() => void) | null>(null);\r\n\r\n  // prop refs\r\n  const coinsChangeRef = useRef(onCoinsChange);\r\n  const gameOverRef = useRef(onGameOver);\r\n  const readyRef = useRef(onReady);\r\n  const highScoreRef = useRef(highScore);\r\n  const pauseHiddenRef = useRef(pauseWhenHidden);\r\n  const demoRef = useRef(!!demoMode);\r\n  const overlayRef = useRef(!!overlayActive);\r\n  const allowSpawnsRef = useRef(allowSpawns);\r\n\r\n  coinsChangeRef.current = onCoinsChange;\r\n  gameOverRef.current = onGameOver;\r\n  readyRef.current = onReady;\r\n  highScoreRef.current = highScore;\r\n  pauseHiddenRef.current = pauseWhenHidden;\r\n  demoRef.current = !!demoMode;\r\n  overlayRef.current = !!overlayActive;\r\n  allowSpawnsRef.current = !!allowSpawns;\r\n\r\n  const isRealMobile = useRealMobileViewport();\r\n\r\n  useEffect(() => {\r\n    let alive = true;\r\n    let io: IntersectionObserver | null = null;\r\n    let onResize: (() => void) | null = null;\r\n\r\n    import('q5').then((q5mod) => {\r\n      if (!alive) return;\r\n      const q5 = (q5mod as any).default ?? (q5mod as any);\r\n\r\n      const el = hostRef.current;\r\n      if (!el || !el.isConnected) return;\r\n\r\n      // defensive: clear any leftover canvases and prior instance\r\n      el.replaceChildren();\r\n      if (q5Ref.current?.remove) {\r\n        try { q5Ref.current.remove(); } catch {}\r\n        q5Ref.current = null;\r\n      }\r\n\r\n      const sketch = (p: any) => {\r\n        // ---------------- Local state ----------------\r\n        let verticalMode = false;\r\n        let rectangles: any[] = [];\r\n        let octagons: any[] = [];\r\n        let particles: any[] = [];\r\n        let projectiles: any[] = [];\r\n        let circle: any;\r\n        let lastSpawnTime = 0;\r\n        let lastOctagonSpawnTime = 0;\r\n        let rectangleSpawnRate = 2;\r\n        let coins = 0;\r\n        let gameOver = false;\r\n        let prevGameOver = false;\r\n        let lastDemoFlag = true;\r\n\r\n        let lastFiredTime = -Infinity;\r\n        const cooldownDuration = 1500;\r\n        const cooldownRadiusMax = 48;\r\n\r\n        // ---- touch steering state ----\r\n        let touchStart: { x: number; y: number } | null = null;\r\n        let lastTouch: { x: number; y: number } | null = null;\r\n        let touchStartMillis = 0;\r\n        const TAP_MS = 180;   // max time for a tap\r\n        const TAP_MOVE = 12;  // max move (px) to still count as a tap\r\n        const baseImpulse = isRealMobile ? 0.5 : 0.35; // stronger on phones\r\n\r\n        let movingUp = false;\r\n        let movingDown = false;\r\n        let movingLeft = false;\r\n        let movingRight = false;\r\n\r\n        // ---------------- Autoevade can spawn regardless ----------------\r\n        function canSpawn() {\r\n          return demoRef.current || allowSpawnsRef.current;\r\n        }\r\n\r\n        // ---------------- API ----------------\r\n        const restartGame = () => {\r\n          gameOver = false;\r\n          coins = 0;\r\n          coinsChangeRef.current?.(coins);\r\n          rectangles = [];\r\n          octagons = [];\r\n          particles = [];\r\n          projectiles = [];\r\n          circle = new Circle(p, 240, p.height / 2, 33);\r\n          (q5Ref.current as any).circle = circle;\r\n          lastOctagonSpawnTime = p.millis();\r\n        };\r\n        (p as any).restartGame = restartGame;\r\n\r\n        // ---------------- Setup ----------------\r\n        p.setup = () => {\r\n          const w = el.offsetWidth;\r\n          const h = el.offsetHeight;\r\n          p.createCanvas(w, h);\r\n\r\n          verticalMode = window.innerWidth <= 1024 && window.innerHeight > window.innerWidth;\r\n\r\n          lastOctagonSpawnTime = p.millis();\r\n          circle = new Circle(p, 240, h / 2, 33);\r\n          (q5Ref.current as any).circle = circle;\r\n\r\n          readyRef.current?.({ restart: restartGame });\r\n        };\r\n\r\n        // ---------------- Draw loop ----------------\r\n        p.draw = () => {\r\n          \r\n        const demo = demoRef.current;\r\n          // detect transition: demo -> live\r\n        if (!demo && lastDemoFlag) {\r\n          // hard reset to a clean field\r\n          rectangles = [];\r\n          octagons = [];\r\n          particles = [];\r\n          projectiles = [];\r\n          coins = 0;\r\n          coinsChangeRef.current?.(0);\r\n\r\n          circle.x = 240;\r\n          circle.y = p.height / 2;\r\n          circle.vx = circle.vy = circle.ax = circle.ay = 0;\r\n\r\n          // reset spawn timers so first spawn can happen immediately when allowed\r\n          lastOctagonSpawnTime = p.millis();\r\n          lastSpawnTime       = p.millis();\r\n        }\r\n        lastDemoFlag = demo;\r\n\r\n          if (pauseHiddenRef.current && !visibleRef.current) {\r\n            p.background(25);\r\n            return;\r\n          }\r\n\r\n          const delta = p.deltaTime / 16.67;\r\n          p.background(25);\r\n          // in p.draw(), before applying key-driven movement:\r\n          if (!demo && overlayRef.current) {\r\n            // lock controls while overlay is visible\r\n            movingUp = movingDown = movingLeft = movingRight = false;\r\n            circle.stopHorizontal();\r\n            circle.stopVertical();\r\n          }\r\n\r\n          if (demo) {\r\n            autoEvade();\r\n          } else {\r\n            if (movingUp) circle.moveUp(); else if (movingDown) circle.moveDown(); else circle.stopVertical();\r\n            if (movingLeft) circle.moveLeft(); else if (movingRight) circle.moveRight(); else circle.stopHorizontal();\r\n          }\r\n\r\n          circle.update(delta);\r\n          circle.display();\r\n\r\n          spawnRectangles(p);\r\n          updateRectangles(p, delta);\r\n\r\n          spawnOctagons(p);\r\n          updateOctagons(p, delta);\r\n\r\n          if (!isRealMobile) p.blendMode(p.ADD);\r\n          for (let i = particles.length - 1; i >= 0; i--) {\r\n            const part = particles[i];\r\n            part.update(delta);\r\n            part.display();\r\n            if (part.isDead()) particles.splice(i, 1);\r\n          }\r\n          if (!isRealMobile) p.blendMode(p.BLEND);\r\n\r\n          for (let i = projectiles.length - 1; i >= 0; i--) {\r\n            const proj = projectiles[i];\r\n            proj.update(delta);\r\n            proj.display();\r\n            if (proj.isDead()) projectiles.splice(i, 1);\r\n          }\r\n\r\n          // live-mode only HUD & game-over\r\n          if (!demo) {\r\n            if (!prevGameOver && gameOver) {\r\n              const isNewHigh = coins > (highScoreRef.current ?? 0);\r\n              gameOverRef.current?.(coins, isNewHigh);\r\n            }\r\n            prevGameOver = gameOver;\r\n\r\n            if (gameOver) { p.background(25, 180); return; }\r\n            drawCooldownRing();\r\n          } else {\r\n            gameOver = false; // demo never ends\r\n          }\r\n        };\r\n\r\n        // --- Demo simple AI: evade rectangles, seek octagons\r\n        function autoEvade() {\r\n          let evadeX = 0, evadeY = 0, danger = 0;\r\n\r\n          for (const rect of rectangles) {\r\n            const cx = rect.x + rect.w / 2;\r\n            const cy = rect.y + rect.h / 2;\r\n            const dx = circle.x - cx;\r\n            const dy = circle.y - cy;\r\n            const distSq = dx * dx + dy * dy;\r\n            if (distSq < 20000) {\r\n              const dist = Math.sqrt(distSq) || 1;\r\n              const weight = 1 / (dist + 300);\r\n              const force = weight * 150;\r\n              evadeX += (dx / dist) * force;\r\n              evadeY += (dy / dist) * force;\r\n              danger += (1 / (dist + 1)) * 10;\r\n            }\r\n          }\r\n\r\n          let attractX = 0, attractY = 0;\r\n          if (octagons.length > 0 && danger < 50) {\r\n            const target = octagons.reduce((a, b) => {\r\n              const da = p.dist(circle.x, circle.y, a.x + a.size / 2, a.y + a.size / 2);\r\n              const db = p.dist(circle.x, circle.y, b.x + b.size / 2, b.y + b.size / 2);\r\n              return db < da ? b : a;\r\n            });\r\n            const dx = (target.x + target.size / 2) - circle.x;\r\n            const dy = (target.y + target.size / 2) - circle.y;\r\n            const d = Math.sqrt(dx * dx + dy * dy) || 1;\r\n            attractX = (dx / d) * 0.45;\r\n            attractY = (dy / d) * 0.45;\r\n          }\r\n\r\n          circle.ax = evadeX + attractX;\r\n          circle.ay = evadeY + attractY;\r\n\r\n          if (circle.ax === 0 && circle.ay === 0) {\r\n            const cx = p.width / 2 - circle.x;\r\n            const cy = p.height / 2 - circle.y;\r\n            const d = Math.sqrt(cx * cx + cy * cy) || 1;\r\n            circle.ax = (cx / d) * 0.1;\r\n            circle.ay = (cy / d) * 0.1;\r\n          }\r\n        }\r\n\r\n        function drawCooldownRing() {\r\n          const elapsed = p.millis() - lastFiredTime;\r\n          if (elapsed >= cooldownDuration) return;\r\n          const progress = 1 - (elapsed / cooldownDuration);\r\n          const radius = progress * cooldownRadiusMax;\r\n          p.noStroke();\r\n          p.fill(200, 150, 255, 100);\r\n          p.ellipse(circle.x, circle.y, radius * 2, radius * 2);\r\n        }\r\n\r\n        // ---------------- Spawners/Updaters ----------------\r\n        function spawnRectangles(p: any) {\r\n          if (!allowSpawnsRef.current) return;\r\n          if (!canSpawn()) return;\r\n          const inView = rectangles.filter((r) =>\r\n            verticalMode ? r.y + r.h > 0 && r.y < p.height : r.x + r.w > 0 && r.x < p.width\r\n          ).length;\r\n\r\n          let maxRectangles: number;\r\n          if (window.innerWidth >= 1025) {\r\n            maxRectangles = 50;\r\n            if (inView < 10) rectangleSpawnRate = 6;\r\n            else if (inView < 25) rectangleSpawnRate = 5;\r\n            else if (inView < 40) rectangleSpawnRate = 4;\r\n            else rectangleSpawnRate = 0;\r\n          } else if (window.innerWidth >= 768) {\r\n            maxRectangles = 60;\r\n            if (inView < 8) rectangleSpawnRate = 5;\r\n            else if (inView < 20) rectangleSpawnRate = 4;\r\n            else if (inView < 40) rectangleSpawnRate = 3;\r\n            else rectangleSpawnRate = 0;\r\n          } else {\r\n            maxRectangles = 25;\r\n            if (inView < 10) rectangleSpawnRate = 4;\r\n            else if (inView < 20) rectangleSpawnRate = 3;\r\n            else rectangleSpawnRate = 1;\r\n          }\r\n\r\n          if (rectangleSpawnRate > 0 && p.millis() - lastSpawnTime > 2000 / rectangleSpawnRate && inView < maxRectangles) {\r\n            rectangles.push(new Shape(p, true, false, verticalMode));\r\n            lastSpawnTime = p.millis();\r\n          }\r\n\r\n          if (p.millis() % 5000 < 20) {\r\n            rectangles = rectangles.filter((r) => !isNaN(r.x) && !isNaN(r.y));\r\n          }\r\n        }\r\n\r\n        function updateRectangles(p: any, delta: number) {\r\n          for (let i = rectangles.length - 1; i >= 0; i--) {\r\n            const r = rectangles[i];\r\n            r.update(delta);\r\n            r.display();\r\n            if (!demoRef.current && circle.overlaps(r)) gameOver = true;\r\n\r\n            // projectiles collision\r\n            for (let j = projectiles.length - 1; j >= 0; j--) {\r\n              const proj = projectiles[j];\r\n              const projSize = (proj.size ?? proj.radius * 2);\r\n              const projX = proj.x - (proj.size ? proj.size / 2 : proj.radius);\r\n              const projY = proj.y - (proj.size ? proj.size / 2 : proj.radius);\r\n              const projW = projSize;\r\n              const projH = projSize;\r\n\r\n              if (\r\n                projX + projW > r.x &&\r\n                projX < r.x + r.w &&\r\n                projY + projH > r.y &&\r\n                projY < r.y + r.h\r\n              ) {\r\n                if (proj instanceof RectangleProjectile) {\r\n                  if (p.random() < 0.05) {\r\n                    rectangles.splice(i, 1);\r\n                    projectiles.splice(j, 1);\r\n                    burstRectangles(p, r.x + r.w / 2, r.y + r.h / 2);\r\n                  } else {\r\n                    proj.vx *= -1;\r\n                    proj.vy *= -1;\r\n                    proj.x += proj.vx * delta * 2;\r\n                    proj.y += proj.vy * delta * 2;\r\n                  }\r\n                } else {\r\n                  rectangles.splice(i, 1);\r\n                  projectiles.splice(j, 1);\r\n                  burstRectangles(p, r.x + r.w / 2, r.y + r.h / 2);\r\n                }\r\n                break;\r\n              }\r\n            }\r\n\r\n            const off = verticalMode\r\n              ? r.y - r.h > p.height + 100 || r.y + r.h < -100\r\n              : r.x + r.w < -100 || r.x - r.w > p.width + 100;\r\n\r\n            if (off) {\r\n              rectangles.splice(i, 1);\r\n              continue;\r\n            }\r\n          }\r\n\r\n          for (let i = 0; i < rectangles.length; i++) {\r\n            const r1 = rectangles[i];\r\n            for (let j = i + 1; j < rectangles.length; j++) {\r\n              const r2 = rectangles[j];\r\n              if (r1.overlaps(r2)) r1.resolveCollision(r2);\r\n            }\r\n          }\r\n        }\r\n\r\n        function burstRectangles(p: any, cx: number, cy: number) {\r\n          for (let k = 0; k < 8; k++) {\r\n            const angle = (p.TWO_PI / 8) * k;\r\n            const speed = p.random(2, 4);\r\n            const vx = Math.cos(angle) * speed;\r\n            const vy = Math.sin(angle) * speed;\r\n            projectiles.push(new RectangleProjectile(p, cx, cy, vx, vy, '#c896ff'));\r\n          }\r\n        }\r\n\r\n        function spawnOctagons(p: any) {\r\n          if (!allowSpawnsRef.current) return;\r\n          if (!canSpawn()) return;\r\n          if (p.millis() - lastOctagonSpawnTime > 2000) {\r\n            if (octagons.length === 0) octagons.push(new Shape(p, true, true, verticalMode));\r\n            lastOctagonSpawnTime = p.millis();\r\n          }\r\n        }\r\n\r\n        function updateOctagons(p: any, delta: number) {\r\n          const buffer = 150;\r\n\r\n          for (let i = octagons.length - 1; i >= 0; i--) {\r\n            const o = octagons[i];\r\n            o.update(delta);\r\n            o.display();\r\n\r\n            if (circle.overlaps(o)) {\r\n              if (!demoRef.current) {\r\n                coins += 20;\r\n                coinsChangeRef.current?.(coins);\r\n              }\r\n              for (let j = 0; j < 10; j++) {\r\n                particles.push(new Particle(p, o.x + o.size / 2, o.y + o.size / 2, 255, o.c, 0, 0, 5));\r\n              }\r\n              octagons.splice(i, 1);\r\n              continue;\r\n            }\r\n\r\n            const speed = Math.abs(o.vx) + Math.abs(o.vy);\r\n            let numParticles: number;\r\n            if (speed < 1) numParticles = 0.05;\r\n            else if (speed < 3) numParticles = 0.1;\r\n            else if (speed < 6) numParticles = 0.2;\r\n            else numParticles = 0.3;\r\n\r\n            const whole = Math.floor(numParticles);\r\n            const frac = numParticles - whole;\r\n\r\n            for (let j = 0; j < whole; j++) particles.push(new Particle(p, o.x + o.size / 2, o.y + o.size / 2, 255, o.c));\r\n            if (p.random() < frac) particles.push(new Particle(p, o.x + o.size / 2, o.y + o.size / 2, 255, o.c));\r\n\r\n            if (\r\n              o.x + o.size < -buffer ||\r\n              o.x - o.size > p.width + buffer ||\r\n              o.y + o.size < -buffer ||\r\n              o.y - o.size > p.height + buffer\r\n            ) {\r\n              octagons.splice(i, 1);\r\n            }\r\n          }\r\n        }\r\n\r\n        // ---------------- Input ----------------\r\n        p.keyPressed = () => {\r\n          if (demoRef.current || overlayRef.current) return; //  add overlay guard\r\n          if (p.key === ' ' || p.key === 'Spacebar') {\r\n            const now = p.millis();\r\n            if (now - lastFiredTime >= cooldownDuration) {\r\n              lastFiredTime = now;\r\n              if (circle) {\r\n                const vx = circle.vx !== 0 || circle.vy !== 0 ? circle.vx : 5;\r\n                const vy = circle.vy !== 0 || circle.vx !== 0 ? circle.vy : 0;\r\n                projectiles.push(new Projectile(p, circle.x, circle.y, vx, vy));\r\n              }\r\n            }\r\n          }\r\n          if (p.key === 'w' || p.keyCode === p.UP_ARROW)    movingUp = true;\r\n          if (p.key === 's' || p.keyCode === p.DOWN_ARROW)  movingDown = true;\r\n          if (p.key === 'a' || p.keyCode === p.LEFT_ARROW)  movingLeft = true;\r\n          if (p.key === 'd' || p.keyCode === p.RIGHT_ARROW) movingRight = true;\r\n        };\r\n\r\n        p.keyReleased = () => {\r\n          if (demoRef.current || overlayRef.current) return; //  add overlay guard\r\n          if (p.key === 'w' || p.keyCode === p.UP_ARROW)    movingUp = false;\r\n          if (p.key === 's' || p.keyCode === p.DOWN_ARROW)  movingDown = false;\r\n          if (p.key === 'a' || p.keyCode === p.LEFT_ARROW)  movingLeft = false;\r\n          if (p.key === 'd' || p.keyCode === p.RIGHT_ARROW) movingRight = false;\r\n        };\r\n\r\n        p.touchStarted = () => {\r\n          if (demoRef.current || overlayRef.current) return false; //  add overlay guard\r\n          if (p.touches.length !== 1) return false;\r\n          touchStart = { x: p.mouseX, y: p.mouseY };\r\n          lastTouch = { x: p.mouseX, y: p.mouseY };\r\n          touchStartMillis = p.millis();\r\n          return false;\r\n        };\r\n\r\n        p.touchMoved = () => {\r\n          if (demoRef.current || overlayRef.current) return false; //  add overlay guard\r\n          if (!lastTouch || !circle) return false;\r\n\r\n          const dx = p.mouseX - lastTouch.x;\r\n          const dy = p.mouseY - lastTouch.y;\r\n          const dist = Math.hypot(dx, dy) || 1;\r\n\r\n          const speedFactor = Math.log2(dist + 1);\r\n          const force = baseImpulse * speedFactor;\r\n\r\n          circle.vx += (dx / dist) * force;\r\n          circle.vy += (dy / dist) * force;\r\n\r\n          lastTouch = { x: p.mouseX, y: p.mouseY };\r\n          return false;\r\n        };\r\n\r\n        p.touchEnded = () => {\r\n          if (demoRef.current || overlayRef.current) return false; //  add overlay guard\r\n\r\n          const dt = p.millis() - touchStartMillis;\r\n          const moved =\r\n            touchStart && lastTouch\r\n              ? Math.hypot(lastTouch.x - touchStart.x, lastTouch.y - touchStart.y)\r\n              : 0;\r\n\r\n          if (dt <= TAP_MS && moved <= TAP_MOVE) {\r\n            const now = p.millis();\r\n            if (now - lastFiredTime >= cooldownDuration) {\r\n              lastFiredTime = now;\r\n              const vx = circle.vx !== 0 || circle.vy !== 0 ? circle.vx : 5;\r\n              const vy = circle.vy !== 0 || circle.vx !== 0 ? circle.vy : 0;\r\n              projectiles.push(new Projectile(p, circle.x, circle.y, vx, vy));\r\n            }\r\n          }\r\n\r\n          touchStart = null;\r\n          lastTouch = null;\r\n          return false;\r\n        };\r\n\r\n        // ---------------- Classes ----------------\r\n        class Circle {\r\n          p:any;x:number;y:number;vx:number;vy:number;ax:number;ay:number;radius:number;c:any;trail:any[];\r\n          constructor(p:any,x:number,y:number,r:number){\r\n            this.p=p;this.x=x;this.y=y;this.vx=0;this.vy=0;this.ax=0;this.ay=0;this.radius=r;this.c=p.color(200,150,255);this.trail=[];\r\n          }\r\n          update(delta:number){\r\n            this.vx+=this.ax*delta;this.vy+=this.ay*delta;\r\n            this.vx*=Math.pow(0.92,delta);this.vy*=Math.pow(0.92,delta);\r\n            this.x+=this.vx*delta;this.y+=this.vy*delta;\r\n            if(this.y+this.radius<0)this.y=this.p.height+this.radius;else if(this.y-this.radius>this.p.height)this.y=-this.radius;\r\n            if(this.x+this.radius<0)this.x=this.p.width+this.radius;else if(this.x-this.radius>this.p.width)this.x=-this.radius;\r\n            this.trail.push(this.p.createVector(this.x,this.y));if(this.trail.length>8)this.trail.shift();\r\n            const lim=10;this.vx=this.p.constrain(this.vx,-lim,lim);this.vy=this.p.constrain(this.vy,-lim,lim);\r\n          }\r\n          display(){\r\n            for(let i=0;i<this.trail.length;i++){\r\n              const pos=this.trail[i];const a=this.p.map(i,0,this.trail.length-1,30,100);const r=this.p.map(i,0,this.trail.length-1,this.radius/2,this.radius);\r\n              this.p.fill(200,150,255,a);this.p.noStroke();this.p.ellipse(pos.x,pos.y,r,r);\r\n            }\r\n            this.p.fill(this.c);this.p.noStroke();this.p.ellipse(this.x,this.y,this.radius,this.radius);\r\n          }\r\n          moveUp(){this.ay=-0.5;}moveDown(){this.ay=0.5;}moveLeft(){this.ax=-0.5;}moveRight(){this.ax=0.5;}stopVertical(){this.ay=0;}stopHorizontal(){this.ax=0;}\r\n          overlaps(other:any){\r\n            if(other.isOctagon){const d=this.p.dist(this.x,this.y,other.x+other.size/2,other.y+other.size/2);return d<this.radius+other.size/2;}\r\n            const cx=this.p.constrain(this.x,other.x,other.x+other.w);const cy=this.p.constrain(this.y,other.y,other.y+other.h);\r\n            const d=this.p.dist(this.x,this.y,cx,cy);return d<this.radius*0.3;\r\n          }\r\n        }\r\n\r\n        class Shape {\r\n          p:any;isOctagon:boolean;verticalMode:boolean;x=0;y=0;vx=0;vy=0;w=0;h=0;size=0;c:any;rotation=0;rotationSpeed=0;\r\n          constructor(p:any,startOff:boolean,isOct:boolean,vertical:boolean){this.p=p;this.isOctagon=isOct;this.verticalMode=vertical;this.reset(startOff);}\r\n          reset(startOff:boolean){\r\n            if(this.verticalMode){\r\n              this.x=this.p.random(this.p.width);\r\n              if(this.isOctagon){\r\n                this.y=startOff?-this.p.random(30,60):this.p.random(this.p.height);this.vx=this.p.random(-1.2,1.2);\r\n                if(this.p.random()<0.1)this.vy=this.p.random(6,9);else if(this.p.random()<0.2)this.vy=this.p.random(0.5,1.5);else this.vy=this.p.random(2,5);\r\n                this.size=25;const colors=[this.p.color(255,215,0),this.p.color(255,223,70),this.p.color(255,200,0),this.p.color(255,170,50)];this.c=this.p.random(colors);\r\n              } else {\r\n                this.y=startOff?-this.p.random(60,120):this.p.random(this.p.height);this.vx=this.p.random(-0.5,0.5);this.vy=this.p.random(1,3);\r\n                this.w=this.p.random(28,70);this.h=this.p.random(28,70);this.c=this.p.color(235,235,255);\r\n              }\r\n            } else {\r\n              this.x=startOff?this.p.width+this.p.random(10,40):this.p.random(this.p.width);this.y=this.p.random(this.p.height);\r\n              if(this.isOctagon){\r\n                let baseX=this.p.random(-2.5,-0.5);if(window.innerWidth>=1025&&window.innerWidth>window.innerHeight)baseX*=4.5;\r\n                if(this.p.random()<0.1)baseX*=2;else if(this.p.random()<0.2)baseX*=0.5;this.vx=baseX;this.vy=this.p.random(-0.3,0.3);this.size=25;\r\n                const colors=[this.p.color(255,215,0),this.p.color(255,223,70),this.p.color(255,200,0),this.p.color(255,170,50)];this.c=this.p.random(colors);\r\n              } else {\r\n                this.vx=this.p.random(-3,-1);this.vy=this.p.random(-0.5,0.5);\r\n                if(window.innerWidth>=1025&&window.innerWidth>window.innerHeight){this.w=this.p.random(33,105);this.h=this.p.random(33,105);}\r\n                else{this.w=this.p.random(30,75);this.h=this.p.random(30,75);}this.c=this.p.color(235,235,255);\r\n              }\r\n            }\r\n            this.rotation=0;this.rotationSpeed=this.p.random(-1,1);\r\n          }\r\n          update(delta:number){this.x+=this.vx*delta;this.y+=this.vy*delta;this.rotation+=this.rotationSpeed*delta;}\r\n          display(){\r\n            this.p.push();\r\n            this.p.translate(this.x+(this.isOctagon?this.size/2:this.w/2),this.y+(this.isOctagon?this.size/2:this.h/2));\r\n            this.p.rotate(this.p.radians(this.rotation));this.p.fill(this.c);this.p.noStroke();\r\n            if(this.isOctagon)this.drawOctagon(0,0,this.size);else{this.p.rectMode(this.p.CENTER);this.p.rect(0,0,this.w,this.h);}\r\n            this.p.pop();\r\n          }\r\n          drawOctagon(x:number,y:number,size:number){\r\n            const step=this.p.TWO_PI/8;this.p.beginShape();\r\n            for(let i=0;i<8;i++){const ang=i*step;const px=x+this.p.cos(ang)*size/2;const py=y+this.p.sin(ang)*size/2;this.p.vertex(px,py);}\r\n            this.p.endShape(this.p.CLOSE);\r\n          }\r\n          overlaps(o:any){\r\n            const w1=this.isOctagon?this.size:this.w;const h1=this.isOctagon?this.size:this.h;const w2=o.isOctagon?o.size:o.w;const h2=o.isOctagon?o.size:o.h;\r\n            return !(this.x+w1<o.x||this.x>o.x+w2||this.y+h1<o.y||this.y>o.y+h2);\r\n          }\r\n          resolveCollision(other:any){\r\n            const w1=this.isOctagon?this.size:this.w;const h1=this.isOctagon?this.size:this.h;const w2=other.isOctagon?other.size:other.w;const h2=other.isOctagon?other.size:other.h;\r\n            const overlapX=Math.min(this.x+w1,other.x+w2)-Math.max(this.x,other.x);const overlapY=Math.min(this.y+h1,other.y+h2)-Math.max(this.y,other.y);\r\n            if(overlapX<overlapY){\r\n              if(this.x<other.x){this.x-=overlapX/2;other.x+=overlapX/2;}else{this.x+=overlapX/2;other.x-=overlapX/2;}this.vx*=-1;other.vx*=-1;\r\n            } else {\r\n              if(this.y<other.y){this.y-=overlapY/2;other.y+=overlapY/2;}else{this.y+=overlapY/2;other.y-=overlapY/2;}this.vy*=-1;other.vy*=-1;\r\n            }\r\n          }\r\n        }\r\n\r\n        class Particle {\r\n          p:any;x:number;y:number;vx:number;vy:number;lifespan:number;c:any;\r\n          constructor(p:any,x:number,y:number,lifespan=255,c=p.color(255,215,0),srcVx=0,srcVy=0,mul:number|null=null){\r\n            this.p=p;this.x=x;this.y=y;this.lifespan=lifespan;this.c=c;\r\n            const srcSpeed=Math.sqrt(srcVx*srcVx+srcVy*srcVy);let speed=p.map(srcSpeed,0,5,1,3);speed=p.constrain(speed,1.2,3.5);if(mul!=null)speed*=mul;\r\n            const ang=p.random(0,p.TWO_PI);this.vx=Math.cos(ang)*speed+srcVx*0.1;this.vy=Math.sin(ang)*speed+srcVy*0.1;\r\n          }\r\n          update(delta:number){this.x+=this.vx*delta;this.y+=this.vy*delta;this.lifespan-=1*delta;}\r\n          display(){this.p.noStroke();this.p.fill(this.c.levels[0],this.c.levels[1],this.c.levels[2],this.lifespan);this.p.ellipse(this.x,this.y,4,4);}\r\n          isDead(){return this.lifespan<=0;}\r\n        }\r\n\r\n        class Projectile {\r\n          p:any;x:number;y:number;vx:number;vy:number;radius:number;lifespan:number;trail:{x:number;y:number;alpha:number}[];color:any;\r\n          minSpeed=0.6;maxSpeed=12;speed=this.minSpeed;targetSpeed=8;acceleration=3;\r\n          constructor(p:any,x:number,y:number,vx:number,vy:number){\r\n            this.p=p;this.x=x;this.y=y;const mag=Math.sqrt(vx*vx+vy*vy)||1;const dx=vx/mag;const dy=vy/mag;this.vx=dx*this.speed;this.vy=dy*this.speed;this.radius=6;this.lifespan=500;this.trail=[];this.color=p.color(200,150,255);\r\n          }\r\n          update(delta:number){\r\n            this.speed+=(this.targetSpeed-this.speed)*this.acceleration*delta;\r\n            if(this.speed<this.minSpeed)this.speed=this.minSpeed;if(this.speed>this.maxSpeed)this.speed=this.maxSpeed;\r\n            const mag=Math.sqrt(this.vx*this.vx+this.vy*this.vy)||1;const dx=this.vx/mag;const dy=this.vy/mag;this.vx=dx*this.speed;this.vy=dy*this.speed;\r\n            this.x+=this.vx*delta;this.y+=this.vy*delta;this.lifespan-=1*delta;this.trail.push({x:this.x,y:this.y,alpha:160});if(this.trail.length>20)this.trail.shift();\r\n            for(let i=0;i<this.trail.length;i++)this.trail[i].alpha*=0.8;\r\n          }\r\n          display(){\r\n            for(let i=0;i<this.trail.length;i++){const t=this.trail[i];this.p.fill(200,150,255,t.alpha);this.p.noStroke();this.p.ellipse(t.x,t.y,this.radius*2,this.radius*2);}\r\n            this.p.fill(this.color);this.p.noStroke();this.p.ellipse(this.x,this.y,this.radius*2,this.radius*2);\r\n          }\r\n          isDead(){return this.lifespan<=0||this.x<0||this.x>this.p.width||this.y<0||this.y>this.p.height;}\r\n        }\r\n\r\n        class RectangleProjectile {\r\n          p:any;x:number;y:number;vx:number;vy:number;size:number;lifespan:number;maxLifespan:number;color:any;rotation:number;rotationSpeed:number;\r\n          constructor(p:any,x:number,y:number,vx:number,vy:number,color:string){\r\n            this.p=p;this.x=x;this.y=y;this.size=p.random(8,20);const factor=this.p.map(this.size,8,20,1,2);this.vx=vx*factor;this.vy=vy*factor;\r\n            this.lifespan=80;this.maxLifespan=this.lifespan;this.color=p.color(color);this.rotation=p.random(360);this.rotationSpeed=p.random(-20,20);\r\n          }\r\n          update(delta:number){this.x+=this.vx*delta;this.y+=this.vy*delta;this.lifespan-=1*delta;this.rotation+=this.rotationSpeed*delta;}\r\n          display(){\r\n            this.p.push();this.p.translate(this.x,this.y);this.p.rotate(this.p.radians(this.rotation));\r\n            const a=this.p.map(this.lifespan,0,this.maxLifespan,0,255);this.p.fill(this.color.levels[0],this.color.levels[1],this.color.levels[2],a);\r\n            this.p.noStroke();this.p.rectMode(this.p.CENTER);this.p.rect(0,0,this.size,this.size);this.p.pop();\r\n          }\r\n          isDead(){return this.lifespan<=0||this.x<-50||this.x>this.p.width+50||this.y<-50||this.y>this.p.height+50;}\r\n        }\r\n      }; // end sketch\r\n\r\n      // delay until next frame so host is laid out, no await needed\r\n      requestAnimationFrame(() => {\r\n        if (!alive || !el.isConnected) return;\r\n\r\n        // q5 init (guard against duplicates)\r\n        if (q5Ref.current) {\r\n          try { q5Ref.current.remove?.(); } catch {}\r\n          q5Ref.current = null;\r\n        }\r\n        let instance: any;\r\n        try {\r\n          instance = new q5(sketch, el);\r\n        } catch (err) {\r\n          console.error('[GameCanvas] q5 init error', err);\r\n          return;\r\n        }\r\n        q5Ref.current = instance;\r\n\r\n        // helps autoevade when the canvas starts off-screen\r\n        if (pauseHiddenRef.current && 'IntersectionObserver' in window) {\r\n          io = new IntersectionObserver(([entry]) => {\r\n            visibleRef.current = entry.isIntersecting;\r\n            try {\r\n              if (entry.isIntersecting) q5Ref.current?.loop?.();\r\n              else q5Ref.current?.noLoop?.();\r\n            } catch {}\r\n          }, { threshold: 0.01 });\r\n          io.observe(el);\r\n        }\r\n\r\n        // ----- RESIZE HOOKS -----\r\n        let ro: ResizeObserver | null = null;\r\n        const vv: VisualViewport | undefined = (window as any).visualViewport;\r\n        let lastW = 0, lastH = 0;\r\n\r\n        const resizeToHost = () => {\r\n          const host = hostRef.current;\r\n          const inst = q5Ref.current;\r\n          if (!host || !host.isConnected || !inst?.resizeCanvas) return;\r\n          const w = Math.max(1, Math.round(host.offsetWidth));\r\n          const h = Math.max(1, Math.round(host.offsetHeight));\r\n          if (w === lastW && h === lastH) return; // no-op if unchanged\r\n          lastW = w; lastH = h;\r\n          try { inst.resizeCanvas(w, h); }\r\n          catch (e) { console.warn('[GameCanvas] resize skipped', e); }\r\n        };\r\n\r\n        // Window resize (already helpful for desktop)\r\n        onResize = () => requestAnimationFrame(resizeToHost);\r\n        window.addEventListener('resize', onResize);\r\n\r\n        // Parent size changes (CSS/layout)  the important part\r\n        if ('ResizeObserver' in window) {\r\n          ro = new ResizeObserver(() => requestAnimationFrame(resizeToHost));\r\n          ro.observe(el);\r\n        }\r\n\r\n        // Mobile URL bar/orientation/address-bar collapse\r\n        window.addEventListener('orientationchange', onResize);\r\n        vv?.addEventListener('resize', onResize);\r\n        vv?.addEventListener('scroll', onResize);\r\n\r\n        // Fullscreen enter/exit\r\n        const onFs = () => requestAnimationFrame(resizeToHost);\r\n        document.addEventListener('fullscreenchange', onFs);\r\n\r\n        // Visibility throttle\r\n        if (pauseHiddenRef.current && 'IntersectionObserver' in window) {\r\n          io = new IntersectionObserver(([entry]) => {\r\n            visibleRef.current = entry.isIntersecting;\r\n            // when it becomes visible again, make sure size matches\r\n            if (entry.isIntersecting) requestAnimationFrame(resizeToHost);\r\n          }, { threshold: 0.01 });\r\n          io.observe(el);\r\n        }\r\n\r\n        // initial sync (in case the host changed between setup and now)\r\n        requestAnimationFrame(resizeToHost);\r\n\r\n        // single cleanup\r\n        cleanupRef.current = () => {\r\n          if (io) io.disconnect();\r\n          if (onResize) window.removeEventListener('resize', onResize);\r\n          document.removeEventListener('fullscreenchange', onFs);\r\n          ro?.disconnect();\r\n          vv?.removeEventListener('resize', onResize);\r\n          vv?.removeEventListener('scroll', onResize);\r\n          if (q5Ref.current?.remove) q5Ref.current.remove();\r\n          q5Ref.current = null;\r\n          el.replaceChildren();\r\n          };\r\n        })\r\n      });\r\n\r\n    return () => {\r\n      alive = false;\r\n      cleanupRef.current?.();\r\n      cleanupRef.current = null;\r\n    };\r\n  }, []); // run once\r\n\r\n  return <div className=\"evade-the-rock\" ref={hostRef} style={{ width: '100%', height: '100%' }} />;\r\n}\r\n"],"names":["useEffect","useRef","useRealMobileViewport","jsx","_jsx","GameCanvas","onCoinsChange","highScore","onGameOver","onReady","pauseWhenHidden","demoMode","overlayActive","allowSpawns","hostRef","q5Ref","visibleRef","cleanupRef","coinsChangeRef","gameOverRef","readyRef","highScoreRef","pauseHiddenRef","demoRef","overlayRef","allowSpawnsRef","current","isRealMobile","alive","io","onResize","then","q5mod","q5","default","el","isConnected","replaceChildren","remove","sketch","p","verticalMode","rectangles","octagons","particles","projectiles","circle","lastSpawnTime","lastOctagonSpawnTime","rectangleSpawnRate","coins","gameOver","prevGameOver","lastDemoFlag","lastFiredTime","Infinity","cooldownDuration","cooldownRadiusMax","touchStart","lastTouch","touchStartMillis","TAP_MS","TAP_MOVE","baseImpulse","movingUp","movingDown","movingLeft","movingRight","canSpawn","restartGame","Circle","height","millis","setup","w","offsetWidth","h","offsetHeight","createCanvas","window","innerWidth","innerHeight","restart","draw","demo","x","y","vx","vy","ax","ay","background","delta","deltaTime","stopHorizontal","stopVertical","autoEvade","moveUp","moveDown","moveLeft","moveRight","update","display","spawnRectangles","updateRectangles","spawnOctagons","updateOctagons","blendMode","ADD","i","length","part","isDead","splice","BLEND","proj","isNewHigh","drawCooldownRing","evadeX","evadeY","danger","rect","cx","cy","dx","dy","distSq","dist","Math","sqrt","weight","force","attractX","attractY","target","reduce","a","b","da","size","db","d","width","elapsed","progress","radius","noStroke","fill","ellipse","inView","filter","r","maxRectangles","push","Shape","isNaN","overlaps","j","projSize","projX","projY","projW","projH","RectangleProjectile","random","burstRectangles","off","r1","r2","resolveCollision","k","angle","TWO_PI","speed","cos","sin","buffer","o","Particle","c","abs","numParticles","whole","floor","frac","keyPressed","key","now","Projectile","keyCode","UP_ARROW","DOWN_ARROW","LEFT_ARROW","RIGHT_ARROW","keyReleased","touchStarted","touches","mouseX","mouseY","touchMoved","hypot","speedFactor","log2","touchEnded","dt","moved","constructor","color","trail","pow","createVector","shift","lim","constrain","pos","map","other","isOctagon","rotation","rotationSpeed","startOff","isOct","vertical","reset","colors","baseX","translate","rotate","radians","drawOctagon","rectMode","CENTER","pop","step","beginShape","ang","px","py","vertex","endShape","CLOSE","w1","h1","w2","h2","overlapX","min","max","overlapY","lifespan","srcVx","srcVy","mul","srcSpeed","levels","minSpeed","maxSpeed","targetSpeed","acceleration","mag","alpha","t","factor","maxLifespan","requestAnimationFrame","instance","err","console","error","IntersectionObserver","entry","isIntersecting","loop","noLoop","threshold","observe","ro","vv","visualViewport","lastW","lastH","resizeToHost","host","inst","resizeCanvas","round","e","warn","addEventListener","ResizeObserver","onFs","document","disconnect","removeEventListener","className","ref","style"],"sourceRoot":""}