{"version":3,"file":"src_components_rock-escapade_block-g-coin-counter_tsx-src_components_rock-escapade_block-g-ex-06fcea.server.js","mappings":"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","sources":["webpack://personal-site/./src/components/rock-escapade/block-g-coin-counter.tsx","webpack://personal-site/./src/components/rock-escapade/block-g-exit.tsx","webpack://personal-site/./src/components/rock-escapade/block-g-game-over.tsx","webpack://personal-site/./src/components/rock-escapade/game-viewport-overlay.tsx","webpack://personal-site/./src/components/rock-escapade/updateHighScore.ts","webpack://personal-site/./src/components/rock-escapade/useHighScoreSubscription.ts","webpack://personal-site/./src/ssr/logic/game-input-guards.tsx","webpack://personal-site/./src/ssr/logic/game-over-controller.tsx","webpack://personal-site/./src/utils/content-utility/lazy-view-mount.tsx","webpack://personal-site/./src/utils/content-utility/real-mobile.ts","webpack://personal-site/./src/utils/loading/loading-hub.tsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\r\nimport lottie, { type AnimationItem, type AnimationSegment } from 'lottie-web';\r\nimport coin from '../../svg/coin.json';\r\n\r\ninterface CoinCounterProps {\r\n  coins: number;\r\n  highScore: number;\r\n  newHighScore: boolean;\r\n}\r\n\r\nconst CoinCounter: React.FC<CoinCounterProps> = ({ coins, highScore, newHighScore }) => {\r\n  const coinRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    if (!coinRef.current) return;\r\n\r\n    const anim: AnimationItem = lottie.loadAnimation({\r\n      container: coinRef.current,\r\n      renderer: 'svg',\r\n      loop: false,          // we'll loop manually with segments\r\n      autoplay: false,\r\n      animationData: coin,\r\n    });\r\n\r\n    const onDomLoaded = () => {\r\n      const svg = coinRef.current?.querySelector('svg');\r\n      if (svg) svg.classList.add('coin-lottie');\r\n\r\n      // start the loop once we know totalFrames\r\n      const total = anim.totalFrames;\r\n      const segment: AnimationSegment = [41, total - 1];\r\n\r\n      const loopOnce = () => anim.playSegments(segment, true);\r\n      const onComplete = () => loopOnce();\r\n\r\n      // kick it off and keep looping\r\n      loopOnce();\r\n      anim.addEventListener('complete', onComplete);\r\n\r\n      // store cleanup that knows this handler\r\n      cleanupHandlers.complete = () => anim.removeEventListener('complete', onComplete);\r\n    };\r\n\r\n    // attach, and keep a way to remove it on unmount\r\n    anim.addEventListener('DOMLoaded', onDomLoaded);\r\n\r\n    const cleanupHandlers: { complete?: () => void } = {};\r\n\r\n    return () => {\r\n      cleanupHandlers.complete?.();\r\n      anim.removeEventListener('DOMLoaded', onDomLoaded);\r\n      anim.destroy();\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"coin-counter\">\r\n      <div className=\"coin-count\">\r\n        <div className=\"coin2\" ref={coinRef} />\r\n        <h3 className=\"coin-amount\">{coins}</h3>\r\n      </div>\r\n      <h3\r\n        className=\"high-score\"\r\n        style={{ background: newHighScore ? '#f6c44b38' : '#514068bd' }}\r\n      >\r\n        {newHighScore ? 'New High Score: ' : 'High Score: '}\r\n        {highScore}\r\n      </h3>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CoinCounter;\r\n","import React, { useState, useEffect } from 'react';\r\n\r\nconst ExitButton = ({ onExit }) => {\r\n  const [visible, setVisible] = useState(true);\r\n  const [isFadingOut, setIsFadingOut] = useState(false);\r\n\r\n  const handleClick = () => {\r\n    if (onExit) onExit();\r\n    setIsFadingOut(true);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isFadingOut) {\r\n      const timeout = setTimeout(() => {\r\n        setVisible(false);\r\n      }, 300); // Match CSS transition duration\r\n\r\n      return () => clearTimeout(timeout);\r\n    }\r\n  }, [isFadingOut]);\r\n\r\n  if (!visible) return null;\r\n\r\n  return (\r\n    <div className=\"block-g-exit\"\r\n      onClick={handleClick}\r\n      style={{\r\n        opacity: isFadingOut ? 0 : 1,\r\n        transition: 'opacity 0.3s ease'\r\n    }} ><h4> Exit </h4> </div>\r\n  );\r\n};\r\n\r\nexport default ExitButton;\r\n","// src/components/rock-escapade/block-g-game-over.tsx\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport lottie from 'lottie-web';\r\nimport gameOver from '../../svg/gameover.json';\r\nimport highScore from '../../svg/highscore.json';\r\n\r\ntype Props = {\r\n  onRestart?: () => void;\r\n  visibleTrigger?: number | boolean;\r\n  coins: number;\r\n  newHighScore: boolean;\r\n};\r\n\r\nconst BlockGGameOver: React.FC<Props> = ({ onRestart, visibleTrigger, coins, newHighScore }) => {\r\n  const [visible, setVisible] = useState(true);\r\n  const [isFadingOut, setIsFadingOut] = useState(false);\r\n  const lottieRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  const handleClick = () => {\r\n    onRestart?.();\r\n    setIsFadingOut(true);\r\n  };\r\n\r\n  // fade-out -> unmount\r\n  useEffect(() => {\r\n    if (!isFadingOut) return;\r\n    const t = setTimeout(() => setVisible(false), 300);\r\n    return () => clearTimeout(t);\r\n  }, [isFadingOut]);\r\n\r\n  // external trigger to re-show\r\n  useEffect(() => {\r\n    if (visibleTrigger) {\r\n      setVisible(true);\r\n      setIsFadingOut(false);\r\n    }\r\n  }, [visibleTrigger]);\r\n\r\n  // disable background scroll while visible\r\n  useEffect(() => {\r\n    if (!visible) return;\r\n\r\n    const prevent = (e: Event) => e.preventDefault();\r\n\r\n    window.addEventListener('wheel', prevent, { passive: false });\r\n    window.addEventListener('touchmove', prevent, { passive: false });\r\n    window.addEventListener('keydown', prevent as any, { passive: false });\r\n\r\n    const prev = document.body.style.overflow;\r\n    document.body.style.overflow = 'hidden';\r\n\r\n    return () => {\r\n      window.removeEventListener('wheel', prevent as any);\r\n      window.removeEventListener('touchmove', prevent as any);\r\n      window.removeEventListener('keydown', prevent as any);\r\n      document.body.style.overflow = prev;\r\n    };\r\n  }, [visible]);\r\n\r\n  // lottie\r\n  useEffect(() => {\r\n    if (!lottieRef.current) return;\r\n    const anim = lottie.loadAnimation({\r\n      container: lottieRef.current,\r\n      renderer: 'svg',\r\n      loop: newHighScore ? true : false,\r\n      autoplay: true,\r\n      animationData: newHighScore ? highScore : gameOver,\r\n    });\r\n    return () => anim.destroy();\r\n  }, [newHighScore]);\r\n\r\n  if (!visible) return null;\r\n\r\n  return (\r\n    // OPAQUE, FULL-SCREEN BACKDROP (covers canvas completely)\r\n    <div\r\n      className=\"gameover-overlay\"\r\n      role=\"dialog\"\r\n      aria-modal=\"true\"\r\n      onClick={handleClick}\r\n      style={{\r\n        position: 'fixed',\r\n        inset: 0,\r\n        width: '100vw',\r\n        height: '100vh',              \r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        opacity: isFadingOut ? 0 : 1,\r\n        transition: 'opacity 0.3s ease',\r\n        cursor: 'pointer',\r\n      }}\r\n    >\r\n      {/* Keep your existing class for inner layout/typography */}\r\n      <div className=\"block-g-gameover\" style={{ position: 'relative' }}>\r\n        <div ref={lottieRef} className=\"gameover-lottie\" />\r\n        <div className=\"gameover-text-area\">\r\n          <h1\r\n            className=\"gameover-text\"\r\n            style={{ color: newHighScore ? 'rgb(255 230 203)' : 'rgb(222 202 250)' }}\r\n          >\r\n            {newHighScore ? 'New High Score!' : 'Game Over'}\r\n          </h1>\r\n          <div className=\"gameover-coin-count\">\r\n            <h2 style={{ color: 'rgb(255, 205, 55)' }}>{coins} Coins Collected</h2>\r\n          </div>\r\n\r\n          <h4 className=\"gameover-cta\">Click to Play Again</h4>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BlockGGameOver;\r\n","// src/components/rock-escapade/game-viewport-overlay.tsx\r\nimport React, { useRef } from 'react';\r\nimport { createPortal } from 'react-dom';\r\n\r\ntype Props = { children: React.ReactNode };\r\n\r\nconst APP_SCOPE_ID = 'efe-portfolio';\r\nconst PORTAL_ID = 'game-viewport-root';\r\n\r\nexport default function GameViewportOverlay({ children }: Props) {\r\n  const mountRef = useRef<HTMLElement | null>(null);\r\n\r\n  if (!mountRef.current && typeof document !== 'undefined') {\r\n    // 1) Find your app scope (so pre-scoped CSS matches)\r\n    const scope = document.getElementById(APP_SCOPE_ID) || document.body;\r\n\r\n    // 2) Create or reuse the portal root inside that scope\r\n    let root = scope.querySelector<HTMLElement>(`#${PORTAL_ID}`);\r\n    if (!root) {\r\n      root = document.createElement('div');\r\n      root.id = PORTAL_ID;\r\n      scope.appendChild(root);\r\n    }\r\n\r\n    mountRef.current = root;\r\n  }\r\n\r\n  if (!mountRef.current) return null;\r\n\r\n  // 3) Portal the in-game UI\r\n  return createPortal(\r\n    <div className=\"game-viewport-layer\" role=\"dialog\" aria-modal=\"true\">\r\n      {children}\r\n    </div>,\r\n    mountRef.current\r\n  );\r\n}\r\n","export async function updateHighScore(score: number) {\r\n  try {\r\n    const res = await fetch('/api/highscore', {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ score }),\r\n    });\r\n    if (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n    const data = await res.json();\r\n    return data.highScore as number;\r\n  } catch (err) {\r\n    console.error('[HS] update failed:', err);\r\n    return null;\r\n  }\r\n}\r\n","import {useEffect, useState} from 'react'\r\nimport client from '../../utils/sanity'\r\n\r\ntype Doc = { _id: string; score: number }\r\n\r\nconst QUERY = `*[_type == \"highScore\"] | order(score desc)[0]{ _id, score }`\r\n\r\nexport const useHighScoreSubscription = () => {\r\n  const [highScore, setHighScore] = useState<number>(0)\r\n\r\n  useEffect(() => {\r\n    // initial fetch\r\n    client.fetch<Doc | null>(QUERY).then((doc) => {\r\n      if (typeof doc?.score === 'number') setHighScore(doc.score)\r\n    })\r\n\r\n    // subscribe to live updates\r\n    const sub = client.listen(QUERY, {}, {includeResult: true, visibility: 'query'})\r\n      .subscribe((ev: any) => {\r\n        const next = ev?.result?.score\r\n        if (typeof next === 'number') setHighScore(next)\r\n      })\r\n\r\n    return () => sub.unsubscribe?.()\r\n  }, [])\r\n\r\n  return highScore\r\n}\r\n","// game-input-guards.tsx\r\nimport React, { useEffect, useRef } from 'react';\r\n\r\ntype Props = {\r\n  /** When true, guards are active */\r\n  active: boolean;\r\n  /** Hide body scroll while active (restores previous value on cleanup) */\r\n  lockBodyScroll?: boolean;\r\n  /** Also block wheel scrolling while active */\r\n  alsoBlockWheel?: boolean;\r\n  /** Also block touchmove scrolling while active */\r\n  alsoBlockTouch?: boolean;\r\n  /** Don’t block when typing in inputs/selects/textareas */\r\n  allowWhenTyping?: boolean;\r\n  /** Extra keyboard keys to block (in addition to scroll keys) */\r\n  extraKeysToBlock?: string[];\r\n};\r\n\r\nconst SCROLL_KEYS = new Set([\r\n  ' ', 'Spacebar',         // Space\r\n  'ArrowUp', 'ArrowDown',\r\n  'ArrowLeft', 'ArrowRight',\r\n  'PageUp', 'PageDown',\r\n  'Home', 'End',\r\n]);\r\n\r\nconst isFormField = (el: HTMLElement | null) => {\r\n  const tag = el?.tagName;\r\n  return !!tag && /^(INPUT|TEXTAREA|SELECT)$/.test(tag);\r\n};\r\n\r\nconst GameInputGuards: React.FC<Props> = ({\r\n  active,\r\n  lockBodyScroll = true,\r\n  alsoBlockWheel = true,\r\n  alsoBlockTouch = true,\r\n  allowWhenTyping = true,\r\n  extraKeysToBlock = [],\r\n}) => {\r\n  const prevOverflow = useRef<string | null>(null);\r\n  const prevOverscroll = useRef<string | null>(null);\r\n  const extra = new Set(extraKeysToBlock);\r\n\r\n  // Keyboard guard (block default scroll behavior)\r\n  useEffect(() => {\r\n    if (!active) return;\r\n\r\n    const onKey = (e: KeyboardEvent) => {\r\n      if (allowWhenTyping && isFormField(e.target as HTMLElement | null)) return;\r\n\r\n      const k = e.key;\r\n      if (SCROLL_KEYS.has(k) || extra.has(k)) {\r\n        // important: prevent default so page/scroll-controllers don’t react\r\n        e.preventDefault();\r\n        // do NOT stopPropagation, so the game can still read the event\r\n      }\r\n    };\r\n\r\n    // capture + passive:false to reliably intercept before site handlers\r\n    window.addEventListener('keydown', onKey, { capture: true, passive: false });\r\n    window.addEventListener('keypress', onKey as any, { capture: true, passive: false } as any);\r\n\r\n    return () => {\r\n      window.removeEventListener('keydown', onKey as any, { capture: true } as any);\r\n      window.removeEventListener('keypress', onKey as any, { capture: true } as any);\r\n    };\r\n  }, [active, allowWhenTyping, extraKeysToBlock.join('|')]);\r\n\r\n  // Wheel / touch scroll guards\r\n  useEffect(() => {\r\n    if (!active) return;\r\n\r\n    const block = (e: Event) => { e.preventDefault(); };\r\n\r\n    if (alsoBlockWheel) window.addEventListener('wheel', block, { passive: false });\r\n    if (alsoBlockTouch) window.addEventListener('touchmove', block, { passive: false });\r\n\r\n    return () => {\r\n      if (alsoBlockWheel) window.removeEventListener('wheel', block as any);\r\n      if (alsoBlockTouch) window.removeEventListener('touchmove', block as any);\r\n    };\r\n  }, [active, alsoBlockWheel, alsoBlockTouch]);\r\n\r\n  // Body scroll lock (and overscroll containment to help iOS)\r\n  useEffect(() => {\r\n    if (!active || !lockBodyScroll) return;\r\n    const body = document.body;\r\n    prevOverflow.current = body.style.overflow;\r\n    prevOverscroll.current = (body.style as any).overscrollBehavior || null;\r\n\r\n    body.style.overflow = 'hidden';\r\n    (body.style as any).overscrollBehavior = 'contain';\r\n\r\n    return () => {\r\n      body.style.overflow = prevOverflow.current ?? '';\r\n      (body.style as any).overscrollBehavior = prevOverscroll.current ?? '';\r\n    };\r\n  }, [active, lockBodyScroll]);\r\n\r\n  return null;\r\n};\r\n\r\nexport default GameInputGuards;\r\n","// src/ssr/logic/game-over-controller.tsx\r\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\r\nimport BlockGGameOver from '../../components/rock-escapade/block-g-game-over';\r\nimport { updateHighScore } from '../../components/rock-escapade/updateHighScore';\r\n\r\ntype Props = {\r\n  score: number | null;\r\n  highScore: number;\r\n  onRestart: () => void;\r\n  onHide: () => void;\r\n\r\n  /** Optional: latched \"new high\" flag from BlockGHost. */\r\n  newHighScore?: boolean;\r\n};\r\n\r\nconst GameOverController: React.FC<Props> = ({\r\n  score,\r\n  highScore,\r\n  onRestart,\r\n  onHide,\r\n  newHighScore,\r\n}) => {\r\n  const visible = score != null;\r\n\r\n  // Live comparison used only as a seed when host doesn't pass a latched flag.\r\n  const baseNewHigh = useMemo(\r\n    () => (score ?? -Infinity) > highScore,\r\n    [score, highScore]\r\n  );\r\n\r\n  // Latch for this overlay session when host doesn't provide one.\r\n  const [localLatch, setLocalLatch] = useState<boolean | null>(null);\r\n\r\n  // Reset latch when overlay hides; seed latch on first show (host flag absent).\r\n  useEffect(() => {\r\n    if (!visible) {\r\n      setLocalLatch(null);\r\n      return;\r\n    }\r\n    if (localLatch === null && typeof newHighScore !== 'boolean') {\r\n      setLocalLatch(baseNewHigh);\r\n    }\r\n  }, [visible, newHighScore, baseNewHigh, localLatch]);\r\n\r\n  // Final value we display/post: host-provided > local latch > base.\r\n  const effectiveNewHigh =\r\n    typeof newHighScore === 'boolean'\r\n      ? newHighScore\r\n      : (localLatch ?? baseNewHigh);\r\n\r\n  // Prevent duplicate Sanity writes per visible session.\r\n  const submittedRef = useRef(false);\r\n\r\n  useEffect(() => {\r\n    if (!visible || score == null) {\r\n      submittedRef.current = false;\r\n      return;\r\n    }\r\n    if (effectiveNewHigh && !submittedRef.current) {\r\n      submittedRef.current = true;\r\n      updateHighScore(score).catch((err) => console.error('[HS] update failed:', err));\r\n    }\r\n  }, [visible, score, effectiveNewHigh]);\r\n\r\n  if (!visible || score == null) return null;\r\n\r\n  const handleRestart = () => {\r\n    onRestart();\r\n    onHide();\r\n  };\r\n\r\n  return (\r\n    <BlockGGameOver\r\n      onRestart={handleRestart}\r\n      visibleTrigger={1}\r\n      coins={score}\r\n      newHighScore={effectiveNewHigh}\r\n    />\r\n  );\r\n};\r\n\r\nexport default GameOverController;\r\n","// src/utils/content-utility/lazy-view-mount.tsx\r\nimport { useEffect, useRef, useState, Suspense, type ComponentType, lazy } from 'react';\r\n\r\ntype MountMode = 'io' | 'idle' | 'immediate';\r\n\r\ntype Props = {\r\n  load: () => Promise<{ default: ComponentType<any> }>;\r\n  fallback?: React.ReactNode;\r\n\r\n  /** Mount strategy */\r\n  mountMode?: MountMode;            // 'io' | 'idle' | 'immediate' (default 'io')\r\n\r\n  /** IO config (only when mountMode === 'io') */\r\n  enterThreshold?: number;          // default 0.2   -> start showing at/after this ratio\r\n  exitThreshold?: number;           // default 0.05  -> consider out-of-view at/below\r\n  unmountDelayMs?: number;          // default 150ms -> delay before unmounting after exit\r\n  root?: Element | null;            // viewport by default\r\n  rootMargin?: string;              // default '0px'\r\n  observeTargetId?: string;         // observe specific element; else our own wrapper\r\n\r\n  /** Preloading */\r\n  preloadOnIdle?: boolean;          // default true\r\n  preloadIdleTimeout?: number;      // default 2000\r\n  preloadOnFirstIO?: boolean;       // default true\r\n\r\n  /** Layout/UX */\r\n  placeholderMinHeight?: number;    // default 360\r\n  fadeMs?: number;                  // default 300\r\n  fadeEasing?: string;              // default 'ease'\r\n\r\n  /** Forward child props */\r\n  componentProps?: Record<string, any>;\r\n};\r\n\r\nconst hasWindow = typeof window !== 'undefined';\r\nconst hasRIC = hasWindow && 'requestIdleCallback' in (window as any);\r\nconst hasCIC = hasWindow && 'cancelIdleCallback' in (window as any);\r\nconst ric = (cb: any, opts?: any) =>\r\n  hasRIC ? (window as any).requestIdleCallback(cb, opts) : setTimeout(cb, opts?.timeout ?? 0);\r\nconst cic = (id: any) =>\r\n  hasCIC ? (window as any).cancelIdleCallback(id) : clearTimeout(id);\r\n\r\nexport default function LazyViewMount({\r\n  load,\r\n  fallback = null,\r\n\r\n  // strategy\r\n  mountMode = 'io',\r\n\r\n  // IO\r\n  enterThreshold = 0.2,\r\n  exitThreshold = 0.05,\r\n  unmountDelayMs = 150,\r\n  root = null,\r\n  rootMargin = '0px',\r\n  observeTargetId,\r\n\r\n  // preload\r\n  preloadOnIdle = true,\r\n  preloadIdleTimeout = 2000,\r\n  preloadOnFirstIO = true,\r\n\r\n  // layout/UX\r\n  placeholderMinHeight = 360,\r\n  fadeMs = 300,\r\n  fadeEasing = 'ease',\r\n\r\n  componentProps,\r\n}: Props) {\r\n  const isServer = !hasWindow;\r\n\r\n  const selfRef = useRef<HTMLDivElement | null>(null);\r\n  const [Comp, setComp] = useState<ComponentType | null>(null);\r\n\r\n  // mount/visibility\r\n  const mountedRef = useRef(false);\r\n  const [isMounted, setIsMounted] = useState(false);\r\n  const [isVisible, setIsVisible] = useState(false);\r\n\r\n  // timers\r\n  const unmountTimer = useRef<number | null>(null);\r\n  const fadeTimer = useRef<number | null>(null);\r\n  const idleId = useRef<any>(null);\r\n\r\n  // preload promise cache\r\n  const preloadPromiseRef = useRef<Promise<{ default: ComponentType<any> }> | null>(null);\r\n\r\n  // IO edge tracking\r\n  const lastRatio = useRef<number>(0);\r\n  const lastIntersecting = useRef<boolean>(false);\r\n  const firstIOSeen = useRef(false);\r\n\r\n  /** Preload once */\r\n  const ensurePreloaded = () => {\r\n    if (!preloadPromiseRef.current) {\r\n      preloadPromiseRef.current = load();\r\n    }\r\n    return preloadPromiseRef.current;\r\n  };\r\n\r\n  const clearTimers = () => {\r\n    if (unmountTimer.current != null) { window.clearTimeout(unmountTimer.current); unmountTimer.current = null; }\r\n    if (fadeTimer.current != null)     { window.clearTimeout(fadeTimer.current);   fadeTimer.current = null; }\r\n  };\r\n\r\n  const mountNow = () => {\r\n    if (mountedRef.current) {\r\n      // already mounted; just ensure visible\r\n      setIsVisible(true);\r\n      return;\r\n    }\r\n    mountedRef.current = true;\r\n    const p = ensurePreloaded();\r\n    setComp(prev => prev ?? (lazy(() => p) as unknown as ComponentType));\r\n    setIsMounted(true);\r\n    // next frame -> allow CSS transition\r\n    requestAnimationFrame(() => setIsVisible(true));\r\n  };\r\n\r\n  const unmountSoon = () => {\r\n    if (!mountedRef.current) return;\r\n    clearTimers();\r\n    // fade out -> unmount\r\n    unmountTimer.current = window.setTimeout(() => {\r\n      setIsVisible(false);\r\n      fadeTimer.current = window.setTimeout(() => {\r\n        setIsMounted(false);\r\n        mountedRef.current = false;\r\n      }, fadeMs);\r\n    }, unmountDelayMs);\r\n  };\r\n\r\n  /** Preload on idle */\r\n  useEffect(() => {\r\n    if (isServer || !preloadOnIdle) return;\r\n    if (idleId.current) cic(idleId.current);\r\n    idleId.current = ric(() => { void ensurePreloaded(); }, { timeout: preloadIdleTimeout });\r\n    return () => { if (idleId.current) { cic(idleId.current); idleId.current = null; } };\r\n  }, [isServer, preloadOnIdle, preloadIdleTimeout, load]);\r\n\r\n  /** Mount behavior per mode */\r\n  useEffect(() => {\r\n    if (isServer) return;\r\n\r\n    if (mountMode === 'immediate') {\r\n      mountNow();\r\n      return;\r\n    }\r\n\r\n    if (mountMode === 'idle') {\r\n      const id = ric(() => mountNow(), { timeout: preloadIdleTimeout });\r\n      return () => { if (id) cic(id); };\r\n    }\r\n\r\n    // ---- IO MODE ----\r\n    const target =\r\n      (observeTargetId ? document.getElementById(observeTargetId) : null) ||\r\n      selfRef.current;\r\n\r\n    if (!target) return;\r\n\r\n    if (typeof IntersectionObserver === 'undefined') {\r\n      // no IO support -> just mount\r\n      mountNow();\r\n      return;\r\n    }\r\n\r\n    // ensure sensible thresholds (enter > exit)\r\n    const enter = Math.max(0, Math.min(1, enterThreshold));\r\n    const exit  = Math.max(0, Math.min(enter, exitThreshold)); // cap at enter\r\n    const thresholds = Array.from(new Set([0, exit, enter, 1])).sort((a, b) => a - b);\r\n\r\n    const io = new IntersectionObserver(([entry]) => {\r\n      const ratio = entry?.intersectionRatio ?? 0;\r\n      const intersecting = !!entry?.isIntersecting;\r\n\r\n      // first IO → optional preload\r\n      if (!firstIOSeen.current) {\r\n        firstIOSeen.current = true;\r\n        if (preloadOnFirstIO) void ensurePreloaded();\r\n      }\r\n\r\n      // Compute edge crossings (prevents jitter in the gray zone)\r\n      const crossedEnter = lastRatio.current < enter && ratio >= enter;\r\n      const crossedExit  = lastRatio.current > exit  && ratio <= exit;\r\n      const becameIntersecting = !lastIntersecting.current && intersecting;\r\n      const leftIntersecting   = lastIntersecting.current && !intersecting;\r\n\r\n      // ENTER: on intersection or crossing the enter threshold\r\n      if (becameIntersecting || crossedEnter) {\r\n        clearTimers();\r\n        mountNow();\r\n      }\r\n      // EXIT: when leaving intersection OR crossing exit threshold\r\n      else if (leftIntersecting || crossedExit) {\r\n        unmountSoon();\r\n      }\r\n\r\n      // save last values\r\n      lastRatio.current = ratio;\r\n      lastIntersecting.current = intersecting;\r\n    }, { root, rootMargin, threshold: thresholds });\r\n\r\n    io.observe(target);\r\n    return () => { io.disconnect(); clearTimers(); };\r\n  }, [\r\n    isServer,\r\n    mountMode,\r\n    root,\r\n    rootMargin,\r\n    enterThreshold,\r\n    exitThreshold,\r\n    observeTargetId,\r\n    preloadIdleTimeout,\r\n    preloadOnFirstIO,\r\n    fadeMs,\r\n    unmountDelayMs,\r\n  ]);\r\n\r\n  const CompAny = Comp as any;\r\n\r\n  return (\r\n    <div\r\n      ref={selfRef}\r\n      style={{ width: '100%', minHeight: placeholderMinHeight, position: 'relative' }}\r\n    >\r\n      {isMounted && CompAny ? (\r\n        <div\r\n          style={{\r\n            opacity: isVisible ? 1 : 0,                 // 1 in view, 0 out of view\r\n            transition: `opacity ${fadeMs}ms ${fadeEasing}`,\r\n            willChange: 'opacity',\r\n          }}\r\n        >\r\n          <Suspense fallback={fallback}>\r\n            <CompAny {...(componentProps || {})} />\r\n          </Suspense>\r\n        </div>\r\n      ) : (\r\n        fallback\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","// useRealMobileViewport.ts\r\nimport { useEffect, useState } from 'react';\r\n\r\nexport function useRealMobileViewport() {\r\n  const [isRealMobile, setIsRealMobile] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const checkMobile = () => {\r\n      const touch = navigator.maxTouchPoints > 0;\r\n      const coarse = window.matchMedia?.('(pointer: coarse)').matches ?? false;\r\n      const width = window.innerWidth;\r\n      const ua = navigator.userAgent || navigator.vendor || (window as any).opera;\r\n\r\n      // iOS detection (iPhone / iPad)\r\n      const isIOS = /iPad|iPhone|iPod/.test(ua) ||\r\n        (navigator.platform === 'MacIntel' && touch); // iPadOS pretends to be Mac\r\n\r\n      // Android detection\r\n      const isAndroid = /Android/.test(ua);\r\n\r\n      // Consider it real mobile if:\r\n      // - Touch exists, and viewport is small, or\r\n      // - Known mobile UA\r\n      const realMobile =\r\n        (touch && width <= 1024) ||\r\n        isIOS ||\r\n        isAndroid ||\r\n        coarse;\r\n\r\n      setIsRealMobile(realMobile);\r\n    };\r\n\r\n    checkMobile();\r\n    window.addEventListener('resize', checkMobile);\r\n    window.addEventListener('orientationchange', checkMobile);\r\n\r\n    return () => {\r\n      window.removeEventListener('resize', checkMobile);\r\n      window.removeEventListener('orientationchange', checkMobile);\r\n    };\r\n  }, []);\r\n\r\n  return isRealMobile;\r\n}\r\n","import React, { useEffect, useMemo, useRef, useState } from 'react';\r\nimport '../../styles/loading-hub.css';\r\n\r\ntype LoadingHubProps = {\r\n  keyword?: string;\r\n  lines?: string[];\r\n  minHeight?: number | string;\r\n  className?: string;\r\n  ariaLabel?: string;\r\n  progress?: number | null;\r\n  cycleMs?: number;\r\n  animMs?: number;\r\n  /** Delay before showing loader (ms) */\r\n  delayMs?: number;\r\n};\r\n\r\nexport default function LoadingHub({\r\n  keyword,\r\n  lines = ['Loading…'],\r\n  minHeight = 160,\r\n  className = '',\r\n  ariaLabel = 'Loading',\r\n  progress = null,\r\n  cycleMs = 1400,\r\n  animMs = 900,\r\n  delayMs = 400,\r\n}: LoadingHubProps) {\r\n  const [lineIndex, setLineIndex] = useState(0);\r\n  const [show, setShow] = useState(false);\r\n\r\n  // --- delay before showing loader ---\r\n  useEffect(() => {\r\n    const t = setTimeout(() => setShow(true), delayMs);\r\n    return () => clearTimeout(t);\r\n  }, [delayMs]);\r\n\r\n  // rotate through provided lines\r\n  const hasMultiple = lines.length > 1;\r\n  useEffect(() => {\r\n    if (!hasMultiple) return;\r\n    const t = setInterval(() => {\r\n      setLineIndex((i) => (i + 1) % lines.length);\r\n    }, cycleMs);\r\n    return () => clearInterval(t);\r\n  }, [hasMultiple, lines.length, cycleMs]);\r\n\r\n  // Avoid reflow: lock container height\r\n  const style = useMemo<React.CSSProperties>(() => {\r\n    const h = typeof minHeight === 'number' ? `${minHeight}px` : (minHeight ?? 'auto');\r\n    return { minHeight: h };\r\n  }, [minHeight]);\r\n\r\n  // SR-only progressive percent\r\n  const srRef = useRef<HTMLSpanElement>(null);\r\n  useEffect(() => {\r\n    if (progress == null || !srRef.current) return;\r\n    srRef.current.textContent = `${Math.round(progress)}%`;\r\n  }, [progress]);\r\n\r\n  if (!show) {\r\n    // render an invisible placeholder with locked height\r\n    return <div style={style} aria-hidden=\"true\" />;\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className={`loading-hub loading-hub--text ${className || ''}`}\r\n      style={style}\r\n      role=\"status\"\r\n      aria-live=\"polite\"\r\n      aria-label={ariaLabel}\r\n      data-keyword={keyword || undefined}\r\n      data-anim-ms={animMs}\r\n    >\r\n      <div className=\"loading-hub__copy\" aria-hidden={false}>\r\n        <h2 key={lineIndex} className=\"loading-hub__line\">\r\n          {lines[lineIndex]}\r\n        </h2>\r\n\r\n        {progress != null && (\r\n          <div className=\"loading-hub__progress\" aria-hidden=\"true\">\r\n            {Math.round(progress)}%\r\n          </div>\r\n        )}\r\n\r\n        <span className=\"sr-only\" ref={srRef} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["React","useEffect","useRef","lottie","coin","jsx","_jsx","jsxs","_jsxs","CoinCounter","coins","highScore","newHighScore","coinRef","current","anim","loadAnimation","container","renderer","loop","autoplay","animationData","onDomLoaded","svg","querySelector","classList","add","total","totalFrames","segment","loopOnce","playSegments","onComplete","addEventListener","cleanupHandlers","complete","removeEventListener","destroy","className","children","ref","style","background","useState","ExitButton","onExit","visible","setVisible","isFadingOut","setIsFadingOut","handleClick","timeout","setTimeout","clearTimeout","onClick","opacity","transition","gameOver","BlockGGameOver","onRestart","visibleTrigger","lottieRef","t","prevent","e","preventDefault","window","passive","prev","document","body","overflow","role","position","inset","width","height","display","alignItems","justifyContent","cursor","color","createPortal","APP_SCOPE_ID","PORTAL_ID","GameViewportOverlay","mountRef","scope","getElementById","root","createElement","id","appendChild","updateHighScore","score","res","fetch","method","headers","JSON","stringify","ok","Error","status","data","json","err","console","error","client","QUERY","useHighScoreSubscription","setHighScore","then","doc","sub","listen","includeResult","visibility","subscribe","ev","next","result","unsubscribe","SCROLL_KEYS","Set","isFormField","el","tag","tagName","test","GameInputGuards","active","lockBodyScroll","alsoBlockWheel","alsoBlockTouch","allowWhenTyping","extraKeysToBlock","prevOverflow","prevOverscroll","extra","onKey","target","k","key","has","capture","join","block","overscrollBehavior","useMemo","GameOverController","onHide","baseNewHigh","Infinity","localLatch","setLocalLatch","effectiveNewHigh","submittedRef","catch","handleRestart","Suspense","lazy","hasWindow","hasRIC","hasCIC","ric","cb","opts","requestIdleCallback","cic","cancelIdleCallback","LazyViewMount","load","fallback","mountMode","enterThreshold","exitThreshold","unmountDelayMs","rootMargin","observeTargetId","preloadOnIdle","preloadIdleTimeout","preloadOnFirstIO","placeholderMinHeight","fadeMs","fadeEasing","componentProps","isServer","selfRef","Comp","setComp","mountedRef","isMounted","setIsMounted","isVisible","setIsVisible","unmountTimer","fadeTimer","idleId","preloadPromiseRef","lastRatio","lastIntersecting","firstIOSeen","ensurePreloaded","clearTimers","mountNow","p","requestAnimationFrame","unmountSoon","IntersectionObserver","enter","Math","max","min","exit","thresholds","Array","from","sort","a","b","io","entry","ratio","intersectionRatio","intersecting","isIntersecting","crossedEnter","crossedExit","becameIntersecting","leftIntersecting","threshold","observe","disconnect","CompAny","minHeight","willChange","useRealMobileViewport","isRealMobile","setIsRealMobile","checkMobile","touch","navigator","maxTouchPoints","coarse","matchMedia","matches","innerWidth","ua","userAgent","vendor","opera","isIOS","platform","isAndroid","realMobile","LoadingHub","keyword","lines","ariaLabel","progress","cycleMs","animMs","delayMs","lineIndex","setLineIndex","show","setShow","hasMultiple","length","setInterval","i","clearInterval","h","srRef","textContent","round","undefined"],"sourceRoot":""}