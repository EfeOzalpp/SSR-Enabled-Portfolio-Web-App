{"version":3,"file":"FrontPage-jsx.server.js","mappings":"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","sources":["webpack://personal-site/./src/FrontPage.jsx","webpack://personal-site/./src/utils/content-utility/color-map.ts","webpack://personal-site/./src/utils/content-utility/event-mount.tsx","webpack://personal-site/./src/utils/content-utility/lazy-in-view.tsx","webpack://personal-site/./src/utils/content-utility/lazy-view-mount.tsx","webpack://personal-site/./src/utils/context-providers/project-context.tsx","webpack://personal-site/./src/utils/project-pane.tsx","webpack://personal-site/./src/utils/scroll-controller.tsx","webpack://personal-site/./src/utils/title/title-context.tsx","webpack://personal-site/./src/utils/title/title-observer.tsx","webpack://personal-site/./src/utils/title/view-project-cta.tsx","webpack://personal-site/./src/utils/title/view-project.tsx"],"sourcesContent":["import { useEffect } from 'react';\nimport loadable from '@loadable/component';\nimport ViewProject from './utils/title/view-project.tsx';\nimport { TitleProvider } from './utils/title/title-context.tsx';\nimport ScrollController from './utils/scroll-controller.tsx';\nimport { ProjectVisibilityProvider } from './utils/context-providers/project-context.tsx';\n\n// NavMenu is client-only; SSR markup stays identical.\nconst NavMenu = loadable(() => import('./utils/navigation/nav-menu.tsx'), {\n  ssr: false,\n  fallback: null,\n});\n\nfunction Frontpage() {\n  useEffect(() => {\n    // --- Clear prehydrate flag ASAP after hydration ---\n    const root = document.getElementById('landing');\n    requestAnimationFrame(() => root?.removeAttribute('data-prehydrate'));\n\n    // Allow pinch-zoom only inside elements that explicitly opt in.\n    const isAllowZoomTarget = (ev) => {\n      const el = ev?.target;\n      if (!el || typeof el.closest !== 'function') return false;\n      return Boolean(el.closest('[data-allow-zoom=\"1\"], .allow-pinch'));\n    };\n\n    // Prevent global pinch zoom (iOS/Android touchmove and Safari gesture*)\n    const preventPinchZoom = (event) => {\n      const tag = event?.target?.tagName?.toLowerCase?.() || '';\n      if (tag === 'video') return;                // let videos use native gestures\n      if (isAllowZoomTarget(event)) return;       // opt-in: allow inside pannable\n      if ('touches' in event && event.touches?.length > 1) event.preventDefault();\n    };\n\n    const preventGesture = (e) => {\n      // Safari iOS fires these for pinch\n      const tag = e?.target?.tagName?.toLowerCase?.() || '';\n      if (tag === 'video') return;\n      if (isAllowZoomTarget(e)) return;           // opt-in: allow inside pannable\n      e.preventDefault();\n    };\n\n    document.addEventListener('touchmove', preventPinchZoom, { passive: false });\n    document.addEventListener('gesturestart', preventGesture);\n    document.addEventListener('gesturechange', preventGesture);\n    document.addEventListener('gestureend', preventGesture);\n\n    return () => {\n      document.removeEventListener('touchmove', preventPinchZoom);\n      document.removeEventListener('gesturestart', preventGesture);\n      document.removeEventListener('gesturechange', preventGesture);\n      document.removeEventListener('gestureend', preventGesture);\n    };\n  }, []);\n\n  return (\n    <ProjectVisibilityProvider>\n      <div\n        className=\"HereGoesNothing\"\n        id=\"landing\"\n        data-prehydrate\n        style={{ position: 'relative' }}\n      >\n        <NavMenu />\n        <TitleProvider>\n          <ViewProject />\n        </TitleProvider>\n        <ScrollController />\n      </div>\n    </ProjectVisibilityProvider>\n  );\n}\n\nexport default Frontpage;\n","// Master color config\r\nexport interface ProjectColor {\r\n  rgb: string;         // \"204, 85, 41\"\r\n  tooltipAlpha?: number;\r\n  defaultAlpha?: number;\r\n  darkThemeTop?: string; // optional override for theme-color\r\n}\r\n\r\nexport const projectColors: Record<string, ProjectColor> = {\r\n  'Rotary Lamp': {\r\n    rgb: '204, 85, 41',\r\n    tooltipAlpha: 0.6,\r\n    defaultAlpha: 0.6,\r\n    darkThemeTop: 'rgba(72, 161, 161, 1)'\r\n  },\r\n  'Ice Cream Scoop': {\r\n    rgb: '234, 103, 97',\r\n    tooltipAlpha: 0.6,\r\n    defaultAlpha: 0.6,\r\n    darkThemeTop: 'rgba(23, 27, 24, 1)'\r\n  },\r\n  'Data Visualization': {\r\n    rgb: '153, 199, 7',\r\n    tooltipAlpha: 0.8,\r\n    defaultAlpha: 0.6,\r\n    darkThemeTop: 'rgba(28, 30, 31, 1)'\r\n  },\r\n  'Evade the Rock': {\r\n    rgb: '101, 86, 175',\r\n    tooltipAlpha: 0.6,\r\n    defaultAlpha: 0.6,\r\n    darkThemeTop: 'rgb(25, 25, 25)'\r\n  },\r\n  'Dynamic App': {\r\n    rgb: '120, 211, 255',\r\n    tooltipAlpha: 0.6,\r\n    defaultAlpha: 0.6,\r\n    darkThemeTop: 'rgba(17, 17, 17, 1)'\r\n  }\r\n};\r\n","import { useEffect, useRef, useState, type ComponentType } from 'react';\r\n\r\ntype Props = {\r\n  /** dynamic import that returns { default: ReactComponent } */\r\n  load: () => Promise<{ default: ComponentType<any> }>;\r\n  /** when true: mount immediately; when false: unmount (but keep chunk in memory) */\r\n  active: boolean;\r\n  /** optional loading UI while the chunk fetches */\r\n  fallback?: React.ReactNode;\r\n  /** pass arbitrary props to the loaded component */\r\n  componentProps?: Record<string, any>;\r\n  /** simple fade; 0 disables */\r\n  fadeMs?: number;\r\n};\r\n\r\nexport default function EventMount({\r\n  load,\r\n  active,\r\n  fallback = null,\r\n  componentProps,\r\n  fadeMs = 200,\r\n}: Props) {\r\n  const [Comp, setComp] = useState<ComponentType<any> | null>(null);\r\n  const [visible, setVisible] = useState(false);\r\n  const loadingRef = useRef<Promise<any> | null>(null);\r\n\r\n  // Load code-split chunk when first activated\r\n  useEffect(() => {\r\n    if (!active) { setVisible(false); return; }\r\n    if (!Comp) {\r\n      if (!loadingRef.current) loadingRef.current = load().then(mod => {\r\n        setComp(() => mod.default);\r\n      });\r\n    }\r\n    // show as soon as we have the component\r\n    let alive = true;\r\n    (async () => {\r\n      if (!Comp && loadingRef.current) await loadingRef.current;\r\n      if (alive) setVisible(true);\r\n    })();\r\n    return () => { alive = false; };\r\n  }, [active, load, Comp]);\r\n\r\n  if (!active) return null;               // unmount when not active\r\n  if (!Comp) return <>{fallback}</>;      // show fallback until chunk arrives\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        opacity: fadeMs ? (visible ? 1 : 0) : 1,\r\n        transition: fadeMs ? `opacity ${fadeMs}ms ease` : undefined,\r\n        willChange: fadeMs ? 'opacity' : undefined,\r\n      }}\r\n    >\r\n      <Comp {...(componentProps ?? {})} />\r\n    </div>\r\n  );\r\n}\r\n","// src/utils/content-utility/lazy-in-view.tsx\r\nimport { useEffect, useRef, useState, Suspense, type ComponentType } from 'react';\r\n\r\ntype Props = {\r\n  load?: () => Promise<{ default: ComponentType<any> }>;\r\n  fallback?: React.ReactNode;\r\n  serverRender?: React.ReactNode; // SSR-provided markup for first paint\r\n  eager?: boolean;                // start visible immediately (SSR and client)\r\n  allowIdle?: boolean;\r\n\r\n  // NEW\r\n  observeTargetId?: string;      // observe external element if provided\r\n  rootMargin?: string;           // IO margin\r\n  threshold?: number | number[]; // IO threshold(s)\r\n  placeholderMinHeight?: number;\r\n  debugLabel?: string;           // console tag\r\n};\r\n\r\nconst hasWindow = typeof window !== 'undefined';\r\nconst hasRIC = hasWindow && 'requestIdleCallback' in (window as any);\r\nconst hasCIC = hasWindow && 'cancelIdleCallback' in (window as any);\r\nconst ric = (cb: any, opts?: any) =>\r\n  hasRIC ? (window as any).requestIdleCallback(cb, opts) : setTimeout(cb, opts?.timeout ?? 0);\r\nconst cic = (id: any) =>\r\n  hasCIC ? (window as any).cancelIdleCallback(id) : clearTimeout(id);\r\n\r\nexport default function LazyInView({\r\n  load,\r\n  fallback = null,\r\n  serverRender,\r\n  eager = false,\r\n  allowIdle = false,\r\n\r\n  observeTargetId,\r\n  rootMargin = '0px',\r\n  threshold = 0.05,\r\n  placeholderMinHeight = 360,\r\n  debugLabel,\r\n}: Props) {\r\n  const isServer = !hasWindow;\r\n\r\n  // Make SSR and client's first render agree:\r\n  // If we SSR-ed content (serverRender) or set eager, start visible; otherwise start hidden.\r\n  const initialVisible = eager || !!serverRender;\r\n  const [isVisible, setIsVisible] = useState<boolean>(initialVisible);\r\n\r\n  const [Component, setComponent] = useState<ComponentType | null>(null);\r\n  const selfRef = useRef<HTMLDivElement | null>(null);\r\n  const idleId = useRef<any>(null);\r\n\r\n  // IntersectionObserver: flip visible when in view\r\n  useEffect(() => {\r\n    // If already visible (SSR or eager), nothing to observe.\r\n    if (isVisible) return;\r\n\r\n    const target =\r\n      (observeTargetId ? document.getElementById(observeTargetId) : null) ||\r\n      selfRef.current;\r\n\r\n    if (!target || typeof IntersectionObserver === 'undefined') {\r\n      setIsVisible(true);\r\n      return;\r\n    }\r\n\r\n    const io = new IntersectionObserver(([entry]) => {\r\n      const vis = !!entry.isIntersecting;\r\n      const ratio = entry.intersectionRatio ?? 0;\r\n      if (debugLabel) console.log(`[LazyInView:${debugLabel}] IO`, { ratio, vis });\r\n\r\n      if (vis) {\r\n        setIsVisible(true);\r\n        io.disconnect();\r\n        if (idleId.current) {\r\n          cic(idleId.current);\r\n          idleId.current = null;\r\n        }\r\n      }\r\n    }, { threshold, root: null, rootMargin });\r\n\r\n    io.observe(target);\r\n    return () => io.disconnect();\r\n  }, [isVisible, observeTargetId, rootMargin, threshold, debugLabel]);\r\n\r\n  // Idle preloading (optional): if still hidden and allowed, show after an idle slot\r\n  useEffect(() => {\r\n    if (isVisible || !allowIdle) return;\r\n    idleId.current = ric(() => setIsVisible(true), { timeout: 2000 });\r\n    return () => {\r\n      if (idleId.current) {\r\n        cic(idleId.current);\r\n        idleId.current = null;\r\n      }\r\n    };\r\n  }, [isVisible, allowIdle]);\r\n\r\n  // Load component when visible\r\n  useEffect(() => {\r\n    if (!isVisible || Component || !load) return;\r\n    let cancelled = false;\r\n    load().then((mod) => { if (!cancelled) setComponent(() => mod.default); });\r\n    return () => { cancelled = true; };\r\n  }, [isVisible, Component, load]);\r\n\r\n  const content = Component\r\n    ? <Suspense fallback={fallback}><Component /></Suspense>\r\n    : (serverRender ?? fallback);\r\n\r\n  return (\r\n    <div\r\n      ref={selfRef}\r\n      className={debugLabel ? `liv--${debugLabel}` : undefined}\r\n      style={{\r\n        width: '100%',\r\n        height: '100%',\r\n        minHeight: placeholderMinHeight,\r\n        position: 'relative',\r\n        //  First render matches SSR exactly via initialVisible\r\n        opacity: isVisible ? 1 : 0,\r\n        transition: 'opacity 220ms ease',\r\n      }}\r\n    >\r\n      {content}\r\n    </div>\r\n  );\r\n}\r\n","// src/utils/content-utility/lazy-view-mount.tsx\r\nimport { useEffect, useRef, useState, Suspense, type ComponentType, lazy } from 'react';\r\n\r\ntype MountMode = 'io' | 'idle' | 'immediate';\r\n\r\ntype Props = {\r\n  load: () => Promise<{ default: ComponentType<any> }>;\r\n  fallback?: React.ReactNode;\r\n\r\n  /** Mount strategy */\r\n  mountMode?: MountMode;            // 'io' | 'idle' | 'immediate' (default 'io')\r\n\r\n  /** IO config (only when mountMode === 'io') */\r\n  enterThreshold?: number;          // default 0.2   -> start showing at/after this ratio\r\n  exitThreshold?: number;           // default 0.05  -> consider out-of-view at/below\r\n  unmountDelayMs?: number;          // default 150ms -> delay before unmounting after exit\r\n  root?: Element | null;            // viewport by default\r\n  rootMargin?: string;              // default '0px'\r\n  observeTargetId?: string;         // observe specific element; else our own wrapper\r\n\r\n  /** Preloading */\r\n  preloadOnIdle?: boolean;          // default true\r\n  preloadIdleTimeout?: number;      // default 2000\r\n  preloadOnFirstIO?: boolean;       // default true\r\n\r\n  /** Layout/UX */\r\n  placeholderMinHeight?: number;    // default 360\r\n  fadeMs?: number;                  // default 300\r\n  fadeEasing?: string;              // default 'ease'\r\n\r\n  /** Forward child props */\r\n  componentProps?: Record<string, any>;\r\n};\r\n\r\nconst hasWindow = typeof window !== 'undefined';\r\nconst hasRIC = hasWindow && 'requestIdleCallback' in (window as any);\r\nconst hasCIC = hasWindow && 'cancelIdleCallback' in (window as any);\r\nconst ric = (cb: any, opts?: any) =>\r\n  hasRIC ? (window as any).requestIdleCallback(cb, opts) : setTimeout(cb, opts?.timeout ?? 0);\r\nconst cic = (id: any) =>\r\n  hasCIC ? (window as any).cancelIdleCallback(id) : clearTimeout(id);\r\n\r\nexport default function LazyViewMount({\r\n  load,\r\n  fallback = null,\r\n\r\n  // strategy\r\n  mountMode = 'io',\r\n\r\n  // IO\r\n  enterThreshold = 0.2,\r\n  exitThreshold = 0.05,\r\n  unmountDelayMs = 150,\r\n  root = null,\r\n  rootMargin = '0px',\r\n  observeTargetId,\r\n\r\n  // preload\r\n  preloadOnIdle = true,\r\n  preloadIdleTimeout = 2000,\r\n  preloadOnFirstIO = true,\r\n\r\n  // layout/UX\r\n  placeholderMinHeight = 360,\r\n  fadeMs = 300,\r\n  fadeEasing = 'ease',\r\n\r\n  componentProps,\r\n}: Props) {\r\n  const isServer = !hasWindow;\r\n\r\n  const selfRef = useRef<HTMLDivElement | null>(null);\r\n  const [Comp, setComp] = useState<ComponentType | null>(null);\r\n\r\n  // mount/visibility\r\n  const mountedRef = useRef(false);\r\n  const [isMounted, setIsMounted] = useState(false);\r\n  const [isVisible, setIsVisible] = useState(false);\r\n\r\n  // timers\r\n  const unmountTimer = useRef<number | null>(null);\r\n  const fadeTimer = useRef<number | null>(null);\r\n  const idleId = useRef<any>(null);\r\n\r\n  // preload promise cache\r\n  const preloadPromiseRef = useRef<Promise<{ default: ComponentType<any> }> | null>(null);\r\n\r\n  // IO edge tracking\r\n  const lastRatio = useRef<number>(0);\r\n  const lastIntersecting = useRef<boolean>(false);\r\n  const firstIOSeen = useRef(false);\r\n\r\n  /** Preload once */\r\n  const ensurePreloaded = () => {\r\n    if (!preloadPromiseRef.current) {\r\n      preloadPromiseRef.current = load();\r\n    }\r\n    return preloadPromiseRef.current;\r\n  };\r\n\r\n  const clearTimers = () => {\r\n    if (unmountTimer.current != null) { window.clearTimeout(unmountTimer.current); unmountTimer.current = null; }\r\n    if (fadeTimer.current != null)     { window.clearTimeout(fadeTimer.current);   fadeTimer.current = null; }\r\n  };\r\n\r\n  const mountNow = () => {\r\n    if (mountedRef.current) {\r\n      // already mounted; just ensure visible\r\n      setIsVisible(true);\r\n      return;\r\n    }\r\n    mountedRef.current = true;\r\n    const p = ensurePreloaded();\r\n    setComp(prev => prev ?? (lazy(() => p) as unknown as ComponentType));\r\n    setIsMounted(true);\r\n    // next frame -> allow CSS transition\r\n    requestAnimationFrame(() => setIsVisible(true));\r\n  };\r\n\r\n  const unmountSoon = () => {\r\n    if (!mountedRef.current) return;\r\n    clearTimers();\r\n    // fade out -> unmount\r\n    unmountTimer.current = window.setTimeout(() => {\r\n      setIsVisible(false);\r\n      fadeTimer.current = window.setTimeout(() => {\r\n        setIsMounted(false);\r\n        mountedRef.current = false;\r\n      }, fadeMs);\r\n    }, unmountDelayMs);\r\n  };\r\n\r\n  /** Preload on idle */\r\n  useEffect(() => {\r\n    if (isServer || !preloadOnIdle) return;\r\n    if (idleId.current) cic(idleId.current);\r\n    idleId.current = ric(() => { void ensurePreloaded(); }, { timeout: preloadIdleTimeout });\r\n    return () => { if (idleId.current) { cic(idleId.current); idleId.current = null; } };\r\n  }, [isServer, preloadOnIdle, preloadIdleTimeout, load]);\r\n\r\n  /** Mount behavior per mode */\r\n  useEffect(() => {\r\n    if (isServer) return;\r\n\r\n    if (mountMode === 'immediate') {\r\n      mountNow();\r\n      return;\r\n    }\r\n\r\n    if (mountMode === 'idle') {\r\n      const id = ric(() => mountNow(), { timeout: preloadIdleTimeout });\r\n      return () => { if (id) cic(id); };\r\n    }\r\n\r\n    // ---- IO MODE ----\r\n    const target =\r\n      (observeTargetId ? document.getElementById(observeTargetId) : null) ||\r\n      selfRef.current;\r\n\r\n    if (!target) return;\r\n\r\n    if (typeof IntersectionObserver === 'undefined') {\r\n      // no IO support -> just mount\r\n      mountNow();\r\n      return;\r\n    }\r\n\r\n    // ensure sensible thresholds (enter > exit)\r\n    const enter = Math.max(0, Math.min(1, enterThreshold));\r\n    const exit  = Math.max(0, Math.min(enter, exitThreshold)); // cap at enter\r\n    const thresholds = Array.from(new Set([0, exit, enter, 1])).sort((a, b) => a - b);\r\n\r\n    const io = new IntersectionObserver(([entry]) => {\r\n      const ratio = entry?.intersectionRatio ?? 0;\r\n      const intersecting = !!entry?.isIntersecting;\r\n\r\n      // first IO  optional preload\r\n      if (!firstIOSeen.current) {\r\n        firstIOSeen.current = true;\r\n        if (preloadOnFirstIO) void ensurePreloaded();\r\n      }\r\n\r\n      // Compute edge crossings (prevents jitter in the gray zone)\r\n      const crossedEnter = lastRatio.current < enter && ratio >= enter;\r\n      const crossedExit  = lastRatio.current > exit  && ratio <= exit;\r\n      const becameIntersecting = !lastIntersecting.current && intersecting;\r\n      const leftIntersecting   = lastIntersecting.current && !intersecting;\r\n\r\n      // ENTER: on intersection or crossing the enter threshold\r\n      if (becameIntersecting || crossedEnter) {\r\n        clearTimers();\r\n        mountNow();\r\n      }\r\n      // EXIT: when leaving intersection OR crossing exit threshold\r\n      else if (leftIntersecting || crossedExit) {\r\n        unmountSoon();\r\n      }\r\n\r\n      // save last values\r\n      lastRatio.current = ratio;\r\n      lastIntersecting.current = intersecting;\r\n    }, { root, rootMargin, threshold: thresholds });\r\n\r\n    io.observe(target);\r\n    return () => { io.disconnect(); clearTimers(); };\r\n  }, [\r\n    isServer,\r\n    mountMode,\r\n    root,\r\n    rootMargin,\r\n    enterThreshold,\r\n    exitThreshold,\r\n    observeTargetId,\r\n    preloadIdleTimeout,\r\n    preloadOnFirstIO,\r\n    fadeMs,\r\n    unmountDelayMs,\r\n  ]);\r\n\r\n  const CompAny = Comp as any;\r\n\r\n  return (\r\n    <div\r\n      ref={selfRef}\r\n      style={{ width: '100%', minHeight: placeholderMinHeight, position: 'relative' }}\r\n    >\r\n      {isMounted && CompAny ? (\r\n        <div\r\n          style={{\r\n            opacity: isVisible ? 1 : 0,                 // 1 in view, 0 out of view\r\n            transition: `opacity ${fadeMs}ms ${fadeEasing}`,\r\n            willChange: 'opacity',\r\n          }}\r\n        >\r\n          <Suspense fallback={fallback}>\r\n            <CompAny {...(componentProps || {})} />\r\n          </Suspense>\r\n        </div>\r\n      ) : (\r\n        fallback\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","// src/utils/context-providers/project-context.tsx\r\nimport React, {\r\n  createContext,\r\n  useState,\r\n  useContext,\r\n  useRef,\r\n  ReactNode,\r\n} from 'react';\r\n\r\ntype ViewportAlignArgs = {\r\n  /** Prefer one of these to identify the block to align */\r\n  id?: string;              // e.g. 'block-game'\r\n  key?: string;             // e.g. 'game' -> resolves to #block-game in your aligner\r\n  el?: HTMLElement | null;  // direct element if you have it\r\n  /** Re-verify/re-apply on next rAF (helps on mobile Safari) */\r\n  retry?: boolean;\r\n};\r\n\r\ninterface ProjectVisibilityContextType {\r\n  activeProject?: string;\r\n  setActiveProject: (title: string) => void;\r\n\r\n  blockGClick: boolean;\r\n  setBlockGClick: (clicked: boolean) => void;\r\n\r\n  currentIndex: number;\r\n  setCurrentIndex: React.Dispatch<React.SetStateAction<number>>;\r\n\r\n  scrollContainerRef: React.RefObject<HTMLDivElement>;\r\n\r\n  isDragging: boolean;\r\n  setIsDragging: React.Dispatch<React.SetStateAction<boolean>>;\r\n\r\n  focusedProjectKey: string | null;\r\n  setFocusedProjectKey: React.Dispatch<React.SetStateAction<string | null>>;\r\n\r\n  previousScrollY: number | null;\r\n  setPreviousScrollY: React.Dispatch<React.SetStateAction<number | null>>;\r\n\r\n  /** Ask ScrollController to instantly align a block to the top (no smooth, no bump) */\r\n  requestViewportAlign: (args: ViewportAlignArgs) => void;\r\n\r\n  /**\r\n   * Register the actual align function (implemented inside ScrollController).\r\n   * ScrollController should call this once on mount and clean up on unmount.\r\n   */\r\n  registerViewportAlign: (fn: (args: ViewportAlignArgs) => void) => void;\r\n}\r\n\r\ninterface ProjectVisibilityProviderProps {\r\n  children: ReactNode;\r\n}\r\n\r\nconst ProjectVisibilityContext = createContext<ProjectVisibilityContextType | undefined>(undefined);\r\n\r\nexport const ProjectVisibilityProvider = ({ children }: ProjectVisibilityProviderProps) => {\r\n  const [activeProject, setActiveProject] = useState<string | undefined>(undefined);\r\n  const [blockGClick, setBlockGClick] = useState(false);\r\n  const [currentIndex, setCurrentIndex] = useState(0);\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [focusedProjectKey, setFocusedProjectKey] = useState<string | null>(null);\r\n  const [previousScrollY, setPreviousScrollY] = useState<number | null>(null);\r\n\r\n  const scrollContainerRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  // The ScrollController will register its implementation here.\r\n  const alignFnRef = useRef<(args: ViewportAlignArgs) => void>(() => { /* no-op by default */ });\r\n\r\n  const requestViewportAlign = React.useCallback((args: ViewportAlignArgs) => {\r\n    alignFnRef.current?.(args);\r\n  }, []);\r\n\r\n  const registerViewportAlign = React.useCallback((fn: (args: ViewportAlignArgs) => void) => {\r\n    alignFnRef.current = fn || (() => {});\r\n  }, []);\r\n\r\n  return (\r\n    <ProjectVisibilityContext.Provider\r\n      value={{\r\n        activeProject,\r\n        setActiveProject,\r\n        blockGClick,\r\n        setBlockGClick,\r\n        currentIndex,\r\n        setCurrentIndex,\r\n        scrollContainerRef,\r\n        isDragging,\r\n        setIsDragging,\r\n        focusedProjectKey,\r\n        setFocusedProjectKey,\r\n        previousScrollY,\r\n        setPreviousScrollY,\r\n        requestViewportAlign,\r\n        registerViewportAlign,\r\n      }}\r\n    >\r\n      {children}\r\n    </ProjectVisibilityContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useProjectVisibility = () => {\r\n  const context = useContext(ProjectVisibilityContext);\r\n  if (!context) {\r\n    throw new Error('useProjectVisibility must be used within ProjectVisibilityProvider');\r\n  }\r\n  return context;\r\n};\r\n","// src/utils/project-pane.tsx\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport LazyInView from './content-utility/lazy-in-view';\r\nimport LazyViewMount from './content-utility/lazy-view-mount';\r\nimport LoadingScreen from './loading/loading';\r\nimport { useProjectLoader } from './content-utility/component-loader';\r\nimport { useProjectVisibility } from './context-providers/project-context';\r\nimport { useSsrData } from './context-providers/ssr-data-context';\r\nimport { ssrRegistry } from '../ssr/registry';\r\n\r\n/* event-driven details for case study section */\r\nimport EventMount from './content-utility/event-mount';\r\n\r\n// Map project keys to their detail component loaders\r\nconst caseStudyLoaders: Record<string, () => Promise<any>> = {\r\n  rotary: () => import('../components/case-studies/project-case-studies/rock-escapade'),\r\n  // add more as you go:\r\n  // dynamic: () => import('../components/case-studies/project-case-studies/CaseStudyDynamic'),\r\n};\r\n\r\ntype Props = {\r\n  item: any;\r\n  isFocused: boolean;\r\n  setRef: (el: HTMLDivElement | null) => void;\r\n  isFirst?: boolean;\r\n};\r\n\r\nexport function ProjectPane({\r\n  item,\r\n  isFocused,\r\n  setRef,\r\n  isFirst = false,\r\n}: Props) {\r\n  const { scrollContainerRef } = useProjectVisibility();\r\n  const load = useProjectLoader(item.key);\r\n  const ssr = useSsrData();\r\n  const payload = ssr?.preloaded?.[item.key];\r\n  const desc = ssrRegistry[item.key];\r\n  const hasSSR = Boolean(payload && desc?.render);\r\n\r\n  const [isHydrated, setIsHydrated] = useState(false);\r\n  useEffect(() => { setIsHydrated(true); }, []);\r\n\r\n  const serverRender =\r\n    payload && desc?.render ? desc.render((payload as any).data ?? payload) : null;\r\n\r\n  const isDynamic = item.key === 'dynamic';\r\n  const isGame = item.key === 'game';\r\n  const usesCustomLoader = isDynamic || isGame;\r\n\r\n  const fallbackNode =\r\n    !payload && isHydrated && !usesCustomLoader ? (\r\n      <LoadingScreen isFullScreen={false} />\r\n    ) : null;\r\n\r\n  const blockId = `block-${item.key}`;\r\n  const rootRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  // --- Delay unmount on unfocus ---\r\n  const EXIT_DELAY_MS = 0;\r\n  const FADE_MS = 0; // keep in sync with <EventMount fadeMs>\r\n  const [activeDelayed, setActiveDelayed] = useState<boolean>(isFocused);\r\n  const exitTimerRef = useRef<number | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (isFocused) {\r\n      if (exitTimerRef.current) {\r\n        clearTimeout(exitTimerRef.current);\r\n        exitTimerRef.current = null;\r\n      }\r\n      setActiveDelayed(true);\r\n    } else {\r\n      exitTimerRef.current = window.setTimeout(() => {\r\n        setActiveDelayed(false);\r\n        exitTimerRef.current = null;\r\n      }, EXIT_DELAY_MS);\r\n    }\r\n    return () => {\r\n      if (exitTimerRef.current) {\r\n        clearTimeout(exitTimerRef.current);\r\n        exitTimerRef.current = null;\r\n      }\r\n    };\r\n  }, [isFocused]);\r\n\r\n  // --- Height reservation during exit fade to prevent layout jump ---\r\n  const [reserveH, setReserveH] = useState<number | null>(null);\r\n  const detailsHostRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (!isFocused) {\r\n      const rafId = requestAnimationFrame(() => {\r\n        const h = detailsHostRef.current?.getBoundingClientRect().height ?? 0;\r\n        if (h > 0) setReserveH(h);\r\n\r\n        const release = window.setTimeout(() => {\r\n          setReserveH(null);\r\n        }, EXIT_DELAY_MS + FADE_MS + 50);\r\n\r\n        const cleanup = () => clearTimeout(release);\r\n        (detailsHostRef as any)._cleanup = cleanup;\r\n      });\r\n\r\n      return () => {\r\n        cancelAnimationFrame(rafId);\r\n        (detailsHostRef as any)._cleanup?.();\r\n        (detailsHostRef as any)._cleanup = undefined;\r\n      };\r\n    } else {\r\n      setReserveH(null);\r\n    }\r\n  }, [isFocused]);\r\n\r\n  // --- Local opacity control (per-pane observer) ---\r\n  useEffect(() => {\r\n    const el = rootRef.current;\r\n    if (!el) return;\r\n\r\n    if (isFocused || (!isFocused && activeDelayed)) {\r\n      el.style.opacity = '1';\r\n      return;\r\n    }\r\n\r\n    const isRealMobile = (() => {\r\n      const coarse = window.matchMedia?.('(pointer: coarse)').matches ?? false;\r\n      const touch = (navigator as any).maxTouchPoints > 0;\r\n      const vv = (window as any).visualViewport;\r\n      if (vv) {\r\n        const gap = window.innerHeight - vv.height;\r\n        return coarse && touch && (gap > 48);\r\n      }\r\n      return coarse && touch;\r\n    })();\r\n\r\n    const baseMin = isRealMobile ? 0.1 : 0.3;\r\n    const thresholds = Array.from({ length: 101 }, (_, i) => i / 100);\r\n\r\n    const io = new IntersectionObserver(\r\n      (entries) => {\r\n        for (const entry of entries) {\r\n          const ratio = entry.intersectionRatio ?? 0;\r\n          if (ratio >= 0.75) {\r\n            el.style.opacity = '1';\r\n          } else {\r\n            const mapped = baseMin + (ratio / 0.75) * (1 - baseMin);\r\n            el.style.opacity = String(mapped);\r\n          }\r\n        }\r\n      },\r\n      { threshold: thresholds, root: scrollContainerRef?.current ?? null }\r\n    );\r\n\r\n    io.observe(el);\r\n    el.style.opacity = '1';\r\n\r\n    return () => io.disconnect();\r\n  }, [isFocused, activeDelayed, scrollContainerRef]);\r\n\r\n  return (\r\n    <div\r\n      id={blockId}\r\n      ref={(el) => { setRef(el); rootRef.current = el; }}\r\n      className={`project-pane ${isFocused ? 'is-focused' : ''} ${isGame ? 'is-game' : ''}`}\r\n      data-viewport-lock={isGame ? 'true' : undefined}\r\n      data-project-key={item.key}\r\n      style={{\r\n        scrollSnapAlign: 'start',\r\n        scrollSnapStop: 'always',\r\n        contentVisibility: 'auto' as any,\r\n        contain: 'layout paint style',\r\n        overflow: isFocused ? 'visible' : 'hidden',\r\n      }}\r\n    >\r\n      <div className=\"project-pane-wrapper\">\r\n        {isDynamic ? (\r\n          <>\r\n            <LazyInView\r\n              load={load}\r\n              serverRender={serverRender}\r\n              eager={isFirst}\r\n              allowIdle\r\n            />\r\n            {!hasSSR && (\r\n              <LazyViewMount\r\n                load={() => import('../components/dynamic-app/shadow-entry')}\r\n                mountMode=\"idle\"\r\n                preloadOnIdle\r\n                preloadIdleTimeout={2000}\r\n                preloadOnFirstIO\r\n                observeTargetId={blockId}\r\n                rootMargin=\"0px\"\r\n                placeholderMinHeight={0}\r\n                componentProps={{ blockId }}\r\n              />\r\n            )}\r\n          </>\r\n        ) : isGame ? (\r\n          <LazyInView\r\n            load={load}\r\n            serverRender={serverRender}\r\n            eager={isFirst}\r\n            allowIdle\r\n            observeTargetId={blockId}\r\n            placeholderMinHeight={0}\r\n          />\r\n        ) : (\r\n          <LazyInView\r\n            load={load}\r\n            fallback={fallbackNode}\r\n            serverRender={serverRender}\r\n            eager={isFirst}\r\n            allowIdle={false}\r\n            placeholderMinHeight={0}\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      {/* details host: force visible during fade + freeze height to avoid jank */}\r\n      <div\r\n        ref={detailsHostRef}\r\n        style={{\r\n          height: reserveH != null ? `${reserveH}px` : undefined,\r\n          contentVisibility: activeDelayed ? ('visible' as any) : undefined,\r\n          contain: 'paint',\r\n        }}\r\n      >\r\n        {caseStudyLoaders[item.key] && (\r\n          <EventMount\r\n            load={caseStudyLoaders[item.key]}\r\n            active={activeDelayed}\r\n            fallback={<div style={{ height: '100dvh' }} />}\r\n            componentProps={{ title: item.title ?? item.key }}\r\n            fadeMs={FADE_MS}\r\n          />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","// src/utils/scroll-controller.tsx\r\nimport { useEffect, useRef, useState, useMemo } from 'react';\r\nimport { useProjectVisibility } from './context-providers/project-context';\r\nimport { baseProjects } from './content-utility/component-loader';\r\nimport { ProjectPane } from './project-pane';\r\nimport { useSsrData } from './context-providers/ssr-data-context';\r\nimport { seededShuffle } from './seed';\r\n\r\n/* ===========================\r\n   Synthetic Drag & Exit Events\r\n   =========================== */\r\ndeclare global {\r\n  interface DocumentEventMap {\r\n    'synthetic-drag': CustomEvent<{\r\n      phase: 'start' | 'move' | 'end';\r\n      direction: 'up' | 'down';\r\n      magnitude: number;     // px intention applied to the OUTER scroller\r\n      velocity?: number;     // px/ms (optional)\r\n      source: 'touch' | 'wheel';\r\n      ts: number;            // performance.now()\r\n    }>;\r\n    'focus-exit-start': CustomEvent<{ key: string }>;\r\n    'focus-exit-unlock': CustomEvent<{ key: string }>;\r\n  }\r\n}\r\n\r\nconst ScrollController = () => {\r\n  const { scrollContainerRef, focusedProjectKey, currentIndex, setFocusedProjectKey } =\r\n    useProjectVisibility();\r\n  const { seed = 12345 } = useSsrData() || {};\r\n\r\n  // Shuffle once on mount; never recompute order during this session\r\n  const projectsRef = useRef(seededShuffle(baseProjects, seed));\r\n  const projects = projectsRef.current;\r\n\r\n  // Keep DOM refs to each block for precise scrolling\r\n  const projectRefs = useRef<Record<string, HTMLDivElement | null>>({});\r\n\r\n  // Track last outer scrollTop and direction while focused\r\n  const lastScrollTopRef = useRef<number>(0);\r\n  const lastScrollDirRef = useRef<'up' | 'down'>('down');\r\n\r\n  // ---- Tunables ----\r\n  const VIS_RATIO_TO_EXIT = 0.2;     // 20% of any OTHER pane => auto-unfocus\r\n  const VIS_DWELL_MS      = 120;     // must remain candidate for this long\r\n  const MAX_UNLOCK_VH     = 0.90;    // 90dvh movement cap before details unmount\r\n  const MIN_LINGER_MS     = 280;     // require at least this much time before unlock\r\n  const MAX_LINGER_MS     = 800;     // (optional) don't linger longer than this\r\n  const SNAP_RAMP_MS      = 400;     // proximity ramp\r\n  const SNAP_KB_FALLBACK_MS = 1200;  // snap re-enable fallback\r\n  const UNLOCK_FALLBACK_MS  = 1400;  // unlock fallback if scroll events dont fire\r\n\r\n  // Track the last non-null focused key so we can anchor (fallback) on exit\r\n  const lastFocusedKeyRef = useRef<string | null>(null);\r\n  useEffect(() => {\r\n    if (focusedProjectKey) lastFocusedKeyRef.current = focusedProjectKey;\r\n  }, [focusedProjectKey]);\r\n\r\n  // Preferred exit target (set when user scrolls away during focus)\r\n  const exitTargetKeyRef = useRef<string | null>(null);\r\n\r\n  // Helper: element's offsetTop within a custom scroller\r\n  const getOffsetTopWithin = (el: HTMLElement, scroller: HTMLElement | any) => {\r\n    const r1 = el.getBoundingClientRect();\r\n    const r2 = (scroller as HTMLElement).getBoundingClientRect?.() ?? { top: 0 };\r\n    const st = ('scrollTop' in scroller ? scroller.scrollTop : document.documentElement.scrollTop) || 0;\r\n    return r1.top - r2.top + st;\r\n  };\r\n\r\n  // Temporarily disable snap after index changes, to allow smooth momentum handoff\r\n  // Only do this while focused; when NOT focused we want strong snap.\r\n  useEffect(() => {\r\n    const container = scrollContainerRef.current;\r\n    if (!container) return;\r\n    if (!focusedProjectKey) return; // keep snap strong outside focus\r\n    container.classList.add('no-snap');\r\n    const timeout = setTimeout(() => container.classList.remove('no-snap'), 800);\r\n    return () => clearTimeout(timeout);\r\n  }, [currentIndex, focusedProjectKey, scrollContainerRef]);\r\n\r\n  /* ===========================\r\n     Focus entry scroll choreography\r\n     - On entering focus: align the focused block, then bump ~90dvh\r\n     =========================== */\r\n  useEffect(() => {\r\n    if (!focusedProjectKey) return;\r\n\r\n    const scroller = scrollContainerRef.current ?? (document.scrollingElement as any);\r\n    if (!scroller) return;\r\n\r\n    const targetEl =\r\n      projectRefs.current[focusedProjectKey] ??\r\n      (document.getElementById(`block-${focusedProjectKey}`) as HTMLDivElement | null);\r\n\r\n    const getViewportH = () =>\r\n      (scroller?.clientHeight as number) ||\r\n      (scroller?.getBoundingClientRect?.().height as number) ||\r\n      (window.visualViewport?.height ?? window.innerHeight ?? document.documentElement.clientHeight ?? 0);\r\n\r\n    requestAnimationFrame(() => {\r\n      if (targetEl?.scrollIntoView) {\r\n        targetEl.scrollIntoView({ block: 'start', behavior: 'smooth' });\r\n      }\r\n      const bump = Math.round(getViewportH() * 0.9);\r\n      requestAnimationFrame(() => {\r\n        requestAnimationFrame(() => {\r\n          scroller.scrollBy?.({ top: bump, left: 0, behavior: 'smooth' });\r\n        });\r\n      });\r\n    });\r\n  }, [focusedProjectKey, scrollContainerRef]);\r\n\r\n  // --------------------------\r\n  // Scrolling helpers\r\n  // --------------------------\r\n  const setScrollTop = (scroller: any, top: number) => {\r\n    if ('scrollTop' in scroller) {\r\n      scroller.scrollTop = top;\r\n    } else {\r\n      scroller.scrollTo?.({ top, left: 0, behavior: 'auto' });\r\n    }\r\n  };\r\n\r\n  // Kill inertia, then instantly place (used for re-anchors after layout changes)\r\n  const hardPlaceAtKey = (key: string) => {\r\n    const scroller = scrollContainerRef.current ?? (document.scrollingElement as any);\r\n    if (!scroller) return;\r\n    const el =\r\n      projectRefs.current[key] ??\r\n      (document.getElementById(`block-${key}`) as HTMLDivElement | null);\r\n    if (!el) return;\r\n\r\n    const targetTop = getOffsetTopWithin(el, scroller);\r\n\r\n    const prevBehavior = (scroller as HTMLElement).style.scrollBehavior;\r\n    const prevOverflow = (scroller as HTMLElement).style.overflowY;\r\n\r\n    (scroller as HTMLElement).style.scrollBehavior = 'auto';\r\n    (scroller as HTMLElement).style.overflowY = 'hidden';\r\n    // @ts-ignore force sync\r\n    void scroller.offsetHeight;\r\n\r\n    setScrollTop(scroller, targetTop);\r\n\r\n    // @ts-ignore force sync\r\n    void scroller.offsetHeight;\r\n\r\n    (scroller as HTMLElement).style.overflowY = prevOverflow || 'scroll';\r\n    (scroller as HTMLElement).style.scrollBehavior = prevBehavior || '';\r\n\r\n    lastScrollTopRef.current = scroller.scrollTop || 0;\r\n  };\r\n\r\n  // Kill inertia, then tween to a key over ~260ms ease-out (nice transition)\r\n  const animatePlaceToKey = (key: string, ms = 260) => {\r\n    const scroller = scrollContainerRef.current ?? (document.scrollingElement as any);\r\n    if (!scroller) return;\r\n\r\n    const el =\r\n      projectRefs.current[key] ??\r\n      (document.getElementById(`block-${key}`) as HTMLDivElement | null);\r\n    if (!el) return;\r\n\r\n    const targetTop = getOffsetTopWithin(el, scroller);\r\n    const startTop = scroller.scrollTop || 0;\r\n    const delta = targetTop - startTop;\r\n    if (Math.abs(delta) < 1) {\r\n      hardPlaceAtKey(key);\r\n      return;\r\n    }\r\n\r\n    const reduce =\r\n      typeof window !== 'undefined' &&\r\n      (window.matchMedia?.('(prefers-reduced-motion: reduce)').matches ?? false);\r\n\r\n    const duration = reduce ? 80 : ms;\r\n    const start = performance.now();\r\n\r\n    const prevBehavior = (scroller as HTMLElement).style.scrollBehavior;\r\n    const prevOverflow = (scroller as HTMLElement).style.overflowY;\r\n    (scroller as HTMLElement).style.scrollBehavior = 'auto';\r\n    (scroller as HTMLElement).style.overflowY = 'hidden';\r\n\r\n    // cubic ease-out\r\n    const easeOutCubic = (t: number) => 1 - Math.pow(1 - t, 3);\r\n\r\n    let raf = 0;\r\n    const step = (now: number) => {\r\n      const t = Math.min(1, (now - start) / duration);\r\n      const y = startTop + delta * easeOutCubic(t);\r\n      setScrollTop(scroller, y);\r\n      if (t < 1) {\r\n        raf = requestAnimationFrame(step);\r\n      } else {\r\n        // restore\r\n        (scroller as HTMLElement).style.overflowY = prevOverflow || 'scroll';\r\n        (scroller as HTMLElement).style.scrollBehavior = prevBehavior || '';\r\n        lastScrollTopRef.current = scroller.scrollTop || 0;\r\n      }\r\n    };\r\n\r\n    // start\r\n    // @ts-ignore\r\n    void scroller.offsetHeight;\r\n    raf = requestAnimationFrame(step);\r\n    return () => raf && cancelAnimationFrame(raf);\r\n  };\r\n\r\n  /* ===========================\r\n     AUTO-UNFOCUS while focused:\r\n     - If any OTHER pane is  20% visible (and remains for VIS_DWELL_MS),\r\n       we exit focus and force the exit target to the *adjacent* pane\r\n       in the scroll direction (no skipping).\r\n     =========================== */\r\n  useEffect(() => {\r\n    const scroller = scrollContainerRef.current ?? (document.scrollingElement as any);\r\n    if (!focusedProjectKey || !scroller) return;\r\n\r\n    let raf = 0;\r\n    let dwellTimer: number | null = null;\r\n    let pendingKey: string | null = null;\r\n\r\n    const getViewportH = () =>\r\n      (scroller?.clientHeight as number) ||\r\n      (scroller?.getBoundingClientRect?.().height as number) ||\r\n      (window.visualViewport?.height ?? window.innerHeight ?? document.documentElement.clientHeight ?? 0);\r\n\r\n    const focusedIdx = projects.findIndex(p => p.key === focusedProjectKey);\r\n    const clampAdjacentKey = (dir: 'up' | 'down') => {\r\n      if (focusedIdx < 0) return null;\r\n      const nextIdx = dir === 'down' ? Math.min(focusedIdx + 1, projects.length - 1)\r\n                                     : Math.max(focusedIdx - 1, 0);\r\n      if (nextIdx === focusedIdx) return null;\r\n      return projects[nextIdx].key;\r\n    };\r\n\r\n    const pickCandidate = () => {\r\n      const vh = getViewportH();\r\n      const viewportCenter = vh * 0.5;\r\n\r\n      let bestKey: string | null = null;\r\n      let bestDist = Infinity;\r\n\r\n      for (const p of projects) {\r\n        if (p.key === focusedProjectKey) continue;\r\n        const el = document.getElementById(`block-${p.key}`) as HTMLElement | null;\r\n        if (!el) continue;\r\n\r\n        const r = el.getBoundingClientRect();\r\n        if (r.bottom <= 0 || r.top >= vh) continue;\r\n\r\n        const visible = Math.min(r.bottom, vh) - Math.max(r.top, 0);\r\n        const ratio = Math.max(0, visible) / Math.max(1, r.height);\r\n        if (ratio < VIS_RATIO_TO_EXIT) continue;\r\n\r\n        const center = r.top + r.height / 2;\r\n        const dist = Math.abs(center - viewportCenter);\r\n        if (dist < bestDist) {\r\n          bestDist = dist;\r\n          bestKey = p.key;\r\n        }\r\n      }\r\n      return bestKey;\r\n    };\r\n\r\n    const onTick = () => {\r\n      raf = 0;\r\n      const curr = scroller.scrollTop || 0;\r\n      const dir: 'up' | 'down' = curr < lastScrollTopRef.current ? 'up'\r\n                            : curr > lastScrollTopRef.current ? 'down'\r\n                            : lastScrollDirRef.current;\r\n      lastScrollDirRef.current = dir;\r\n      lastScrollTopRef.current = curr;\r\n\r\n      const anyVisibleOther = Boolean(pickCandidate());\r\n      if (anyVisibleOther) {\r\n        const neighbor = clampAdjacentKey(dir) ?? pickCandidate();\r\n        if (neighbor && pendingKey !== neighbor) {\r\n          pendingKey = neighbor;\r\n          if (dwellTimer) window.clearTimeout(dwellTimer);\r\n          dwellTimer = window.setTimeout(() => {\r\n            exitTargetKeyRef.current = neighbor; // lock to adjacent pane\r\n            setFocusedProjectKey(null);          // triggers robust exit\r\n          }, VIS_DWELL_MS);\r\n        }\r\n      } else {\r\n        pendingKey = null;\r\n        if (dwellTimer) {\r\n          window.clearTimeout(dwellTimer);\r\n          dwellTimer = null;\r\n        }\r\n      }\r\n    };\r\n\r\n    const onScroll = () => { if (!raf) raf = requestAnimationFrame(onTick); };\r\n\r\n    scroller.addEventListener('scroll', onScroll, { passive: true });\r\n    onScroll(); // prime once\r\n\r\n    return () => {\r\n      scroller.removeEventListener('scroll', onScroll as any);\r\n      if (raf) cancelAnimationFrame(raf);\r\n      if (dwellTimer) window.clearTimeout(dwellTimer);\r\n    };\r\n  }, [focusedProjectKey, projects, scrollContainerRef, setFocusedProjectKey]);\r\n\r\n  /* ===========================\r\n     Focus EXIT choreography (robust)\r\n     - Tween to adjacent pane (soft), cancel inertia first\r\n     - Re-anchor after the old focused block collapses (hard)\r\n     =========================== */\r\n  useEffect(() => {\r\n    const container = scrollContainerRef.current;\r\n    if (!container) return;\r\n\r\n    // Only act when we EXIT focus (focusedProjectKey === null)\r\n    if (focusedProjectKey) return;\r\n\r\n    const preferredKey = exitTargetKeyRef.current || lastFocusedKeyRef.current;\r\n    if (!preferredKey) return;\r\n\r\n    const scroller = scrollContainerRef.current ?? (document.scrollingElement as any);\r\n\r\n    // Prevent native snap fighting us during the handoff\r\n    container.classList.add('no-snap');\r\n\r\n    // Tell panes which key is exiting (kept for existing listeners)\r\n    document.dispatchEvent(new CustomEvent('focus-exit-start', { detail: { key: preferredKey } }));\r\n\r\n    // 1) Tween to the intended neighbor after killing inertia\r\n    const cancelTween = animatePlaceToKey(preferredKey, 260);\r\n\r\n    // 2) Re-anchor once the old focused block actually shrinks (details unmount)\r\n    const oldKey = lastFocusedKeyRef.current;\r\n    const oldEl = oldKey\r\n      ? (projectRefs.current[oldKey] ??\r\n         (document.getElementById(`block-${oldKey}`) as HTMLDivElement | null))\r\n      : null;\r\n\r\n    let ro: ResizeObserver | null = null;\r\n    if (oldEl && typeof ResizeObserver !== 'undefined') {\r\n      let prevH = oldEl.offsetHeight || 0;\r\n      ro = new ResizeObserver(() => {\r\n        const h = oldEl.offsetHeight || 0;\r\n        // height dropped => layout shifted; re-anchor once\r\n        if (h < prevH - 8) {\r\n          hardPlaceAtKey(preferredKey);\r\n          ro?.disconnect();\r\n          ro = null;\r\n        }\r\n        prevH = h;\r\n      });\r\n      ro.observe(oldEl);\r\n    }\r\n\r\n    // 3) Small dwell, then unlock + gently re-enable snapping (proximity ramp)\r\n    const unlockTimer = setTimeout(() => {\r\n      document.dispatchEvent(new CustomEvent('focus-exit-unlock', { detail: { key: preferredKey } }));\r\n\r\n      requestAnimationFrame(() => {\r\n        container.classList.add('snap-proximity');\r\n        container.classList.remove('no-snap');\r\n        const ramp = setTimeout(() => container.classList.remove('snap-proximity'), SNAP_RAMP_MS);\r\n        cleanupFns.push(() => clearTimeout(ramp));\r\n      });\r\n\r\n      // Clear the used target\r\n      exitTargetKeyRef.current = null;\r\n    }, MIN_LINGER_MS);\r\n\r\n    // Fallback re-anchor in case RO is not available / missed (covers EXIT_DELAY_MS + fade)\r\n    const postTimer = setTimeout(() => hardPlaceAtKey(preferredKey), 900);\r\n\r\n    const cleanupFns: Array<() => void> = [\r\n      () => typeof cancelTween === 'function' && cancelTween(),\r\n      () => clearTimeout(unlockTimer),\r\n      () => clearTimeout(postTimer),\r\n      () => ro?.disconnect?.(),\r\n    ];\r\n\r\n    return () => {\r\n      cleanupFns.forEach(fn => fn());\r\n    };\r\n  }, [focusedProjectKey, scrollContainerRef]);\r\n\r\n  /* ===========================\r\n     Edge signalling only (no cancel, no programmatic scroll)\r\n     (rebinding-safe version so it survives DOM swaps)\r\n     =========================== */\r\n  useEffect(() => {\r\n    const scrollContainer = scrollContainerRef.current;\r\n    if (!scrollContainer) return;\r\n\r\n    let attachedEl: HTMLElement | null = null;\r\n\r\n    const atTop = (el: HTMLElement) => el.scrollTop <= 0;\r\n    const atBottom = (el: HTMLElement) => {\r\n      // give ourselves a little room for sticky footers/safe-area/subpixel rounding\r\n      const EPS = Math.max(8, Math.ceil((window.devicePixelRatio || 1) * 12));\r\n      const max = (el.scrollHeight - el.clientHeight);\r\n      return (max - el.scrollTop) <= EPS;\r\n    };\r\n\r\n    const fireSyntheticDrag = (\r\n      phase: 'start' | 'move' | 'end',\r\n      direction: 'up' | 'down',\r\n      magnitude: number,\r\n      source: 'touch' | 'wheel',\r\n      velocity?: number\r\n    ) => {\r\n      const evt = new CustomEvent('synthetic-drag', {\r\n        detail: { phase, direction, magnitude, velocity, source, ts: performance.now() },\r\n        bubbles: true,\r\n        composed: true,\r\n      });\r\n      scrollContainer.dispatchEvent(evt);\r\n    };\r\n\r\n    let lastY = 0;\r\n    let lastTs = 0;\r\n\r\n    const handleTouchStart = (e: TouchEvent) => {\r\n      if (!attachedEl) return;\r\n      if (e.touches.length === 1) {\r\n        lastY = e.touches[0].clientY;\r\n        lastTs = performance.now();\r\n        fireSyntheticDrag('start', 'down', 0, 'touch');\r\n      }\r\n    };\r\n\r\n    const handleTouchMove = (e: TouchEvent) => {\r\n      if (!attachedEl) return;\r\n      if (e.touches.length !== 1) return;\r\n      const y = e.touches[0].clientY;\r\n      const dy = y - lastY; // >0 down, <0 up\r\n      const now = performance.now();\r\n      const dt = Math.max(1, now - lastTs);\r\n      const velocity = Math.abs(dy) / dt;\r\n      lastY = y;\r\n      lastTs = now;\r\n\r\n      if ((dy > 0 && atTop(attachedEl)) || (dy < 0 && atBottom(attachedEl))) {\r\n        fireSyntheticDrag('move', dy < 0 ? 'down' : 'up', Math.min(600, Math.abs(dy)), 'touch', velocity);\r\n      }\r\n    };\r\n\r\n    const handleTouchEnd = () => {\r\n      fireSyntheticDrag('end', 'down', 0, 'touch');\r\n    };\r\n\r\n    const handleWheel = (e: WheelEvent) => {\r\n      if (!attachedEl) return;\r\n      const { deltaY } = e;\r\n      const top = atTop(attachedEl);\r\n      const bottom = atBottom(attachedEl);\r\n      if ((deltaY < 0 && top) || (deltaY > 0 && bottom)) {\r\n        fireSyntheticDrag('move', deltaY > 0 ? 'down' : 'up', Math.min(600, Math.abs(deltaY)), 'wheel');\r\n      }\r\n    };\r\n\r\n    const cleanupFrom = (el: HTMLElement | null) => {\r\n      if (!el) return;\r\n      el.removeEventListener('touchstart', handleTouchStart as any);\r\n      el.removeEventListener('touchmove', handleTouchMove as any);\r\n      el.removeEventListener('touchend', handleTouchEnd as any);\r\n      el.removeEventListener('wheel', handleWheel as any);\r\n    };\r\n\r\n    const maybeAttach = () => {\r\n      const el = document.querySelector('.embedded-app') as HTMLElement | null;\r\n      if (!el || el === attachedEl) return;\r\n      cleanupFrom(attachedEl);\r\n      attachedEl = el;\r\n      attachedEl.addEventListener('touchstart', handleTouchStart, { passive: true });\r\n      attachedEl.addEventListener('touchmove', handleTouchMove, { passive: true });\r\n      attachedEl.addEventListener('touchend', handleTouchEnd, { passive: true });\r\n      attachedEl.addEventListener('wheel', handleWheel, { passive: true });\r\n    };\r\n\r\n    const mo = new MutationObserver(maybeAttach);\r\n    mo.observe(document.body, { childList: true, subtree: true });\r\n    maybeAttach();\r\n\r\n    return () => {\r\n      mo.disconnect();\r\n      cleanupFrom(attachedEl);\r\n      attachedEl = null;\r\n    };\r\n  }, [scrollContainerRef, focusedProjectKey]);\r\n\r\n  const blockIds = useMemo(() => projects.map(p => `#block-${p.key}`), [projects]);\r\n\r\n  // Example consumer  left in place to react to synthetic-drag if you want\r\n  useEffect(() => {\r\n    const el = scrollContainerRef.current;\r\n    if (!el) return;\r\n    const onSynthetic = (_e: Event) => {};\r\n    el.addEventListener('synthetic-drag', onSynthetic as EventListener);\r\n    return () => el.removeEventListener('synthetic-drag', onSynthetic as EventListener);\r\n  }, [scrollContainerRef]);\r\n\r\n  return (\r\n    <div\r\n      ref={scrollContainerRef}\r\n      className=\"SnappyScrollThingy\"\r\n      style={{\r\n        overflowY: 'scroll',\r\n        // STRONG snap whenever not focused; focus mode disables via inline/logic above.\r\n        scrollSnapType: focusedProjectKey ? 'none' : 'y mandatory',\r\n        scrollBehavior: 'smooth',\r\n        scrollbarWidth: 'none',\r\n        msOverflowStyle: 'none',\r\n      }}\r\n    >\r\n      <style>{`\r\n        .SnappyScrollThingy::-webkit-scrollbar { display: none; }\r\n        /* Allow native edge handoff */\r\n        .SnappyScrollThingy { overscroll-behavior: auto; }\r\n        .embedded-app { touch-action: pan-y; overscroll-behavior: auto; }\r\n\r\n        /* Snap control helpers */\r\n        .SnappyScrollThingy.no-snap { scroll-snap-type: none !important; }\r\n        .SnappyScrollThingy.snap-proximity { scroll-snap-type: y proximity !important; }\r\n      `}</style>\r\n\r\n      {projects.map((item, idx) => {\r\n        const isFocused = focusedProjectKey === item.key;\r\n        return (\r\n          <ProjectPane\r\n            key={item.key}\r\n            item={item}\r\n            isFocused={isFocused}\r\n            isFirst={idx === 0}\r\n            setRef={(el) => { projectRefs.current[item.key] = el; }}\r\n          />\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ScrollController;\r\n","// title-context.tsx\r\nimport React, { createContext, useContext, useState } from 'react';\r\n\r\nexport const TitleContext = createContext<{\r\n  activeTitle: string;\r\n  setActiveTitle: (t: string) => void;\r\n}>({ activeTitle: '', setActiveTitle: () => {} });\r\n\r\nexport const TitleProvider = ({ children }) => {\r\n  const [activeTitle, setActiveTitle] = useState('');\r\n  return (\r\n    <TitleContext.Provider value={{ activeTitle, setActiveTitle }}>\r\n      {children}\r\n    </TitleContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useActiveTitle = () => useContext(TitleContext);\r\n","import { useEffect, useRef } from 'react';\r\nimport { baseProjects } from '../content-utility/component-loader';\r\nimport { useActiveTitle } from './title-context';\r\nimport { useSsrData } from '../context-providers/ssr-data-context';\r\nimport { seededShuffle } from '../seed';\r\nimport { useProjectVisibility } from '../context-providers/project-context';\r\n\r\nconst TitleObserver = () => {\r\n  const { setActiveTitle } = useActiveTitle();\r\n  const { focusedProjectKey } = useProjectVisibility();\r\n  const { seed = 12345 } = useSsrData() || {};\r\n\r\n  // Stable order for this session\r\n  const projectsRef = useRef(seededShuffle(baseProjects, seed));\r\n  const lastTitleRef = useRef<string | null>(null);\r\n  const observerRef = useRef<IntersectionObserver | null>(null);\r\n  const moRef = useRef<MutationObserver | null>(null);\r\n\r\n  // Helper: pick the element whose center is closest to viewport center\r\n  const pickCenteredNow = () => {\r\n    // While focused, never mutate the title from visibility.\r\n    if (focusedProjectKey) return;\r\n\r\n    const vh = window.innerHeight || document.documentElement.clientHeight || 0;\r\n    const viewportCenter = vh * 0.5;\r\n\r\n    let bestTitle: string | null = null;\r\n    let bestDist = Infinity;\r\n\r\n    for (const p of projectsRef.current) {\r\n      const el = document.getElementById(`block-${p.key}`);\r\n      if (!el || el.style.display === 'none') continue;\r\n\r\n      const r = el.getBoundingClientRect();\r\n      if (r.bottom <= 0 || r.top >= vh) continue;\r\n\r\n      const center = r.top + r.height / 2;\r\n      const dist = Math.abs(center - viewportCenter);\r\n      if (dist < bestDist) {\r\n        bestDist = dist;\r\n        bestTitle = p.title;\r\n      }\r\n    }\r\n\r\n    if (bestTitle && bestTitle !== lastTitleRef.current) {\r\n      lastTitleRef.current = bestTitle;\r\n      setActiveTitle(bestTitle);\r\n    }\r\n  };\r\n\r\n  // Build observer once\r\n  useEffect(() => {\r\n    const io = new IntersectionObserver(\r\n      () => {\r\n        if (focusedProjectKey) return; // ignore while focused\r\n        requestAnimationFrame(pickCenteredNow);\r\n      },\r\n      { threshold: [0, 0.25, 0.5, 0.75, 1] }\r\n    );\r\n    observerRef.current = io;\r\n\r\n    // Observe all blocks that exist (will keep observing through display:none)\r\n    for (const p of projectsRef.current) {\r\n      const el = document.getElementById(`block-${p.key}`);\r\n      if (el) io.observe(el);\r\n    }\r\n\r\n    // Also react to late-mounted blocks\r\n    const mo = new MutationObserver(() => {\r\n      const cur = observerRef.current;\r\n      if (!cur) return;\r\n      for (const p of projectsRef.current) {\r\n        const el = document.getElementById(`block-${p.key}`);\r\n        if (el) cur.observe(el);\r\n      }\r\n    });\r\n    mo.observe(document.body, { childList: true, subtree: true });\r\n    moRef.current = mo;\r\n\r\n    // Initial pick\r\n    requestAnimationFrame(pickCenteredNow);\r\n\r\n    return () => {\r\n      io.disconnect();\r\n      mo.disconnect();\r\n      observerRef.current = null;\r\n      moRef.current = null;\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []); // once per mount\r\n\r\n  // NEW: Freeze title on focus & pause the observer; resume on unfocus\r\n  useEffect(() => {\r\n    const io = observerRef.current;\r\n\r\n    if (focusedProjectKey) {\r\n      // 1) Set title to the focused project's title exactly once on enter\r\n      const focused = projectsRef.current.find(p => p.key === focusedProjectKey);\r\n      if (focused && focused.title !== lastTitleRef.current) {\r\n        lastTitleRef.current = focused.title;\r\n        setActiveTitle(focused.title);\r\n      }\r\n      // 2) Pause the observer work during focus\r\n      io?.disconnect();\r\n    } else {\r\n      // Resubscribe and immediately pick based on visibility when leaving focus\r\n      if (io) {\r\n        for (const p of projectsRef.current) {\r\n          const el = document.getElementById(`block-${p.key}`);\r\n          if (el) io.observe(el);\r\n        }\r\n      }\r\n      requestAnimationFrame(pickCenteredNow);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [focusedProjectKey, setActiveTitle]);\r\n\r\n  return null;\r\n};\r\n\r\nexport default TitleObserver;\r\n","// src/utils/title/view-project-cta.tsx\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport lottie from '../../utils/load-lottie';\r\nimport arrowData from '../../svg/arrow.json';\r\nimport linkData from '../../svg/link.json';\r\n\r\n// Minimal shape for what we use from Lottie\r\ntype AnimationItemLike = {\r\n  goToAndStop: (value: number, isFrame?: boolean) => void;\r\n  playSegments: (segments: [number, number] | number[], forceFlag?: boolean) => void;\r\n  addEventListener: (name: string, cb: () => void) => void;\r\n  removeEventListener: (name: string, cb: () => void) => void;\r\n  destroy: () => void;\r\n};\r\n\r\ntype BaseProps = {\r\n  displayTitle: string;\r\n  isLink?: boolean;\r\n  currentKey?: string;\r\n  focusedProjectKey: string | null;\r\n  setFocusedProjectKey: (k: string | null) => void;\r\n  showBackground: boolean;\r\n  backgroundColor: string;\r\n  onHover: (v: boolean) => void;\r\n};\r\n\r\ntype Variant = 'title-icon' | 'icon-title';\r\n\r\n/* --------------------------\r\n   Hook: arrow/link animation\r\n   -------------------------- */\r\nfunction useArrowLottie(\r\n  displayTitle: string,\r\n  isLink: boolean | undefined,\r\n  container: React.RefObject<HTMLDivElement>\r\n) {\r\n  const animRef = useRef<AnimationItemLike | null>(null);\r\n  const lastTitleRef = useRef<string | null>(null);\r\n\r\n  // Mount: load + play once\r\n  useEffect(() => {\r\n    const el = container.current;\r\n    if (!el) return;\r\n\r\n    let mounted = true;\r\n\r\n    (async () => {\r\n      const animationData = isLink ? linkData : arrowData;\r\n\r\n      const anim = await lottie.loadAnimation({\r\n        container: el,\r\n        renderer: 'svg',\r\n        loop: false,\r\n        autoplay: false,\r\n        animationData,\r\n      });\r\n\r\n      if (!mounted) return;\r\n      animRef.current = anim;\r\n\r\n      // add CSS hook\r\n      const onDomLoaded = () => {\r\n        const svg = el.querySelector('svg');\r\n        if (svg) svg.classList.add('arrow-svg');\r\n      };\r\n      anim.addEventListener('DOMLoaded', onDomLoaded);\r\n\r\n      //  Play full [0  40] on first load\r\n      anim.goToAndStop(0, true);\r\n      anim.playSegments([0, 40], true);\r\n\r\n      lastTitleRef.current = displayTitle;\r\n\r\n      return () => {\r\n        anim.removeEventListener('DOMLoaded', onDomLoaded);\r\n      };\r\n    })();\r\n\r\n    return () => {\r\n      mounted = false;\r\n      animRef.current?.destroy();\r\n      animRef.current = null;\r\n    };\r\n  }, [container, isLink]);\r\n\r\n  // On title change: play [40  90]\r\n  useEffect(() => {\r\n    if (!animRef.current) return;\r\n    if (lastTitleRef.current !== displayTitle) {\r\n      animRef.current.goToAndStop(40, true);\r\n      animRef.current.playSegments([40, 90], true);\r\n      lastTitleRef.current = displayTitle;\r\n    }\r\n  }, [displayTitle]);\r\n}\r\n\r\n/* --------------------------\r\n   Base Project Button\r\n   -------------------------- */\r\nfunction BaseProjectButton({\r\n  displayTitle,\r\n  isLink,\r\n  currentKey,\r\n  focusedProjectKey,\r\n  setFocusedProjectKey,\r\n  showBackground,\r\n  backgroundColor,\r\n  onHover,\r\n  variant,\r\n}: BaseProps & { variant: Variant }) {\r\n  const arrowContainer = useRef<HTMLDivElement>(null);\r\n  const isFocused = focusedProjectKey === currentKey;\r\n\r\n  // optional: short-lived class for styling the swipe/toggle moment\r\n  const [isSwiping, setIsSwiping] = useState(false);\r\n\r\n  // Lottie hook\r\n  useArrowLottie(displayTitle, isLink, arrowContainer);\r\n\r\n  const handleToggleOpen = () => {\r\n    if (!currentKey) return;\r\n\r\n    // flip focus\r\n    const next = focusedProjectKey === currentKey ? null : currentKey;\r\n    setFocusedProjectKey(next);\r\n\r\n    // give you a brief CSS hook to style the transition\r\n    setIsSwiping(true);\r\n    const t = window.setTimeout(() => setIsSwiping(false), 900);\r\n\r\n    if (next) {\r\n      requestAnimationFrame(() => {\r\n        const el = document.getElementById(`block-${next}`);\r\n        el?.scrollIntoView({ block: 'start', behavior: 'smooth' });\r\n      });\r\n    }\r\n\r\n    // cleanup in case of rapid unmount\r\n    return () => window.clearTimeout(t);\r\n  };\r\n\r\n  const Element: any = isLink ? 'a' : 'button';\r\n  const sharedProps = {\r\n    className: [\r\n      'view-project-btn',\r\n      !showBackground ? 'no-bg' : '',\r\n      isFocused ? 'is-focused' : '',\r\n      isSwiping ? 'is-swiping' : '',\r\n    ]\r\n      .filter(Boolean)\r\n      .join(' '),\r\n    onMouseEnter: () => onHover(true),\r\n    onMouseLeave: () => onHover(false),\r\n    'data-project-key': currentKey ?? undefined,\r\n    'aria-pressed': currentKey ? focusedProjectKey === currentKey : undefined,\r\n    ...(isLink\r\n      ? { href: '/dynamic-theme', target: '_blank', rel: 'noopener noreferrer' }\r\n      : { onClick: handleToggleOpen }),\r\n  };\r\n\r\n  const TitleEl = (\r\n    <h2 className=\"project-view\" style={{ position: 'relative', zIndex: 1 }}>\r\n      {displayTitle}\r\n    </h2>\r\n  );\r\n\r\n  const IconEl = (\r\n    <div\r\n      ref={arrowContainer}\r\n      className=\"view-project-arrow\"\r\n      style={{ position: 'relative', zIndex: 1 }}\r\n    />\r\n  );\r\n\r\n  return (\r\n    <Element {...sharedProps}>\r\n      <div\r\n        className={`view-project-background ${!showBackground ? 'no-bg' : ''}`}\r\n        style={{\r\n          backgroundColor,\r\n          position: 'absolute',\r\n          inset: 0,\r\n          borderRadius: 'inherit',\r\n          zIndex: 0,\r\n        }}\r\n      />\r\n      {variant === 'icon-title' ? (\r\n        <>\r\n          {IconEl}\r\n          {TitleEl}\r\n        </>\r\n      ) : (\r\n        <>\r\n          {TitleEl}\r\n          {IconEl}\r\n        </>\r\n      )}\r\n    </Element>\r\n  );\r\n}\r\n\r\n/* --------------------------\r\n   Public Variants\r\n   -------------------------- */\r\nexport function ProjectButtonTitleIcon(props: BaseProps) {\r\n  return <BaseProjectButton {...props} variant=\"title-icon\" />;\r\n}\r\n\r\nexport function ProjectButtonIconTitle(props: BaseProps) {\r\n  return <BaseProjectButton {...props} variant=\"icon-title\" />;\r\n}\r\n","// src/utils/title/view-project.tsx\r\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\r\n\r\nimport { useActiveTitle } from './title-context';\r\nimport { baseProjects } from '../content-utility/component-loader';\r\nimport { projectColors } from '../content-utility/color-map';\r\nimport { useSsrData } from '../context-providers/ssr-data-context';\r\nimport { seededShuffle } from '../seed';\r\n\r\nimport TitleObserver from './title-observer';\r\nimport { useProjectVisibility } from '../context-providers/project-context';\r\n\r\nimport {\r\n  ProjectButtonTitleIcon,\r\n  ProjectButtonIconTitle,\r\n} from './view-project-cta';\r\n\r\nconst ViewProject = () => {\r\n  const { activeTitle } = useActiveTitle();\r\n  const { seed = 12345 } = useSsrData() || {};\r\n  const projects = useMemo(() => seededShuffle(baseProjects, seed), [seed]);\r\n\r\n  const { focusedProjectKey, setFocusedProjectKey } = useProjectVisibility();\r\n\r\n  const focusedProject = useMemo(\r\n    () => projects.find(p => p.key === focusedProjectKey!),\r\n    [projects, focusedProjectKey]\r\n  );\r\n\r\n  // Freeze the title (and everything derived from it) when focused\r\n  const displayTitle = focusedProjectKey ? (focusedProject?.title ?? activeTitle) : activeTitle;\r\n\r\n  const currentProject = useMemo(\r\n    () => projects.find((p) => p.title === displayTitle),\r\n    [projects, displayTitle]\r\n  );\r\n  const isLink = currentProject?.isLink;\r\n  const currentKey = currentProject?.key;\r\n\r\n  // background fade logic\r\n  const [hovered, _setHovered] = useState(false);\r\n  const hoveredRef = useRef(false);\r\n  const [showBackground, setShowBackground] = useState(true);\r\n  const hideTimeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null);\r\n\r\n  // single place to schedule/clear hides respecting hover\r\n  const scheduleHide = (delay = 1500) => {\r\n    if (hideTimeoutRef.current) clearTimeout(hideTimeoutRef.current);\r\n    hideTimeoutRef.current = setTimeout(() => {\r\n      // Do not hide while hovered\r\n      if (!hoveredRef.current) setShowBackground(false);\r\n    }, delay);\r\n  };\r\n\r\n  const clearHide = () => {\r\n    if (hideTimeoutRef.current) {\r\n      clearTimeout(hideTimeoutRef.current);\r\n      hideTimeoutRef.current = null;\r\n    }\r\n  };\r\n\r\n  const setHovered = (v: boolean) => {\r\n    hoveredRef.current = v;\r\n    _setHovered(v);\r\n    if (v) {\r\n      // while hovered: keep bg on and cancel any pending hide\r\n      clearHide();\r\n      setShowBackground(true);\r\n    } else {\r\n      // when leaving: allow it to hide after a short delay\r\n      scheduleHide(1500);\r\n    }\r\n  };\r\n\r\n  // on title change: flash bg on, then hide later ONLY if not hovered\r\n  const lastTitleRef = useRef(displayTitle);\r\n  useEffect(() => {\r\n    if (lastTitleRef.current !== displayTitle) {\r\n      lastTitleRef.current = displayTitle;\r\n      setShowBackground(true);\r\n      // only schedule a hide if not hovered\r\n      if (!hoveredRef.current) scheduleHide(1500);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [displayTitle]);\r\n\r\n  // light bring it back when user interacts near bottom  but don't hide if hovered\r\n  useEffect(() => {\r\n    const handleMouseMove = (e: MouseEvent) => {\r\n      const viewportH = window.innerHeight || document.documentElement.clientHeight;\r\n      if (e.clientY >= viewportH * 0.65) {\r\n        setShowBackground(true);\r\n        if (!hoveredRef.current) scheduleHide(1500);\r\n      }\r\n    };\r\n    const handleTouch = () => {\r\n      setShowBackground(true);\r\n      if (!hoveredRef.current) scheduleHide(1500);\r\n    };\r\n\r\n    window.addEventListener('mousemove', handleMouseMove);\r\n    window.addEventListener('touchstart', handleTouch, { passive: true });\r\n    window.addEventListener('touchmove', handleTouch, { passive: true });\r\n\r\n    return () => {\r\n      window.removeEventListener('mousemove', handleMouseMove);\r\n      window.removeEventListener('touchstart', handleTouch);\r\n      window.removeEventListener('touchmove', handleTouch);\r\n      clearHide();\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  // compute background color (hovered = higher alpha)\r\n  const backgroundColor = useMemo(() => {\r\n    const colorInfo = projectColors[displayTitle];\r\n    if (!colorInfo) return 'rgba(240, 240, 240, 0.5)';\r\n    const alpha = hovered ? 1 : (colorInfo.defaultAlpha ?? 0.8);\r\n    return `rgba(${colorInfo.rgb}, ${alpha})`;\r\n  }, [displayTitle, hovered]);\r\n\r\n  // choose variant based on focus state\r\n  const ButtonComp = focusedProjectKey ? ProjectButtonIconTitle : ProjectButtonTitleIcon;\r\n\r\n  return (\r\n    <div className=\"view-project-wrapper\">\r\n      {/* Dont observe while focused, so title stays frozen */}\r\n      {!focusedProjectKey && <TitleObserver />}\r\n\r\n      <ButtonComp\r\n        displayTitle={displayTitle}\r\n        isLink={isLink}\r\n        currentKey={currentKey}\r\n        focusedProjectKey={focusedProjectKey}\r\n        setFocusedProjectKey={setFocusedProjectKey}\r\n        showBackground={showBackground}\r\n        backgroundColor={backgroundColor}\r\n        onHover={setHovered}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ViewProject;\r\n"],"names":["useEffect","loadable","ViewProject","TitleProvider","ScrollController","ProjectVisibilityProvider","jsx","_jsx","jsxs","_jsxs","NavMenu","resolved","chunkName","isReady","props","key","resolve","__webpack_modules__","importAsync","requireAsync","then","requireSync","id","__webpack_require__","eval","require","resolveWeak","ssr","fallback","Frontpage","root","document","getElementById","requestAnimationFrame","removeAttribute","isAllowZoomTarget","ev","el","target","closest","Boolean","preventPinchZoom","event","tag","tagName","toLowerCase","touches","length","preventDefault","preventGesture","e","addEventListener","passive","removeEventListener","children","className","style","position","projectColors","rgb","tooltipAlpha","defaultAlpha","darkThemeTop","useRef","useState","Fragment","_Fragment","EventMount","load","active","componentProps","fadeMs","Comp","setComp","visible","setVisible","loadingRef","current","mod","default","alive","opacity","transition","undefined","willChange","Suspense","hasWindow","window","hasRIC","hasCIC","ric","cb","opts","requestIdleCallback","setTimeout","timeout","cic","cancelIdleCallback","clearTimeout","LazyInView","serverRender","eager","allowIdle","observeTargetId","rootMargin","threshold","placeholderMinHeight","debugLabel","isServer","initialVisible","isVisible","setIsVisible","Component","setComponent","selfRef","idleId","IntersectionObserver","io","entry","vis","isIntersecting","ratio","intersectionRatio","console","log","disconnect","observe","cancelled","content","ref","width","height","minHeight","lazy","LazyViewMount","mountMode","enterThreshold","exitThreshold","unmountDelayMs","preloadOnIdle","preloadIdleTimeout","preloadOnFirstIO","fadeEasing","mountedRef","isMounted","setIsMounted","unmountTimer","fadeTimer","preloadPromiseRef","lastRatio","lastIntersecting","firstIOSeen","ensurePreloaded","clearTimers","mountNow","p","prev","unmountSoon","enter","Math","max","min","exit","thresholds","Array","from","Set","sort","a","b","intersecting","crossedEnter","crossedExit","becameIntersecting","leftIntersecting","CompAny","React","createContext","useContext","ProjectVisibilityContext","activeProject","setActiveProject","blockGClick","setBlockGClick","currentIndex","setCurrentIndex","isDragging","setIsDragging","focusedProjectKey","setFocusedProjectKey","previousScrollY","setPreviousScrollY","scrollContainerRef","alignFnRef","requestViewportAlign","useCallback","args","registerViewportAlign","fn","Provider","value","useProjectVisibility","context","Error","LoadingScreen","useProjectLoader","useSsrData","ssrRegistry","caseStudyLoaders","rotary","ProjectPane","item","isFocused","setRef","isFirst","payload","preloaded","desc","hasSSR","render","isHydrated","setIsHydrated","data","isDynamic","isGame","usesCustomLoader","fallbackNode","isFullScreen","blockId","rootRef","EXIT_DELAY_MS","FADE_MS","activeDelayed","setActiveDelayed","exitTimerRef","reserveH","setReserveH","detailsHostRef","rafId","h","getBoundingClientRect","release","cleanup","_cleanup","cancelAnimationFrame","isRealMobile","coarse","matchMedia","matches","touch","navigator","maxTouchPoints","vv","visualViewport","gap","innerHeight","baseMin","_","i","entries","mapped","String","scrollSnapAlign","scrollSnapStop","contentVisibility","contain","overflow","title","useMemo","baseProjects","seededShuffle","seed","projectsRef","projects","projectRefs","lastScrollTopRef","lastScrollDirRef","VIS_RATIO_TO_EXIT","VIS_DWELL_MS","MAX_UNLOCK_VH","MIN_LINGER_MS","MAX_LINGER_MS","SNAP_RAMP_MS","SNAP_KB_FALLBACK_MS","UNLOCK_FALLBACK_MS","lastFocusedKeyRef","exitTargetKeyRef","getOffsetTopWithin","scroller","r1","r2","top","st","scrollTop","documentElement","container","classList","add","remove","scrollingElement","targetEl","getViewportH","clientHeight","scrollIntoView","block","behavior","bump","round","scrollBy","left","setScrollTop","scrollTo","hardPlaceAtKey","targetTop","prevBehavior","scrollBehavior","prevOverflow","overflowY","offsetHeight","animatePlaceToKey","ms","startTop","delta","abs","reduce","duration","start","performance","now","easeOutCubic","t","pow","raf","step","y","dwellTimer","pendingKey","focusedIdx","findIndex","clampAdjacentKey","dir","nextIdx","pickCandidate","vh","viewportCenter","bestKey","bestDist","Infinity","r","bottom","center","dist","onTick","curr","anyVisibleOther","neighbor","onScroll","preferredKey","dispatchEvent","CustomEvent","detail","cancelTween","oldKey","oldEl","ro","ResizeObserver","prevH","unlockTimer","ramp","cleanupFns","push","postTimer","forEach","scrollContainer","attachedEl","atTop","atBottom","EPS","ceil","devicePixelRatio","scrollHeight","fireSyntheticDrag","phase","direction","magnitude","source","velocity","evt","ts","bubbles","composed","lastY","lastTs","handleTouchStart","clientY","handleTouchMove","dy","dt","handleTouchEnd","handleWheel","deltaY","cleanupFrom","maybeAttach","querySelector","mo","MutationObserver","body","childList","subtree","blockIds","map","onSynthetic","_e","scrollSnapType","scrollbarWidth","msOverflowStyle","idx","TitleContext","activeTitle","setActiveTitle","useActiveTitle","TitleObserver","lastTitleRef","observerRef","moRef","pickCenteredNow","bestTitle","display","cur","focused","find","lottie","arrowData","linkData","useArrowLottie","displayTitle","isLink","animRef","mounted","animationData","anim","loadAnimation","renderer","loop","autoplay","onDomLoaded","svg","goToAndStop","playSegments","destroy","BaseProjectButton","currentKey","showBackground","backgroundColor","onHover","variant","arrowContainer","isSwiping","setIsSwiping","handleToggleOpen","next","Element","sharedProps","filter","join","onMouseEnter","onMouseLeave","href","rel","onClick","TitleEl","zIndex","IconEl","inset","borderRadius","ProjectButtonTitleIcon","ProjectButtonIconTitle","focusedProject","currentProject","hovered","_setHovered","hoveredRef","setShowBackground","hideTimeoutRef","scheduleHide","delay","clearHide","setHovered","v","handleMouseMove","viewportH","handleTouch","colorInfo","alpha","ButtonComp"],"sourceRoot":""}