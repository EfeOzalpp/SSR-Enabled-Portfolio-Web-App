"use strict";exports.id=179,exports.ids=[179],exports.modules={533:(e,t,o)=>{o.d(t,{h:()=>f});var n=o(2015),r=o(5067);const i={},l={"block-g":["#q5.js Canvas","#Gamification","#Lottie Animation"]},a={"rotary-lamp":"Rotary Lamp","ice-scoop":"Ice Cream Scoop","data-viz":"Data Visualization","block-g":"Evade the Rock",dynamic:"Dynamic App"};let s=null,c="",u=null;const d=()=>{s&&(u&&clearTimeout(u),s.style.opacity="1",s.style.visibility="visible",u=setTimeout(()=>m(),1500))},m=()=>{s&&(u&&clearTimeout(u),s.style.opacity="0",s.style.visibility="hidden",c="")};function p(e,t){if(!s)return;const o=s.getBoundingClientRect(),n=window.innerWidth,r=window.innerHeight,i=t<o.height+0+20,l=t+o.height+0>r-20,a=e+o.width+0>n-20,c=e<o.width+0+20;let u,d;l?(d=t-o.height-0-8,u=e-0*o.width):i?(d=t+0-14,u=e-0*o.width):a?(d=t-o.height/2,u=e-o.width-0-24):c?(d=t-o.height/2,u=e+0-4):(d=t-o.height/1.6,u=e+0-2),u=Math.max(0,Math.min(u,n-o.width-0)),d=Math.max(0,Math.min(d,r-o.height-0)),s.style.left=`${u}px`,s.style.top=`${d}px`}function g(e){if(s)return()=>{};s=function(){const e=document.createElement("div");return e.id="custom-global-tooltip",e.style.position="fixed",e.style.pointerEvents="none",e.style.zIndex="9999",e.style.opacity="0",e.style.visibility="hidden",e.style.backdropFilter="blur(8px)",e.style.color="#fff",e.style.transition="opacity 0.3s ease, visibility 0.3s ease",e.className="custom-tooltip-blur",(document.getElementById("efe-portfolio")||document.body).appendChild(e),e}();let t=-1,n=-1,g=!1,h=null;const f=async e=>{if(!(e instanceof HTMLElement))return void m();const t=[...e.classList].find(e=>e.startsWith("tooltip-"));if(!t)return void m();const n=t.replace("tooltip-","");if(n!==c){c=n;const e=await(async e=>{if(i[e])return i[e];const t=function(e){const t=r.s[a[e]],o=t?.tooltipAlpha??.6;return t?`rgba(${t.rgb}, ${o})`:"rgba(85,95,90,0.6)"}(e);if(l[e]){const o={tags:l[e],backgroundColor:t};return i[e]=o,o}try{const n=(await Promise.resolve().then(o.bind(o,3292))).default,r=await n.fetch('*[_type=="mediaBlock" && slug.current == $key][0]{ tags }',{key:e}),l={tags:r?.tags??[],backgroundColor:t};return i[e]=l,l}catch{const o={tags:[],backgroundColor:t};return i[e]=o,o}})(n);if(!e.tags.length)return void m();s.innerHTML=e.tags.map(e=>`<p class="tooltip-tag">${e}</p>`).join(""),s.style.backgroundColor=e.backgroundColor,d()}else"0"!==s.style.opacity&&"hidden"!==s.style.visibility||d()},y=e=>{t=e.clientX,n=e.clientY,requestAnimationFrame(()=>p(t,n)),f(e.target)},b=()=>{g||(window.requestAnimationFrame(()=>{(()=>{const e=document.elementFromPoint(t,n);f(e),requestAnimationFrame(()=>p(t,n))})(),g=!1}),g=!0),h&&clearTimeout(h),h=setTimeout(()=>{},120)},v=e=>{e.relatedTarget||m()};return e||window.addEventListener("scroll",b,!0),document.addEventListener("mousemove",y,{passive:!0}),document.addEventListener("mouseout",v,{passive:!0}),()=>{s&&(e||window.removeEventListener("scroll",b,!0),document.removeEventListener("mousemove",y),document.removeEventListener("mouseout",v),s.remove(),s=null,u&&clearTimeout(u))}}var h=o(6506);const f=()=>{const e=(0,h.e)();(0,n.useEffect)(()=>{const t=g(e);return()=>t?.()},[e])}},2312:(e,t,o)=>{o.r(t),o.d(t,{default:()=>C});var n=o(2015),r=o(64),i=o(6052),l=o.n(i),a=o(3431),s=o(5140),c=o(533),u=o(9803),d=o(6442);const m=({onStart:e,resetTrigger:t,label:o="Click Here to Play!",ctaEnabled:r=!0,loadingLines:i=["Loading engine…","Creating game canvas…","Configuring frame loop…","Setting up input controls…","Applying display settings…","Initializing game state…","Spawning player…","Almost ready…"]})=>{const[m,p]=(0,n.useState)(!0),[g,h]=(0,n.useState)(!1),f=(0,n.useRef)(null),y=(0,n.useRef)(null),b=(0,n.useRef)(null);(0,c.h)();const{focusedProjectKey:v,scrollContainerRef:w,previousScrollY:k,setPreviousScrollY:T}=(0,s.X)(),A=()=>{r&&(v&&(T(window.scrollY),setTimeout(()=>{w.current?w.current.scrollTo({top:0,behavior:"auto"}):window.scrollTo({top:0,behavior:"auto"})},0)),e?.(),h(!0))};(0,n.useEffect)(()=>{},[]);const S=()=>{b.current?.destroy(),b.current=null};return(0,n.useEffect)(()=>{const e=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting?(f.current&&(b.current?.destroy(),b.current=l().loadAnimation({container:f.current,renderer:"svg",loop:!1,autoplay:!1,animationData:a}),b.current.addEventListener("complete",()=>{b.current&&(b.current.playSegments([41,b.current.totalFrames],!0),b.current.loop=!0)})),b.current&&(b.current.stop(),b.current.playSegments([0,b.current.totalFrames],!0))):S()})},{threshold:.1});return y.current&&e.observe(y.current),()=>{e.disconnect(),S()}},[t]),(0,n.useEffect)(()=>{if(g){const e=setTimeout(()=>p(!1),300);return()=>clearTimeout(e)}},[g]),(0,n.useEffect)(()=>{t&&(p(!0),h(!1))},[t]),m?(0,d.FD)("div",{className:"block-g-onboarding tooltip-block-g",ref:y,"aria-busy":!r,style:{opacity:g?0:1,transition:"opacity 0.3s ease",display:"flex",alignItems:"center"},children:[(0,d.Y)("div",{ref:f,className:"coin",onClick:A,style:{pointerEvents:r?"auto":"none",cursor:r?"pointer":"default"}}),(0,d.Y)("h1",{className:"onboarding-text",onClick:A,"aria-disabled":!r,style:{pointerEvents:r?"auto":"none",cursor:r?"pointer":"default"},children:o}),!r&&(0,d.Y)(u.A,{className:"loading-hub--game loading-hub--left",keyword:"game",minHeight:72,lines:i,ariaLabel:"Loading game"})]}):null};var p=o(3022),g=o(9386),h=o(9619),f=o(6506),y=o(8828),b=o(1426),v=o(605),w=o(9094),k=o(2316),T=o(9524),A=o(7726);const S="game-mode-active";function E(){"undefined"!=typeof document&&document.body.classList.remove(S)}function C({blockId:e}){const t=(0,f.e)(),[i,l]=(0,n.useState)(!1),[a,s]=(0,n.useState)(!1),[c,u]=(0,n.useState)(0),[C,I]=(0,n.useState)(null),[x,L]=(0,n.useState)(!1),[Y,P]=(0,n.useState)(!1),[R,M]=(0,n.useState)(!1),F=(0,n.useRef)(null),[D,H]=(0,n.useState)(null),j=(0,k.t)(),O="number"==typeof j?j:0,B=(0,n.useRef)(null);(0,n.useEffect)(()=>{const e=window.requestIdleCallback;let t=null;return e&&(t=e(()=>{w.nJ.game()},{timeout:2e3})),()=>t&&window.cancelIdleCallback?.(t)},[]);const N=(0,n.useCallback)(async()=>{w.nJ.game(),u(0),H(null),I("lottie"),"undefined"!=typeof document&&document.body.classList.add(S),l(!0),requestAnimationFrame(()=>{const t=document.getElementById(e);t?.focus?.()})},[e]);(0,n.useEffect)(()=>{if("lottie"!==C||!F.current)return;let e,o=!0;return(async()=>{if(e=await r.A.loadAnimation({container:F.current,renderer:"svg",loop:!1,autoplay:!0,animationData:t?b:y}),!o||!e)return;e.addEventListener("complete",()=>I("begin"))})(),()=>{o=!1,e?.destroy?.()}},[C,t]),(0,n.useEffect)(()=>{if("begin"===C){L(!0);const e=setTimeout(()=>{L(!1),I(null)},1e3);return()=>clearTimeout(e)}},[C]),(0,n.useEffect)(()=>{if("lottie"===C)P(!0),M(!0);else if(null===C){P(!1);const e=setTimeout(()=>M(!1),400);return()=>clearTimeout(e)}},[C]);const q=e=>{B.current=e,s(!0)};(0,n.useEffect)(()=>()=>E(),[]);const G=(null==D?c:D)>O?null==D?c:D:O,V=null==D&&c>O;return(0,d.FD)("section",{id:e,tabIndex:-1,className:"block-type-g",style:{position:"relative"},children:[(0,d.Y)(T.A,{active:i,lockBodyScroll:!0,alsoBlockWheel:!0,alsoBlockTouch:!0,allowWhenTyping:!0}),!i&&(0,d.Y)(m,{onStart:N,resetTrigger:i?1:0,label:a?"Click Here to Play!":"Loading Game…",ctaEnabled:a}),!i&&(0,d.Y)(v.A,{load:()=>o.e(775).then(o.bind(o,1775)),fallback:null,mountMode:"io",observeTargetId:e,rootMargin:"0px",enterThreshold:.2,exitThreshold:.05,unmountDelayMs:150,preloadOnIdle:!0,preloadIdleTimeout:2e3,preloadOnFirstIO:!0,placeholderMinHeight:360,componentProps:{onReady:q,onCoinsChange:()=>{},onGameOver:()=>{},highScore:O,pauseWhenHidden:!0,demoMode:!0,overlayActive:!1,allowSpawns:!0}}),i&&(0,d.FD)(A.A,{children:[(0,d.Y)(g.A,{onExit:()=>{l(!1),I(null),u(0),H(null),E()}}),(0,d.Y)(p.A,{coins:c,highScore:G,newHighScore:V}),R&&(0,d.Y)("div",{className:"countdown-bg-overlay "+(Y?"":"hide"),style:{pointerEvents:"none"}}),("lottie"===C||"begin"===C)&&(0,d.Y)("div",{ref:F,id:"lottie-onboarding",className:"countdown-lottie",style:{pointerEvents:"none"}}),(0,d.Y)(h.A,{score:D,highScore:O,onRestart:()=>{I(null),B.current?.restart(),u(0)},onHide:()=>H(null)}),(0,d.Y)(v.A,{load:()=>o.e(775).then(o.bind(o,1775)),fallback:null,mountMode:"io",observeTargetId:"game-viewport-root",rootMargin:"0px",enterThreshold:.01,exitThreshold:0,unmountDelayMs:150,preloadOnIdle:!0,preloadIdleTimeout:2e3,preloadOnFirstIO:!0,placeholderMinHeight:360,componentProps:{onReady:q,onCoinsChange:e=>u(e),onGameOver:e=>H(e),highScore:O,pauseWhenHidden:!0,demoMode:!1,overlayActive:"lottie"===C||"begin"===C,allowSpawns:"begin"===C||null===C}})]})]})}},5067:(e,t,o)=>{o.d(t,{s:()=>n});const n={"Rotary Lamp":{rgb:"204, 85, 41",tooltipAlpha:.6,defaultAlpha:.6,darkThemeTop:"rgba(72, 161, 161, 1)"},"Ice Cream Scoop":{rgb:"234, 103, 97",tooltipAlpha:.6,defaultAlpha:.6,darkThemeTop:"rgba(23, 27, 24, 1)"},"Data Visualization":{rgb:"153, 199, 7",tooltipAlpha:.8,defaultAlpha:.6,darkThemeTop:"rgba(28, 30, 31, 1)"},"Evade the Rock":{rgb:"101, 86, 175",tooltipAlpha:.6,defaultAlpha:.6,darkThemeTop:"rgb(25, 25, 25)"},"Dynamic App":{rgb:"120, 211, 255",tooltipAlpha:.6,defaultAlpha:.6,darkThemeTop:"rgba(17, 17, 17, 1)"}}},5140:(e,t,o)=>{o.d(t,{L:()=>a,X:()=>s});var n=o(2015),r=o.n(n),i=o(6442);const l=(0,n.createContext)(void 0),a=({children:e})=>{const[t,o]=(0,n.useState)(void 0),[a,s]=(0,n.useState)(!1),[c,u]=(0,n.useState)(0),[d,m]=(0,n.useState)(!1),[p,g]=(0,n.useState)(null),[h,f]=(0,n.useState)(null),y=(0,n.useRef)(null),b=(0,n.useRef)(()=>{}),v=r().useCallback(e=>{b.current?.(e)},[]),w=r().useCallback(e=>{b.current=e||(()=>{})},[]);return(0,i.Y)(l.Provider,{value:{activeProject:t,setActiveProject:o,blockGClick:a,setBlockGClick:s,currentIndex:c,setCurrentIndex:u,scrollContainerRef:y,isDragging:d,setIsDragging:m,focusedProjectKey:p,setFocusedProjectKey:g,previousScrollY:h,setPreviousScrollY:f,requestViewportAlign:v,registerViewportAlign:w},children:e})},s=()=>{const e=(0,n.useContext)(l);if(!e)throw new Error("useProjectVisibility must be used within ProjectVisibilityProvider");return e}}};
//# sourceMappingURL=179.server.js.map