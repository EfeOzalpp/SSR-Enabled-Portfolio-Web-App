{"version":3,"file":"640.server.js","mappings":"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","sources":["webpack://personal-site/./src/dynamic-app/components/navigation.jsx","webpack://personal-site/./src/dynamic-app/lib/fetchGallery.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport fetchGallery from '../lib/fetchGallery';\r\nimport { useStyleInjection } from '../../utils/context-providers/style-injector.ts'; \r\nimport navCss from '../../styles/dynamic-app/navigation.css?raw';\r\n\r\nconst Navigation = ({ activeColor, customArrowIcon, customArrowIcon2, isInShadow = false }) => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [lastScrollY, setLastScrollY] = useState(0);\r\n  const [isScrollingUp, setIsScrollingUp] = useState(true);\r\n  const [isScrolled, setIsScrolled] = useState(false);\r\n  const [galleryImages, setGalleryImages] = useState([]);\r\n  const [showScrollHint, setShowScrollHint] = useState(false);\r\n  const [hasShownScrollHint, setHasShownScrollHint] = useState(false);\r\n\r\n  useStyleInjection(navCss, 'dynamic-app-style-nav');\r\n\r\n  const toggleMenu = () => {\r\n    if (isInShadow) return; // no nav in shadow mock\r\n    setIsOpen((prev) => !prev);\r\n  };\r\n  const handleCloseMenu = () => setIsOpen(false);\r\n\r\n  const handleScroll = () => {\r\n    const currentScrollY = window.scrollY;\r\n\r\n    // Always visible if near the top\r\n    if (currentScrollY <= 5) {\r\n      setIsScrollingUp(true);\r\n    } else {\r\n      setIsScrollingUp(currentScrollY < lastScrollY);\r\n    }\r\n\r\n    setIsScrolled(currentScrollY > window.innerHeight * 0.1);\r\n    setLastScrollY(currentScrollY);\r\n  };\r\n\r\n  useEffect(() => {\r\n    window.addEventListener('scroll', handleScroll);\r\n    return () => window.removeEventListener('scroll', handleScroll);\r\n  }, [lastScrollY]);\r\n\r\n  useEffect(() => {\r\n    document.body.classList.toggle('no-scroll', isOpen);\r\n    return () => document.body.classList.remove('no-scroll');\r\n  }, [isOpen]);\r\n\r\n  useEffect(() => {\r\n    const fetchImages = async () => {\r\n      try {\r\n        const images = await fetchGallery();\r\n        setGalleryImages(images);\r\n      } catch (error) {\r\n        console.error('Error fetching gallery images:', error);\r\n      }\r\n    };\r\n    fetchImages();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (window.innerWidth > 1024) {\r\n      const galleryContainer = document.querySelector('.image-container-g');\r\n      const handleHorizontalScroll = (e) => {\r\n        if (galleryContainer) {\r\n          e.preventDefault();\r\n          galleryContainer.scrollLeft += e.deltaY;\r\n        }\r\n      };\r\n      if (galleryContainer) {\r\n        galleryContainer.addEventListener('wheel', handleHorizontalScroll);\r\n      }\r\n      return () => {\r\n        if (galleryContainer) {\r\n          galleryContainer.removeEventListener('wheel', handleHorizontalScroll);\r\n        }\r\n      };\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const gallery = document.querySelector('.image-container-g');\r\n    const scrollIndicator = document.querySelector('.scroll-indicator');\r\n\r\n    if (!gallery || !scrollIndicator) return;\r\n\r\n    const updateScrollIndicator = () => {\r\n      if (window.innerWidth > 1024) {\r\n        const scrollWidth = gallery.scrollWidth - gallery.clientWidth;\r\n        const scrollLeft = gallery.scrollLeft;\r\n        const percentage = scrollWidth > 0 ? Math.max(2, (scrollLeft / scrollWidth) * 100) : 2;\r\n        scrollIndicator.style.setProperty('--progress-dimension', `${percentage}%`);\r\n      } else {\r\n        const scrollHeight = gallery.scrollHeight - gallery.clientHeight;\r\n        const scrollTop = gallery.scrollTop;\r\n        if (scrollHeight > 0) {\r\n          const normalPercentage = 100 - (scrollTop / scrollHeight) * 100;\r\n          const reversedPercentage = Math.min(100, Math.max(2, 100 - normalPercentage));\r\n          scrollIndicator.style.setProperty('--progress-dimension', `${reversedPercentage}%`);\r\n        } else {\r\n          scrollIndicator.style.setProperty('--progress-dimension', '2%');\r\n        }\r\n      }\r\n    };\r\n\r\n    updateScrollIndicator();\r\n    gallery.addEventListener('scroll', updateScrollIndicator);\r\n\r\n    return () => {\r\n      gallery.removeEventListener('scroll', updateScrollIndicator);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (isOpen && !hasShownScrollHint) {\r\n      setShowScrollHint(true);\r\n      const fadeOutTimeout = setTimeout(() => {\r\n        const hintElement = document.querySelector('.scroll-hint');\r\n        if (hintElement) hintElement.style.opacity = '0';\r\n      }, 3000);\r\n      const removeTimeout = setTimeout(() => {\r\n        setShowScrollHint(false);\r\n        setHasShownScrollHint(true);\r\n      }, 4000);\r\n\r\n      return () => {\r\n        clearTimeout(fadeOutTimeout);\r\n        clearTimeout(removeTimeout);\r\n      };\r\n    }\r\n  }, [isOpen, hasShownScrollHint]);\r\n\r\n  const hexToRgba = (hex, alpha = 0.1) => {\r\n    const r = parseInt(hex.slice(1, 3), 16);\r\n    const g = parseInt(hex.slice(3, 5), 16);\r\n    const b = parseInt(hex.slice(5, 7), 16);\r\n    return `rgba(${r}, ${g}, ${b}, ${alpha})`;\r\n  };\r\n\r\n  const adjustBrightness = (hex, multiplier) => {\r\n    let r = parseInt(hex.slice(1, 3), 16);\r\n    let g = parseInt(hex.slice(3, 5), 16);\r\n    let b = parseInt(hex.slice(5, 7), 16);\r\n    r = Math.min(255, Math.max(0, Math.floor(r * multiplier)));\r\n    g = Math.min(255, Math.max(0, Math.floor(g * multiplier)));\r\n    b = Math.min(255, Math.max(0, Math.floor(b * multiplier)));\r\n    return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;\r\n  };\r\n\r\n  const darkenedColor = adjustBrightness(activeColor, 0.55);\r\n  const edgeColor = adjustBrightness(activeColor, 0.8);\r\n\r\n  return (\r\n   <nav className={`navigation ${isScrollingUp ? 'visible' : 'hidden'} ${isInShadow ? 'navigation--shadow' : ''}`}>\r\n      <div\r\n        className={`top-bar-items ${isOpen ? 'menu-open' : ''}`}\r\n        style={{\r\n          background: isOpen\r\n            ? 'transparent'\r\n            : isScrolled\r\n            ? hexToRgba(activeColor, 0.8)\r\n            : 'transparent',\r\n          backdropFilter: isScrolled && !isOpen ? 'blur(5px)' : 'none',\r\n        }}\r\n      >\r\n        <div className=\"site-title\">\r\n          <h-title className=\"title\">\r\n            <a href=\"/\" className=\"homepage-link\">DMI</a>\r\n          </h-title>\r\n        </div>\r\n        <div className=\"menu-icon\" onClick={toggleMenu}>\r\n          <div className={`hamburger ${isOpen ? 'open' : ''}`}></div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className={`menu-item ${isOpen ? 'open' : ''}`}>\r\n        <div className=\"menu-item-1\" onClick={handleCloseMenu}></div>\r\n        <div className=\"menu-item-2\" style={{ '--darkenedColor': darkenedColor, '--darkerColor': edgeColor }}>\r\n          <div className=\"menu-nav\">\r\n            <div className=\"nav-item\">\r\n              <a href=\"/dynamic-theme\" className=\"nav-link\">\r\n                <div className=\"name\"><h4>What is DMI?</h4></div>\r\n                {customArrowIcon2 && (\r\n                  <div className=\"arrow1\" dangerouslySetInnerHTML={{ __html: customArrowIcon2 }} />\r\n                )}\r\n              </a>\r\n            </div>\r\n            <div className=\"nav-item\">\r\n              <a href=\"/dynamic-theme\" className=\"nav-link\">\r\n                <h4>Case Studies</h4>\r\n                {customArrowIcon2 && (\r\n                  <div className=\"arrow1\" dangerouslySetInnerHTML={{ __html: customArrowIcon2 }} />\r\n                )}\r\n              </a>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"gallery-wrapper\">\r\n            <div className=\"scroll-indicator\"></div>\r\n            <div className=\"gallery-container\">\r\n              {showScrollHint && (\r\n                <div className=\"scroll-hint\">\r\n                  <h5>Scroll to explore</h5>\r\n                  <span\r\n                    className=\"arrow2\"\r\n                    dangerouslySetInnerHTML={{ __html: customArrowIcon }}\r\n                  ></span>\r\n                </div>\r\n              )}\r\n              <div className=\"image-container-g\">\r\n                {galleryImages.map((img, index) => (\r\n                  <img\r\n                    key={index}\r\n                    src={img.url}\r\n                    alt={img.alt}\r\n                    draggable=\"false\"\r\n                    className={`gallery-image image-${index}`}\r\n                  />\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default Navigation;\r\n","// Fetch gallery images for the navigation menu\r\nimport sanityClient from '../../utils/sanity';\r\n\r\nconst fetchGallery = async () => {\r\n  const query = `\r\n    *[_type == \"gallery\"]{\r\n      _id,\r\n      images[] {\r\n        image {\r\n          asset-> {\r\n            url\r\n          }\r\n        },\r\n        altText\r\n      }\r\n    }\r\n  `;\r\n\r\n  try {\r\n    const data = await sanityClient.fetch(query);\r\n\r\n    // Flatten and randomize images\r\n    const flattenedImages = data.flatMap((gallery) =>\r\n      gallery.images.map((img, index) => ({\r\n        url: img.image?.asset?.url || '',\r\n        alt: img.altText || 'Default Alt Text',\r\n        cssClass: `gallery-image-${index}`, // Generate unique class names here if needed\r\n      }))\r\n    );\r\n\r\n    const shuffledImages = flattenedImages.sort(() => Math.random() - 0.5);\r\n\r\n    return shuffledImages;\r\n  } catch (error) {\r\n    console.error('Error fetching gallery data:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\nexport default fetchGallery;\r\n"],"names":["Navigation","activeColor","customArrowIcon","customArrowIcon2","isInShadow","isOpen","setIsOpen","useState","lastScrollY","setLastScrollY","isScrollingUp","setIsScrollingUp","isScrolled","setIsScrolled","galleryImages","setGalleryImages","showScrollHint","setShowScrollHint","hasShownScrollHint","setHasShownScrollHint","useStyleInjection","navCss","handleScroll","currentScrollY","window","scrollY","innerHeight","useEffect","addEventListener","removeEventListener","document","body","classList","toggle","remove","async","images","sanityClient","fetch","flatMap","gallery","map","img","index","url","image","asset","alt","altText","cssClass","sort","Math","random","error","console","fetchGallery","fetchImages","innerWidth","galleryContainer","querySelector","handleHorizontalScroll","e","preventDefault","scrollLeft","deltaY","scrollIndicator","updateScrollIndicator","scrollWidth","clientWidth","percentage","max","style","setProperty","scrollHeight","clientHeight","scrollTop","normalPercentage","reversedPercentage","min","fadeOutTimeout","setTimeout","hintElement","opacity","removeTimeout","clearTimeout","adjustBrightness","hex","multiplier","r","parseInt","slice","g","b","floor","toString","padStart","darkenedColor","edgeColor","_jsxs","className","children","background","hexToRgba","alpha","backdropFilter","_jsx","href","onClick","toggleMenu","prev","handleCloseMenu","dangerouslySetInnerHTML","__html","src","draggable"],"sourceRoot":""}