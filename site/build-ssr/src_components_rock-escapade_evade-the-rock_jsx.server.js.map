{"version":3,"file":"src_components_rock-escapade_evade-the-rock_jsx.server.js","mappings":"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","sources":["webpack://personal-site/./src/components/rock-escapade/block-g-coin-counter.tsx","webpack://personal-site/./src/components/rock-escapade/block-g-exit.tsx","webpack://personal-site/./src/components/rock-escapade/block-g-game-over.tsx","webpack://personal-site/./src/components/rock-escapade/block-g-onboarding.tsx","webpack://personal-site/./src/components/rock-escapade/evade-the-rock.jsx","webpack://personal-site/./src/components/rock-escapade/subscribeHighScore.js","webpack://personal-site/./src/components/rock-escapade/updateHighScore.js","webpack://personal-site/./src/utils/content-utility/color-map.ts","webpack://personal-site/./src/utils/content-utility/real-mobile.ts","webpack://personal-site/./src/utils/context-providers/project-context.tsx","webpack://personal-site/./src/utils/tooltip/tooltip.ts","webpack://personal-site/./src/utils/tooltip/tooltipInit.ts"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\r\nimport lottie, { type AnimationItem, type AnimationSegment } from 'lottie-web';\r\nimport coin from '../../svg/coin.json';\r\n\r\ninterface CoinCounterProps {\r\n  coins: number;\r\n  highScore: number;\r\n  newHighScore: boolean;\r\n}\r\n\r\nconst CoinCounter: React.FC<CoinCounterProps> = ({ coins, highScore, newHighScore }) => {\r\n  const coinRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    if (!coinRef.current) return;\r\n\r\n    const anim: AnimationItem = lottie.loadAnimation({\r\n      container: coinRef.current,\r\n      renderer: 'svg',\r\n      loop: false,          // we'll loop manually with segments\r\n      autoplay: false,\r\n      animationData: coin,\r\n    });\r\n\r\n    const onDomLoaded = () => {\r\n      const svg = coinRef.current?.querySelector('svg');\r\n      if (svg) svg.classList.add('coin-lottie');\r\n\r\n      // start the loop once we know totalFrames\r\n      const total = anim.totalFrames;\r\n      const segment: AnimationSegment = [41, total - 1];\r\n\r\n      const loopOnce = () => anim.playSegments(segment, true);\r\n      const onComplete = () => loopOnce();\r\n\r\n      // kick it off and keep looping\r\n      loopOnce();\r\n      anim.addEventListener('complete', onComplete);\r\n\r\n      // store cleanup that knows this handler\r\n      cleanupHandlers.complete = () => anim.removeEventListener('complete', onComplete);\r\n    };\r\n\r\n    // attach, and keep a way to remove it on unmount\r\n    anim.addEventListener('DOMLoaded', onDomLoaded);\r\n\r\n    const cleanupHandlers: { complete?: () => void } = {};\r\n\r\n    return () => {\r\n      cleanupHandlers.complete?.();\r\n      anim.removeEventListener('DOMLoaded', onDomLoaded);\r\n      anim.destroy();\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"coin-counter\">\r\n      <div className=\"coin-count\">\r\n        <div className=\"coin2\" ref={coinRef} />\r\n        <h3 className=\"coin-amount\">{coins}</h3>\r\n      </div>\r\n      <h3\r\n        className=\"high-score\"\r\n        style={{ background: newHighScore ? '#f6c44b38' : '#514068bd' }}\r\n      >\r\n        {newHighScore ? 'New High Score: ' : 'High Score: '}\r\n        {highScore}\r\n      </h3>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CoinCounter;\r\n","import React, { useState, useEffect } from 'react';\r\n\r\nconst ExitButton = ({ onExit }) => {\r\n  const [visible, setVisible] = useState(true);\r\n  const [isFadingOut, setIsFadingOut] = useState(false);\r\n\r\n  const handleClick = () => {\r\n    if (onExit) onExit();\r\n    setIsFadingOut(true);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isFadingOut) {\r\n      const timeout = setTimeout(() => {\r\n        setVisible(false);\r\n      }, 300); // Match CSS transition duration\r\n\r\n      return () => clearTimeout(timeout);\r\n    }\r\n  }, [isFadingOut]);\r\n\r\n  if (!visible) return null;\r\n\r\n  return (\r\n    <div className=\"block-g-exit\"\r\n      onClick={handleClick}\r\n      style={{\r\n        opacity: isFadingOut ? 0 : 1,\r\n        transition: 'opacity 0.3s ease'\r\n    }} ><h4> Exit </h4> </div>\r\n  );\r\n};\r\n\r\nexport default ExitButton;\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport lottie from 'lottie-web';\r\nimport gameOver from '../../svg/gameover.json';\r\nimport highScore from '../../svg/highscore.json';\r\n\r\nconst BlockGGameOver = ({ onRestart, visibleTrigger, coins, newHighScore }) => {\r\n  const [visible, setVisible] = useState(true);\r\n  const [isFadingOut, setIsFadingOut] = useState(false);\r\n  const lottieRef = useRef(null);\r\n\r\n  const handleClick = () => {\r\n    if (onRestart) onRestart();\r\n    setIsFadingOut(true);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isFadingOut) {\r\n      const timeout = setTimeout(() => {\r\n        setVisible(false);\r\n      }, 300);\r\n      return () => clearTimeout(timeout);\r\n    }\r\n  }, [isFadingOut]);\r\n\r\n  useEffect(() => {\r\n    if (visibleTrigger) {\r\n      setVisible(true);\r\n      setIsFadingOut(false);\r\n    }\r\n  }, [visibleTrigger]);\r\n\r\n  useEffect(() => {\r\n    if (!visible) return;\r\n\r\n    const preventScroll = (e) => e.preventDefault();\r\n\r\n    window.addEventListener('wheel', preventScroll, { passive: false });\r\n    window.addEventListener('touchmove', preventScroll, { passive: false });\r\n    window.addEventListener('keydown', preventScroll, { passive: false });\r\n\r\n    document.body.style.overflow = 'hidden';\r\n\r\n    return () => {\r\n      window.removeEventListener('wheel', preventScroll);\r\n      window.removeEventListener('touchmove', preventScroll);\r\n      window.removeEventListener('keydown', preventScroll);\r\n\r\n      document.body.style.overflow = '';\r\n    };\r\n  }, [visible]);\r\n\r\n  useEffect(() => {\r\n    console.log('BlockGGameOver rendered with coins:', coins);\r\n  }, [coins]);\r\n\r\n  useEffect(() => {\r\n    if (!lottieRef.current) return;\r\n\r\n    const anim = lottie.loadAnimation({\r\n      container: lottieRef.current,\r\n      renderer: 'svg',\r\n      loop: newHighScore ? true : false,\r\n      autoplay: true,\r\n      animationData: newHighScore ? highScore : gameOver,\r\n    });\r\n\r\n    return () => {\r\n      anim.destroy();\r\n    };\r\n  }, [newHighScore]);\r\n\r\n  if (!visible) return null;\r\n\r\n  return (\r\n    <div\r\n      className={`block-g-gameover ${isFadingOut ? 'fade-out' : ''}`}\r\n      onClick={handleClick}\r\n    >\r\n      <div ref={lottieRef} className=\"gameover-lottie\" />\r\n      <div className='gameover-text-area'>\r\n        <h1\r\n          className='gameover-text'\r\n          style={{\r\n            color: newHighScore ? 'rgb(255 230 203)' : 'rgb(222 202 250)',\r\n          }}\r\n        >\r\n          {newHighScore ? 'New High Score!' : 'Game Over'}\r\n        </h1>\r\n\r\n        <div style={{ margin: '8px 0' }}></div>\r\n\r\n        <div className=\"gameover-coin-count\">\r\n          <h2 style={{ color: 'rgb(255, 205, 55)' }}>\r\n            {coins} Coins Collected\r\n          </h2>\r\n        </div>\r\n\r\n        <h4 className='gameover-cta'>Click to Play Again</h4>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BlockGGameOver;\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport lottie from 'lottie-web';\r\nimport onboardingAnimation from '../../svg/coin.json';\r\nimport { useProjectVisibility } from '../../utils/context-providers/project-context';\r\nimport { useTooltipInit } from '../../utils/tooltip/tooltipInit';\r\n\r\nconst BlockGOnboarding = ({ onStart, resetTrigger }) => {\r\n  const [visible, setVisible] = useState(true);\r\n  const [isFadingOut, setIsFadingOut] = useState(false);\r\n  const lottieRef = useRef(null);\r\n  const containerRef = useRef(null);\r\n  const lottieInstance = useRef(null);\r\n  useTooltipInit();\r\n  const {\r\n    focusedProjectKey,\r\n    scrollContainerRef,\r\n    previousScrollY,\r\n    setPreviousScrollY,\r\n    setFocusedProjectKey\r\n  } = useProjectVisibility();\r\n\r\n  const handleClick = () => {\r\n    if (focusedProjectKey) {\r\n      setPreviousScrollY(window.scrollY);\r\n\r\n      setTimeout(() => {\r\n        if (scrollContainerRef.current) {\r\n          scrollContainerRef.current.scrollTo({ top: 0, behavior: 'auto' });\r\n        } else {\r\n          window.scrollTo({ top: 0, behavior: 'auto' });\r\n        }\r\n      }, 0);\r\n    }\r\n    \r\n    if (onStart) onStart();\r\n    setIsFadingOut(true);\r\n  };\r\n\r\n  // Restore scroll position when exiting focus mode\r\n  useEffect(() => {\r\n    if (!focusedProjectKey && previousScrollY !== null) {\r\n      window.scrollTo({ top: previousScrollY, behavior: 'auto' });\r\n      setPreviousScrollY(null);\r\n    }\r\n  }, [focusedProjectKey]);\r\n\r\n  const initializeLottie = () => {\r\n    if (lottieRef.current) {\r\n      if (lottieInstance.current) {\r\n        lottieInstance.current.destroy();\r\n      }\r\n\r\n      lottieInstance.current = lottie.loadAnimation({\r\n        container: lottieRef.current,\r\n        renderer: 'svg',\r\n        loop: false,\r\n        autoplay: false,\r\n        animationData: onboardingAnimation,\r\n      });\r\n\r\n      lottieInstance.current.addEventListener('complete', () => {\r\n        lottieInstance.current.playSegments([41, lottieInstance.current.totalFrames], true);\r\n        lottieInstance.current.loop = true;\r\n      });\r\n    }\r\n  };\r\n\r\n  const destroyLottie = () => {\r\n    if (lottieInstance.current) {\r\n      lottieInstance.current.destroy();\r\n      lottieInstance.current = null;\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const observer = new IntersectionObserver(\r\n      (entries) => {\r\n        entries.forEach(entry => {\r\n          if (entry.isIntersecting) {\r\n            initializeLottie();\r\n            if (lottieInstance.current) {\r\n              lottieInstance.current.stop();\r\n              lottieInstance.current.playSegments([0, lottieInstance.current.totalFrames], true);\r\n            }\r\n          } else {\r\n            destroyLottie();\r\n          }\r\n        });\r\n      },\r\n      { threshold: 0.1 }\r\n    );\r\n\r\n    if (containerRef.current) {\r\n      observer.observe(containerRef.current);\r\n    }\r\n\r\n    return () => {\r\n      observer.disconnect();\r\n      destroyLottie();\r\n    };\r\n  }, [resetTrigger]);\r\n\r\n  useEffect(() => {\r\n    if (isFadingOut) {\r\n      const timeout = setTimeout(() => {\r\n        setVisible(false);\r\n      }, 300);\r\n      return () => clearTimeout(timeout);\r\n    }\r\n  }, [isFadingOut]);\r\n\r\n  useEffect(() => {\r\n    if (resetTrigger) {\r\n      setVisible(true);\r\n      setIsFadingOut(false);\r\n    }\r\n  }, [resetTrigger]);\r\n\r\n  if (!visible) return null;\r\n\r\n  return (\r\n    <div\r\n      className=\"block-g-onboarding tooltip-block-g\"\r\n      ref={containerRef}\r\n      style={{\r\n        opacity: isFadingOut ? 0 : 1,\r\n        transition: 'opacity 0.3s ease',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n      }}\r\n    >\r\n      <div\r\n        ref={lottieRef}\r\n        className=\"coin\"\r\n        onClick={handleClick} //  Only clickable here\r\n        style={{ pointerEvents: 'auto' }}\r\n      ></div>\r\n\r\n      <h1\r\n        className=\"onboarding-text\"\r\n        onClick={handleClick} //  And here\r\n        style={{ pointerEvents: 'auto' }}\r\n      >\r\n        Click Here to Play!\r\n      </h1>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BlockGOnboarding;","\r\nimport { useEffect, useRef, useState } from 'react';\r\nimport lottie from 'lottie-web';\r\nimport desktopOnboarding from '../../svg/desktop-onboarding.json';\r\nimport mobileOnboarding from '../../svg/mobile-onboarding.json';\r\n\r\nimport { useProjectVisibility } from '../../utils/context-providers/project-context.tsx';\r\n\r\nimport { updateHighScore } from './updateHighScore.js';\r\nimport { useHighScoreSubscription } from './subscribeHighScore.js';\r\n\r\nimport BlockGOnboarding from './block-g-onboarding.tsx';\r\nimport ExitButton from './block-g-exit.tsx';\r\nimport CoinCounter from './block-g-coin-counter.tsx';\r\nimport BlockGGameOver from './block-g-game-over.tsx';\r\n\r\nimport '../../styles/block-type-g.css';\r\n\r\nimport { isMobile, isTablet, isDesktop } from 'react-device-detect';\r\n\r\nimport q5 from 'q5';\r\n\r\nconst RockEscapade = () => {\r\n\r\n  const highScore = useHighScoreSubscription();\r\n\r\n  const canvasRef = useRef(null);\r\n  const q5InstanceRef = useRef(null);\r\n\r\n  const [initialized, setInitialized] = useState(false);\r\n\r\n  const [overlayVisible, setOverlayVisible] = useState(true); // track overlay visibility\r\n  const { setBlockGClick } = useProjectVisibility();\r\n\r\n  const [resetKey, setResetKey] = useState(0); // Reset overlay\r\n  const [coins, setCoins] = useState(0); // Track coins \r\n\r\n  const lottieContainerRef = useRef(null);\r\n  const [showBeginText, setShowBeginText] = useState(false);\r\n  const [showOverlayBg, setShowOverlayBg] = useState(false);\r\n  const [shouldRenderOverlayBg, setShouldRenderOverlayBg] = useState(false);\r\n\r\n  const [gameOverVisible, setGameOverVisible] = useState(false); // Track game over state\r\n  const [countdownPhase, setCountdownPhase] = useState(null);\r\n\r\n  const [newHighScore, setNewHighScore] = useState(false);\r\n\r\n  const [isVisible, setIsVisible] = useState(false); // unmount when not used for performance\r\n\r\n  // Check if thee q5.js canvas is initialized\r\n  useEffect(() => {\r\n    if (!initialized) setInitialized(true);\r\n  }, [initialized]);\r\n\r\n  // Onboarding instructions lottie\r\n  useEffect(() => {\r\n    if (countdownPhase !== 'lottie' || !lottieContainerRef.current) return;\r\n\r\n    const anim = lottie.loadAnimation({\r\n      container: lottieContainerRef.current,\r\n      renderer: 'svg',\r\n      loop: false,\r\n      autoplay: true,\r\n      animationData: isMobile || isTablet ? mobileOnboarding : desktopOnboarding,\r\n    });\r\n\r\n    // After animation ends, show BEGIN!\r\n    anim.addEventListener('complete', () => {\r\n      setCountdownPhase('begin');\r\n    });\r\n\r\n    return () => anim.destroy();\r\n    }, [countdownPhase]);\r\n  // Render begin! after lottie \r\n  useEffect(() => {\r\n    if (countdownPhase === 'begin') {\r\n      setShowBeginText(true);\r\n\r\n      const timeout = setTimeout(() => {\r\n        setShowBeginText(false);\r\n        setCountdownPhase(null); // < hide Lottie only after \"BEGIN!\" disappears\r\n      }, 1000);\r\n\r\n      return () => clearTimeout(timeout);\r\n    }\r\n  }, [countdownPhase]);\r\n  // Render bg overlay\r\n  useEffect(() => {\r\n    if (countdownPhase === 'lottie') {\r\n      setShowOverlayBg(true);\r\n      setShouldRenderOverlayBg(true);\r\n    } else if (countdownPhase === null) {\r\n      setShowOverlayBg(false);\r\n      setTimeout(() => {\r\n        setShouldRenderOverlayBg(false);\r\n      }, 400);\r\n    }\r\n  }, [countdownPhase]);\r\n\r\n  const handleOnboardingStart = () => {\r\n    setOverlayVisible(false);\r\n    setBlockGClick(true);\r\n    setCountdownPhase('lottie');\r\n  };\r\n\r\n  const handleRestart = () => {\r\n    setGameOverVisible(false);\r\n    setNewHighScore(false); // Reset here when a new game starts\r\n\r\n    if (q5InstanceRef.current && q5InstanceRef.current.restartGame) {\r\n      q5InstanceRef.current.restartGame();\r\n    }\r\n  };\r\n\r\n  // Constant resize canvas to fit changes\r\n  useEffect(() => {\r\n    const handleResize = () => {\r\n      const container = canvasRef.current; // ADD THIS LINE\r\n      if (q5InstanceRef.current && container) {\r\n        q5InstanceRef.current.resizeCanvas(container.offsetWidth, container.offsetHeight);\r\n      }\r\n    };\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  // Position above others when overlayVisible is false\r\n  useEffect(() => {\r\n      if (!initialized) return;\r\n\r\n      const canvasContainer = canvasRef.current;\r\n      if (canvasContainer) {\r\n        if (!overlayVisible) {\r\n          canvasContainer.style.position = 'fixed';\r\n          canvasContainer.style.top = '0';\r\n          canvasContainer.style.left = '0';\r\n          canvasContainer.style.zIndex = '1500';\r\n        } else {\r\n          canvasContainer.style.position = 'relative';\r\n          canvasContainer.style.top = '';\r\n          canvasContainer.style.left = '';\r\n          canvasContainer.style.zIndex = '';\r\n        }\r\n      }\r\n  }, [initialized, overlayVisible]);\r\n\r\n  // Remove spacebar or arrowdown to avoid page scroll during fullscreen mode    \r\n  useEffect(() => {\r\n      const handleWheel = (e) => {\r\n        if (!overlayVisible) {\r\n          e.preventDefault();\r\n        }\r\n      };\r\n\r\n      const handleKeyDown = (e) => {\r\n        if (!overlayVisible && (e.key === ' ' || e.key === 'Spacebar' || e.key === 'ArrowDown' || e.key === 'ArrowUp')) {\r\n          e.preventDefault();\r\n        }\r\n      };\r\n\r\n      window.addEventListener('wheel', handleWheel, { passive: false });\r\n      window.addEventListener('keydown', handleKeyDown);\r\n\r\n      return () => {\r\n        window.removeEventListener('wheel', handleWheel);\r\n        window.removeEventListener('keydown', handleKeyDown);\r\n      };\r\n  }, [overlayVisible]);\r\n\r\n  useEffect(() => {\r\n    const navMenu = document.querySelector('.nav-menu');\r\n\r\n    if (!navMenu) return;\r\n\r\n    if (!overlayVisible) {\r\n      navMenu.style.zIndex = '0'; // push it behind gameplay\r\n    } else {\r\n      navMenu.style.zIndex = ''; // restore default\r\n    }\r\n\r\n  }, [overlayVisible]);\r\n\r\n  // unmount canvas when not in view \r\n  useEffect(() => {\r\n  const observer = new IntersectionObserver(\r\n    ([entry]) => {\r\n      setIsVisible(entry.isIntersecting);\r\n    },\r\n    {\r\n      root: null,\r\n      threshold: 0.01, // trigger when at least 1% is visible\r\n    }\r\n  );\r\n\r\n  const el = canvasRef.current;\r\n  if (el) observer.observe(el);\r\n\r\n  return () => {\r\n    if (el) observer.unobserve(el);\r\n  };\r\n  }, []);\r\n\r\n  // Q5.js canvas features\r\n  useEffect(() => {\r\n    if (!initialized || !isVisible) return;\r\n\r\n    const sketch = (p) => {\r\n\r\n      // Declare non-react visible Q5.JS variables\r\n      let verticalMode = window.innerWidth <= 1024 && window.innerHeight > window.innerWidth;\r\n\r\n      let rectangles = []; // obstacles\r\n      let octagons = []; // money currency\r\n      let particles = []; // particle effect\r\n      let projectiles = []; // fire projectiles \r\n      let circle;\r\n      let lastSpawnTime = 0;\r\n      let lastOctagonSpawnTime = 0;\r\n      let rectangleSpawnRate = 2;\r\n      let localCoins = 0;\r\n      let gameOver = false;\r\n      let fadeAlpha = 0;\r\n      let spawnEnabled = false;\r\n      let prevGameOver = false; // inside sketch scope\r\n\r\n      let lastFiredTime = -Infinity; // initially allows immediate fire\r\n      let cooldownDuration = 1500; // in ms\r\n\r\n      let cooldownRadiusMax = 48;\r\n      let cooldownRadius = 0;\r\n\r\n      let movingUp = false;\r\n      let movingDown = false;\r\n      let movingLeft = false;\r\n      let movingRight = false;\r\n\r\n      let w, h;\r\n\r\n      const restartGame = () => {\r\n        gameOver = false;\r\n        fadeAlpha = 0;\r\n        localCoins = 0;\r\n        setCoins(0);\r\n        rectangles = [];\r\n        octagons = []; // clear all octagons\r\n        particles = [];\r\n        circle = new Circle(p, 240, p.height / 2, 33);\r\n        q5InstanceRef.current.circle = circle;\r\n        lastOctagonSpawnTime = p.millis(); // reset spawn timer\r\n      };\r\n\r\n      // attach to p\r\n      p.restartGame = restartGame;\r\n\r\n      // Setup the canvas\r\n      p.setup = () => {\r\n        // Always match canvas size to window dimensions\r\n        const container = canvasRef.current;\r\n        w = container ? container.offsetWidth : window.innerWidth;\r\n        h = container ? container.offsetHeight : window.innerHeight;\r\n\r\n        p.createCanvas(w, h);\r\n\r\n        // Start octagon spawning immediately regardless of overlay mode\r\n        lastOctagonSpawnTime = p.millis();\r\n\r\n        // Delay rectangle spawn if starting gameplay (as your prior logic intended)\r\n        if (!overlayVisible) {\r\n          setTimeout(() => {\r\n            spawnEnabled = true;\r\n          }, 8000); // delay spawning by 3s for gameplay onboarding\r\n        } else {\r\n          spawnEnabled = true; // enable spawn immediately in preview\r\n        }\r\n\r\n        // Render the user circle\r\n        circle = new Circle(p, 240, h / 2, 33);\r\n        q5InstanceRef.current.circle = circle;\r\n      };\r\n\r\n      // Render inside canvas\r\n      p.draw = () => {\r\n        let delta = p.deltaTime / 16.67;\r\n\r\n        setCoins(localCoins);\r\n\r\n        p.background(25);\r\n\r\n        if (overlayVisible) {\r\n          autoEvade();\r\n        } else {\r\n          if (movingUp) circle.moveUp(); else if (movingDown) circle.moveDown(); else circle.stopVertical();\r\n          if (movingLeft) circle.moveLeft(); else if (movingRight) circle.moveRight(); else circle.stopHorizontal();\r\n        }\r\n\r\n        circle.update(delta);\r\n        circle.display();\r\n\r\n        if (spawnEnabled || overlayVisible) {\r\n          spawnRectangles();\r\n        }\r\n        updateRectangles(delta);\r\n\r\n        spawnOctagons();\r\n        updateOctagons(delta);\r\n\r\n        if (!isMobile) {\r\n          p.blendMode(p.ADD);\r\n        }\r\n\r\n        for (let i = particles.length - 1; i >= 0; i--) {\r\n          let part = particles[i];\r\n          part.update(delta);\r\n          part.display();\r\n          if (part.isDead()) particles.splice(i, 1);\r\n        }\r\n        p.blendMode(p.BLEND);\r\n\r\n        for (let i = projectiles.length - 1; i >= 0; i--) {\r\n          let proj = projectiles[i];\r\n          proj.update(delta);\r\n          proj.display();\r\n          if (proj.isDead()) projectiles.splice(i, 1);\r\n        }\r\n\r\n        if (!overlayVisible) {\r\n          if (!prevGameOver && gameOver) {\r\n            setGameOverVisible(true);\r\n            if (localCoins > highScore) {\r\n              updateHighScore(localCoins);\r\n            }\r\n          }\r\n\r\n          if (localCoins > highScore) {\r\n            setNewHighScore(true);\r\n          } else {\r\n            setNewHighScore(false);\r\n          }\r\n\r\n          prevGameOver = gameOver;\r\n\r\n          if (gameOver) {\r\n            p.background(25, fadeAlpha);\r\n            fadeAlpha = p.min(fadeAlpha + 30 * delta, 255);\r\n            return;\r\n          }\r\n\r\n          let cooldownElapsed = p.millis() - lastFiredTime;\r\n          if (cooldownElapsed < cooldownDuration) {\r\n            let remaining = cooldownDuration - cooldownElapsed;\r\n            let cooldownProgress = remaining / cooldownDuration;\r\n            let indicatorRadius = cooldownProgress * cooldownRadiusMax;\r\n\r\n            p.noStroke();\r\n            p.fill(200, 150, 255, 100);\r\n            p.ellipse(circle.x, circle.y, indicatorRadius * 2, indicatorRadius * 2);\r\n          }\r\n        }\r\n      }; // End of p.draw\r\n\r\n      // Spawn Rectangles\r\n      const spawnRectangles = () => {\r\n        let rectanglesInViewport = rectangles.filter(r => {\r\n          // Determine if rectangle is within visible viewport\r\n          if (verticalMode) {\r\n            return r.y + r.h > 0 && r.y < p.height;\r\n          } else {\r\n            return r.x + r.w > 0 && r.x < p.width;\r\n          }\r\n        }).length;\r\n\r\n        let maxRectangles;\r\n        let timeElapsed = p.millis() / 1000; // seconds since sketch start\r\n\r\n        if (window.innerWidth >= 1025) {\r\n          maxRectangles = 50;\r\n\r\n          if (rectanglesInViewport < 10) rectangleSpawnRate = 6;\r\n          else if (rectanglesInViewport < 25) rectangleSpawnRate = 5;\r\n          else if (rectanglesInViewport < 40) rectangleSpawnRate = 4;\r\n          else rectangleSpawnRate = 0;\r\n\r\n        } else if (window.innerWidth >= 768) {\r\n          maxRectangles = 60;\r\n\r\n          if (rectanglesInViewport < 8) rectangleSpawnRate = 5;\r\n          else if (rectanglesInViewport < 20) rectangleSpawnRate = 4;\r\n          else if (rectanglesInViewport < 40) rectangleSpawnRate = 3;\r\n          else rectangleSpawnRate = 0;\r\n\r\n        } else {\r\n          maxRectangles = 25;\r\n\r\n          if (rectanglesInViewport < 10) rectangleSpawnRate = 4;\r\n          else if (rectanglesInViewport < 20) rectangleSpawnRate = 3;\r\n          else rectangleSpawnRate = 1;\r\n        }\r\n\r\n        // Introduce initial spawn buffer to reduce early clutter\r\n        let initialSpawnBuffer = timeElapsed < 10 ? 1.5 : 1; // 50% longer spawn interval first 10s\r\n\r\n        // Spawn if under viewport cap instead of total array cap\r\n        if (\r\n          rectangleSpawnRate > 0 &&\r\n          p.millis() - lastSpawnTime > (2000 / rectangleSpawnRate) * initialSpawnBuffer &&\r\n          rectanglesInViewport < maxRectangles\r\n        ) {\r\n          rectangles.push(new Shape(p, true, false, verticalMode));\r\n          lastSpawnTime = p.millis();\r\n        }\r\n\r\n        // Periodic cleanup every 5s to remove any stale or NaN rectangles\r\n        if (p.millis() % 5000 < 20) {\r\n          rectangles = rectangles.filter(r => !isNaN(r.x) && !isNaN(r.y));\r\n        }\r\n      };\r\n\r\n      // Update Rectanglee\r\n      const updateRectangles = (delta) => {\r\n        for (let i = rectangles.length - 1; i >= 0; i--) {\r\n          let r = rectangles[i];\r\n          r.update(delta);\r\n          r.display();\r\n\r\n          if (circle.overlaps(r)) gameOver = true;\r\n\r\n          for (let j = projectiles.length - 1; j >= 0; j--) {\r\n            let proj = projectiles[j];\r\n\r\n            let projSize, projX, projY, projW, projH;\r\n\r\n            if (proj.size) {\r\n              projSize = proj.size;\r\n              projX = proj.x - projSize / 2;\r\n              projY = proj.y - projSize / 2;\r\n              projW = projSize;\r\n              projH = projSize;\r\n            } else {\r\n              projSize = proj.radius * 2;\r\n              projX = proj.x - proj.radius;\r\n              projY = proj.y - proj.radius;\r\n              projW = projSize;\r\n              projH = projSize;\r\n            }\r\n\r\n            if (\r\n              projX + projW > r.x &&\r\n              projX < r.x + r.w &&\r\n              projY + projH > r.y &&\r\n              projY < r.y + r.h\r\n            ) {\r\n              if (proj instanceof RectangleProjectile) {\r\n                if (p.random() < 0.05) {\r\n                  // 5% chance to trigger cascade destruction\r\n\r\n                  rectangles.splice(i, 1);\r\n                  projectiles.splice(j, 1);\r\n\r\n                  // Spawn purple rectangle-shaped projectiles in 360 directions\r\n                  for (let k = 0; k < 8; k++) {\r\n                    let angle = (p.TWO_PI / 8) * k;\r\n                    let speed = p.random(2, 4);\r\n                    let vx = Math.cos(angle) * speed;\r\n                    let vy = Math.sin(angle) * speed;\r\n\r\n                    projectiles.push(new RectangleProjectile(\r\n                      p,\r\n                      r.x + r.w / 2,\r\n                      r.y + r.h / 2,\r\n                      vx,\r\n                      vy,\r\n                      '#c896ff'\r\n                    ));\r\n                  }\r\n\r\n                } else {\r\n                  // Bounce off normally without destruction\r\n                  proj.vx *= -1;\r\n                  proj.vy *= -1;\r\n                  proj.x += proj.vx * delta * 2;\r\n                  proj.y += proj.vy * delta * 2;\r\n                }\r\n              } else {\r\n                // Normal projectile destroys rectangle and itself\r\n                rectangles.splice(i, 1);\r\n                projectiles.splice(j, 1);\r\n\r\n                // Spawn purple rectangle-shaped projectiles in 360 directions\r\n                for (let k = 0; k < 8; k++) {\r\n                  let angle = (p.TWO_PI / 8) * k;\r\n                  let speed = p.random(2, 4);\r\n                  let vx = Math.cos(angle) * speed;\r\n                  let vy = Math.sin(angle) * speed;\r\n\r\n                  projectiles.push(new RectangleProjectile(\r\n                    p,\r\n                    r.x + r.w / 2,\r\n                    r.y + r.h / 2,\r\n                    vx,\r\n                    vy,\r\n                    '#c896ff'\r\n                  ));\r\n                }\r\n              }\r\n\r\n              break; // exit projectile loop for this rectangle\r\n            }\r\n          }\r\n\r\n          let offscreen = verticalMode\r\n            ? r.y - r.h > p.height + 100 || r.y + r.h < -100\r\n            : r.x + r.w < -100 || r.x - r.w > p.width + 100;\r\n\r\n          if (offscreen) {\r\n            rectangles.splice(i, 1);\r\n            continue;\r\n          }\r\n        }\r\n\r\n        for (let i = 0; i < rectangles.length; i++) {\r\n          let r1 = rectangles[i];\r\n          for (let j = i + 1; j < rectangles.length; j++) {\r\n            let r2 = rectangles[j];\r\n            if (r1.overlaps(r2)) r1.resolveCollision(r2);\r\n          }\r\n        }\r\n      };\r\n\r\n      // Spawn octagons\r\n      const spawnOctagons = () => {\r\n        if (!spawnEnabled) return;\r\n\r\n        if (p.millis() - lastOctagonSpawnTime > 2000) {\r\n          if (octagons.length === 0) { // only spawn one if none exist\r\n            octagons.push(new Shape(p, true, true, verticalMode));\r\n          }\r\n          lastOctagonSpawnTime = p.millis();\r\n        }\r\n      };\r\n\r\n      // Update the octagons\r\n      const updateOctagons = (delta) => {\r\n        let buffer = 150;\r\n\r\n        for (let i = octagons.length - 1; i >= 0; i--) {\r\n          let o = octagons[i];\r\n          o.update(delta);\r\n          o.display();\r\n\r\n          if (circle.overlaps(o)) {\r\n            localCoins += 20;\r\n            setCoins(prev => prev + 20);\r\n\r\n          for (let j = 0; j < 10; j++) {\r\n            particles.push(new Particle(p, o.x + o.size / 2, o.y + o.size / 2, 255, o.c, 0, 0, 5));\r\n          }\r\n\r\n            octagons.splice(i, 1);\r\n            continue;\r\n          }\r\n\r\n          let speed = Math.abs(o.vx) + Math.abs(o.vy);\r\n          let numParticles;\r\n          if (speed < 1) numParticles = 0.05;\r\n          else if (speed < 3) numParticles = 0.1;\r\n          else if (speed < 6) numParticles = 0.2;\r\n          else numParticles = 0.3;\r\n\r\n          let particlesToSpawn = Math.floor(numParticles);\r\n          let fractionalPart = numParticles - particlesToSpawn;\r\n\r\n          for (let j = 0; j < particlesToSpawn; j++) {\r\n            particles.push(new Particle(p, o.x + o.size / 2, o.y + o.size / 2, 255, o.c));\r\n          }\r\n\r\n          if (p.random() < fractionalPart) {\r\n            particles.push(new Particle(p, o.x + o.size / 2, o.y + o.size / 2, 255, o.c));\r\n          }\r\n\r\n          if (\r\n            o.x + o.size < -buffer || \r\n            o.x - o.size > p.width + buffer ||\r\n            o.y + o.size < -buffer ||\r\n            o.y - o.size > p.height + buffer\r\n          ) {\r\n            octagons.splice(i, 1);\r\n          }\r\n        }\r\n      };\r\n\r\n      // Auto evade the rectangles and seek octagons during preview (overlayDisplay is true)\r\n      const autoEvade = () => {\r\n        let evadeForceX = 0;\r\n        let evadeForceY = 0;\r\n        let dangerLevel = 0;\r\n\r\n        rectangles.forEach(rect => {\r\n          let rectCenterX = rect.x + rect.w / 2;\r\n          let rectCenterY = rect.y + rect.h / 2;\r\n          let dx = circle.x - rectCenterX;\r\n          let dy = circle.y - rectCenterY;\r\n          let distSq = dx * dx + dy * dy;\r\n\r\n          if (distSq < 20000) { \r\n          let dist = Math.sqrt(distSq) || 1;\r\n          let weight = 1 / (dist + 300); // +50 to prevent extreme near-field force\r\n          let force = weight * 150; // adjust multiplier for overall strength\r\n\r\n\r\n            evadeForceX += (dx / dist) * force;\r\n            evadeForceY += (dy / dist) * force;\r\n\r\n            // Increase danger level exponentially closer\r\n            dangerLevel += (1 / (dist + 1)) * 10;\r\n          }\r\n        });\r\n\r\n        let attractForceX = 0;\r\n        let attractForceY = 0;\r\n\r\n        // Only seek octagon if not in extreme danger\r\n        if (octagons.length > 0 && dangerLevel < 50) {\r\n          let closestOctagon = octagons.reduce((prev, curr) => {\r\n            let prevDist = p.dist(circle.x, circle.y, prev.x + prev.size / 2, prev.y + prev.size / 2);\r\n            let currDist = p.dist(circle.x, circle.y, curr.x + curr.size / 2, curr.y + curr.size / 2);\r\n            return currDist < prevDist ? curr : prev;\r\n          });\r\n\r\n          let dx = (closestOctagon.x + closestOctagon.size / 2) - circle.x;\r\n          let dy = (closestOctagon.y + closestOctagon.size / 2) - circle.y;\r\n          let dist = Math.sqrt(dx * dx + dy * dy) || 1;\r\n\r\n          attractForceX = (dx / dist) * 0.45;\r\n          attractForceY = (dy / dist) * 0.45;\r\n        }\r\n\r\n        // Combine forces with priority to evasion\r\n        circle.ax = evadeForceX + attractForceX;\r\n        circle.ay = evadeForceY + attractForceY;\r\n\r\n        // If no forces are active, drift gently to center\r\n        if (circle.ax === 0 && circle.ay === 0) {\r\n          let centerDx = (p.width / 2) - circle.x;\r\n          let centerDy = (p.height / 2) - circle.y;\r\n          let centerDist = Math.sqrt(centerDx * centerDx + centerDy * centerDy) || 1;\r\n          circle.ax = (centerDx / centerDist) * 0.1;\r\n          circle.ay = (centerDy / centerDist) * 0.1;\r\n        }\r\n      };\r\n\r\n      // Desktop Navigation\r\n      p.keyPressed = () => {\r\n        if (p.key === ' ' || p.key === 'Spacebar') {\r\n          let now = p.millis();\r\n          if (now - lastFiredTime >= cooldownDuration) {\r\n            lastFiredTime = now;\r\n\r\n            if (circle) {\r\n              let proj = new Projectile(\r\n                p,\r\n                circle.x,\r\n                circle.y,\r\n                circle.vx !== 0 || circle.vy !== 0 ? circle.vx : 5,\r\n                circle.vy !== 0 || circle.vx !== 0 ? circle.vy : 0\r\n              );\r\n              projectiles.push(proj);\r\n            }\r\n          }\r\n        }\r\n        if (p.key === 'w' || p.keyCode === p.UP_ARROW) movingUp = true;\r\n        if (p.key === 's' || p.keyCode === p.DOWN_ARROW) movingDown = true;\r\n        if (p.key === 'a' || p.keyCode === p.LEFT_ARROW) movingLeft = true;\r\n        if (p.key === 'd' || p.keyCode === p.RIGHT_ARROW) movingRight = true;\r\n      };\r\n\r\n      p.keyReleased = () => {\r\n        if (p.key === 'w' || p.keyCode === p.UP_ARROW) movingUp = false;\r\n        if (p.key === 's' || p.keyCode === p.DOWN_ARROW) movingDown = false;\r\n        if (p.key === 'a' || p.keyCode === p.LEFT_ARROW) movingLeft = false;\r\n        if (p.key === 'd' || p.keyCode === p.RIGHT_ARROW) movingRight = false;\r\n      };\r\n\r\n      p.touchStarted = () => {\r\n        if (overlayVisible) return;\r\n\r\n        // Fire projectile only if touch count is 1 (single tap) and not moving\r\n        if (p.touches.length === 1) {\r\n          const now = p.millis();\r\n          if (now - lastFiredTime >= cooldownDuration) {\r\n            lastFiredTime = now;\r\n\r\n            const vx = circle.vx !== 0 || circle.vy !== 0 ? circle.vx : 5;\r\n            const vy = circle.vy !== 0 || circle.vx !== 0 ? circle.vy : 0;\r\n\r\n            projectiles.push(new Projectile(p, circle.x, circle.y, vx, vy));\r\n          }\r\n        }\r\n\r\n        return false; // prevent default\r\n      };\r\n\r\n      p.touchMoved = () => {\r\n        // Movement logic here (if needed)\r\n        return false;\r\n      };\r\n\r\n      p.touchEnded = () => {\r\n        return false;\r\n      };\r\n\r\n      // Q5.js classes for shapes, user control, and particle effects\r\n      class Circle {\r\n        constructor(p, x, y, r) {\r\n          this.p = p;\r\n          this.x = x;\r\n          this.y = y;\r\n          this.vx = 0;\r\n          this.vy = 0;\r\n          this.ax = 0;\r\n          this.ay = 0;\r\n          this.radius = r;\r\n          this.c = p.color(200, 150, 255);\r\n          this.trail = [];\r\n        }\r\n\r\n        update(delta) {\r\n          this.vx += this.ax * delta;\r\n          this.vy += this.ay * delta;\r\n\r\n          this.vx *= Math.pow(0.92, delta);\r\n          this.vy *= Math.pow(0.92, delta);\r\n\r\n          this.x += this.vx * delta;\r\n          this.y += this.vy * delta;\r\n\r\n          if (this.y + this.radius < 0) this.y = this.p.height + this.radius;\r\n          else if (this.y - this.radius > this.p.height) this.y = -this.radius;\r\n\r\n          if (this.x + this.radius < 0) this.x = this.p.width + this.radius;\r\n          else if (this.x - this.radius > this.p.width) this.x = -this.radius;\r\n\r\n          this.trail.push(this.p.createVector(this.x, this.y));\r\n          if (this.trail.length > 8) this.trail.shift();\r\n\r\n          let speedLimit = 10;\r\n          this.vx = this.p.constrain(this.vx, -speedLimit, speedLimit);\r\n          this.vy = this.p.constrain(this.vy, -speedLimit, speedLimit);\r\n        }\r\n\r\n        display() {\r\n          for (let i = 0; i < this.trail.length; i++) {\r\n            let pos = this.trail[i];\r\n            let alpha = this.p.map(i, 0, this.trail.length - 1, 30, 100);\r\n            let trailRadius = this.p.map(i, 0, this.trail.length - 1, this.radius / 2, this.radius);\r\n            this.p.fill(200, 150, 255, alpha);\r\n            this.p.noStroke();\r\n            this.p.ellipse(pos.x, pos.y, trailRadius, trailRadius);\r\n          }\r\n          this.p.fill(this.c);\r\n          this.p.noStroke();\r\n          this.p.ellipse(this.x, this.y, this.radius, this.radius);\r\n        }\r\n\r\n        moveUp() { this.ay = -0.5; }\r\n        moveDown() { this.ay = 0.5; }\r\n        moveLeft() { this.ax = -0.5; }\r\n        moveRight() { this.ax = 0.5; }\r\n        stopVertical() { this.ay = 0; }\r\n        stopHorizontal() { this.ax = 0; }\r\n\r\n        overlaps(other) {\r\n          if (other.isOctagon) {\r\n            let distToOther = this.p.dist(this.x, this.y, other.x + other.size / 2, other.y + other.size / 2);\r\n            return distToOther < this.radius + other.size / 2;\r\n          } else {\r\n            let closestX = this.p.constrain(this.x, other.x, other.x + other.w);\r\n            let closestY = this.p.constrain(this.y, other.y, other.y + other.h);\r\n            let distance = this.p.dist(this.x, this.y, closestX, closestY);\r\n            return distance < this.radius * 0.3;\r\n          }\r\n        }\r\n      }\r\n\r\n      class Shape {\r\n        constructor(p, startOffScreen, isOctagon, verticalMode) {\r\n          this.p = p;\r\n          this.isOctagon = isOctagon;\r\n          this.verticalMode = verticalMode;\r\n          this.reset(startOffScreen);\r\n        }\r\n\r\n        reset(startOffScreen) {\r\n          if (this.verticalMode) {\r\n            this.x = this.p.random(this.p.width);\r\n\r\n            if (this.isOctagon) {\r\n              if (startOffScreen) {\r\n                // Spawn just above the visible area\r\n                this.y = -this.p.random(30, 60);\r\n              } else {\r\n                // Fallback random position within viewport if needed\r\n                this.y = this.p.random(this.p.height);\r\n              }\r\n\r\n              this.vx = this.p.random(-1.2, 1.2);\r\n\r\n              if (this.p.random() < 0.1) {\r\n                this.vy = this.p.random(6, 9);\r\n              } else if (this.p.random() < 0.2) {\r\n                this.vy = this.p.random(0.5, 1.5);\r\n              } else {\r\n                this.vy = this.p.random(2, 5);\r\n              }\r\n\r\n              this.size = 25;\r\n\r\n              const playfulColors = [\r\n                this.p.color(255, 215, 0),\r\n                this.p.color(255, 223, 70),\r\n                this.p.color(255, 200, 0),\r\n                this.p.color(255, 170, 50),\r\n              ];\r\n              this.c = this.p.random(playfulColors);\r\n            } else {\r\n              this.y = startOffScreen\r\n                ? -this.p.random(60, 120)\r\n                : this.p.random(this.p.height);\r\n\r\n              this.vx = this.p.random(-0.5, 0.5);\r\n              this.vy = this.p.random(1, 3);\r\n\r\n              this.w = this.p.random(28, 70);\r\n              this.h = this.p.random(28, 70);\r\n              this.c = this.p.color(235, 235, 255);\r\n            }\r\n          } else {\r\n            if (startOffScreen) {\r\n              // Spawn just beyond right edge for horizontal gameplay\r\n              this.x = this.p.width + this.p.random(10, 40);\r\n            } else {\r\n              this.x = this.p.random(this.p.width);\r\n            }\r\n\r\n            this.y = this.p.random(this.p.height);\r\n\r\n            if (this.isOctagon) {\r\n              let baseSpeedX = this.p.random(-2.5, -0.5);\r\n              if (window.innerWidth >= 1025 && window.innerWidth > window.innerHeight) {\r\n                baseSpeedX *= 4.5;\r\n              }\r\n\r\n              if (this.p.random() < 0.1) {\r\n                baseSpeedX *= 2;\r\n              } else if (this.p.random() < 0.2) {\r\n                baseSpeedX *= 0.5;\r\n              }\r\n\r\n              this.vx = baseSpeedX;\r\n              this.vy = this.p.random(-0.3, 0.3);\r\n\r\n              this.size = 25;\r\n\r\n              const playfulColors = [\r\n                this.p.color(255, 215, 0),\r\n                this.p.color(255, 223, 70),\r\n                this.p.color(255, 200, 0),\r\n                this.p.color(255, 170, 50),\r\n              ];\r\n              this.c = this.p.random(playfulColors);\r\n            } else {\r\n              this.vx = this.p.random(-3, -1);\r\n              this.vy = this.p.random(-0.5, 0.5);\r\n\r\n              if (window.innerWidth >= 1025 && window.innerWidth > window.innerHeight) {\r\n                this.w = this.p.random(33, 105);\r\n                this.h = this.p.random(33, 105);\r\n              } else {\r\n                this.w = this.p.random(30, 75);\r\n                this.h = this.p.random(30, 75);\r\n              }\r\n\r\n              this.c = this.p.color(235, 235, 255);\r\n            }\r\n          }\r\n\r\n          this.rotation = 0;\r\n          this.rotationSpeed = this.p.random(-1, 1);\r\n        }\r\n\r\n        update(delta) {\r\n          this.x += this.vx * delta;\r\n          this.y += this.vy * delta;\r\n          this.rotation += this.rotationSpeed * delta;\r\n        }\r\n\r\n        display() {\r\n          this.p.push();\r\n          this.p.translate(this.x + (this.isOctagon ? this.size / 2 : this.w / 2), this.y + (this.isOctagon ? this.size / 2 : this.h / 2));\r\n          this.p.rotate(this.p.radians(this.rotation));\r\n          this.p.fill(this.c);\r\n          this.p.noStroke();\r\n          if (this.isOctagon) this.drawOctagon(0, 0, this.size);\r\n          else {\r\n            this.p.rectMode(this.p.CENTER);\r\n            this.p.rect(0, 0, this.w, this.h);\r\n          }\r\n          this.p.pop();\r\n        }\r\n\r\n        drawOctagon(x, y, size) {\r\n          let angleStep = this.p.TWO_PI / 8;\r\n          this.p.beginShape();\r\n          for (let i = 0; i < 8; i++) {\r\n            let angle = i * angleStep;\r\n            let px = x + this.p.cos(angle) * size / 2;\r\n            let py = y + this.p.sin(angle) * size / 2;\r\n            this.p.vertex(px, py);\r\n          }\r\n          this.p.endShape(this.p.CLOSE);\r\n        }\r\n\r\n        overlaps(other) {\r\n          let thisW = this.isOctagon ? this.size : this.w;\r\n          let thisH = this.isOctagon ? this.size : this.h;\r\n          let otherW = other.isOctagon ? other.size : other.w;\r\n          let otherH = other.isOctagon ? other.size : other.h;\r\n\r\n          return !(this.x + thisW < other.x || this.x > other.x + otherW || this.y + thisH < other.y || this.y > other.y + otherH);\r\n        }\r\n\r\n        resolveCollision(other) {\r\n          let thisW = this.isOctagon ? this.size : this.w;\r\n          let thisH = this.isOctagon ? this.size : this.h;\r\n          let otherW = other.isOctagon ? other.size : other.w;\r\n          let otherH = other.isOctagon ? other.size : other.h;\r\n\r\n          let overlapX = Math.min(this.x + thisW, other.x + otherW) - Math.max(this.x, other.x);\r\n          let overlapY = Math.min(this.y + thisH, other.y + otherH) - Math.max(this.y, other.y);\r\n\r\n          if (overlapX < overlapY) {\r\n            if (this.x < other.x) { this.x -= overlapX / 2; other.x += overlapX / 2; }\r\n            else { this.x += overlapX / 2; other.x -= overlapX / 2; }\r\n            this.vx *= -1; other.vx *= -1;\r\n          } else {\r\n            if (this.y < other.y) { this.y -= overlapY / 2; other.y += overlapY / 2; }\r\n            else { this.y += overlapY / 2; other.y -= overlapY / 2; }\r\n            this.vy *= -1; other.vy *= -1;\r\n          }\r\n        }\r\n      }\r\n\r\n      class Particle {\r\n        constructor(p, x, y, lifespan = 255, c = p.color(255, 215, 0), sourceVx = 0, sourceVy = 0, speedMultiplier = null) {\r\n          this.p = p;\r\n          this.x = x;\r\n          this.y = y;\r\n          this.lifespan = lifespan;\r\n          this.c = c;\r\n\r\n          const sourceSpeed = Math.sqrt(sourceVx * sourceVx + sourceVy * sourceVy);\r\n\r\n          let emissionSpeed = p.map(sourceSpeed, 0, 5, 1, 3);\r\n          emissionSpeed = p.constrain(emissionSpeed, 1.2, 3.5);\r\n\r\n          if (speedMultiplier !== null) {\r\n            emissionSpeed *= speedMultiplier; // only apply if explicitly set\r\n          }\r\n\r\n          const emissionAngle = p.random(0, p.TWO_PI);\r\n\r\n          this.vx = Math.cos(emissionAngle) * emissionSpeed + sourceVx * 0.1;\r\n          this.vy = Math.sin(emissionAngle) * emissionSpeed + sourceVy * 0.1;\r\n        }\r\n\r\n        update(delta) {\r\n          this.x += this.vx * delta;\r\n          this.y += this.vy * delta;\r\n          this.lifespan -= 1 * delta;\r\n        }\r\n\r\n        display() {\r\n          this.p.noStroke();\r\n          this.p.fill(this.c.levels[0], this.c.levels[1], this.c.levels[2], this.lifespan);\r\n          this.p.ellipse(this.x, this.y, 4, 4);\r\n        }\r\n\r\n        isDead() {\r\n          return this.lifespan <= 0;\r\n        }\r\n      }\r\n\r\n      class Projectile {\r\n        constructor(p, x, y, vx, vy) {\r\n          this.p = p;\r\n          this.x = x;\r\n          this.y = y;\r\n\r\n          const dirMag = Math.sqrt(vx * vx + vy * vy) || 1;\r\n          const dirX = vx / dirMag;\r\n          const dirY = vy / dirMag;\r\n\r\n          this.minSpeed = 0.6; // minimum base speed (slow launch)\r\n          this.maxSpeed = 12; // maximum top speed (cap)\r\n          this.speed = this.minSpeed;\r\n\r\n          this.vx = dirX * this.speed;\r\n          this.vy = dirY * this.speed;\r\n\r\n          this.targetSpeed = 8; // cruising target speed\r\n          this.acceleration = 3;\r\n\r\n          this.radius = 6;\r\n          this.lifespan = 500;\r\n          this.trail = [];\r\n          this.color = p.color(200,150,255);\r\n        }\r\n\r\n        update(delta) {\r\n          this.speed += (this.targetSpeed - this.speed) * this.acceleration * delta;\r\n\r\n          if (this.speed < this.minSpeed) this.speed = this.minSpeed;\r\n          if (this.speed > this.maxSpeed) this.speed = this.maxSpeed;\r\n\r\n          const dirMag = Math.sqrt(this.vx * this.vx + this.vy * this.vy) || 1;\r\n          const dirX = this.vx / dirMag;\r\n          const dirY = this.vy / dirMag;\r\n\r\n          this.vx = dirX * this.speed;\r\n          this.vy = dirY * this.speed;\r\n\r\n          this.x += this.vx * delta;\r\n          this.y += this.vy * delta;\r\n\r\n          this.lifespan -= 1 * delta;\r\n\r\n          this.trail.push({ x: this.x, y: this.y, alpha: 160 });\r\n          if (this.trail.length > 20) this.trail.shift();\r\n\r\n          for (let i = 0; i < this.trail.length; i++) {\r\n            this.trail[i].alpha *= 0.8;\r\n          }\r\n        }\r\n\r\n        display() {\r\n          for (let i = 0; i < this.trail.length; i++) {\r\n            let t = this.trail[i];\r\n            this.p.fill(200,150,255, t.alpha);\r\n            this.p.noStroke();\r\n            this.p.ellipse(t.x, t.y, this.radius * 2, this.radius * 2);\r\n          }\r\n\r\n          this.p.fill(this.color);\r\n          this.p.noStroke();\r\n          this.p.ellipse(this.x, this.y, this.radius * 2, this.radius * 2);\r\n        }\r\n\r\n        isDead() {\r\n          return this.lifespan <= 0 ||\r\n            this.x < 0 || this.x > this.p.width ||\r\n            this.y < 0 || this.y > this.p.height;\r\n        }\r\n      }\r\n\r\n      class RectangleProjectile {\r\n        constructor(p, x, y, vx, vy, color) {\r\n          this.p = p;\r\n          this.x = x;\r\n          this.y = y;\r\n\r\n          // Random size between 8 and 20\r\n          this.size = p.random(8, 20);\r\n\r\n          // Speed multiplier based on size (larger = faster)\r\n          const baseSpeed = Math.sqrt(vx * vx + vy * vy);\r\n          const sizeSpeedFactor = this.p.map(this.size, 8, 20, 1, 2);\r\n          this.vx = vx * sizeSpeedFactor;\r\n          this.vy = vy * sizeSpeedFactor;\r\n\r\n          this.lifespan = 80;\r\n          this.maxLifespan = this.lifespan;\r\n\r\n          this.color = p.color(color);\r\n          this.rotation = p.random(360);\r\n          this.rotationSpeed = p.random(-20, 20);\r\n        }\r\n\r\n        update(delta) {\r\n          this.x += this.vx * delta;\r\n          this.y += this.vy * delta;\r\n          this.lifespan -= 1 * delta;\r\n          this.rotation += this.rotationSpeed * delta;\r\n        }\r\n\r\n        display() {\r\n          this.p.push();\r\n          this.p.translate(this.x, this.y);\r\n          this.p.rotate(this.p.radians(this.rotation));\r\n          let alpha = this.p.map(this.lifespan, 0, this.maxLifespan, 0, 255);\r\n          this.p.fill(this.color.levels[0], this.color.levels[1], this.color.levels[2], alpha);\r\n          this.p.noStroke();\r\n          this.p.rectMode(this.p.CENTER);\r\n          this.p.rect(0, 0, this.size, this.size);\r\n          this.p.pop();\r\n        }\r\n\r\n        isDead() {\r\n          return this.lifespan <= 0 ||\r\n            this.x < -50 || this.x > this.p.width + 50 ||\r\n            this.y < -50 || this.y > this.p.height + 50;\r\n        }\r\n      }\r\n    }; // end of sketch\r\n\r\n    const q5Instance = new q5(sketch, canvasRef.current);\r\n    q5InstanceRef.current = q5Instance;\r\n\r\n    if (q5InstanceRef.current && q5InstanceRef.current.p && q5InstanceRef.current.p.restartGame) {\r\n      q5InstanceRef.current.restartGame = q5InstanceRef.current.p.restartGame;\r\n    }\r\n    return () => {\r\n      if (q5Instance && q5Instance.remove) q5Instance.remove();\r\n      if (canvasRef.current) canvasRef.current.innerHTML = '';\r\n    };\r\n  }, [initialized, overlayVisible, isVisible]);\r\n  \r\n  // Exit button state changes \r\n  const handleExit = () => {\r\n  setOverlayVisible(true);\r\n  setBlockGClick(false);\r\n  setGameOverVisible(false);\r\n  setCountdownPhase(null); // Reset Lottie state\r\n  setShowBeginText(false);\r\n  setResetKey(prev => prev + 1);\r\n  };\r\n\r\n  // Event handler for touch based interaction\r\n  useEffect(() => {\r\n    if (!initialized) return;\r\n\r\n    const attachTouchListeners = () => {\r\n      const canvas = document.querySelector('.evade-the-rock canvas');\r\n      if (!canvas) {\r\n        setTimeout(attachTouchListeners, 100);\r\n        return;\r\n      }\r\n\r\n      let lastTouchPosition = null;\r\n\r\n      const handleTouchMove = (e) => {\r\n        if (!q5InstanceRef.current || !q5InstanceRef.current.circle) return;\r\n\r\n        const touch = e.touches[0];\r\n        const rect = canvas.getBoundingClientRect();\r\n        const touchX = touch.clientX - rect.left;\r\n        const touchY = touch.clientY - rect.top;\r\n\r\n        const circle = q5InstanceRef.current.circle;\r\n\r\n        if (lastTouchPosition) {\r\n          const dx = touchX - lastTouchPosition.x;\r\n          const dy = touchY - lastTouchPosition.y;\r\n\r\n          const dist = Math.sqrt(dx * dx + dy * dy) || 1;\r\n\r\n          // Base force multiplier by device\r\n          let baseMultiplier = 0.4;\r\n\r\n          if (isTablet) {\r\n            baseMultiplier = 0.6;\r\n          } else if (isMobile) {\r\n            baseMultiplier = 0.5;\r\n          } else if (isDesktop) {\r\n            baseMultiplier = 0.35;\r\n          }\r\n\r\n          // Calculate speed factor based on distance moved\r\n          const speedFactor = Math.log2(dist + 1);  \r\n\r\n          const forceMultiplier = baseMultiplier * speedFactor;\r\n\r\n          // Apply as impulse to velocity directly\r\n          circle.vx += (dx / dist) * forceMultiplier;\r\n          circle.vy += (dy / dist) * forceMultiplier;\r\n        }\r\n\r\n        lastTouchPosition = { x: touchX, y: touchY };\r\n\r\n        e.preventDefault();\r\n      };\r\n\r\n\r\n      const handleTouchEnd = () => {\r\n        console.log('Touch ended.');\r\n        lastTouchPosition = null;\r\n        // No velocity reset  friction will decay it naturally\r\n      };\r\n\r\n      canvas.addEventListener('touchmove', handleTouchMove, { passive: false });\r\n      canvas.addEventListener('touchend', handleTouchEnd);\r\n\r\n      return () => {\r\n        canvas.removeEventListener('touchmove', handleTouchMove);\r\n        canvas.removeEventListener('touchend', handleTouchEnd);\r\n      };\r\n    };\r\n\r\n    attachTouchListeners();\r\n  }, [initialized, overlayVisible]);\r\n\r\n  // Simply render current coin count to mirror high score if it exceeds the high score\r\n  const displayHighScore = coins > highScore ? coins : highScore;\r\n  const isNewHighScore = coins > highScore;\r\n\r\n  // Return HTML structure\r\n  return (\r\n    <section className=\"block-type-g\" style={{ position: 'relative' }}>\r\n      <div className=\"evade-the-rock\" style={{ width: '100%', height: '100%' }} ref={canvasRef}></div>\r\n    <BlockGOnboarding key={resetKey} onStart={handleOnboardingStart} resetTrigger={resetKey}/>\r\n      {!overlayVisible && <ExitButton onExit={handleExit} />}\r\n      {!overlayVisible && <CoinCounter coins={coins} highScore={displayHighScore} newHighScore={newHighScore} />}\r\n      {shouldRenderOverlayBg && (\r\n        <div className={`countdown-bg-overlay ${!showOverlayBg ? 'hide' : ''}`} />\r\n      )}\r\n      {(countdownPhase === 'lottie' || countdownPhase === 'begin') && (\r\n        <div ref={lottieContainerRef} id=\"lottie-onboarding\" className=\"countdown-lottie\" />\r\n      )}\r\n      {showBeginText && (\r\n          <div className=\"countdown-display\">\r\n          <h1 className=\"countdown-text\">BEGIN!</h1>\r\n          </div>\r\n        )}\r\n      {gameOverVisible && <BlockGGameOver onRestart={handleRestart} coins={coins} newHighScore={newHighScore}/>}\r\n    </section>\r\n    );\r\n  };\r\n\r\nexport default RockEscapade;\r\n","// Subscribe High Score\r\nimport { useEffect, useState } from 'react';\r\nimport client from '../../utils/sanity';\r\n\r\nexport const useHighScoreSubscription = () => {\r\n  const [highScore, setHighScore] = useState(0);\r\n\r\n  useEffect(() => {\r\n    const query = `*[_type == \"highScore\"][0]{score}`;\r\n\r\n    // Initial fetch\r\n    client.fetch(query).then(data => {\r\n      if (data?.score !== undefined) setHighScore(data.score);\r\n    });\r\n\r\n    // Subscribe to updates\r\n    const subscription = client.listen(query).subscribe(update => {\r\n      const newScore = update.result?.score;\r\n      if (newScore !== undefined) {\r\n        setHighScore(newScore);\r\n      }\r\n    });\r\n\r\n    return () => subscription.unsubscribe();\r\n  }, []);\r\n\r\n  return highScore;\r\n};","// updateHighScore for block type g\r\nimport client from '../../utils/sanity';\r\n\r\nexport async function updateHighScore(newScore) {\r\n  try {\r\n    await client.createIfNotExists({\r\n      _id: 'highscore',\r\n      _type: 'highScore', // ensure casing matches schema\r\n      score: 0,\r\n    });\r\n\r\n    const updated = await client\r\n      .patch('highscore')\r\n      .set({ score: newScore })\r\n      .commit();\r\n\r\n    console.log('High score updated:', updated.score);\r\n    return updated.score;\r\n  } catch (err) {\r\n    console.error('Failed to update high score:', err);\r\n    return null;\r\n  }\r\n}\r\n","// Master color config\r\nexport interface ProjectColor {\r\n  rgb: string;         // \"204, 85, 41\"\r\n  tooltipAlpha?: number;\r\n  defaultAlpha?: number;\r\n  darkThemeTop?: string; // optional override for theme-color\r\n}\r\n\r\nexport const projectColors: Record<string, ProjectColor> = {\r\n  'Rotary Lamp': {\r\n    rgb: '204, 85, 41',\r\n    tooltipAlpha: 0.6,\r\n    defaultAlpha: 0.6,\r\n    darkThemeTop: 'rgba(72, 161, 161, 1)'\r\n  },\r\n  'Ice Cream Scoop': {\r\n    rgb: '234, 103, 97',\r\n    tooltipAlpha: 0.6,\r\n    defaultAlpha: 0.6,\r\n    darkThemeTop: 'rgba(23, 27, 24, 1)'\r\n  },\r\n  'Data Visualization': {\r\n    rgb: '153, 199, 7',\r\n    tooltipAlpha: 0.8,\r\n    defaultAlpha: 0.6,\r\n    darkThemeTop: 'rgba(28, 30, 31, 1)'\r\n  },\r\n  'Evade the Rock': {\r\n    rgb: '101, 86, 175',\r\n    tooltipAlpha: 0.6,\r\n    defaultAlpha: 0.6,\r\n    darkThemeTop: 'rgb(25, 25, 25)'\r\n  },\r\n  'Dynamic App': {\r\n    rgb: '120, 211, 255',\r\n    tooltipAlpha: 0.6,\r\n    defaultAlpha: 0.6,\r\n    darkThemeTop: 'rgba(17, 17, 17, 1)'\r\n  }\r\n};\r\n","// utils/useRealMobileViewport.ts\r\nimport { useEffect, useState } from 'react';\r\n\r\nexport function useRealMobileViewport() {\r\n  const [isRealMobile, setIsRealMobile] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const coarse = window.matchMedia?.('(pointer: coarse)').matches ?? false;\r\n    const touch = (navigator as any).maxTouchPoints > 0;\r\n\r\n    // detect address-bar/viewport shrink behavior\r\n    const vv = (window as any).visualViewport;\r\n    let shrinks = false;\r\n\r\n    const check = () => {\r\n      if (!vv) return;\r\n      // if visual viewport is meaningfully smaller than layout viewport, assume mobile browser chrome\r\n      const gap = window.innerHeight - vv.height;\r\n      if (gap > 48) shrinks = true; // ~top/bottom bars size\r\n      setIsRealMobile(coarse && touch && (shrinks || gap > 48));\r\n    };\r\n\r\n    check();\r\n    vv?.addEventListener?.('resize', check);\r\n    window.addEventListener('orientationchange', check);\r\n    return () => {\r\n      vv?.removeEventListener?.('resize', check);\r\n      window.removeEventListener('orientationchange', check);\r\n    };\r\n  }, []);\r\n\r\n  return isRealMobile;\r\n}\r\n","import React, {\r\n  createContext,\r\n  useState,\r\n  useContext,\r\n  useRef,\r\n  ReactNode,\r\n} from 'react';\r\n\r\ninterface ProjectVisibilityContextType {\r\n  activeProject?: string;\r\n  setActiveProject: (title: string) => void;\r\n\r\n  blockGClick: boolean;\r\n  setBlockGClick: (clicked: boolean) => void;\r\n\r\n  currentIndex: number;\r\n  setCurrentIndex: React.Dispatch<React.SetStateAction<number>>;\r\n\r\n  scrollContainerRef: React.RefObject<HTMLDivElement>;\r\n\r\n  isDragging: boolean;\r\n  setIsDragging: React.Dispatch<React.SetStateAction<boolean>>;\r\n\r\n  focusedProjectKey: string | null;\r\n  setFocusedProjectKey: React.Dispatch<React.SetStateAction<string | null>>;\r\n\r\n  previousScrollY: number | null;\r\n  setPreviousScrollY: React.Dispatch<React.SetStateAction<number | null>>;\r\n}\r\n\r\ninterface ProjectVisibilityProviderProps {\r\n  children: ReactNode;\r\n}\r\n\r\nconst ProjectVisibilityContext = createContext<ProjectVisibilityContextType | undefined>(undefined);\r\n\r\nexport const ProjectVisibilityProvider = ({ children }: ProjectVisibilityProviderProps) => {\r\n  const [activeProject, setActiveProject] = useState<string | undefined>(undefined);\r\n  const [blockGClick, setBlockGClick] = useState(false);\r\n  const [currentIndex, setCurrentIndex] = useState(0);\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [focusedProjectKey, setFocusedProjectKey] = useState<string | null>(null);\r\n  const [previousScrollY, setPreviousScrollY] = useState<number | null>(null);\r\n\r\n  const scrollContainerRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  return (\r\n    <ProjectVisibilityContext.Provider\r\n      value={{\r\n        activeProject,\r\n        setActiveProject,\r\n        blockGClick,\r\n        setBlockGClick,\r\n        currentIndex,\r\n        setCurrentIndex,\r\n        scrollContainerRef,\r\n        isDragging,\r\n        setIsDragging,\r\n        focusedProjectKey,\r\n        setFocusedProjectKey,\r\n        previousScrollY,\r\n        setPreviousScrollY,\r\n      }}\r\n    >\r\n      {children}\r\n    </ProjectVisibilityContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useProjectVisibility = () => {\r\n  const context = useContext(ProjectVisibilityContext);\r\n  if (!context) {\r\n    throw new Error('useProjectVisibility must be used within ProjectVisibilityProvider');\r\n  }\r\n  return context;\r\n};\r\n","// utils/tooltip/global-tooltip.ts\r\nimport '../../styles/tooltip.css';\r\nimport { projectColors } from '../content-utility/color-map';\r\n\r\ntype TooltipInfo = { tags: string[]; backgroundColor: string };\r\nconst tooltipDataCache: Record<string, TooltipInfo> = {};\r\n\r\nconst LOCAL_FALLBACK_TAGS: Record<string, string[]> = {\r\n  'block-g': ['#q5.js Canvas', '#Gamification', '#Lottie Animation'],\r\n};\r\n\r\nconst TITLE_BY_KEY: Record<string, string> = {\r\n  'rotary-lamp': 'Rotary Lamp',\r\n  'ice-scoop': 'Ice Cream Scoop',\r\n  'data-viz': 'Data Visualization',\r\n  'block-g': 'Evade the Rock',\r\n  'dynamic': 'Dynamic App',\r\n};\r\n\r\nfunction bgForKey(key: string) {\r\n  const colorInfo = projectColors[TITLE_BY_KEY[key]];\r\n  const alpha = colorInfo?.tooltipAlpha ?? 0.6;\r\n  return colorInfo ? `rgba(${colorInfo.rgb}, ${alpha})` : 'rgba(85,95,90,0.6)';\r\n}\r\n\r\nfunction createTooltipDOM() {\r\n  const el = document.createElement('div');\r\n  el.id = 'custom-global-tooltip';\r\n  el.style.position = 'fixed';\r\n  el.style.pointerEvents = 'none';\r\n  el.style.zIndex = '9999';\r\n  el.style.opacity = '0';\r\n  el.style.visibility = 'hidden';\r\n  el.style.backdropFilter = 'blur(8px)';\r\n  el.style.color = '#fff';\r\n  el.style.transition = 'opacity 0.3s ease, visibility 0.3s ease';\r\n  el.className = 'custom-tooltip-blur';\r\n  const root = document.getElementById('efe-portfolio') || document.body;\r\n  root.appendChild(el);\r\n  return el as HTMLDivElement;\r\n}\r\n\r\nlet tooltipEl: HTMLDivElement | null = null;\r\nlet currentKey = '';\r\nlet hideTimeout: ReturnType<typeof setTimeout> | null = null;\r\n\r\nexport const fetchTooltipDataForKey = async (key: string): Promise<TooltipInfo> => {\r\n  if (tooltipDataCache[key]) return tooltipDataCache[key];\r\n\r\n  const bg = bgForKey(key);\r\n\r\n  // local fallback\r\n  if (LOCAL_FALLBACK_TAGS[key]) {\r\n    const info = { tags: LOCAL_FALLBACK_TAGS[key], backgroundColor: bg };\r\n    tooltipDataCache[key] = info;\r\n    return info;\r\n  }\r\n\r\n  // CMS fetch by slug\r\n  try {\r\n    const client = (await import('../sanity')).default;\r\n    const res = await client.fetch<{ tags?: string[] } | null>(\r\n      `*[_type==\"mediaBlock\" && slug.current == $key][0]{ tags }`,\r\n      { key }\r\n    );\r\n    const info: TooltipInfo = { tags: res?.tags ?? [], backgroundColor: bg };\r\n    tooltipDataCache[key] = info;\r\n    return info;\r\n  } catch {\r\n    const info: TooltipInfo = { tags: [], backgroundColor: bg };\r\n    tooltipDataCache[key] = info;\r\n    return info;\r\n  }\r\n};\r\n\r\nconst showTooltip = () => {\r\n  if (!tooltipEl) return;\r\n  if (hideTimeout) clearTimeout(hideTimeout);\r\n  tooltipEl.style.opacity = '1';\r\n  tooltipEl.style.visibility = 'visible';\r\n  hideTimeout = setTimeout(() => hideTooltip(), 99_000);\r\n};\r\n\r\nconst hideTooltip = () => {\r\n  if (!tooltipEl) return;\r\n  if (hideTimeout) clearTimeout(hideTimeout);\r\n  tooltipEl.style.opacity = '0';\r\n  tooltipEl.style.visibility = 'hidden';\r\n  currentKey = '';\r\n};\r\n\r\nfunction positionTooltip(x: number, y: number) {\r\n  if (!tooltipEl) return;\r\n  const rect = tooltipEl.getBoundingClientRect();\r\n  const padding = 0;\r\n  const vw = window.innerWidth;\r\n  const vh = window.innerHeight;\r\n\r\n  const nearTop = y < rect.height + padding + 20;\r\n  const nearBottom = y + rect.height + padding > vh - 20;\r\n  const nearRight = x + rect.width + padding > vw - 20;\r\n  const nearLeft = x < rect.width + padding + 20;\r\n\r\n  let left: number, top: number;\r\n  if (nearBottom) { top = y - rect.height - padding - 8; left = x - rect.width * 0; }\r\n  else if (nearTop) { top = y + padding - 14; left = x - rect.width * 0; }\r\n  else if (nearRight) { top = y - rect.height / 2; left = x - rect.width - padding - 24; }\r\n  else if (nearLeft) { top = y - rect.height / 2; left = x + padding - 4; }\r\n  else { top = y - rect.height / 1.6; left = x + padding - 2; }\r\n\r\n  left = Math.max(padding, Math.min(left, vw - rect.width - padding));\r\n  top  = Math.max(padding, Math.min(top,  vh - rect.height - padding));\r\n\r\n  tooltipEl.style.left = `${left}px`;\r\n  tooltipEl.style.top  = `${top}px`;\r\n}\r\n\r\nexport function initGlobalTooltip(isRealMobile: boolean) {\r\n  if (tooltipEl) return () => {};\r\n  tooltipEl = createTooltipDOM();\r\n\r\n  let lastMouseX = -1;\r\n  let lastMouseY = -1;\r\n  let ticking = false;\r\n  let scrollCheckTimeout: ReturnType<typeof setTimeout> | null = null;\r\n\r\n  const updateForElement = async (el: Element | null) => {\r\n    if (!(el instanceof HTMLElement)) { hideTooltip(); return; }\r\n    const tooltipClass = [...el.classList].find(c => c.startsWith('tooltip-'));\r\n    if (!tooltipClass) { hideTooltip(); return; }\r\n\r\n    const key = tooltipClass.replace('tooltip-', '');\r\n    if (key !== currentKey) {\r\n      currentKey = key;\r\n      const info = await fetchTooltipDataForKey(key);\r\n\r\n      if (!info.tags.length) { hideTooltip(); return; }\r\n      tooltipEl!.innerHTML = info.tags.map(t => `<p class=\"tooltip-tag\">${t}</p>`).join('');\r\n      tooltipEl!.style.backgroundColor = info.backgroundColor;\r\n      showTooltip();\r\n    } else if (tooltipEl!.style.opacity === '0' || tooltipEl!.style.visibility === 'hidden') {\r\n      showTooltip();\r\n    }\r\n  };\r\n\r\n  const onMouseMove = (e: MouseEvent) => {\r\n    lastMouseX = e.clientX;\r\n    lastMouseY = e.clientY;\r\n    requestAnimationFrame(() => positionTooltip(lastMouseX, lastMouseY));\r\n    updateForElement(e.target as Element);\r\n  };\r\n\r\n  const checkHoveredElementOnScroll = () => {\r\n    const el = document.elementFromPoint(lastMouseX, lastMouseY);\r\n    updateForElement(el);\r\n    requestAnimationFrame(() => positionTooltip(lastMouseX, lastMouseY));\r\n  };\r\n\r\n  const onScroll = () => {\r\n    if (!ticking) {\r\n      window.requestAnimationFrame(() => { checkHoveredElementOnScroll(); ticking = false; });\r\n      ticking = true;\r\n    }\r\n    if (scrollCheckTimeout) clearTimeout(scrollCheckTimeout);\r\n    scrollCheckTimeout = setTimeout(() => {}, 120);\r\n  };\r\n\r\n  const onMouseOut = (e: MouseEvent) => {\r\n    if (!e.relatedTarget) hideTooltip();\r\n  };\r\n\r\n  // only attach scroll observer for non-mobile real viewports\r\n  if (!isRealMobile) window.addEventListener('scroll', onScroll, true);\r\n  document.addEventListener('mousemove', onMouseMove, { passive: true });\r\n  document.addEventListener('mouseout', onMouseOut, { passive: true });\r\n\r\n  return () => {\r\n    if (!tooltipEl) return;\r\n    if (!isRealMobile) window.removeEventListener('scroll', onScroll, true);\r\n    document.removeEventListener('mousemove', onMouseMove);\r\n    document.removeEventListener('mouseout', onMouseOut);\r\n    tooltipEl.remove();\r\n    tooltipEl = null;\r\n    if (hideTimeout) clearTimeout(hideTimeout);\r\n  };\r\n}\r\n","// utils/tooltip/tooltipInit.ts\r\nimport { useEffect } from 'react';\r\nimport { initGlobalTooltip } from './tooltip';\r\nimport { useRealMobileViewport } from '../content-utility/real-mobile';\r\n\r\nexport const useTooltipInit = () => {\r\n  const isRealMobile = useRealMobileViewport();\r\n\r\n  useEffect(() => {\r\n    const dispose = initGlobalTooltip(isRealMobile);\r\n    return () => dispose?.();\r\n  }, [isRealMobile]);\r\n};\r\n"],"names":["React","useEffect","useRef","lottie","coin","jsx","_jsx","jsxs","_jsxs","CoinCounter","coins","highScore","newHighScore","coinRef","current","anim","loadAnimation","container","renderer","loop","autoplay","animationData","onDomLoaded","svg","querySelector","classList","add","total","totalFrames","segment","loopOnce","playSegments","onComplete","addEventListener","cleanupHandlers","complete","removeEventListener","destroy","className","children","ref","style","background","useState","ExitButton","onExit","visible","setVisible","isFadingOut","setIsFadingOut","handleClick","timeout","setTimeout","clearTimeout","onClick","opacity","transition","gameOver","BlockGGameOver","onRestart","visibleTrigger","lottieRef","preventScroll","e","preventDefault","window","passive","document","body","overflow","console","log","color","margin","onboardingAnimation","useProjectVisibility","useTooltipInit","BlockGOnboarding","onStart","resetTrigger","containerRef","lottieInstance","focusedProjectKey","scrollContainerRef","previousScrollY","setPreviousScrollY","setFocusedProjectKey","scrollY","scrollTo","top","behavior","initializeLottie","destroyLottie","observer","IntersectionObserver","entries","forEach","entry","isIntersecting","stop","threshold","observe","disconnect","display","alignItems","pointerEvents","desktopOnboarding","mobileOnboarding","updateHighScore","useHighScoreSubscription","isMobile","isTablet","isDesktop","q5","RockEscapade","canvasRef","q5InstanceRef","initialized","setInitialized","overlayVisible","setOverlayVisible","setBlockGClick","resetKey","setResetKey","setCoins","lottieContainerRef","showBeginText","setShowBeginText","showOverlayBg","setShowOverlayBg","shouldRenderOverlayBg","setShouldRenderOverlayBg","gameOverVisible","setGameOverVisible","countdownPhase","setCountdownPhase","setNewHighScore","isVisible","setIsVisible","handleOnboardingStart","handleRestart","restartGame","handleResize","resizeCanvas","offsetWidth","offsetHeight","canvasContainer","position","left","zIndex","handleWheel","handleKeyDown","key","navMenu","root","el","unobserve","sketch","p","verticalMode","innerWidth","innerHeight","rectangles","octagons","particles","projectiles","circle","lastSpawnTime","lastOctagonSpawnTime","rectangleSpawnRate","localCoins","fadeAlpha","spawnEnabled","prevGameOver","lastFiredTime","Infinity","cooldownDuration","cooldownRadiusMax","cooldownRadius","movingUp","movingDown","movingLeft","movingRight","w","h","Circle","height","millis","setup","createCanvas","draw","delta","deltaTime","autoEvade","moveUp","moveDown","stopVertical","moveLeft","moveRight","stopHorizontal","update","spawnRectangles","updateRectangles","spawnOctagons","updateOctagons","blendMode","ADD","i","length","part","isDead","splice","BLEND","proj","min","cooldownElapsed","remaining","cooldownProgress","indicatorRadius","noStroke","fill","ellipse","x","y","rectanglesInViewport","filter","r","width","maxRectangles","timeElapsed","initialSpawnBuffer","push","Shape","isNaN","overlaps","j","projSize","projX","projY","projW","projH","size","radius","RectangleProjectile","random","k","angle","TWO_PI","speed","vx","Math","cos","vy","sin","offscreen","r1","r2","resolveCollision","buffer","o","prev","Particle","c","abs","numParticles","particlesToSpawn","floor","fractionalPart","evadeForceX","evadeForceY","dangerLevel","rect","rectCenterX","rectCenterY","dx","dy","distSq","dist","sqrt","weight","force","attractForceX","attractForceY","closestOctagon","reduce","curr","prevDist","currDist","ax","ay","centerDx","centerDy","centerDist","keyPressed","now","Projectile","keyCode","UP_ARROW","DOWN_ARROW","LEFT_ARROW","RIGHT_ARROW","keyReleased","touchStarted","touches","touchMoved","touchEnded","constructor","trail","pow","createVector","shift","speedLimit","constrain","pos","alpha","map","trailRadius","other","isOctagon","distToOther","closestX","closestY","distance","startOffScreen","reset","playfulColors","baseSpeedX","rotation","rotationSpeed","translate","rotate","radians","drawOctagon","rectMode","CENTER","pop","angleStep","beginShape","px","py","vertex","endShape","CLOSE","thisW","thisH","otherW","otherH","overlapX","max","overlapY","lifespan","sourceVx","sourceVy","speedMultiplier","sourceSpeed","emissionSpeed","emissionAngle","levels","dirMag","dirX","dirY","minSpeed","maxSpeed","targetSpeed","acceleration","t","baseSpeed","sizeSpeedFactor","maxLifespan","q5Instance","remove","innerHTML","handleExit","attachTouchListeners","canvas","lastTouchPosition","handleTouchMove","touch","getBoundingClientRect","touchX","clientX","touchY","clientY","baseMultiplier","speedFactor","log2","forceMultiplier","handleTouchEnd","displayHighScore","isNewHighScore","id","client","setHighScore","query","fetch","then","data","score","undefined","subscription","listen","subscribe","newScore","result","unsubscribe","createIfNotExists","_id","_type","updated","patch","set","commit","err","error","projectColors","rgb","tooltipAlpha","defaultAlpha","darkThemeTop","useRealMobileViewport","isRealMobile","setIsRealMobile","coarse","matchMedia","matches","navigator","maxTouchPoints","vv","visualViewport","shrinks","check","gap","createContext","useContext","ProjectVisibilityContext","ProjectVisibilityProvider","activeProject","setActiveProject","blockGClick","currentIndex","setCurrentIndex","isDragging","setIsDragging","Provider","value","context","Error","tooltipDataCache","LOCAL_FALLBACK_TAGS","TITLE_BY_KEY","bgForKey","colorInfo","createTooltipDOM","createElement","visibility","backdropFilter","getElementById","appendChild","tooltipEl","currentKey","hideTimeout","fetchTooltipDataForKey","bg","info","tags","backgroundColor","default","res","showTooltip","hideTooltip","positionTooltip","padding","vw","vh","nearTop","nearBottom","nearRight","nearLeft","initGlobalTooltip","lastMouseX","lastMouseY","ticking","scrollCheckTimeout","updateForElement","HTMLElement","tooltipClass","find","startsWith","replace","join","onMouseMove","requestAnimationFrame","target","checkHoveredElementOnScroll","elementFromPoint","onScroll","onMouseOut","relatedTarget","dispose"],"sourceRoot":""}