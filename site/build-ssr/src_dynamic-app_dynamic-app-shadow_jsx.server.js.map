{"version":3,"file":"src_dynamic-app_dynamic-app-shadow_jsx.server.js","mappings":"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","sources":["webpack://personal-site/./src/dynamic-app/dynamic-app-outgoing.jsx","webpack://personal-site/./src/dynamic-app/dynamic-app-shadow.jsx","webpack://personal-site/./src/dynamic-app/lib/observedCard.jsx","webpack://personal-site/./src/dynamic-app/lib/shadowObserver.ts"],"sourcesContent":["// DynamicTheme Ã©mbÃ©d.jsx (with guarded alt observer)\r\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\r\nimport Navigation from './components/navigation';\r\nimport TitleDivider from './components/title';\r\nimport SortBy from './components/sortBy';\r\nimport LoadingScreen from '../utils/loading/loading';\r\nimport FireworksDisplay from './components/fireworksDisplay';\r\nimport PauseButton from './components/pauseButton';\r\nimport Footer from './components/footer';\r\nimport fetchSVGIcons from './lib/fetchSVGIcons';\r\nimport ObservedCard from './lib/observedCard.jsx';\r\nimport setupAltObserver from './lib/setupAltObserver';\r\nimport IntroOverlay from './components/IntroOverlay';\r\nimport { colorMapping } from './lib/colorString.ts';\r\nimport { useShadowRoot } from '../utils/context-providers/shadow-root-context.tsx';\r\nimport indexCss from '../styles/dynamic-app/index.css?raw';\r\nimport miscCss from '../styles/dynamic-app/misc.css?raw';\r\nimport overlayCss from '../styles/loading-overlay.css?raw';\r\n\r\nfunction DynamicTheme() {\r\n  const [sortedImages, setSortedImages] = useState([]);\r\n  const [svgIcons, setSvgIcons] = useState({});\r\n  const [activeColor, setActiveColor] = useState('#FFFFFF');\r\n  const [movingTextColors, setMovingTextColors] = useState(['#FFFFFF', '#FFFFFF', '#FFFFFF']);\r\n  const [lastKnownColor, setLastKnownColor] = useState('#FFFFFF');\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [pauseAnimation, setPauseAnimation] = useState(false);\r\n  const [showNavigation, setShowNavigation] = useState(false);\r\n\r\n  /** @type {React.MutableRefObject<((enabled:boolean)=>void)|null>} */\r\n  const toggleFireworksRef = useRef(null);\r\n  /** @type {React.MutableRefObject<HTMLElement|null>} */\r\n  const scrollContainerRef = useRef(null);\r\n  /** @type {React.MutableRefObject<HTMLElement|null>} */\r\n  const shadowRef = useRef(null);\r\n\r\n  // Derived fireworks mount flag (visibility && !paused)\r\n  const [showFireworks, setShowFireworks] = useState(true);\r\n\r\n  // Track host visibility for guarding alt updates\r\n  const [isHostVisible, setIsHostVisible] = useState(false);\r\n  const hostVisibleRef = useRef(false);\r\n\r\n  const { getShadowRoot, injectStyle } = useShadowRoot();\r\n\r\n  useEffect(() => {\r\n    [indexCss, miscCss, overlayCss].forEach(injectStyle);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const timeout = setTimeout(() => {\r\n      setIsLoading(false);\r\n      setShowNavigation(true);\r\n    }, 200);\r\n    return () => clearTimeout(timeout);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setTimeout(() => {\r\n      fetchSVGIcons().then((icons) => {\r\n        const iconMapping = icons.reduce((acc, icon) => {\r\n          acc[icon.title] = icon.icon;\r\n          return acc;\r\n        }, /** @type {Record<string,string>} */ ({}));\r\n        setSvgIcons(iconMapping);\r\n        setTimeout(() => setIsLoading(false), 200);\r\n      });\r\n    }, 400);\r\n  }, []);\r\n\r\n  /** @type {React.MutableRefObject<Document|ShadowRoot|null>} */\r\n  const observerRoot = useRef(null);\r\n\r\n  useEffect(() => {\r\n    const root = typeof getShadowRoot === 'function' ? getShadowRoot() : document;\r\n    observerRoot.current = root;\r\n  }, [getShadowRoot]);\r\n\r\n  // ------ ALT color logic (unchanged helpers) ------\r\n  const handleActivate = useCallback((alt1) => {\r\n    const colors = colorMapping[alt1];\r\n    if (colors && colors[0] !== activeColor) {\r\n      setActiveColor(colors[2]);\r\n      setMovingTextColors([colors[0], colors[1], colors[3]]);\r\n      setLastKnownColor(colors[2]);\r\n    }\r\n  }, [activeColor]);\r\n\r\n  const handleDeactivate = useCallback(() => {\r\n    if (activeColor !== lastKnownColor) {\r\n      setActiveColor(lastKnownColor);\r\n    }\r\n  }, [activeColor, lastKnownColor]);\r\n\r\n  // ------ Guarded alt observer: only while host is visible; dedup events; cleanup properly ------\r\n  const currentAltRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (isLoading || sortedImages.length === 0) return;\r\n    const root = observerRoot.current;\r\n    if (!root) return;\r\n\r\n    const guardedActivate = (alt1) => {\r\n      if (!hostVisibleRef.current) return;           // ignore when section not visible\r\n      if (currentAltRef.current === alt1) return;    // ignore duplicate activate\r\n      currentAltRef.current = alt1;\r\n      handleActivate(alt1);\r\n    };\r\n\r\n    const guardedDeactivate = (alt1) => {\r\n      if (!hostVisibleRef.current) return;           // ignore when section not visible\r\n      if (currentAltRef.current !== alt1) return;    // only deactivate if it was the active one\r\n      handleDeactivate(alt1);\r\n    };\r\n\r\n    const cleanup = setupAltObserver(guardedActivate, guardedDeactivate, root);\r\n    return typeof cleanup === 'function' ? cleanup : undefined;\r\n    // NOTE: don't include pauseAnimation here; pausing shouldn't rebuild the observer\r\n  }, [isLoading, sortedImages, handleActivate, handleDeactivate]);\r\n\r\n  // ------ Pause button bridge ------\r\n  const handleSetToggleFireworks = useCallback((toggleFunction) => {\r\n    toggleFireworksRef.current = toggleFunction;\r\n  }, []);\r\n\r\n  const handlePauseToggle = useCallback((isEnabled) => {\r\n    // sync internal engine immediately, if mounted\r\n    if (toggleFireworksRef.current) toggleFireworksRef.current(isEnabled);\r\n    setPauseAnimation(!isEnabled);\r\n  }, []);\r\n\r\n  // ------ Resize (as you had) ------\r\n  useEffect(() => {\r\n    if (!shadowRef.current) return;\r\n    const observer = new ResizeObserver(() => {\r\n      console.log('[ðŸ” Resize observed]', shadowRef.current?.getBoundingClientRect());\r\n    });\r\n    observer.observe(shadowRef.current);\r\n    return () => observer.disconnect();\r\n  }, []);\r\n\r\n  // ------ Host visibility controls fireworks AND gates alt updates ------\r\n  useEffect(() => {\r\n    const container = document.querySelector('#block-dynamic');\r\n    if (!container) {\r\n      console.warn('[FireworkObserver] #block-dynamic not found in DOM');\r\n      return;\r\n    }\r\n\r\n    const io = new IntersectionObserver(\r\n      ([entry]) => {\r\n        const visible = !!entry.isIntersecting;\r\n        hostVisibleRef.current = visible;\r\n        setIsHostVisible(visible);\r\n\r\n        const desired = visible && !pauseAnimation; // respect Pause\r\n        setShowFireworks((prev) => (prev !== desired ? desired : prev));\r\n        if (toggleFireworksRef.current) toggleFireworksRef.current(desired);\r\n      },\r\n      { threshold: 0.3, root: null }\r\n    );\r\n\r\n    io.observe(container);\r\n\r\n    // Run once immediately\r\n    const rect = container.getBoundingClientRect();\r\n    const visibleNow = rect.top < window.innerHeight && rect.bottom > 0;\r\n    hostVisibleRef.current = visibleNow;\r\n    setIsHostVisible(visibleNow);\r\n\r\n    const initialDesired = visibleNow && !pauseAnimation;\r\n    setShowFireworks((prev) => (prev !== initialDesired ? initialDesired : prev));\r\n    if (toggleFireworksRef.current) toggleFireworksRef.current(initialDesired);\r\n\r\n    return () => io.disconnect();\r\n  }, [pauseAnimation]);\r\n\r\n  // Keep internal engine synced when pause toggles\r\n  useEffect(() => {\r\n    if (toggleFireworksRef.current) toggleFireworksRef.current(!pauseAnimation && isHostVisible);\r\n  }, [pauseAnimation, isHostVisible]);\r\n\r\n  const cardRefs = useRef([]);\r\n  cardRefs.current = sortedImages.map((_, i) => cardRefs.current[i] ?? React.createRef());\r\n\r\n  return (\r\n    <>\r\n      {isLoading ? (\r\n        <LoadingScreen isFullScreen={false} />\r\n      ) : (\r\n        <div className=\"homePage-container\" ref={scrollContainerRef}>\r\n          <IntroOverlay />\r\n\r\n          <div className=\"navigation-wrapper\">\r\n            {showNavigation && (\r\n              <Navigation\r\n                customArrowIcon2={svgIcons['arrow1']}\r\n                customArrowIcon={svgIcons['arrow2']}\r\n                items={sortedImages}\r\n                activeColor={activeColor}\r\n                isInShadow={typeof getShadowRoot === 'function' && getShadowRoot() !== document}\r\n                scrollLockContainer={scrollContainerRef.current}\r\n              />\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"firework-wrapper\">\r\n            <div className=\"firework-divider\">\r\n              {showFireworks && (\r\n                <FireworksDisplay\r\n                  colorMapping={colorMapping}\r\n                  items={sortedImages}\r\n                  activeColor={activeColor}\r\n                  lastKnownColor={lastKnownColor}\r\n                  onToggleFireworks={handleSetToggleFireworks}\r\n                />\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"section-divider\"></div>\r\n\r\n          <div className=\"title-divider\">\r\n            <TitleDivider\r\n              svgIcon={svgIcons['logo-small-1']}\r\n              movingTextColors={movingTextColors}\r\n              pauseAnimation={pauseAnimation}\r\n            />\r\n          </div>\r\n\r\n          <div id=\"homePage\">\r\n            <div className=\"no-overflow\">\r\n              <div className=\"pause-button-wrapper\">\r\n                <PauseButton toggleP5Animation={handlePauseToggle} />\r\n              </div>\r\n\r\n              <div className=\"sort-by-divider\">\r\n                <h3 className=\"students-heading\">Students</h3>\r\n                <SortBy\r\n                  setSortOption={() => {}}\r\n                  onFetchItems={setSortedImages}\r\n                  customArrowIcon={svgIcons['arrow2']}\r\n                  colorMapping={colorMapping}\r\n                  getRoot={getShadowRoot}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"section-divider2\"></div>\r\n\r\n              <div className=\"UI-card-divider\">\r\n                {sortedImages.map((data, index) => (\r\n                  <ObservedCard\r\n                    key={index}\r\n                    data={data}\r\n                    index={index}\r\n                    getShadowRoot={getShadowRoot}\r\n                    pauseAnimation={pauseAnimation}\r\n                    customArrowIcon2={svgIcons['arrow1']}\r\n                  />\r\n                ))}\r\n              </div>\r\n\r\n              <Footer\r\n                customArrowIcon2={svgIcons['arrow1']}\r\n                linkArrowIcon={svgIcons['link-icon']}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default DynamicTheme;\r\n","// dynamic app shadow DOM wrappÃ©r\r\nimport React, { useRef, useEffect, useState } from 'react';\r\nimport createShadowRoot from 'react-shadow';\r\nimport DynamicTheme from './dynamic-app-outgoing.jsx';\r\nimport { ShadowRootProvider } from '../utils/context-providers/shadow-root-context.tsx'; \r\n\r\nconst DynamicAppInbound = ({ onFocusChange }) => {\r\n  const shadowRef = useRef(null);\r\n  const [shadowRoot, setShadowRoot] = useState(null);\r\n  const ShadowRoot = createShadowRoot.div;\r\n\r\n  useEffect(() => {\r\n    setTimeout(() => {\r\n      const root = shadowRef.current?.getRootNode?.();\r\n      if (root && root.host) {\r\n        setShadowRoot(root);\r\n      } else {\r\n        console.warn('[Not a ShadowRoot]', root);\r\n      }\r\n    }, 0);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const el = shadowRef.current;\r\n    if (!el) return;\r\n\r\n    let startY = 0;\r\n    let focusTriggered = false;\r\n\r\n    const triggerSyntheticClick = () => {\r\n      const down = new PointerEvent('pointerdown', {\r\n        bubbles: true,\r\n        cancelable: true,\r\n        composed: true,\r\n        pointerType: 'touch',\r\n      });\r\n      el.dispatchEvent(down);\r\n      onFocusChange?.(true);\r\n      console.log('[Focus triggered in embedded app]');\r\n    };\r\n\r\n    const handleTouchStart = (e) => {\r\n      if (e.touches.length === 0) return;\r\n      startY = e.touches[0].clientY;\r\n      focusTriggered = false;\r\n    };\r\n\r\n    const handleTouchMove = (e) => {\r\n      if (focusTriggered || e.touches.length === 0) return;\r\n      const deltaY = e.touches[0].clientY - startY;\r\n\r\n      if (Math.abs(deltaY) > 1) {\r\n        el.scrollTop += 1;\r\n        triggerSyntheticClick();\r\n        focusTriggered = true;\r\n      }\r\n    };\r\n\r\n    if ('ontouchstart' in window) {\r\n      el.addEventListener('touchstart', handleTouchStart, { passive: true });\r\n      el.addEventListener('touchmove', handleTouchMove, { passive: true });\r\n    }\r\n\r\n    return () => {\r\n      el.removeEventListener('touchstart', handleTouchStart);\r\n      el.removeEventListener('touchmove', handleTouchMove);\r\n    };\r\n  }, [onFocusChange]);\r\n\r\n  return (\r\n    <div className=\"embedded-app\">\r\n      <ShadowRoot>\r\n        <div ref={shadowRef} className=\"dynamic-app\" id=\"shadow-dynamic-app\">\r\n          {shadowRoot ? (\r\n            <ShadowRootProvider getShadowRoot={() => shadowRoot}>\r\n              <DynamicTheme />\r\n            </ShadowRootProvider>\r\n          ) : null}\r\n        </div>\r\n      </ShadowRoot>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DynamicAppInbound;\r\n","// src/dynamic-app/lib/observedCard.jsx\r\nimport React, { useRef } from 'react';\r\nimport UIcards from '../components/homepage-UIcards';\r\nimport useIntersectionTransform from './shadowObserver';\r\n\r\nfunction ObservedCard({\r\n  data,\r\n  index,\r\n  getShadowRoot,\r\n  pauseAnimation,\r\n  customArrowIcon2,\r\n}) {\r\n  const ref = useRef(null);\r\n\r\n  // The hook will accept whatever you pass â€” no TS constraint here\r\n  useIntersectionTransform(ref, getShadowRoot, pauseAnimation);\r\n\r\n  return (\r\n    <div ref={ref} className={`custom-card-${index}`}>\r\n      <UIcards\r\n        title={data.title}\r\n        backgroundColor={data.backgroundColor}\r\n        image1={data.image1}\r\n        image2={data.image2}\r\n        alt1={data.alt1}\r\n        alt2={data.alt2}\r\n        url1={data.url1}\r\n        className={`custom-card-${index}`}\r\n        customArrowIcon2={customArrowIcon2}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ObservedCard;\r\n","// useIntersectionTransform.ts\r\nimport { useEffect } from 'react';\r\n\r\nexport default function useIntersectionTransform(\r\n  ref: React.RefObject<HTMLElement>,\r\n  getShadowRoot: () => ShadowRoot | null,\r\n  pauseAnimation: boolean,\r\n  getScrollRoot?: () => Element | null  // ðŸ‘ˆ NEW\r\n) {\r\n\r\n  useEffect(() => {\r\n    if (!ref.current || pauseAnimation) return;\r\n\r\n    // Figure out where we live (shadow/dom) and what to use as IO root.\r\n    const shadow = getShadowRoot?.() ?? null;\r\n    const isInShadow = !!shadow;\r\n    const containerEl =\r\n      (typeof getScrollRoot === 'function' && getScrollRoot()) ||\r\n      // prefer your inner scroller if we can find it:\r\n      (isInShadow ? shadow.querySelector('.embedded-app') as Element | null : null) ||\r\n      null; // fallback = viewport\r\n\r\n    // (optional) gate transforms to when pointer is inside shadow host\r\n    let mouseInside = false;\r\n    const hostEl = isInShadow ? (shadow as ShadowRoot).host as HTMLElement : null;\r\n    const onEnter = () => (mouseInside = true);\r\n    const onLeave = () => (mouseInside = false);\r\n    if (hostEl) {\r\n      hostEl.addEventListener('pointerenter', onEnter);\r\n      hostEl.addEventListener('pointerleave', onLeave);\r\n    }\r\n\r\n    const cardEl = ref.current!;\r\n    const imageContainer  = cardEl.querySelector('.image-container')  as HTMLElement | null;\r\n    const imageContainer2 = cardEl.querySelector('.image-container2') as HTMLElement | null;\r\n    if (!imageContainer || !imageContainer2) return;\r\n\r\n    const applyTransform = (percentage: number) => {\r\n      const width =\r\n        containerEl instanceof Element\r\n          ? (containerEl as HTMLElement).clientWidth\r\n          : window.innerWidth;\r\n\r\n      let imageContainerTransform = 'translate(0em, 0em)';\r\n      let imageContainer2Transform = 'translate(1em, -28em)';\r\n      let imageContainerZIndex = '5';\r\n      let imageContainer2ZIndex = '1';\r\n\r\n      if (width <= 767) {\r\n        if (percentage > 0.35 && percentage <= 1) {\r\n          imageContainerTransform = 'translate(0.5em, 1em)';\r\n          imageContainer2Transform = 'translate(0.5em, -32.5em)';\r\n          imageContainerZIndex = '1';\r\n          imageContainer2ZIndex = '5';\r\n        } else if (percentage > 0.15 && percentage <= 0.35) {\r\n          imageContainerTransform = 'translate(1.5em, 0.5em)';\r\n          imageContainer2Transform = 'translate(-0.25em, -34.5em)';\r\n          imageContainerZIndex = '5';\r\n          imageContainer2ZIndex = '1';\r\n        } else if (percentage >= 0 && percentage <= 0.15) {\r\n          imageContainerTransform = 'translate(0em, 0em)';\r\n          imageContainer2Transform = 'translate(0em, -33.5em)';\r\n        }\r\n      } else if (width <= 1024) {\r\n        if (percentage >= 0.3) {\r\n          imageContainerTransform = 'translate(0em, 0em)';\r\n          imageContainer2Transform = 'translate(0em, -23.5em)';\r\n          imageContainerZIndex = '1';\r\n          imageContainer2ZIndex = '5';\r\n        } else if (percentage < 0.3) {\r\n          imageContainerTransform = 'translate(-0.5em, 0em)';\r\n          imageContainer2Transform = 'translate(1em, -23.5em)';\r\n          imageContainerZIndex = '1';\r\n          imageContainer2ZIndex = '5';\r\n        } else if (percentage < 0.1) {\r\n          imageContainerTransform = 'translate(-0.5em, 0em)';\r\n          imageContainer2Transform = 'translate(1em, -23.5em)';\r\n          imageContainerZIndex = '5';\r\n          imageContainer2ZIndex = '1';\r\n        }\r\n      } else if (width > 1025) {\r\n        if (percentage > 0.6 && percentage <= 1) {\r\n          imageContainerTransform = 'translate(1em, 1em)';\r\n          imageContainer2Transform = 'translate(0em, -29.2em)';\r\n          imageContainerZIndex = '1';\r\n          imageContainer2ZIndex = '5';\r\n        } else if (percentage > 0.3 && percentage <= 0.6) {\r\n          imageContainerTransform = 'translate(1.2em, -0.8em)';\r\n          imageContainer2Transform = 'translate(0em, -28em)';\r\n          imageContainerZIndex = '5';\r\n          imageContainer2ZIndex = '1';\r\n        } else if (percentage >= 0 && percentage <= 0.3) {\r\n          imageContainerTransform = 'translate(0em, 0em)';\r\n          imageContainer2Transform = 'translate(1em, -27.4em)';\r\n          imageContainerZIndex = '5';\r\n          imageContainer2ZIndex = '1';\r\n        }\r\n      } else {\r\n        if (percentage > 0.3 && percentage <= 1) {\r\n          imageContainerTransform = 'translate(0em, 0em)';\r\n          imageContainer2Transform = 'translate(1em, -43em)';\r\n          imageContainerZIndex = '1';\r\n          imageContainer2ZIndex = '5';\r\n        } else if (percentage >= 0 && percentage <= 0.3) {\r\n          imageContainerTransform = 'translate(0em, 0em)';\r\n          imageContainer2Transform = 'translate(1em, -43em)';\r\n        }\r\n      }\r\n\r\n      imageContainer.style.transform = imageContainerTransform;\r\n      imageContainer.style.zIndex = imageContainerZIndex;\r\n      imageContainer2.style.transform = imageContainer2Transform;\r\n      imageContainer2.style.zIndex = imageContainer2ZIndex;\r\n    };\r\n\r\n    // IO now uses the scroll container as root (if available)\r\n    const observer = new IntersectionObserver(\r\n      ([entry]) => {\r\n        if (isInShadow && !mouseInside) return;\r\n\r\n        const rect = entry.boundingClientRect;\r\n\r\n        // use the containerâ€™s rect/height instead of window\r\n        const rootRect = containerEl\r\n          ? (containerEl as Element).getBoundingClientRect()\r\n          : document.documentElement.getBoundingClientRect();\r\n\r\n        const rootHeight =\r\n          containerEl instanceof Element\r\n            ? (containerEl as HTMLElement).clientHeight\r\n            : window.innerHeight;\r\n\r\n        const rootCenter = rootRect.top + rootHeight;\r\n\r\n        // replicate your old math but relative to the container center\r\n        const percentage = Math.max(\r\n          0,\r\n          Math.min(rect.height, rootCenter - rect.top)\r\n        ) / rect.height;\r\n\r\n        applyTransform(percentage);\r\n      },\r\n      {\r\n        root: containerEl || null, // â† critical change\r\n        threshold: Array.from({ length: 101 }, (_, i) => i / 100),\r\n      }\r\n    );\r\n\r\n    // initial position apply (also relative to container)\r\n    const rect = cardEl.getBoundingClientRect();\r\n    const rootRect = containerEl\r\n      ? (containerEl as Element).getBoundingClientRect()\r\n      : document.documentElement.getBoundingClientRect();\r\n    const rootHeight =\r\n      containerEl instanceof Element\r\n        ? (containerEl as HTMLElement).clientHeight\r\n        : window.innerHeight;\r\n    const rootCenter = rootRect.top + rootHeight / 1.5;\r\n    const initialPct = Math.max(0, Math.min(rect.height, rootCenter - rect.top)) / rect.height;\r\n    applyTransform(initialPct);\r\n\r\n    observer.observe(cardEl);\r\n\r\n    return () => {\r\n      observer.disconnect();\r\n      if (hostEl) {\r\n        hostEl.removeEventListener('pointerenter', onEnter);\r\n        hostEl.removeEventListener('pointerleave', onLeave);\r\n      }\r\n    };\r\n  }, [ref, pauseAnimation, getShadowRoot, getScrollRoot]);\r\n}\r\n"],"names":["React","useState","useEffect","useCallback","useRef","Navigation","TitleDivider","SortBy","LoadingScreen","FireworksDisplay","PauseButton","Footer","fetchSVGIcons","ObservedCard","setupAltObserver","IntroOverlay","colorMapping","useShadowRoot","indexCss","miscCss","overlayCss","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","DynamicTheme","sortedImages","setSortedImages","svgIcons","setSvgIcons","activeColor","setActiveColor","movingTextColors","setMovingTextColors","lastKnownColor","setLastKnownColor","isLoading","setIsLoading","pauseAnimation","setPauseAnimation","showNavigation","setShowNavigation","toggleFireworksRef","scrollContainerRef","shadowRef","showFireworks","setShowFireworks","isHostVisible","setIsHostVisible","hostVisibleRef","getShadowRoot","injectStyle","forEach","timeout","setTimeout","clearTimeout","then","icons","iconMapping","reduce","acc","icon","title","observerRoot","root","document","current","handleActivate","alt1","colors","handleDeactivate","currentAltRef","length","guardedActivate","guardedDeactivate","cleanup","undefined","handleSetToggleFireworks","toggleFunction","handlePauseToggle","isEnabled","observer","ResizeObserver","console","log","getBoundingClientRect","observe","disconnect","container","querySelector","warn","io","IntersectionObserver","entry","visible","isIntersecting","desired","prev","threshold","rect","visibleNow","top","window","innerHeight","bottom","initialDesired","cardRefs","map","_","i","createRef","children","isFullScreen","className","ref","customArrowIcon2","customArrowIcon","items","isInShadow","scrollLockContainer","onToggleFireworks","svgIcon","id","toggleP5Animation","setSortOption","onFetchItems","getRoot","data","index","linkArrowIcon","createShadowRoot","ShadowRootProvider","DynamicAppInbound","onFocusChange","shadowRoot","setShadowRoot","ShadowRoot","div","getRootNode","host","el","startY","focusTriggered","triggerSyntheticClick","down","PointerEvent","bubbles","cancelable","composed","pointerType","dispatchEvent","handleTouchStart","e","touches","clientY","handleTouchMove","deltaY","Math","abs","scrollTop","addEventListener","passive","removeEventListener","UIcards","useIntersectionTransform","backgroundColor","image1","image2","alt2","url1","getScrollRoot","shadow","containerEl","mouseInside","hostEl","onEnter","onLeave","cardEl","imageContainer","imageContainer2","applyTransform","percentage","width","Element","clientWidth","innerWidth","imageContainerTransform","imageContainer2Transform","imageContainerZIndex","imageContainer2ZIndex","style","transform","zIndex","boundingClientRect","rootRect","documentElement","rootHeight","clientHeight","rootCenter","max","min","height","Array","from","initialPct"],"sourceRoot":""}