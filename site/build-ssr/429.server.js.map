{"version":3,"file":"429.server.js","mappings":"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","sources":["webpack://personal-site/./src/dynamic-app/components/title.jsx","webpack://personal-site/./src/dynamic-app/lib/palette-controller.ts","webpack://personal-site/./src/utils/media-providers/image-upgrade-manager.ts","webpack://personal-site/./src/utils/media-providers/media-loader.tsx","webpack://personal-site/./src/utils/media-providers/video-observer.tsx","webpack://personal-site/./src/utils/context-providers/shadow-root-context.tsx","webpack://personal-site/./src/dynamic-app/components/pauseButton.jsx","webpack://personal-site/./src/dynamic-app/components/sortBy.jsx","webpack://personal-site/./src/dynamic-app/components/homepage-UIcards.jsx","webpack://personal-site/./src/dynamic-app/lib/observedCard.jsx","webpack://personal-site/./src/dynamic-app/lib/shadowObserver.ts","webpack://personal-site/./src/dynamic-app/lib/setupAltObserver.js","webpack://personal-site/./src/dynamic-app/components/IntroOverlay.jsx","webpack://personal-site/./src/dynamic-app/dynamic-app-outgoing.jsx","webpack://personal-site/./src/dynamic-app/dynamic-app-shadow.jsx","webpack://personal-site/./src/dynamic-app/components/navigation.jsx","webpack://personal-site/./src/dynamic-app/lib/fetchGallery.js","webpack://personal-site/./src/dynamic-app/lib/colorString.ts","webpack://personal-site/./src/dynamic-app/components/footer.jsx","webpack://personal-site/./src/utils/context-providers/style-injector.ts"],"sourcesContent":["// TitleDivider component (no flicker on enter/leave)\r\nimport { useEffect, useMemo, useRef, useState } from 'react';\r\nimport { useStyleInjection } from '../../utils/context-providers/style-injector.ts';\r\nimport titleCss from '../../styles/dynamic-app/title.css?raw';\r\n\r\nconst isTriplet = (v) => Array.isArray(v) && v.length === 3 && v.every(x => typeof x === 'string');\r\n\r\nconst TitleDivider = ({ svgIcon, movingTextColors, pauseAnimation }) => {\r\n  useStyleInjection(titleCss, 'dynamic-app-style-title');\r\n\r\n  // ----- visibility of this component -----\r\n  const rootRef = useRef(null);\r\n  const [isVisible, setIsVisible] = useState(true);\r\n  useEffect(() => {\r\n    const el = rootRef.current;\r\n    if (!el || typeof IntersectionObserver === 'undefined') return;\r\n    const io = new IntersectionObserver(\r\n      ([entry]) => setIsVisible(!!entry.isIntersecting),\r\n      { threshold: 0.01 }\r\n    );\r\n    io.observe(el);\r\n    return () => io.disconnect();\r\n  }, []);\r\n\r\n  // ----- stable palette that only changes when visible -----\r\n  const defaultTriplet = ['#70c6b0', '#5670b5', '#50b0c5'];\r\n  const incoming = isTriplet(movingTextColors) ? movingTextColors : defaultTriplet;\r\n\r\n  const [stableColors, setStableColors] = useState(incoming);\r\n  const pendingRef = useRef(null);\r\n\r\n  // shallow compare helper\r\n  const sameTriplet = (a, b) => a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\r\n\r\n  // When palette prop changes: apply immediately if visible, else stash it.\r\n  useEffect(() => {\r\n    if (!isTriplet(incoming)) return;\r\n    if (isVisible) {\r\n      setStableColors(prev => (sameTriplet(prev, incoming) ? prev : incoming));\r\n      pendingRef.current = null;\r\n    } else {\r\n      // hold for later to avoid flicker while hidden\r\n      pendingRef.current = incoming;\r\n    }\r\n  }, [incoming, isVisible]);\r\n\r\n  // When we become visible, commit any pending palette once.\r\n  useEffect(() => {\r\n    if (isVisible && pendingRef.current && !sameTriplet(stableColors, pendingRef.current)) {\r\n      setStableColors(pendingRef.current);\r\n      pendingRef.current = null;\r\n    }\r\n  }, [isVisible, stableColors]);\r\n\r\n  // ----- brightness adjust + smooth transition -----\r\n  const adjustBrightness = (hex, mul) => {\r\n    if (!/^#[0-9a-f]{6}$/i.test(hex)) return hex;\r\n    let r = parseInt(hex.slice(1, 3), 16);\r\n    let g = parseInt(hex.slice(3, 5), 16);\r\n    let b = parseInt(hex.slice(5, 7), 16);\r\n    r = Math.min(255, Math.max(0, Math.floor(r * mul)));\r\n    g = Math.min(255, Math.max(0, Math.floor(g * mul)));\r\n    b = Math.min(255, Math.max(0, Math.floor(b * mul)));\r\n    return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;\r\n  };\r\n\r\n  const colors = useMemo(() => ([\r\n    adjustBrightness(stableColors[0], 1.05),\r\n    adjustBrightness(stableColors[1], 1.25),\r\n    adjustBrightness(stableColors[2], 1.10),\r\n  ]), [stableColors]);\r\n\r\n  const textSegments = useMemo(() => ([\r\n    { text: 'Institute Gallery', suffix: '' },\r\n    { text: 'Dyna', suffix: 'mic Media' },\r\n    { text: 'Dyn', suffix: 'mic Media' },\r\n  ]), []);\r\n\r\n  const renderMovingContent = (repeatCount = 2) =>\r\n    [...Array(repeatCount)].flatMap((_, repeatIndex) =>\r\n      textSegments.map((segment, i) => (\r\n        <span\r\n          key={`${repeatIndex}-${i}`}\r\n          className=\"moving-text\"\r\n          style={{\r\n            color: colors[i],\r\n            transition: 'color 120ms linear',\r\n          }}\r\n        >\r\n          {segment.text}\r\n          <span className=\"logo-container\">\r\n            <span\r\n              className=\"svg-icon\"\r\n              // If your injected SVG respects currentColor, you could instead set color here.\r\n              style={{ fill: colors[i], transition: 'fill 120ms linear' }}\r\n              dangerouslySetInnerHTML={{ __html: svgIcon }}\r\n            />\r\n          </span>\r\n          {segment.suffix}\r\n        </span>\r\n      ))\r\n    );\r\n\r\n  return (\r\n    <div className=\"title-container\" ref={rootRef}>\r\n      <div className=\"static-title\">\r\n        <h1>MassArt 2024</h1>\r\n      </div>\r\n      <div className={`moving-title ${pauseAnimation ? 'paused' : ''}`}>\r\n        <h1 className=\"title-with-icon moving-text-wrapper\">\r\n          {renderMovingContent()}\r\n        </h1>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TitleDivider;\r\n","// src/dynamic-app/lib/palette-controller.ts\r\n\r\nexport type Quartet = [string, string, string, string];\r\nexport type Triplet = [string, string, string];\r\n\r\nconst WHITE = '#FFFFFF';\r\n\r\n// resolve alt → palette (handles trailing spaces too)\r\nexport function resolvePalette(\r\n  altRaw: string | null | undefined,\r\n  colorMapping: Record<string, Quartet | undefined>\r\n): Quartet | null {\r\n  if (!altRaw) return null;\r\n  const exact = colorMapping[altRaw];\r\n  if (Array.isArray(exact)) return exact as Quartet;\r\n  const trimmed = colorMapping[altRaw.trim()];\r\n  if (Array.isArray(trimmed)) return trimmed as Quartet;\r\n  return null;\r\n}\r\n\r\n// compute state from a quartet\r\nexport function computeStateFromPalette(\r\n  q: Quartet | null,\r\n  win: Window = window\r\n): { activeColor: string; movingText: Triplet; lastKnown: string } {\r\n  const palette: Quartet = q ?? [WHITE, WHITE, WHITE, WHITE];\r\n  const [c0, c1, c2, c3] = palette;\r\n\r\n  // desktop/mobile branching for first slot\r\n  const isDesktop = win.innerWidth >= 1024;\r\n  const first = isDesktop ? (c1 ?? WHITE) : (c0 ?? WHITE);\r\n\r\n  const movingText: Triplet = [first, c1 ?? WHITE, c3 ?? c2 ?? WHITE];\r\n  const activeColor = c2 ?? WHITE;\r\n\r\n  return { activeColor, movingText, lastKnown: activeColor };\r\n}\r\n","// src/utils/image-upgrade-manager.ts\r\nlet totalImages = 0;\r\nlet loadedLowRes = 0;\r\nlet listeners: (() => void)[] = [];\r\nlet upgradeTimeout: ReturnType<typeof setTimeout> | null = null;\r\n\r\nexport const setUpgradeTimeout = (ms: number = 5000) => {\r\n  if (upgradeTimeout) return;\r\n  upgradeTimeout = setTimeout(() => {\r\n    listeners.forEach(fn => fn());\r\n    listeners = [];\r\n  }, ms);\r\n};\r\n\r\nexport const registerImage = () => {\r\n  totalImages++;\r\n  setUpgradeTimeout();\r\n};\r\n\r\nexport const notifyLowResLoaded = () => {\r\n  loadedLowRes++;\r\n  if (loadedLowRes >= totalImages) {\r\n    listeners.forEach(fn => fn());\r\n    listeners = [];\r\n  }\r\n};\r\n\r\nexport const onAllLowResLoaded = (callback: () => void) => {\r\n  listeners.push(callback);\r\n};\r\n","// src/utils/media-providers/media-loader.tsx\r\nimport { useRef, useState, useEffect } from 'react';\r\nimport { useVideoVisibility } from './video-observer';\r\nimport LoadingScreen from '../loading/loading';\r\nimport { SanityImageSource } from '@sanity/image-url/lib/types/types';\r\nimport {\r\n  getLowResImageUrl,\r\n  getMediumImageUrl,\r\n  getHighQualityImageUrl,\r\n  urlFor,\r\n} from './image-builder';\r\nimport {\r\n  registerImage,\r\n  notifyLowResLoaded,\r\n  onAllLowResLoaded,\r\n} from './image-upgrade-manager';\r\n\r\nfunction useNearViewport<T extends Element>(\r\n  ref: React.RefObject<T>,\r\n  { rootMargin = '900px 0px', threshold = 0, once = true } = {}\r\n) {\r\n  const [near, setNear] = useState(false);\r\n  useEffect(() => {\r\n    if (!ref.current || near) return;\r\n    const io = new IntersectionObserver(\r\n      (entries) => {\r\n        if (entries.some((e) => e.isIntersecting)) {\r\n          setNear(true);\r\n          if (once) io.disconnect();\r\n        }\r\n      },\r\n      { rootMargin, threshold }\r\n    );\r\n    io.observe(ref.current);\r\n    return () => io.disconnect();\r\n  }, [ref, near, rootMargin, threshold, once]);\r\n  return near;\r\n}\r\n\r\ntype VideoSetSrc = {\r\n  webmUrl?: string;\r\n  mp4Url?: string;\r\n  poster?: SanityImageSource | string;\r\n};\r\n\r\ntype MediaLoaderProps = {\r\n  type: 'image' | 'video';\r\n  src: string | SanityImageSource | VideoSetSrc | null | undefined;\r\n  alt?: string;\r\n  id?: string;\r\n  className?: string;\r\n  style?: React.CSSProperties;\r\n  objectPosition?: string;\r\n  loop?: boolean;\r\n  muted?: boolean;\r\n  playsInline?: boolean;\r\n  preload?: 'auto' | 'metadata' | 'none';\r\n  enableVisibilityControl?: boolean;\r\n  priority?: boolean;\r\n  controls?: boolean;\r\n};\r\n\r\nconst MediaLoader = ({\r\n  type,\r\n  src,\r\n  alt = '',\r\n  id,\r\n  className = '',\r\n  style = {},\r\n  objectPosition = 'center center',\r\n  loop = true,\r\n  muted = true,\r\n  playsInline = true,\r\n  preload = 'metadata',\r\n  enableVisibilityControl = true,\r\n  priority = false,\r\n  controls = false,\r\n}: MediaLoaderProps) => {\r\n  const isSSR = typeof window === 'undefined';\r\n\r\n  // Start as loaded in SSR to avoid fade-in on hydration\r\n  const [loaded, setLoaded] = useState(isSSR);\r\n  const [showMedium, setShowMedium] = useState(false);\r\n  const [showHigh, setShowHigh] = useState(false);\r\n\r\n  // Native poster control (no overlay)\r\n  const [posterRemoved, setPosterRemoved] = useState(false);\r\n\r\n  const videoRef = useRef<HTMLVideoElement>(null);\r\n  const imgRef = useRef<HTMLImageElement>(null);\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n\r\n  const isNear = useNearViewport(containerRef);\r\n  const shouldStart = priority || isNear;\r\n\r\n  // If already cached, skip fade-in\r\n  useEffect(() => {\r\n    if (type === 'image' && imgRef.current?.complete) setLoaded(true);\r\n    if (type === 'video' && videoRef.current?.readyState >= 2) setLoaded(true);\r\n  }, [type]);\r\n\r\n  // IMAGE progressive upgrade\r\n  useEffect(() => {\r\n    if (type !== 'image') return;\r\n    registerImage();\r\n\r\n    const t1 = setTimeout(() => setShowMedium(true), shouldStart ? 0 : 2000);\r\n    if (shouldStart) setShowMedium(true);\r\n\r\n    const off = () => setTimeout(() => setShowHigh(true), 300);\r\n    onAllLowResLoaded(off);\r\n    const t2 = setTimeout(() => setShowHigh(true), 5000);\r\n\r\n    return () => {\r\n      clearTimeout(t1);\r\n      clearTimeout(t2);\r\n    };\r\n  }, [type, shouldStart]);\r\n\r\n  const onMediaLoaded = () => {\r\n    setLoaded(true);\r\n    if (type === 'image') notifyLowResLoaded();\r\n    if (id) {\r\n      const event = new CustomEvent('mediaReady', { detail: { id } });\r\n      window.dispatchEvent(event);\r\n    }\r\n  };\r\n\r\n  // ----- Video source parsing + poster URL -----\r\n  const isVideoSetObj =\r\n    typeof src === 'object' &&\r\n    src !== null &&\r\n    !('asset' in (src as any)) &&\r\n    (('webmUrl' in (src as any)) || ('mp4Url' in (src as any)));\r\n\r\n  const vs = (isVideoSetObj ? (src as VideoSetSrc) : undefined);\r\n  const legacyVideoUrl = typeof src === 'string' ? src : undefined;\r\n\r\n  const posterUrl =\r\n    vs?.poster\r\n      ? (typeof vs.poster === 'string'\r\n          ? vs.poster\r\n          : urlFor(vs.poster).width(1200).quality(80).auto('format').url())\r\n      : undefined;\r\n\r\n  // ✅ Keep native poster visible until the first *painted* frame, then remove it.\r\n  useEffect(() => {\r\n    if (type !== 'video' || !videoRef.current) return;\r\n    const v = videoRef.current;\r\n\r\n    const hidePoster = () => {\r\n      setPosterRemoved(true);\r\n      v.removeAttribute('poster');\r\n    };\r\n\r\n    const onPlay = () => {\r\n      const anyV = v as any;\r\n      if (typeof anyV.requestVideoFrameCallback === 'function') {\r\n        anyV.requestVideoFrameCallback(() => hidePoster());\r\n      } else {\r\n        const onTime = () => {\r\n          if (v.currentTime > 0 && v.readyState >= 2) {\r\n            v.removeEventListener('timeupdate', onTime);\r\n            hidePoster();\r\n          }\r\n        };\r\n        v.addEventListener('timeupdate', onTime);\r\n        const timer = setTimeout(() => {\r\n          v.removeEventListener('timeupdate', onTime);\r\n          hidePoster();\r\n        }, 1200);\r\n        return () => clearTimeout(timer);\r\n      }\r\n    };\r\n\r\n    v.addEventListener('play', onPlay, { once: true });\r\n    return () => v.removeEventListener('play', onPlay);\r\n  }, [type]);\r\n\r\n  // VIDEO visibility/autoplay (your existing hook takes care of play/pause)\r\n  useVideoVisibility(\r\n    videoRef,\r\n    containerRef,\r\n    type === 'video' && enableVisibilityControl ? 0.35 : (undefined as unknown as number)\r\n  );\r\n\r\n  // ─────────────────────────────────────────────────────────────\r\n  // VIDEO RELIABILITY PATCHES\r\n  // - Kick load when near\r\n  // - Retry once, then promote preload to 'auto'\r\n  // - Decode nudge for iOS Safari after loadedmetadata\r\n  // - Early \"loaded\" on loadedmetadata to remove spinner sooner\r\n  // - Gentle play kick when data is ready (muted+inline)\r\n  // ─────────────────────────────────────────────────────────────\r\n  useEffect(() => {\r\n    if (type !== 'video' || !videoRef.current) return;\r\n    const v = videoRef.current;\r\n\r\n    let retryTimer: number | null = null;\r\n    let promoteTimer: number | null = null;\r\n\r\n    const clearTimers = () => {\r\n      if (retryTimer) { window.clearTimeout(retryTimer); retryTimer = null; }\r\n      if (promoteTimer) { window.clearTimeout(promoteTimer); promoteTimer = null; }\r\n    };\r\n\r\n    // If we’re near (or priority), ensure the browser actually fetches metadata\r\n    const kickLoad = () => {\r\n      try {\r\n        // set the DOM property; the attribute React renders can be different and that's OK\r\n        v.preload = preload ?? 'metadata';\r\n        if (v.preload !== 'none') v.load(); // important: actually trigger the fetch\r\n      } catch {}\r\n    };\r\n\r\n    const nudgeDecode = () => {\r\n      // iOS Safari sometimes stalls after metadata; a tiny seek wakes decode\r\n      try {\r\n        if (v.readyState < 2) return;\r\n        const t = v.currentTime;\r\n        v.currentTime = t > 0 ? t : 0.001;\r\n      } catch {}\r\n    };\r\n\r\n    const tryPlay = async () => {\r\n      if (!enableVisibilityControl) return;\r\n      try {\r\n        if (v.muted && v.playsInline && v.paused && v.readyState >= 2) {\r\n          await v.play().catch(() => {});\r\n        }\r\n      } catch {}\r\n    };\r\n\r\n    const onLoadedMeta = () => {\r\n      // spinner can go away on metadata (poster is still covering until first frame)\r\n      setLoaded(true);\r\n      nudgeDecode();\r\n    };\r\n\r\n    const onLoadedData = () => { setLoaded(true); void tryPlay(); };\r\n    const onCanPlay = () => { setLoaded(true); void tryPlay(); };\r\n\r\n    if (shouldStart) {\r\n      kickLoad();\r\n\r\n      // If nothing after ~2.5s, try load() once more\r\n      retryTimer = window.setTimeout(() => {\r\n        if (v.readyState < 2) kickLoad();\r\n      }, 2500);\r\n\r\n      // Still nothing after ~5s? Promote preload to 'auto'\r\n      promoteTimer = window.setTimeout(() => {\r\n        if (v.readyState < 2) {\r\n          try { v.preload = 'auto'; v.load(); } catch {}\r\n        }\r\n      }, 5000);\r\n    }\r\n\r\n    v.addEventListener('loadedmetadata', onLoadedMeta);\r\n    v.addEventListener('loadeddata', onLoadedData);\r\n    v.addEventListener('canplay', onCanPlay);\r\n\r\n    // Optional: diagnostics for flaky networks\r\n    const onError = (e: Event) => console.warn('Video error', e);\r\n    const onStalled = () => console.warn('Video stalled');\r\n    const onSuspend = () => {/* benign on many browsers */};\r\n    v.addEventListener('error', onError);\r\n    v.addEventListener('stalled', onStalled);\r\n    v.addEventListener('suspend', onSuspend);\r\n\r\n    return () => {\r\n      clearTimers();\r\n      v.removeEventListener('loadedmetadata', onLoadedMeta);\r\n      v.removeEventListener('loadeddata', onLoadedData);\r\n      v.removeEventListener('canplay', onCanPlay);\r\n      v.removeEventListener('error', onError);\r\n      v.removeEventListener('stalled', onStalled);\r\n      v.removeEventListener('suspend', onSuspend);\r\n    };\r\n  }, [\r\n    type,\r\n    shouldStart,\r\n    preload,\r\n    enableVisibilityControl,\r\n    // if any URL changes, re-run the loader watchdog\r\n    isVideoSetObj,\r\n    (vs && vs.webmUrl) || '',\r\n    (vs && vs.mp4Url) || '',\r\n    legacyVideoUrl || '',\r\n  ]);\r\n\r\n  const hasVideoSource = Boolean(vs?.webmUrl || vs?.mp4Url || legacyVideoUrl);\r\n  if (!src || (type === 'video' && !hasVideoSource)) return null;\r\n\r\n  // ====== IMAGE ======\r\n  if (type === 'image') {\r\n    const ultraLowSrc = typeof src === 'string' ? src : getLowResImageUrl(src);\r\n    const mediumSrc   = typeof src === 'string' ? src : getMediumImageUrl(src);\r\n    const highResSrc  = typeof src === 'string' ? src : getHighQualityImageUrl(src);\r\n\r\n    const resolvedSrc = showHigh ? highResSrc : showMedium ? mediumSrc : ultraLowSrc;\r\n    if (!resolvedSrc) return null;\r\n\r\n    return (\r\n      <div ref={containerRef} style={{ position: 'relative', width: '100%', height: '100%' }}>\r\n        {!loaded && (\r\n          <div className=\"absolute-inset\">\r\n            <LoadingScreen isFullScreen={false} />\r\n          </div>\r\n        )}\r\n        <img\r\n          ref={imgRef}\r\n          loading={priority ? 'eager' : undefined}\r\n          fetchPriority={showHigh || priority ? 'high' : showMedium ? 'auto' : 'low'}\r\n          id={id}\r\n          src={resolvedSrc || undefined}\r\n          alt={alt}\r\n          onLoad={onMediaLoaded}\r\n          onError={(e) => console.warn('Image failed', (e.target as HTMLImageElement).src)}\r\n          className={className}\r\n          draggable={false}\r\n          style={{\r\n            ...style,\r\n            objectFit: 'cover',\r\n            objectPosition,\r\n            opacity: loaded ? 1 : 0,\r\n            transition: isSSR ? 'none' : 'filter 0.5s ease, opacity 0.3s ease',\r\n          }}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // ====== VIDEO ======\r\n  const showSpinner = !loaded;\r\n\r\n  return (\r\n    <div ref={containerRef} style={{ position: 'relative', width: '100%', height: '100%' }}>\r\n      {showSpinner && (\r\n        <div className=\"absolute-inset\">\r\n          <LoadingScreen isFullScreen={false} />\r\n        </div>\r\n      )}\r\n\r\n      <video\r\n        id={id}\r\n        ref={videoRef}\r\n        // treat loadeddata & metadata as “ready enough” for UI\r\n        onLoadedData={onMediaLoaded}\r\n        onLoadedMetadata={() => setLoaded(true)}\r\n        onError={(e) => console.warn('Video failed', e)}\r\n        className={className}\r\n        style={{\r\n          ...style,\r\n          objectFit: 'cover',\r\n          objectPosition,\r\n          opacity: loaded ? 1 : 0,\r\n          transition: isSSR ? 'none' : 'opacity 0.3s ease',\r\n          pointerEvents: 'all',\r\n          zIndex: 1,\r\n        }}\r\n        loop={loop}\r\n        muted={muted}\r\n        playsInline={playsInline}\r\n        preload={preload ?? 'metadata'}\r\n        controls={controls}\r\n        // If you host poster/video on different origins and ever read pixels to <canvas>,\r\n        // uncomment next line and ensure CORS headers exist:\r\n        // crossOrigin=\"anonymous\"\r\n        poster={posterRemoved ? undefined : posterUrl}\r\n      >\r\n        {/* Order matters: prefer MP4 first for Safari reliability */}\r\n        {vs?.mp4Url  && <source src={vs.mp4Url  || undefined} type=\"video/mp4\"  />}\r\n        {vs?.webmUrl && <source src={vs.webmUrl || undefined} type=\"video/webm\" />}\r\n        {!vs?.webmUrl && !vs?.mp4Url && legacyVideoUrl && (\r\n          <source src={legacyVideoUrl || undefined} />\r\n        )}\r\n      </video>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MediaLoader;\r\n","// video-observer.tsx\r\nimport { useEffect } from 'react';\r\n\r\nexport const useVideoVisibility = (\r\n  videoRef: React.RefObject<HTMLVideoElement> | null,\r\n  containerRef: React.RefObject<HTMLElement> | null,\r\n  threshold: number = 0.4\r\n) => {\r\n  useEffect(() => {\r\n    if (!videoRef?.current || !containerRef?.current) return;\r\n\r\n    const t = typeof threshold === 'number' && threshold >= 0 && threshold <= 1 ? threshold : 0.4;\r\n\r\n    let observer: IntersectionObserver | undefined;\r\n\r\n    const video = videoRef.current!;\r\n    const container = containerRef.current!;\r\n\r\n    // IMPORTANT: load even when using <source> children\r\n    // (video.src is empty in that case; currentSrc is set after load())\r\n    video.load();\r\n    video.muted = true;\r\n\r\n    observer = new IntersectionObserver(\r\n      ([entry]) => {\r\n        if (entry.isIntersecting) {\r\n          video.play().catch(() => setTimeout(() => video.play().catch(() => {}), 500));\r\n        } else {\r\n          video.pause();\r\n        }\r\n      },\r\n      { threshold: t }\r\n    );\r\n\r\n    observer.observe(container);\r\n\r\n    // kick once if already in view\r\n    const rect = container.getBoundingClientRect();\r\n    const ratio = Math.min(Math.max((window.innerHeight - rect.top) / window.innerHeight, 0), 1);\r\n    if (ratio >= t) video.play().catch(() => {});\r\n\r\n    return () => observer?.disconnect();\r\n  }, [videoRef, containerRef, threshold]);\r\n};\r\n","// src/utils/context-providers/shadow-root-context.tsx\r\nimport React, { createContext, useContext, useRef, ReactNode } from 'react';\r\n\r\ntype ShadowRootFn = () => ShadowRoot | null;\r\ntype StyleSheetRaw = string;\r\n\r\nconst hasDOM = typeof document !== 'undefined';\r\nconst hasConstructedSheets =\r\n  hasDOM &&\r\n  typeof (globalThis as any).Document !== 'undefined' &&\r\n  'adoptedStyleSheets' in (Document.prototype as any) &&\r\n  typeof (globalThis as any).CSSStyleSheet !== 'undefined' &&\r\n  'replaceSync' in (CSSStyleSheet.prototype as any);\r\n\r\nconst isShadowRoot = (node: any): node is ShadowRoot =>\r\n  typeof (globalThis as any).ShadowRoot !== 'undefined' && node instanceof (globalThis as any).ShadowRoot;\r\n\r\ntype Ctx = {\r\n  getShadowRoot: ShadowRootFn;\r\n  injectStyle: (css: StyleSheetRaw, id: string) => void;\r\n  injectLink: (href: string, id?: string) => void;\r\n  removeStyle?: (id: string) => void;\r\n} | null;\r\n\r\nconst ShadowRootContext = createContext<Ctx>(null);\r\n\r\nlet warnedOnce = false;\r\n\r\nexport const useShadowRoot = () => {\r\n  const ctx = useContext(ShadowRootContext);\r\n  if (!ctx) {\r\n    if (!warnedOnce) {\r\n      // Dev-friendly, harmless in prod too; only once.\r\n      console.warn('useShadowRoot called outside provider; falling back to document.');\r\n      warnedOnce = true;\r\n    }\r\n\r\n    const injectStyle = (css: string, id: string) => {\r\n      if (!hasDOM) return;\r\n      const existing = document.head.querySelector<HTMLStyleElement>(`style[data-style-id=\"${id}\"]`);\r\n      if (existing) return;\r\n      const style = document.createElement('style');\r\n      style.dataset.styleId = id;\r\n      style.textContent = css;\r\n      document.head.appendChild(style);\r\n    };\r\n\r\n    const injectLink = (href: string, id?: string) => {\r\n      if (!hasDOM) return;\r\n      const selector = id\r\n        ? `link[data-style-id=\"${id}\"]`\r\n        : `link[rel=\"stylesheet\"][href=\"${href}\"]`;\r\n      if (document.head.querySelector(selector)) return;\r\n      const link = document.createElement('link');\r\n      link.rel = 'stylesheet';\r\n      link.href = href;\r\n      if (id) link.dataset.styleId = id;\r\n      document.head.appendChild(link);\r\n    };\r\n\r\n    const removeStyle = (id: string) => {\r\n      if (!hasDOM) return;\r\n      document.head.querySelector(`style[data-style-id=\"${id}\"]`)?.remove();\r\n    };\r\n\r\n    return {\r\n      getShadowRoot: () => null,\r\n      injectStyle,\r\n      injectLink,\r\n      removeStyle,\r\n    };\r\n  }\r\n  return ctx;\r\n};\r\n\r\nexport function ShadowRootProvider({\r\n  getShadowRoot,\r\n  children,\r\n}: {\r\n  getShadowRoot: ShadowRootFn;\r\n  children: ReactNode;\r\n}) {\r\n  // Cache constructed sheets per ID (per provider)\r\n  const sheetCacheRef = useRef<Map<string, CSSStyleSheet>>(new Map());\r\n\r\n  const injectStyle = (css: string, id: string) => {\r\n    const root = getShadowRoot();\r\n\r\n    // If no shadow root, gracefully inject into document.head\r\n    if (!isShadowRoot(root)) {\r\n      if (!hasDOM) return;\r\n      const existing = document.head.querySelector<HTMLStyleElement>(`style[data-style-id=\"${id}\"]`);\r\n      if (existing) return;\r\n      const style = document.createElement('style');\r\n      style.dataset.styleId = id;\r\n      style.textContent = css;\r\n      document.head.appendChild(style);\r\n      return;\r\n    }\r\n\r\n    // Shadow root path\r\n    if (hasConstructedSheets) {\r\n      let sheet = sheetCacheRef.current.get(id);\r\n      if (!sheet) {\r\n        sheet = new (CSSStyleSheet as any)();\r\n        sheet.replaceSync(css);\r\n        sheetCacheRef.current.set(id, sheet);\r\n      }\r\n      if (!root.adoptedStyleSheets.includes(sheet)) {\r\n        root.adoptedStyleSheets = [...root.adoptedStyleSheets, sheet];\r\n      }\r\n      return;\r\n    }\r\n\r\n    // Fallback <style> in shadow root\r\n    if (root.querySelector(`style[data-style-id=\"${id}\"]`)) return;\r\n    const style = document.createElement('style');\r\n    style.textContent = css;\r\n    (style as any).dataset.styleId = id;\r\n    root.appendChild(style);\r\n  };\r\n\r\n  const injectLink = (href: string, id?: string) => {\r\n    const root = getShadowRoot();\r\n\r\n    // If no shadow root, use document.head\r\n    if (!isShadowRoot(root)) {\r\n      if (!hasDOM) return;\r\n      const selector = id\r\n        ? `link[data-style-id=\"${id}\"]`\r\n        : `link[rel=\"stylesheet\"][href=\"${href}\"]`;\r\n      if (document.head.querySelector(selector)) return;\r\n      const link = document.createElement('link');\r\n      link.rel = 'stylesheet';\r\n      link.href = href;\r\n      if (id) (link as any).dataset.styleId = id;\r\n      document.head.appendChild(link);\r\n      return;\r\n    }\r\n\r\n    // Shadow root link injection\r\n    const selector = id ? `link[data-style-id=\"${id}\"]` : `link[rel=\"stylesheet\"][href=\"${href}\"]`;\r\n    if (root.querySelector(selector)) return;\r\n    const link = document.createElement('link');\r\n    link.rel = 'stylesheet';\r\n    link.href = href;\r\n    if (id) (link as any).dataset.styleId = id;\r\n    root.appendChild(link);\r\n  };\r\n\r\n  const removeStyle = (id: string) => {\r\n    const root = getShadowRoot();\r\n\r\n    // Remove from doc head if no shadow root\r\n    if (!isShadowRoot(root)) {\r\n      if (!hasDOM) return;\r\n      document.head.querySelector(`style[data-style-id=\"${id}\"]`)?.remove();\r\n      return;\r\n    }\r\n\r\n    if (hasConstructedSheets) {\r\n      const sheet = sheetCacheRef.current.get(id);\r\n      if (sheet) {\r\n        root.adoptedStyleSheets = root.adoptedStyleSheets.filter((s) => s !== sheet);\r\n      }\r\n      return;\r\n    }\r\n    root.querySelector(`style[data-style-id=\"${id}\"]`)?.remove();\r\n  };\r\n\r\n  return (\r\n    <ShadowRootContext.Provider value={{ getShadowRoot, injectStyle, injectLink, removeStyle }}>\r\n      {children}\r\n    </ShadowRootContext.Provider>\r\n  );\r\n}\r\n","/* Pause Animation Option - Accessibility */\r\nimport React, { useRef, useState, useEffect } from 'react';\r\nimport lottie from '../../utils/load-lottie'; // corrected path\r\nimport animationData from '../lottie/pauseButton.json';\r\n\r\nconst PauseButton = ({ toggleP5Animation }) => {\r\n  const containerRef = useRef(null);\r\n  const animRef = useRef(null);\r\n  const [isClicked, setIsClicked] = useState(false);\r\n  const [currentFrame, setCurrentFrame] = useState(3);\r\n\r\n  // Sync initial state with fireworks logic\r\n  useEffect(() => {\r\n    if (toggleP5Animation) {\r\n      toggleP5Animation(!isClicked);\r\n    }\r\n  }, [toggleP5Animation, isClicked]);\r\n\r\n  // Setup the lottie instance\r\n  useEffect(() => {\r\n    if (!containerRef.current) return;\r\n    let mounted = true;\r\n\r\n    lottie.loadAnimation({\r\n      container: containerRef.current,\r\n      renderer: 'svg',\r\n      loop: false,\r\n      autoplay: false,\r\n      animationData,\r\n    }).then((anim) => {\r\n      if (!mounted) return;\r\n      animRef.current = anim;\r\n      anim.goToAndStop(currentFrame, true);\r\n    });\r\n\r\n    return () => {\r\n      mounted = false;\r\n      if (animRef.current) {\r\n        animRef.current.destroy();\r\n        animRef.current = null;\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  const handleMouseEnter = () => {\r\n    if (animRef.current && !isClicked) {\r\n      animRef.current.playSegments([3, 10], true);\r\n    }\r\n  };\r\n\r\n  const handleMouseLeave = () => {\r\n    if (animRef.current && !isClicked) {\r\n      animRef.current.goToAndStop(currentFrame, true);\r\n    }\r\n  };\r\n\r\n  const handleClick = (event) => {\r\n    event.stopPropagation();\r\n\r\n    if (animRef.current) {\r\n      const targetFrame = isClicked ? 3 : 20;\r\n      animRef.current.playSegments([currentFrame, targetFrame], true);\r\n      setCurrentFrame(targetFrame);\r\n      setIsClicked(!isClicked);\r\n\r\n      if (toggleP5Animation) {\r\n        toggleP5Animation(!isClicked);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"lottie-container\"\r\n      ref={containerRef}\r\n      onMouseEnter={handleMouseEnter}\r\n      onMouseLeave={handleMouseLeave}\r\n      onClick={handleClick}\r\n    />\r\n  );\r\n};\r\n\r\nexport default PauseButton;\r\n","import React, { useState, useRef, useEffect, useMemo } from 'react';\r\n// pull from preloader (images only)\r\nimport { getPreloadedDynamicApp, ensureImagesPreload } from '../preload-dynamic-app';\r\nimport { useStyleInjection } from '../../utils/context-providers/style-injector';\r\nimport sortByCss from '../../styles/dynamic-app/sortByStyles.css?raw';\r\n\r\nconst options = [\r\n  { value: 'random',   label: 'Randomized' },\r\n  { value: 'titleAsc', label: 'A to Z' },\r\n  { value: 'titleDesc',label: 'Z to A' },\r\n];\r\n\r\nconst shuffleArray = (arr) => {\r\n  const a = [...arr];\r\n  for (let i = a.length - 1; i > 0; i--) {\r\n    const j = Math.floor(Math.random() * (i + 1));\r\n    [a[i], a[j]] = [a[j], a[i]];\r\n  }\r\n  return a;\r\n};\r\n\r\nfunction localSort(data, mode) {\r\n  if (!Array.isArray(data)) return [];\r\n  switch (mode) {\r\n    case 'titleAsc':\r\n      return [...data].sort((a, b) => (a?.title || '').localeCompare(b?.title || ''));\r\n    case 'titleDesc':\r\n      return [...data].sort((a, b) => (b?.title || '').localeCompare(a?.title || ''));\r\n    case 'random':\r\n    default:\r\n      return shuffleArray(data);\r\n  }\r\n}\r\n\r\nfunction SortBy({\r\n  onFetchItems,\r\n  customArrowIcon,\r\n  colorMapping,\r\n  getRoot = () => document,\r\n}) {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [selectedValue, setSelectedValue] = useState('random');\r\n\r\n  // force re-shuffle even when already on \"random\"\r\n  const [randomTick, setRandomTick] = useState(0);\r\n\r\n  const [baseItems, setBaseItems] = useState([]);\r\n  const [items, setItems] = useState([]);\r\n\r\n  const dropdownRef = useRef(null);\r\n\r\n  // inject CSS into shadow root (or document)\r\n  useStyleInjection(sortByCss, 'dynamic-app-style-sortby');\r\n\r\n  const handleOptionClick = (value) => {\r\n    setSelectedValue(value);\r\n    if (value === 'random') setRandomTick(t => t + 1); // re-shuffle on every click\r\n    setIsOpen(false);\r\n  };\r\n\r\n  const handleClickOutside = (e) => {\r\n    const root = typeof getRoot === 'function' ? getRoot() : document;\r\n    const pauseButton = root.querySelector?.('.lottie-container');\r\n    const target = e.target;\r\n    if (\r\n      dropdownRef.current &&\r\n      target &&\r\n      !dropdownRef.current.contains(target) &&\r\n      (!pauseButton || !pauseButton.contains(target))\r\n    ) {\r\n      setIsOpen(false);\r\n    }\r\n  };\r\n\r\n  // click-outside listener bound to the same root as the UI\r\n  useEffect(() => {\r\n    const root = typeof getRoot === 'function' ? getRoot() : document;\r\n    root.addEventListener?.('mousedown', handleClickOutside);\r\n    return () => root.removeEventListener?.('mousedown', handleClickOutside);\r\n  }, [getRoot]);\r\n\r\n  // 1) Get images from preload cache (or ensure preload if empty)\r\n  useEffect(() => {\r\n    let cancelled = false;\r\n    const cached = getPreloadedDynamicApp();\r\n\r\n    if (cached.images?.length) {\r\n      if (!cancelled) setBaseItems(cached.images);\r\n    } else {\r\n      ensureImagesPreload()\r\n        .then((images) => { if (!cancelled) setBaseItems(images || []); })\r\n        .catch(() => { if (!cancelled) setBaseItems([]); });\r\n    }\r\n\r\n    return () => { cancelled = true; };\r\n  }, []);\r\n\r\n  // 2) Derive items whenever base or sort option changes\r\n  //    When random is selected, reshuffle on every randomTick bump\r\n  useEffect(() => {\r\n    let derived = [];\r\n    if (selectedValue === 'random') {\r\n      derived = shuffleArray(baseItems);\r\n    } else {\r\n      derived = localSort(baseItems, selectedValue);\r\n    }\r\n    setItems(derived);\r\n    onFetchItems?.(derived);\r\n  }, [baseItems, selectedValue, randomTick, onFetchItems]);\r\n\r\n  // Responsive index logic for color sampling\r\n  const [screenWidth, setScreenWidth] = useState(\r\n    typeof window !== 'undefined' ? window.innerWidth : 1200\r\n  );\r\n  useEffect(() => {\r\n    const onResize = () => setScreenWidth(window.innerWidth);\r\n    window.addEventListener('resize', onResize);\r\n    return () => window.removeEventListener('resize', onResize);\r\n  }, []);\r\n  const itemIndex = screenWidth >= 1025 ? 2 : screenWidth >= 768 ? 1 : 0;\r\n\r\n  const convertHexToRGBA = (hex, alpha) => {\r\n    const h = (hex || '#ffffff').replace('#', '');\r\n    const r = parseInt(h.slice(0, 2) || 'ff', 16);\r\n    const g = parseInt(h.slice(2, 4) || 'ff', 16);\r\n    const b = parseInt(h.slice(4, 6) || 'ff', 16);\r\n    return `rgba(${r}, ${g}, ${b}, ${alpha})`;\r\n  };\r\n\r\n  const borderItemColor = useMemo(() => {\r\n    const alt = items[itemIndex]?.alt1;\r\n    const color = Array.isArray(colorMapping?.[alt]) ? colorMapping[alt][2] : '#ffffff';\r\n    return convertHexToRGBA(color, 0.8);\r\n  }, [items, colorMapping, itemIndex]);\r\n\r\n  const boxShadowItemColor = useMemo(() => {\r\n    const alt = items[itemIndex]?.alt1;\r\n    return Array.isArray(colorMapping?.[alt]) ? colorMapping[alt][3] : '#ffffff';\r\n  }, [items, colorMapping, itemIndex]);\r\n\r\n  return (\r\n    <div className=\"sort-by-container\">\r\n      <div className=\"sort-container\"><p>Sort by:</p></div>\r\n      <div className=\"sort-container2\">\r\n        <div\r\n          className=\"custom-dropdown\"\r\n          ref={dropdownRef}\r\n          style={{\r\n            border: `solid 1.6px ${borderItemColor}`,\r\n            boxShadow: `0 1px 8px rgba(0,0,0,0.1), 0 22px 8px rgba(0,0,0,0.08), 12px 12px ${boxShadowItemColor}`,\r\n          }}\r\n        >\r\n          <div className=\"custom-select\" onClick={() => setIsOpen(!isOpen)}>\r\n            <div className=\"selected-value\">\r\n              <h5>{options.find(opt => opt.value === selectedValue)?.label}</h5>\r\n            </div>\r\n            <span className={`custom-arrow ${isOpen ? 'open' : ''}`}>\r\n              {customArrowIcon && <div dangerouslySetInnerHTML={{ __html: customArrowIcon }} />}\r\n            </span>\r\n          </div>\r\n\r\n          {isOpen && (\r\n            <div\r\n              className=\"options-container\"\r\n              style={{ border: `solid 1.6px ${borderItemColor}`, borderTop: 'none' }}\r\n            >\r\n              {options.map((option) => (\r\n                <div\r\n                  key={option.value}\r\n                  className={`option ${option.value === selectedValue ? 'selected' : ''}`}\r\n                  onClick={() => handleOptionClick(option.value)}\r\n                >\r\n                  {option.label}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SortBy;\r\n","// src/dynamic-app/components/homepage-UIcards.jsx\r\nimport React from 'react';\r\nimport MediaLoader from '../../utils/media-providers/media-loader';\r\nimport { useStyleInjection } from '../../utils/context-providers/style-injector';\r\nimport uiCardsCss from '../../styles/dynamic-app/UIcards.css?raw';\r\n\r\nconst UIcards = React.forwardRef(function UIcards(\r\n  { title, image1, image2, alt1, alt2, url1, className = '', customArrowIcon2 },\r\n  ref\r\n) {\r\n  useStyleInjection(uiCardsCss, 'dynamic-ui-card-style');\r\n\r\n  return (\r\n    <div ref={ref} className={`card-container ${className}`}>\r\n      <div className={`image-container ${className}`}>\r\n        <a href={url1} className={`ui-link ${className}`}>\r\n          <MediaLoader type=\"image\" src={image2} alt={alt1} className={`ui-image1 ${className}`} priority />\r\n        </a>\r\n      </div>\r\n\r\n      <div className={`image-container2 ${className}-2`}>\r\n        <a href={url1} className={`ui-link-3 ${className}`}>\r\n          <MediaLoader type=\"image\" src={image1} alt={alt2} className={`ui-image2 ${className}-2`} priority />\r\n        </a>\r\n\r\n        <h-name className={`image-title ${className}`}>\r\n          <a href={url1} className={`ui-link-2 ${className}`}>\r\n            <span className=\"title-text\">{title}</span>\r\n            {customArrowIcon2 && (\r\n              <div className=\"svg-icon\" dangerouslySetInnerHTML={{ __html: customArrowIcon2 }} />\r\n            )}\r\n          </a>\r\n        </h-name>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nUIcards.displayName = 'UIcards';\r\nexport default UIcards;\r\n","// src/dynamic-app/lib/observedCard.jsx\r\nimport React, { useRef } from 'react';\r\nimport UIcards from '../components/homepage-UIcards';\r\nimport useIntersectionTransform from './shadowObserver';\r\n\r\nfunction ObservedCard({\r\n  data,\r\n  index,\r\n  getShadowRoot,\r\n  pauseAnimation,\r\n  customArrowIcon2,\r\n}) {\r\n  const ref = useRef(null);\r\n\r\n  // The hook will accept whatever you pass — no TS constraint here\r\n  useIntersectionTransform(ref, getShadowRoot, pauseAnimation);\r\n\r\n  return (\r\n    <div ref={ref} className={`custom-card-${index}`}>\r\n      <UIcards\r\n        title={data.title}\r\n        backgroundColor={data.backgroundColor}\r\n        image1={data.image1}\r\n        image2={data.image2}\r\n        alt1={data.alt1}\r\n        alt2={data.alt2}\r\n        url1={data.url1}\r\n        className={`custom-card-${index}`}\r\n        customArrowIcon2={customArrowIcon2}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ObservedCard;\r\n","// useIntersectionTransform.ts\r\nimport { useEffect } from 'react';\r\n\r\nexport default function useIntersectionTransform(\r\n  ref: React.RefObject<HTMLElement>,\r\n  getShadowRoot: () => ShadowRoot | null,\r\n  pauseAnimation: boolean,\r\n  getScrollRoot?: () => Element | null  // 👈 NEW\r\n) {\r\n\r\n  useEffect(() => {\r\n    if (!ref.current || pauseAnimation) return;\r\n\r\n    // Figure out where we live (shadow/dom) and what to use as IO root.\r\n    const shadow = getShadowRoot?.() ?? null;\r\n    const isInShadow = !!shadow;\r\n    const containerEl =\r\n      (typeof getScrollRoot === 'function' && getScrollRoot()) ||\r\n      // prefer your inner scroller if we can find it:\r\n      (isInShadow ? shadow.querySelector('.embedded-app') as Element | null : null) ||\r\n      null; // fallback = viewport\r\n\r\n    // (optional) gate transforms to when pointer is inside shadow host\r\n    let mouseInside = false;\r\n    const hostEl = isInShadow ? (shadow as ShadowRoot).host as HTMLElement : null;\r\n    const onEnter = () => (mouseInside = true);\r\n    const onLeave = () => (mouseInside = false);\r\n    if (hostEl) {\r\n      hostEl.addEventListener('pointerenter', onEnter);\r\n      hostEl.addEventListener('pointerleave', onLeave);\r\n    }\r\n\r\n    const cardEl = ref.current!;\r\n    const imageContainer  = cardEl.querySelector('.image-container')  as HTMLElement | null;\r\n    const imageContainer2 = cardEl.querySelector('.image-container2') as HTMLElement | null;\r\n    if (!imageContainer || !imageContainer2) return;\r\n\r\n    const applyTransform = (percentage: number) => {\r\n      const width =\r\n        containerEl instanceof Element\r\n          ? (containerEl as HTMLElement).clientWidth\r\n          : window.innerWidth;\r\n\r\n      let imageContainerTransform = 'translate(0em, 0em)';\r\n      let imageContainer2Transform = 'translate(1em, -28em)';\r\n      let imageContainerZIndex = '5';\r\n      let imageContainer2ZIndex = '1';\r\n\r\n      if (width <= 767) {\r\n        if (percentage > 0.35 && percentage <= 1) {\r\n          imageContainerTransform = 'translate(0.5em, 1em)';\r\n          imageContainer2Transform = 'translate(0.5em, -32.5em)';\r\n          imageContainerZIndex = '1';\r\n          imageContainer2ZIndex = '5';\r\n        } else if (percentage > 0.15 && percentage <= 0.35) {\r\n          imageContainerTransform = 'translate(1.5em, 0.5em)';\r\n          imageContainer2Transform = 'translate(-0.25em, -34.5em)';\r\n          imageContainerZIndex = '5';\r\n          imageContainer2ZIndex = '1';\r\n        } else if (percentage >= 0 && percentage <= 0.15) {\r\n          imageContainerTransform = 'translate(0em, 0em)';\r\n          imageContainer2Transform = 'translate(0em, -33.5em)';\r\n        }\r\n      } else if (width <= 1024) {\r\n        if (percentage >= 0.3) {\r\n          imageContainerTransform = 'translate(0em, 0em)';\r\n          imageContainer2Transform = 'translate(0em, -23.5em)';\r\n          imageContainerZIndex = '1';\r\n          imageContainer2ZIndex = '5';\r\n        } else if (percentage < 0.3) {\r\n          imageContainerTransform = 'translate(-0.5em, 0em)';\r\n          imageContainer2Transform = 'translate(1em, -23.5em)';\r\n          imageContainerZIndex = '1';\r\n          imageContainer2ZIndex = '5';\r\n        } else if (percentage < 0.1) {\r\n          imageContainerTransform = 'translate(-0.5em, 0em)';\r\n          imageContainer2Transform = 'translate(1em, -23.5em)';\r\n          imageContainerZIndex = '5';\r\n          imageContainer2ZIndex = '1';\r\n        }\r\n      } else if (width > 1025) {\r\n        if (percentage > 0.6 && percentage <= 1) {\r\n          imageContainerTransform = 'translate(1em, 1em)';\r\n          imageContainer2Transform = 'translate(0em, -28.8em)';\r\n          imageContainerZIndex = '1';\r\n          imageContainer2ZIndex = '5';\r\n        } else if (percentage > 0.3 && percentage <= 0.6) {\r\n          imageContainerTransform = 'translate(1.2em, -0.8em)';\r\n          imageContainer2Transform = 'translate(0em, -28em)';\r\n          imageContainerZIndex = '5';\r\n          imageContainer2ZIndex = '1';\r\n        } else if (percentage >= 0 && percentage <= 0.3) {\r\n          imageContainerTransform = 'translate(0em, 0em)';\r\n          imageContainer2Transform = 'translate(1em, -27.4em)';\r\n          imageContainerZIndex = '5';\r\n          imageContainer2ZIndex = '1';\r\n        }\r\n      } else {\r\n        if (percentage > 0.3 && percentage <= 1) {\r\n          imageContainerTransform = 'translate(0em, 0em)';\r\n          imageContainer2Transform = 'translate(1em, -43em)';\r\n          imageContainerZIndex = '1';\r\n          imageContainer2ZIndex = '5';\r\n        } else if (percentage >= 0 && percentage <= 0.3) {\r\n          imageContainerTransform = 'translate(0em, 0em)';\r\n          imageContainer2Transform = 'translate(1em, -43em)';\r\n        }\r\n      }\r\n\r\n      imageContainer.style.transform = imageContainerTransform;\r\n      imageContainer.style.zIndex = imageContainerZIndex;\r\n      imageContainer2.style.transform = imageContainer2Transform;\r\n      imageContainer2.style.zIndex = imageContainer2ZIndex;\r\n    };\r\n\r\n    // IO now uses the scroll container as root (if available)\r\n    const observer = new IntersectionObserver(\r\n      ([entry]) => {\r\n        if (isInShadow && !mouseInside) return;\r\n\r\n        const rect = entry.boundingClientRect;\r\n\r\n        // use the container’s rect/height instead of window\r\n        const rootRect = containerEl\r\n          ? (containerEl as Element).getBoundingClientRect()\r\n          : document.documentElement.getBoundingClientRect();\r\n\r\n        const rootHeight =\r\n          containerEl instanceof Element\r\n            ? (containerEl as HTMLElement).clientHeight\r\n            : window.innerHeight;\r\n\r\n        const rootCenter = rootRect.top + rootHeight;\r\n\r\n        // replicate your old math but relative to the container center\r\n        const percentage = Math.max(\r\n          0,\r\n          Math.min(rect.height, rootCenter - rect.top)\r\n        ) / rect.height;\r\n\r\n        applyTransform(percentage);\r\n      },\r\n      {\r\n        root: containerEl || null, // ← critical change\r\n        threshold: Array.from({ length: 101 }, (_, i) => i / 100),\r\n      }\r\n    );\r\n\r\n    // initial position apply (also relative to container)\r\n    const rect = cardEl.getBoundingClientRect();\r\n    const rootRect = containerEl\r\n      ? (containerEl as Element).getBoundingClientRect()\r\n      : document.documentElement.getBoundingClientRect();\r\n    const rootHeight =\r\n      containerEl instanceof Element\r\n        ? (containerEl as HTMLElement).clientHeight\r\n        : window.innerHeight;\r\n    const rootCenter = rootRect.top + rootHeight / 1.5;\r\n    const initialPct = Math.max(0, Math.min(rect.height, rootCenter - rect.top)) / rect.height;\r\n    applyTransform(initialPct);\r\n\r\n    observer.observe(cardEl);\r\n\r\n    return () => {\r\n      observer.disconnect();\r\n      if (hostEl) {\r\n        hostEl.removeEventListener('pointerenter', onEnter);\r\n        hostEl.removeEventListener('pointerleave', onLeave);\r\n      }\r\n    };\r\n  }, [ref, pauseAnimation, getShadowRoot, getScrollRoot]);\r\n}\r\n","let currentlyActiveAlt1 = null;\r\nlet highestVisibility = 0;\r\nlet debounceTimeout = null;\r\n\r\nconst setupAltObserver = (onActivate, onDeactivate, rootElement = document) => {\r\n  const observerOptions = {\r\n    root: null,\r\n    rootMargin: '0px',\r\n    threshold: Array.from(Array(101).keys(), (x) => x / 100),\r\n  };\r\n\r\n  const observerCallback = (entries) => {\r\n    entries.sort((a, b) => b.intersectionRatio - a.intersectionRatio);\r\n\r\n    entries.forEach((entry) => {\r\n      const element = entry.target;\r\n      const imageElement = element.querySelector('.ui-image1');\r\n\r\n      if (imageElement) {\r\n        const alt1Value = imageElement.getAttribute('alt');\r\n        const visibility = entry.intersectionRatio;\r\n\r\n        if (visibility > 0.1 && visibility > highestVisibility) {\r\n          if (currentlyActiveAlt1 !== alt1Value) {\r\n            if (currentlyActiveAlt1) {\r\n              onDeactivate(currentlyActiveAlt1);\r\n            }\r\n            onActivate(alt1Value);\r\n            currentlyActiveAlt1 = alt1Value;\r\n            highestVisibility = visibility;\r\n          }\r\n        } else if (visibility <= 0.1 && currentlyActiveAlt1 === alt1Value) {\r\n          onDeactivate(alt1Value);\r\n          currentlyActiveAlt1 = null;\r\n          highestVisibility = 0;\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  const observer = new IntersectionObserver(observerCallback, observerOptions);\r\n\r\n  const triggerInitialActivation = () => {\r\n    clearTimeout(debounceTimeout);\r\n    debounceTimeout = setTimeout(() => {\r\n      const cards = Array.from(rootElement.querySelectorAll('.card-container'));\r\n      const entries = cards.map((card) => {\r\n        const boundingRect = card.getBoundingClientRect();\r\n        const viewportHeight = window.innerHeight;\r\n        const visibility = Math.max(\r\n          0,\r\n          Math.min(boundingRect.height, viewportHeight - boundingRect.top) / boundingRect.height\r\n        );\r\n        return {\r\n          target: card,\r\n          intersectionRatio: visibility,\r\n        };\r\n      });\r\n\r\n      observerCallback(entries);\r\n    }, 50);\r\n  };\r\n\r\n  rootElement.querySelectorAll('.card-container').forEach((card) => observer.observe(card));\r\n  triggerInitialActivation();\r\n};\r\n\r\nexport default setupAltObserver;\r\n","import React, { useEffect, useState } from 'react';\r\n\r\nconst RedIntroOverlay = () => {\r\n  const [visible, setVisible] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => setVisible(false), 500);\r\n    return () => clearTimeout(timer);\r\n  }, []);\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        width: '100vw',\r\n        height: '100vh',\r\n        backgroundColor: '#1e1e1f',\r\n        opacity: visible ? 1 : 0,\r\n        pointerEvents: 'none',\r\n        transition: 'opacity 0.4s ease',\r\n        zIndex: 9999,\r\n      }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default RedIntroOverlay;\r\n","import React, { useState, useEffect, useCallback, useRef } from 'react';\r\nimport Navigation from './components/navigation';\r\nimport TitleDivider from './components/title';\r\nimport SortBy from './components/sortBy';\r\nimport FireworksDisplay from './components/fireworksDisplay';\r\nimport PauseButton from './components/pauseButton';\r\nimport Footer from './components/footer';\r\nimport ObservedCard from './lib/observedCard.jsx';\r\nimport setupAltObserver from './lib/setupAltObserver';\r\nimport IntroOverlay from './components/IntroOverlay';\r\nimport { colorMapping } from './lib/colorString';\r\nimport { useShadowRoot } from '../utils/context-providers/shadow-root-context';\r\nimport indexCss from '../styles/dynamic-app/index.css?raw';\r\nimport miscCss from '../styles/dynamic-app/misc.css?raw';\r\nimport overlayCss from '../styles/loading-overlay.css?raw';\r\n\r\n// shared preloader (no TS types in this file)\r\nimport {\r\n  getPreloadedDynamicApp,\r\n  whenDynamicPreloadReady,\r\n  ensureDynamicPreload,\r\n} from './preload-dynamic-app';\r\n\r\n// 🔸 single source of truth for palette semantics\r\nimport { resolvePalette, computeStateFromPalette } from './lib/palette-controller';\r\n\r\nfunction DynamicTheme({ onReady }) {\r\n  const [sortedImages, setSortedImages] = useState([]);\r\n  const [svgIcons, setSvgIcons] = useState({});\r\n  const [activeColor, setActiveColor] = useState('#FFFFFF');\r\n  const [movingTextColors, setMovingTextColors] = useState(['#FFFFFF', '#FFFFFF', '#FFFFFF']);\r\n  const [lastKnownColor, setLastKnownColor] = useState('#FFFFFF');\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [pauseAnimation, setPauseAnimation] = useState(false);\r\n  const [showNavigation, setShowNavigation] = useState(false);\r\n\r\n  const toggleFireworksRef = useRef(null);\r\n  const scrollContainerRef = useRef(null);\r\n  const shadowRef = useRef(null);\r\n\r\n  const [showFireworks, setShowFireworks] = useState(true);\r\n  const [isHostVisible, setIsHostVisible] = useState(false);\r\n  const hostVisibleRef = useRef(false);\r\n\r\n  const { getShadowRoot, injectStyle } = useShadowRoot();\r\n\r\n  useEffect(() => {\r\n    [indexCss, miscCss, overlayCss].forEach(injectStyle);\r\n  }, [injectStyle]);\r\n\r\n  // signal ready on first paint (wrapper de-dupes)\r\n  useEffect(() => {\r\n    const id = requestAnimationFrame(() => { try { onReady?.(); } catch {} });\r\n    return () => cancelAnimationFrame(id);\r\n  }, [onReady]);\r\n\r\n  // Prime from cache, then wait for preload (deduped)\r\n  useEffect(() => {\r\n    const snap = getPreloadedDynamicApp();\r\n    if (snap.icons) setSvgIcons(snap.icons);\r\n    if (Array.isArray(snap.images)) setSortedImages(snap.images);\r\n\r\n    let cancelled = false;\r\n    ensureDynamicPreload()\r\n      .catch(() => whenDynamicPreloadReady())\r\n      .then((cache) => {\r\n        if (cancelled || !cache) return;\r\n        if (cache.icons) setSvgIcons(cache.icons);\r\n        if (Array.isArray(cache.images)) setSortedImages(cache.images);\r\n        setIsLoading(false);\r\n        setShowNavigation(true);\r\n      })\r\n      .catch(() => {\r\n        if (!cancelled) setIsLoading(false);\r\n      });\r\n\r\n    return () => { cancelled = true; };\r\n  }, []);\r\n\r\n  const observerRoot = useRef(null);\r\n  useEffect(() => {\r\n    const root = typeof getShadowRoot === 'function' ? getShadowRoot() : document;\r\n    observerRoot.current = root;\r\n  }, [getShadowRoot]);\r\n\r\n  // 🔹 Activation now uses the shared palette-controller\r\n  const handleActivate = useCallback((alt1) => {\r\n    // resolve a quartet [c0, c1, c2, c3] for this alt\r\n    const quartet = resolvePalette(alt1, colorMapping);\r\n    if (!Array.isArray(quartet) || quartet.length < 4) return;\r\n\r\n    // compute state (activeColor, title triplet, lastKnown)\r\n    const { activeColor: nextActive, movingText: nextTriplet, lastKnown } =\r\n      computeStateFromPalette(quartet);\r\n\r\n    // minimize state churn\r\n    if (nextActive !== activeColor) {\r\n      setActiveColor(nextActive);\r\n      setLastKnownColor(lastKnown ?? nextActive);\r\n    }\r\n    // nextTriplet is a [c0, c1, c3] triplet per controller semantics\r\n    setMovingTextColors(nextTriplet);\r\n  }, [activeColor]);\r\n\r\n  const handleDeactivate = useCallback(() => {\r\n    if (activeColor !== lastKnownColor) setActiveColor(lastKnownColor);\r\n  }, [activeColor, lastKnownColor]);\r\n\r\n  const currentAltRef = useRef(null);\r\n  useEffect(() => {\r\n    if (isLoading || sortedImages.length === 0) return;\r\n    const root = observerRoot.current;\r\n    if (!root) return;\r\n\r\n    const guardedActivate = (alt1) => {\r\n      if (!hostVisibleRef.current) return;\r\n      if (currentAltRef.current === alt1) return;\r\n      currentAltRef.current = alt1;\r\n      handleActivate(alt1);\r\n    };\r\n\r\n    const guardedDeactivate = (alt1) => {\r\n      if (!hostVisibleRef.current) return;\r\n      if (currentAltRef.current !== alt1) return;\r\n      handleDeactivate(alt1);\r\n    };\r\n\r\n    const cleanup = setupAltObserver(guardedActivate, guardedDeactivate, root);\r\n    return typeof cleanup === 'function' ? cleanup : undefined;\r\n  }, [isLoading, sortedImages, handleActivate, handleDeactivate]);\r\n\r\n  const handleSetToggleFireworks = useCallback((fn) => {\r\n    toggleFireworksRef.current = fn;\r\n  }, []);\r\n\r\n  const handlePauseToggle = useCallback((isEnabled) => {\r\n    if (toggleFireworksRef.current) toggleFireworksRef.current(isEnabled);\r\n    setPauseAnimation(!isEnabled);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!shadowRef.current) return;\r\n    const ro = new ResizeObserver(() => {\r\n      // optional diagnostics\r\n      // console.log('[Resize observed]', shadowRef.current?.getBoundingClientRect());\r\n    });\r\n    ro.observe(shadowRef.current);\r\n    return () => ro.disconnect();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const container = document.querySelector('#block-dynamic');\r\n    if (!container) {\r\n      console.warn('[FireworkObserver] #block-dynamic not found in DOM');\r\n      return;\r\n    }\r\n\r\n    const io = new IntersectionObserver(\r\n      ([entry]) => {\r\n        const visible = !!entry.isIntersecting;\r\n        hostVisibleRef.current = visible;\r\n        setIsHostVisible(visible);\r\n\r\n        const desired = visible && !pauseAnimation;\r\n        setShowFireworks((prev) => (prev !== desired ? desired : prev));\r\n        if (toggleFireworksRef.current) toggleFireworksRef.current(desired);\r\n      },\r\n      { threshold: 0.3 }\r\n    );\r\n\r\n    io.observe(container);\r\n\r\n    // prime immediately\r\n    const rect = container.getBoundingClientRect();\r\n    const visibleNow = rect.top < window.innerHeight && rect.bottom > 0;\r\n    hostVisibleRef.current = visibleNow;\r\n    setIsHostVisible(visibleNow);\r\n\r\n    const initialDesired = visibleNow && !pauseAnimation;\r\n    setShowFireworks((prev) => (prev !== initialDesired ? initialDesired : prev));\r\n    if (toggleFireworksRef.current) toggleFireworksRef.current(initialDesired);\r\n\r\n    return () => io.disconnect();\r\n  }, [pauseAnimation]);\r\n\r\n  useEffect(() => {\r\n    if (toggleFireworksRef.current) {\r\n      toggleFireworksRef.current(!pauseAnimation && isHostVisible);\r\n    }\r\n  }, [pauseAnimation, isHostVisible]);\r\n\r\n  const cardRefs = useRef([]);\r\n  cardRefs.current = sortedImages.map((_, i) => cardRefs.current[i] ?? React.createRef());\r\n\r\n  return (\r\n    <div className=\"homePage-container\" ref={scrollContainerRef} aria-busy={isLoading ? 'true' : 'false'}>\r\n      <IntroOverlay />\r\n\r\n      <div className=\"navigation-wrapper\">\r\n        {showNavigation && (\r\n          <Navigation\r\n            customArrowIcon2={svgIcons['arrow1']}\r\n            customArrowIcon={svgIcons['arrow2']}\r\n            items={sortedImages}\r\n            activeColor={activeColor}\r\n            isInShadow={typeof getShadowRoot === 'function' && getShadowRoot() !== document}\r\n            scrollLockContainer={scrollContainerRef.current}\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"firework-wrapper\">\r\n        <div className=\"firework-divider\">\r\n          {showFireworks && (\r\n            <FireworksDisplay\r\n              colorMapping={colorMapping}\r\n              items={sortedImages}\r\n              activeColor={activeColor}\r\n              lastKnownColor={lastKnownColor}\r\n              onToggleFireworks={handleSetToggleFireworks}\r\n            />\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"section-divider\"></div>\r\n\r\n      <div className=\"title-divider\">\r\n        <TitleDivider\r\n          svgIcon={svgIcons['logo-small-1']}\r\n          movingTextColors={movingTextColors}\r\n          pauseAnimation={pauseAnimation}\r\n        />\r\n      </div>\r\n\r\n      <div id=\"homePage\">\r\n        <div className=\"no-overflow\">\r\n          <div className=\"pause-button-wrapper\">\r\n            <PauseButton toggleP5Animation={handlePauseToggle} />\r\n          </div>\r\n\r\n          <div className=\"sort-by-divider\">\r\n            <h3 className=\"students-heading\">Students</h3>\r\n            <SortBy\r\n              setSortOption={() => {}}\r\n              onFetchItems={setSortedImages}\r\n              customArrowIcon={svgIcons['arrow2']}\r\n              colorMapping={colorMapping}\r\n              getRoot={getShadowRoot}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"section-divider2\"></div>\r\n\r\n          <div className=\"UI-card-divider\">\r\n            {sortedImages.map((data, index) => (\r\n              <ObservedCard\r\n                key={index}\r\n                data={data}\r\n                index={index}\r\n                getShadowRoot={getShadowRoot}\r\n                pauseAnimation={pauseAnimation}\r\n                customArrowIcon2={svgIcons['arrow1']}\r\n              />\r\n            ))}\r\n          </div>\r\n\r\n          <Footer\r\n            customArrowIcon2={svgIcons['arrow1']}\r\n            linkArrowIcon={svgIcons['link-icon']}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DynamicTheme;\r\n","// dynamic app shadow DOM wrapper\r\nimport React, { useRef, useEffect, useState } from 'react';\r\nimport createShadowRoot from 'react-shadow';\r\nimport DynamicTheme from './dynamic-app-outgoing.jsx';\r\nimport { ShadowRootProvider } from '../utils/context-providers/shadow-root-context.tsx';\r\n\r\nconst DynamicAppInbound = ({ onFocusChange, onReady }) => {\r\n  const shadowRef = useRef(null);\r\n  const [shadowRoot, setShadowRoot] = useState(null);\r\n  const ShadowRoot = createShadowRoot.div;\r\n\r\n  // ensure we only ever signal ready once\r\n  const readySentRef = useRef(false);\r\n  const sendReady = () => {\r\n    if (readySentRef.current) return;\r\n    readySentRef.current = true;\r\n    try { onReady?.(); } catch {}\r\n  };\r\n\r\n  useEffect(() => {\r\n    const t = setTimeout(() => {\r\n      const root = shadowRef.current?.getRootNode?.();\r\n      if (root && root.host) {\r\n        setShadowRoot(root);\r\n        // first visual frame -> tell enhancer we’re ready\r\n        requestAnimationFrame(sendReady);\r\n      } else {\r\n        console.warn('[Not a ShadowRoot]', root);\r\n      }\r\n    }, 0);\r\n    return () => clearTimeout(t);\r\n  }, [onReady]); // safe for HMR\r\n\r\n  useEffect(() => {\r\n    const el = shadowRef.current;\r\n    if (!el) return;\r\n\r\n    let startY = 0;\r\n    let focusTriggered = false;\r\n\r\n    const triggerSyntheticClick = () => {\r\n      const down = new PointerEvent('pointerdown', {\r\n        bubbles: true, cancelable: true, composed: true, pointerType: 'touch',\r\n      });\r\n      el.dispatchEvent(down);\r\n      onFocusChange?.(true);\r\n      console.log('[Focus triggered in embedded app]');\r\n    };\r\n\r\n    const handleTouchStart = (e) => {\r\n      if (e.touches.length === 0) return;\r\n      startY = e.touches[0].clientY;\r\n      focusTriggered = false;\r\n    };\r\n\r\n    const handleTouchMove = (e) => {\r\n      if (focusTriggered || e.touches.length === 0) return;\r\n      const deltaY = e.touches[0].clientY - startY;\r\n      if (Math.abs(deltaY) > 1) {\r\n        el.scrollTop += 1;\r\n        triggerSyntheticClick();\r\n        focusTriggered = true;\r\n      }\r\n    };\r\n\r\n    if ('ontouchstart' in window) {\r\n      el.addEventListener('touchstart', handleTouchStart, { passive: true });\r\n      el.addEventListener('touchmove', handleTouchMove, { passive: true });\r\n    }\r\n    return () => {\r\n      el.removeEventListener('touchstart', handleTouchStart);\r\n      el.removeEventListener('touchmove', handleTouchMove);\r\n    };\r\n  }, [onFocusChange]);\r\n\r\n  return (\r\n    <div className=\"embedded-app\">\r\n      <ShadowRoot>\r\n        <div ref={shadowRef} className=\"dynamic-app\" id=\"shadow-dynamic-app\">\r\n          {shadowRoot ? (\r\n            <ShadowRootProvider getShadowRoot={() => shadowRoot}>\r\n              {/* pass the guarded ready down so either level can signal */}\r\n              <DynamicTheme onReady={sendReady} />\r\n            </ShadowRootProvider>\r\n          ) : null}\r\n        </div> \r\n      </ShadowRoot>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DynamicAppInbound;\r\n","import React, { useState, useEffect } from 'react';\r\nimport fetchGallery from '../lib/fetchGallery';\r\nimport { useStyleInjection } from '../../utils/context-providers/style-injector.ts'; \r\nimport navCss from '../../styles/dynamic-app/navigation.css?raw';\r\n\r\nconst Navigation = ({ activeColor, customArrowIcon, customArrowIcon2, isInShadow = false }) => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [lastScrollY, setLastScrollY] = useState(0);\r\n  const [isScrollingUp, setIsScrollingUp] = useState(true);\r\n  const [isScrolled, setIsScrolled] = useState(false);\r\n  const [galleryImages, setGalleryImages] = useState([]);\r\n  const [showScrollHint, setShowScrollHint] = useState(false);\r\n  const [hasShownScrollHint, setHasShownScrollHint] = useState(false);\r\n\r\n  useStyleInjection(navCss, 'dynamic-app-style-nav');\r\n\r\n  const toggleMenu = () => {\r\n    if (isInShadow) return; // no nav in shadow mock\r\n    setIsOpen((prev) => !prev);\r\n  };\r\n  const handleCloseMenu = () => setIsOpen(false);\r\n\r\n  const handleScroll = () => {\r\n    const currentScrollY = window.scrollY;\r\n\r\n    // Always visible if near the top\r\n    if (currentScrollY <= 5) {\r\n      setIsScrollingUp(true);\r\n    } else {\r\n      setIsScrollingUp(currentScrollY < lastScrollY);\r\n    }\r\n\r\n    setIsScrolled(currentScrollY > window.innerHeight * 0.1);\r\n    setLastScrollY(currentScrollY);\r\n  };\r\n\r\n  useEffect(() => {\r\n    window.addEventListener('scroll', handleScroll);\r\n    return () => window.removeEventListener('scroll', handleScroll);\r\n  }, [lastScrollY]);\r\n\r\n  useEffect(() => {\r\n    document.body.classList.toggle('no-scroll', isOpen);\r\n    return () => document.body.classList.remove('no-scroll');\r\n  }, [isOpen]);\r\n\r\n  useEffect(() => {\r\n    const fetchImages = async () => {\r\n      try {\r\n        const images = await fetchGallery();\r\n        setGalleryImages(images);\r\n      } catch (error) {\r\n        console.error('Error fetching gallery images:', error);\r\n      }\r\n    };\r\n    fetchImages();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (window.innerWidth > 1024) {\r\n      const galleryContainer = document.querySelector('.image-container-g');\r\n      const handleHorizontalScroll = (e) => {\r\n        if (galleryContainer) {\r\n          e.preventDefault();\r\n          galleryContainer.scrollLeft += e.deltaY;\r\n        }\r\n      };\r\n      if (galleryContainer) {\r\n        galleryContainer.addEventListener('wheel', handleHorizontalScroll);\r\n      }\r\n      return () => {\r\n        if (galleryContainer) {\r\n          galleryContainer.removeEventListener('wheel', handleHorizontalScroll);\r\n        }\r\n      };\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const gallery = document.querySelector('.image-container-g');\r\n    const scrollIndicator = document.querySelector('.scroll-indicator');\r\n\r\n    if (!gallery || !scrollIndicator) return;\r\n\r\n    const updateScrollIndicator = () => {\r\n      if (window.innerWidth > 1024) {\r\n        const scrollWidth = gallery.scrollWidth - gallery.clientWidth;\r\n        const scrollLeft = gallery.scrollLeft;\r\n        const percentage = scrollWidth > 0 ? Math.max(2, (scrollLeft / scrollWidth) * 100) : 2;\r\n        scrollIndicator.style.setProperty('--progress-dimension', `${percentage}%`);\r\n      } else {\r\n        const scrollHeight = gallery.scrollHeight - gallery.clientHeight;\r\n        const scrollTop = gallery.scrollTop;\r\n        if (scrollHeight > 0) {\r\n          const normalPercentage = 100 - (scrollTop / scrollHeight) * 100;\r\n          const reversedPercentage = Math.min(100, Math.max(2, 100 - normalPercentage));\r\n          scrollIndicator.style.setProperty('--progress-dimension', `${reversedPercentage}%`);\r\n        } else {\r\n          scrollIndicator.style.setProperty('--progress-dimension', '2%');\r\n        }\r\n      }\r\n    };\r\n\r\n    updateScrollIndicator();\r\n    gallery.addEventListener('scroll', updateScrollIndicator);\r\n\r\n    return () => {\r\n      gallery.removeEventListener('scroll', updateScrollIndicator);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (isOpen && !hasShownScrollHint) {\r\n      setShowScrollHint(true);\r\n      const fadeOutTimeout = setTimeout(() => {\r\n        const hintElement = document.querySelector('.scroll-hint');\r\n        if (hintElement) hintElement.style.opacity = '0';\r\n      }, 3000);\r\n      const removeTimeout = setTimeout(() => {\r\n        setShowScrollHint(false);\r\n        setHasShownScrollHint(true);\r\n      }, 4000);\r\n\r\n      return () => {\r\n        clearTimeout(fadeOutTimeout);\r\n        clearTimeout(removeTimeout);\r\n      };\r\n    }\r\n  }, [isOpen, hasShownScrollHint]);\r\n\r\n  const hexToRgba = (hex, alpha = 0.1) => {\r\n    const r = parseInt(hex.slice(1, 3), 16);\r\n    const g = parseInt(hex.slice(3, 5), 16);\r\n    const b = parseInt(hex.slice(5, 7), 16);\r\n    return `rgba(${r}, ${g}, ${b}, ${alpha})`;\r\n  };\r\n\r\n  const adjustBrightness = (hex, multiplier) => {\r\n    let r = parseInt(hex.slice(1, 3), 16);\r\n    let g = parseInt(hex.slice(3, 5), 16);\r\n    let b = parseInt(hex.slice(5, 7), 16);\r\n    r = Math.min(255, Math.max(0, Math.floor(r * multiplier)));\r\n    g = Math.min(255, Math.max(0, Math.floor(g * multiplier)));\r\n    b = Math.min(255, Math.max(0, Math.floor(b * multiplier)));\r\n    return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;\r\n  };\r\n\r\n  const darkenedColor = adjustBrightness(activeColor, 0.55);\r\n  const edgeColor = adjustBrightness(activeColor, 0.8);\r\n\r\n  return (\r\n   <nav className={`navigation ${isScrollingUp ? 'visible' : 'hidden'} ${isInShadow ? 'navigation--shadow' : ''}`}>\r\n      <div\r\n        className={`top-bar-items ${isOpen ? 'menu-open' : ''}`}\r\n        style={{\r\n          background: isOpen\r\n            ? 'transparent'\r\n            : isScrolled\r\n            ? hexToRgba(activeColor, 0.8)\r\n            : 'transparent',\r\n          backdropFilter: isScrolled && !isOpen ? 'blur(5px)' : 'none',\r\n        }}\r\n      >\r\n        <div className=\"site-title\">\r\n          <h-title className=\"title\">\r\n            <a href=\"/\" className=\"homepage-link\">DMI</a>\r\n          </h-title>\r\n        </div>\r\n        <div className=\"menu-icon\" onClick={toggleMenu}>\r\n          <div className={`hamburger ${isOpen ? 'open' : ''}`}></div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className={`menu-item ${isOpen ? 'open' : ''}`}>\r\n        <div className=\"menu-item-1\" onClick={handleCloseMenu}></div>\r\n        <div className=\"menu-item-2\" style={{ '--darkenedColor': darkenedColor, '--darkerColor': edgeColor }}>\r\n          <div className=\"menu-nav\">\r\n            <div className=\"nav-item\">\r\n              <a href=\"/dynamic-theme\" className=\"nav-link\">\r\n                <div className=\"name\"><h4>What is DMI?</h4></div>\r\n                {customArrowIcon2 && (\r\n                  <div className=\"arrow1\" dangerouslySetInnerHTML={{ __html: customArrowIcon2 }} />\r\n                )}\r\n              </a>\r\n            </div>\r\n            <div className=\"nav-item\">\r\n              <a href=\"/dynamic-theme\" className=\"nav-link\">\r\n                <h4>Case Studies</h4>\r\n                {customArrowIcon2 && (\r\n                  <div className=\"arrow1\" dangerouslySetInnerHTML={{ __html: customArrowIcon2 }} />\r\n                )}\r\n              </a>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"gallery-wrapper\">\r\n            <div className=\"scroll-indicator\"></div>\r\n            <div className=\"gallery-container\">\r\n              {showScrollHint && (\r\n                <div className=\"scroll-hint\">\r\n                  <h5>Scroll to explore</h5>\r\n                  <span\r\n                    className=\"arrow2\"\r\n                    dangerouslySetInnerHTML={{ __html: customArrowIcon }}\r\n                  ></span>\r\n                </div>\r\n              )}\r\n              <div className=\"image-container-g\">\r\n                {galleryImages.map((img, index) => (\r\n                  <img\r\n                    key={index}\r\n                    src={img.url}\r\n                    alt={img.alt}\r\n                    draggable=\"false\"\r\n                    className={`gallery-image image-${index}`}\r\n                  />\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default Navigation;\r\n","// Fetch gallery images for the navigation menu\r\nimport sanityClient from '../../utils/sanity';\r\n\r\nconst fetchGallery = async () => {\r\n  const query = `\r\n    *[_type == \"gallery\"]{\r\n      _id,\r\n      images[] {\r\n        image {\r\n          asset-> {\r\n            url\r\n          }\r\n        },\r\n        altText\r\n      }\r\n    }\r\n  `;\r\n\r\n  try {\r\n    const data = await sanityClient.fetch(query);\r\n\r\n    // Flatten and randomize images\r\n    const flattenedImages = data.flatMap((gallery) =>\r\n      gallery.images.map((img, index) => ({\r\n        url: img.image?.asset?.url || '',\r\n        alt: img.altText || 'Default Alt Text',\r\n        cssClass: `gallery-image-${index}`, // Generate unique class names here if needed\r\n      }))\r\n    );\r\n\r\n    const shuffledImages = flattenedImages.sort(() => Math.random() - 0.5);\r\n\r\n    return shuffledImages;\r\n  } catch (error) {\r\n    console.error('Error fetching gallery data:', error);\r\n    return [];\r\n  }\r\n};\r\n\r\nexport default fetchGallery;\r\n","// Student → color set mapping\r\nexport const colorMapping: Record<string, [string, string, string, string]> = {\r\n  'Yiner Xu ': ['#e9b2c2', '#ffc3d4', '#5f4f53', '#ffc9d8'],\r\n  'Simone Schwartz': ['#d2b098', '#f0be9b', '#5b4e44', '#f2c5a5'],\r\n  'Seth Abrahamson ': ['#a9a9a9', '#b9b9b9', '#292929', '#c0c0c0'],\r\n  'Sanna Anwar': ['#e9d0a0', '#ffe4af', '#2f2d28', '#ffe7b7'],\r\n  'Javi Ortiz': ['#e9afbd', '#ffbfcf', '#2f2a2b', '#ffc5d4'],\r\n  'Janhvi Gokalgandhi': ['#a0e1e9', '#aff7ff', '#282e2f', '#b7f8ff'],\r\n  'Andrew Adamides': ['#bef9da', '#7ca08d', '#262a28', '#9dccb4'],\r\n  'Shozab Raza': ['#e9e0a7', '#fff6b6', '#2f2e29', '#fff7bd'],\r\n  'Baopu Wang': ['#b3c2e9', '#c4d4ff', '#4f535f', '#cad8ff'],\r\n  'Efe Ozalp': ['#6fc1e9', '#78d3ff', '#242b2f', '#85d7ff'],\r\n  'Harry Liao ': ['#abcdb2', '#b5e7be', '#292d2a', '#bceac5'],\r\n  'Jawad Naik': ['#97cfac', '#9bedb9', '#272d29', '#a5efc0'],\r\n};\r\n\r\nexport const colorMapping2: Record<string, [string, string, string, string]> = {\r\n  'Yiner Xu': ['#e9b2c2', '#ffc3d4', '#5f4f53', '#ffc9d8'],\r\n  'Simone Schwartz': ['#d2b098', '#f0be9b', '#5b4e44', '#f2c5a5'],\r\n  'Seth Abrahamson': ['#a9a9a9', '#b9b9b9', '#292929', '#c0c0c0'],\r\n  'Sanna Anwar': ['#e9d0a0', '#ffe4af', '#2f2d28', '#ffe7b7'],\r\n  'Javi Ortiz': ['#e9afbd', '#ffbfcf', '#2f2a2b', '#ffc5d4'],\r\n  'Janhvi Gokalgandhi': ['#a0e1e9', '#aff7ff', '#282e2f', '#b7f8ff'],\r\n  'Andrew Adamides': ['#bef9da', '#7ca08d', '#262a28', '#9dccb4'],\r\n  'Shozab Raza': ['#e9e0a7', '#fff6b6', '#2f2e29', '#fff7bd'],\r\n  'Baopu Wang': ['#b3c2e9', '#c4d4ff', '#4f535f', '#cad8ff'],\r\n  'Efe Ozalp': ['#6fc1e9', '#78d3ff', '#242b2f', '#85d7ff'],\r\n  'Harry Liao': ['#abcdb2', '#b5e7be', '#292d2a', '#bceac5'],\r\n  'Jawad Naik': ['#97cfac', '#9bedb9', '#272d29', '#a5efc0'],\r\n};\r\n\r\n","import { Link } from 'react-router-dom';\r\n\r\nconst Footer = ({ customArrowIcon2, linkArrowIcon }) => {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <div className=\"footer-links\">\r\n        <div className=\"nav-item\">\r\n          <div className=\"nav-link-2\" role=\"button\" tabIndex={0}>\r\n            <div className=\"name\">\r\n              <h4>What is DMI?</h4>\r\n            </div>\r\n            {customArrowIcon2 && (\r\n              <div\r\n                className=\"arrow3\"\r\n                dangerouslySetInnerHTML={{ __html: customArrowIcon2 }}\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n        <div className=\"nav-item\">\r\n          <div className=\"nav-link-2\" role=\"button\" tabIndex={0}>\r\n            <h4>Case Studies</h4>\r\n            {customArrowIcon2 && (\r\n              <div\r\n                className=\"arrow3\"\r\n                dangerouslySetInnerHTML={{ __html: customArrowIcon2 }}\r\n              />\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"footer-info\">\r\n        <div className=\"nav-item\">\r\n          <a\r\n            href=\"https://www.linkedin.com/in/efe-ozalp/\" // Replace with your portfolio link\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n            className=\"nav-link-2\"\r\n          >\r\n            <h4>UI/UX & Development by Efe Ozalp</h4>\r\n            {linkArrowIcon && (\r\n              <div\r\n                id=\"link-arrow\"\r\n                className=\"arrow3\"\r\n                dangerouslySetInnerHTML={{ __html: linkArrowIcon }}\r\n              />\r\n            )}\r\n          </a>\r\n        </div>\r\n        <div className=\"nav-item\">\r\n          <a\r\n            href=\"https://www.instagram.com/yxuart/\" // Replace with the illustrator's profile link\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n            className=\"nav-link-2\"\r\n          >\r\n            <h4>Illustrations by Yiner Xu @yxuart</h4>\r\n            {linkArrowIcon && (\r\n              <div\r\n                id=\"link-arrow\"\r\n                className=\"arrow3\"\r\n                dangerouslySetInnerHTML={{ __html: linkArrowIcon }}\r\n              />\r\n            )}\r\n          </a>\r\n        </div>\r\n      </div>\r\n    </footer>\r\n  );\r\n};\r\n\r\nexport default Footer;\r\n","// src/utils/context-providers/style-injector.ts\r\nimport { useEffect } from 'react';\r\nimport { useShadowRoot } from './shadow-root-context';\r\n\r\n// Augment Window locally so TS always sees the field here\r\ndeclare global {\r\n  interface Window {\r\n    __DYNAMIC_STYLE_IDS__?: Set<string>;\r\n  }\r\n}\r\n\r\n// Safe handle to window (SSR-friendly)\r\nconst win: (Window & { __DYNAMIC_STYLE_IDS__?: Set<string> }) | undefined =\r\n  typeof window !== 'undefined' ? window : undefined;\r\n\r\n// Global dedupe set (persisted on window between renders)\r\nconst globalStyleIds: Set<string> = (() => {\r\n  if (!win) return new Set<string>();\r\n  if (!win.__DYNAMIC_STYLE_IDS__) win.__DYNAMIC_STYLE_IDS__ = new Set<string>();\r\n  return win.__DYNAMIC_STYLE_IDS__;\r\n})();\r\n\r\nexport const useStyleInjection = (css: string, id: string) => {\r\n  const { injectStyle, getShadowRoot } = useShadowRoot() || {};\r\n\r\n  useEffect(() => {\r\n    if (!id) {\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        console.warn('useStyleInjection: id is required for dedupe');\r\n      }\r\n      return;\r\n    }\r\n\r\n    const shadowRoot = getShadowRoot?.();\r\n    const isInShadow = shadowRoot && shadowRoot !== document;\r\n\r\n    if (isInShadow && injectStyle) {\r\n      // Shadow DOM dedupe by ID\r\n      if (!shadowRoot.querySelector(`style[data-style-id=\"${id}\"]`)) {\r\n        injectStyle(css, id); // provider handles DOM append\r\n      }\r\n      return;\r\n    }\r\n\r\n    // Global dedupe (memo + DOM check as a safety)\r\n    if (!globalStyleIds.has(id)) {\r\n      const existing = document.head.querySelector(`style[data-style-id=\"${id}\"]`);\r\n      if (!existing) {\r\n        const styleEl = document.createElement('style');\r\n        styleEl.textContent = css;\r\n        styleEl.dataset.styleId = id;\r\n        document.head.appendChild(styleEl);\r\n      }\r\n      globalStyleIds.add(id);\r\n    }\r\n  }, [css, id, injectStyle, getShadowRoot]);\r\n};\r\n"],"names":["isTriplet","v","Array","isArray","length","every","x","TitleDivider","svgIcon","movingTextColors","pauseAnimation","useStyleInjection","titleCss","rootRef","useRef","isVisible","setIsVisible","useState","useEffect","el","current","IntersectionObserver","io","entry","isIntersecting","threshold","observe","disconnect","incoming","stableColors","setStableColors","pendingRef","sameTriplet","a","b","prev","adjustBrightness","hex","mul","test","r","parseInt","slice","g","Math","min","max","floor","toString","padStart","colors","useMemo","textSegments","text","suffix","_jsxs","className","ref","children","_jsx","renderMovingContent","repeatCount","flatMap","_","repeatIndex","map","segment","i","style","color","transition","fill","dangerouslySetInnerHTML","__html","WHITE","resolvePalette","altRaw","colorMapping","exact","trimmed","trim","computeStateFromPalette","q","win","window","palette","c0","c1","c2","c3","isDesktop","innerWidth","activeColor","movingText","lastKnown","totalImages","loadedLowRes","listeners","upgradeTimeout","MediaLoader","type","src","alt","id","objectPosition","loop","muted","playsInline","preload","enableVisibilityControl","priority","controls","isSSR","loaded","setLoaded","showMedium","setShowMedium","showHigh","setShowHigh","posterRemoved","setPosterRemoved","videoRef","imgRef","containerRef","isNear","rootMargin","once","near","setNear","entries","some","e","useNearViewport","shouldStart","complete","readyState","setUpgradeTimeout","ms","setTimeout","forEach","fn","t1","callback","off","push","t2","clearTimeout","onMediaLoaded","event","CustomEvent","detail","dispatchEvent","isVideoSetObj","vs","undefined","legacyVideoUrl","posterUrl","poster","urlFor","width","quality","auto","url","hidePoster","removeAttribute","onPlay","anyV","requestVideoFrameCallback","onTime","currentTime","removeEventListener","addEventListener","timer","useVideoVisibility","t","observer","video","container","load","play","catch","pause","rect","getBoundingClientRect","innerHeight","top","retryTimer","promoteTimer","kickLoad","tryPlay","async","paused","onLoadedMeta","nudgeDecode","onLoadedData","onCanPlay","onError","console","warn","onStalled","onSuspend","webmUrl","mp4Url","hasVideoSource","Boolean","ultraLowSrc","getLowResImageUrl","mediumSrc","getMediumImageUrl","highResSrc","getHighQualityImageUrl","resolvedSrc","position","height","LoadingScreen","isFullScreen","loading","fetchPriority","onLoad","target","draggable","objectFit","opacity","showSpinner","onLoadedMetadata","pointerEvents","zIndex","hasDOM","document","hasConstructedSheets","globalThis","Document","prototype","CSSStyleSheet","isShadowRoot","node","ShadowRoot","ShadowRootContext","createContext","warnedOnce","useShadowRoot","ctx","useContext","getShadowRoot","injectStyle","css","head","querySelector","createElement","dataset","styleId","textContent","appendChild","injectLink","href","selector","link","rel","removeStyle","remove","ShadowRootProvider","sheetCacheRef","Map","Provider","value","root","sheet","get","replaceSync","set","adoptedStyleSheets","includes","filter","s","PauseButton","toggleP5Animation","animRef","isClicked","setIsClicked","currentFrame","setCurrentFrame","mounted","lottie","loadAnimation","renderer","autoplay","animationData","then","anim","goToAndStop","destroy","onMouseEnter","handleMouseEnter","playSegments","onMouseLeave","handleMouseLeave","onClick","stopPropagation","targetFrame","options","label","shuffleArray","arr","j","random","onFetchItems","customArrowIcon","getRoot","isOpen","setIsOpen","selectedValue","setSelectedValue","randomTick","setRandomTick","baseItems","setBaseItems","items","setItems","dropdownRef","sortByCss","handleClickOutside","pauseButton","contains","cancelled","cached","getPreloadedDynamicApp","images","ensureImagesPreload","derived","data","mode","sort","title","localeCompare","localSort","screenWidth","setScreenWidth","onResize","itemIndex","borderItemColor","alt1","convertHexToRGBA","h","replace","boxShadowItemColor","border","boxShadow","find","opt","borderTop","option","handleOptionClick","UIcards","React","image1","image2","alt2","url1","customArrowIcon2","uiCardsCss","displayName","index","getScrollRoot","shadow","isInShadow","containerEl","mouseInside","hostEl","host","onEnter","onLeave","cardEl","imageContainer","imageContainer2","applyTransform","percentage","Element","clientWidth","imageContainerTransform","imageContainer2Transform","imageContainerZIndex","imageContainer2ZIndex","transform","boundingClientRect","rootRect","documentElement","rootHeight","clientHeight","rootCenter","from","initialPct","useIntersectionTransform","backgroundColor","currentlyActiveAlt1","highestVisibility","debounceTimeout","RedIntroOverlay","visible","setVisible","left","onReady","sortedImages","setSortedImages","svgIcons","setSvgIcons","setActiveColor","setMovingTextColors","lastKnownColor","setLastKnownColor","isLoading","setIsLoading","setPauseAnimation","showNavigation","setShowNavigation","toggleFireworksRef","scrollContainerRef","shadowRef","showFireworks","setShowFireworks","isHostVisible","setIsHostVisible","hostVisibleRef","indexCss","miscCss","overlayCss","requestAnimationFrame","cancelAnimationFrame","snap","icons","ensureDynamicPreload","whenDynamicPreloadReady","cache","observerRoot","handleActivate","useCallback","quartet","nextActive","nextTriplet","handleDeactivate","currentAltRef","cleanup","setupAltObserver","onActivate","onDeactivate","rootElement","observerOptions","keys","observerCallback","intersectionRatio","imageElement","alt1Value","getAttribute","visibility","querySelectorAll","card","boundingRect","viewportHeight","handleSetToggleFireworks","handlePauseToggle","isEnabled","ro","ResizeObserver","desired","visibleNow","bottom","initialDesired","cardRefs","IntroOverlay","Navigation","scrollLockContainer","FireworksDisplay","onToggleFireworks","SortBy","setSortOption","ObservedCard","Footer","linkArrowIcon","DynamicAppInbound","onFocusChange","shadowRoot","setShadowRoot","createShadowRoot","readySentRef","sendReady","getRootNode","startY","focusTriggered","handleTouchStart","touches","clientY","handleTouchMove","deltaY","abs","scrollTop","triggerSyntheticClick","down","PointerEvent","bubbles","cancelable","composed","pointerType","log","passive","DynamicTheme","lastScrollY","setLastScrollY","isScrollingUp","setIsScrollingUp","isScrolled","setIsScrolled","galleryImages","setGalleryImages","showScrollHint","setShowScrollHint","hasShownScrollHint","setHasShownScrollHint","navCss","handleScroll","currentScrollY","scrollY","body","classList","toggle","sanityClient","fetch","gallery","img","image","asset","altText","cssClass","error","fetchGallery","fetchImages","galleryContainer","handleHorizontalScroll","preventDefault","scrollLeft","scrollIndicator","updateScrollIndicator","scrollWidth","setProperty","scrollHeight","normalPercentage","reversedPercentage","fadeOutTimeout","hintElement","removeTimeout","multiplier","darkenedColor","edgeColor","background","hexToRgba","alpha","backdropFilter","toggleMenu","handleCloseMenu","colorMapping2","role","tabIndex","globalStyleIds","__DYNAMIC_STYLE_IDS__","Set","has","styleEl","add"],"sourceRoot":""}