"use strict";exports.id=453,exports.ids=[453],exports.modules={1643:(e,t,i)=>{i.d(t,{A:()=>u});var o=i(2015),n=i(4274),r=i(5991);let s=0,a=0,d=[],l=null;var c=i(6442);const u=({type:e,src:t,alt:i="",id:u,className:m="",style:p={},objectPosition:h="center center",loop:v=!0,muted:w=!0,playsInline:f=!0,preload:y="metadata",enableVisibilityControl:g=!0,priority:b=!1,controls:E=!1})=>{const L="undefined"==typeof window,[T,S]=(0,o.useState)(L),[Y,U]=(0,o.useState)(!1),[I,A]=(0,o.useState)(!1),[F,N]=(0,o.useState)(!1),j=(0,o.useRef)(null),C=(0,o.useRef)(null),x=(0,o.useRef)(null),D=function(e,{rootMargin:t="900px 0px",threshold:i=0,once:n=!0}={}){const[r,s]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{if(!e.current||r)return;const o=new IntersectionObserver(e=>{e.some(e=>e.isIntersecting)&&(s(!0),n&&o.disconnect())},{rootMargin:t,threshold:i});return o.observe(e.current),()=>o.disconnect()},[e,r,t,i,n]),r}(x),P=b||D;(0,o.useEffect)(()=>{"image"===e&&C.current?.complete&&S(!0),"video"===e&&j.current?.readyState>=2&&S(!0)},[e]),(0,o.useEffect)(()=>{if("image"!==e)return;s++,((e=5e3)=>{l||(l=setTimeout(()=>{d.forEach(e=>e()),d=[]},e))})();const t=setTimeout(()=>U(!0),P?0:2e3);var i;P&&U(!0),i=()=>setTimeout(()=>A(!0),300),d.push(i);const o=setTimeout(()=>A(!0),5e3);return()=>{clearTimeout(t),clearTimeout(o)}},[e,P]);const V=()=>{if(S(!0),"image"===e&&(a++,a>=s&&(d.forEach(e=>e()),d=[])),u){const e=new CustomEvent("mediaReady",{detail:{id:u}});window.dispatchEvent(e)}},M="object"==typeof t&&null!==t&&!("asset"in t)&&("webmUrl"in t||"mp4Url"in t),R=M?t:void 0,k="string"==typeof t?t:void 0,B=R?.poster?"string"==typeof R.poster?R.poster:(0,r.dk)(R.poster).width(1200).quality(80).auto("format").url():void 0;(0,o.useEffect)(()=>{if("video"!==e||!j.current)return;const t=j.current,i=()=>{N(!0),t.removeAttribute("poster")},o=()=>{const e=t;if("function"!=typeof e.requestVideoFrameCallback){const e=()=>{t.currentTime>0&&t.readyState>=2&&(t.removeEventListener("timeupdate",e),i())};t.addEventListener("timeupdate",e);const o=setTimeout(()=>{t.removeEventListener("timeupdate",e),i()},1200);return()=>clearTimeout(o)}e.requestVideoFrameCallback(()=>i())};return t.addEventListener("play",o,{once:!0}),()=>t.removeEventListener("play",o)},[e]),((e,t,i=.4)=>{(0,o.useEffect)(()=>{if(!e?.current||!t?.current)return;const o="number"==typeof i&&i>=0&&i<=1?i:.4;let n;const r=e.current,s=t.current;r.load(),r.muted=!0,n=new IntersectionObserver(([e])=>{e.isIntersecting?r.play().catch(()=>setTimeout(()=>r.play().catch(()=>{}),500)):r.pause()},{threshold:o}),n.observe(s);const a=s.getBoundingClientRect();return Math.min(Math.max((window.innerHeight-a.top)/window.innerHeight,0),1)>=o&&r.play().catch(()=>{}),()=>n?.disconnect()},[e,t,i])})(j,x,"video"===e&&g?.35:void 0),(0,o.useEffect)(()=>{if("video"!==e||!j.current)return;const t=j.current;let i=null,o=null;const n=()=>{try{t.preload=y??"metadata","none"!==t.preload&&t.load()}catch{}},r=async()=>{if(g)try{t.muted&&t.playsInline&&t.paused&&t.readyState>=2&&await t.play().catch(()=>{})}catch{}},s=()=>{S(!0),(()=>{try{if(t.readyState<2)return;const e=t.currentTime;t.currentTime=e>0?e:.001}catch{}})()},a=()=>{S(!0),r()},d=()=>{S(!0),r()};P&&(n(),i=window.setTimeout(()=>{t.readyState<2&&n()},2500),o=window.setTimeout(()=>{if(t.readyState<2)try{t.preload="auto",t.load()}catch{}},5e3)),t.addEventListener("loadedmetadata",s),t.addEventListener("loadeddata",a),t.addEventListener("canplay",d);const l=e=>console.warn("Video error",e),c=()=>console.warn("Video stalled"),u=()=>{};return t.addEventListener("error",l),t.addEventListener("stalled",c),t.addEventListener("suspend",u),()=>{i&&(window.clearTimeout(i),i=null),o&&(window.clearTimeout(o),o=null),t.removeEventListener("loadedmetadata",s),t.removeEventListener("loadeddata",a),t.removeEventListener("canplay",d),t.removeEventListener("error",l),t.removeEventListener("stalled",c),t.removeEventListener("suspend",u)}},[e,P,y,g,M,R&&R.webmUrl||"",R&&R.mp4Url||"",k||""]);const H=Boolean(R?.webmUrl||R?.mp4Url||k);if(!t||"video"===e&&!H)return null;if("image"===e){const e="string"==typeof t?t:(0,r.DB)(t),o="string"==typeof t?t:(0,r.oA)(t),s="string"==typeof t?t:(0,r.Kn)(t),a=I?s:Y?o:e;return a?(0,c.FD)("div",{ref:x,style:{position:"relative",width:"100%",height:"100%"},children:[!T&&(0,c.Y)("div",{className:"absolute-inset",children:(0,c.Y)(n.A,{isFullScreen:!1})}),(0,c.Y)("img",{ref:C,loading:b?"eager":void 0,fetchPriority:I||b?"high":Y?"auto":"low",id:u,src:a||void 0,alt:i,onLoad:V,onError:e=>console.warn("Image failed",e.target.src),className:m,draggable:!1,style:{...p,objectFit:"cover",objectPosition:h,opacity:T?1:0,transition:L?"none":"filter 0.5s ease, opacity 0.3s ease"}})]}):null}const O=!T;return(0,c.FD)("div",{ref:x,style:{position:"relative",width:"100%",height:"100%"},children:[O&&(0,c.Y)("div",{className:"absolute-inset",children:(0,c.Y)(n.A,{isFullScreen:!1})}),(0,c.FD)("video",{id:u,ref:j,onLoadedData:V,onLoadedMetadata:()=>S(!0),onError:e=>console.warn("Video failed",e),className:m,style:{...p,objectFit:"cover",objectPosition:h,opacity:T?1:0,transition:L?"none":"opacity 0.3s ease",pointerEvents:"all",zIndex:1},loop:v,muted:w,playsInline:f,preload:y??"metadata",controls:E,poster:F?void 0:B,children:[R?.mp4Url&&(0,c.Y)("source",{src:R.mp4Url||void 0,type:"video/mp4"}),R?.webmUrl&&(0,c.Y)("source",{src:R.webmUrl||void 0,type:"video/webm"}),!R?.webmUrl&&!R?.mp4Url&&k&&(0,c.Y)("source",{src:k||void 0})]})]})}},2453:(e,t,i)=>{i.r(t),i.d(t,{default:()=>m});var o=i(2015),n=i(9165),r=i(2437),s=i(5093),a=i(1643),d=i(533),l=i(6442);const c=16,u=.25;function m(){const[e,t]=(0,o.useState)(null),[i,m]=(0,o.useState)(()=>window.innerWidth<1024?45:50),[p,h]=(0,o.useState)(window.innerHeight>window.innerWidth);if((0,d.h)(),(0,o.useEffect)(()=>{(0,n.C)("ice-scoop").then(e=>t(e))},[]),(0,o.useEffect)(()=>{const e=()=>h(window.innerHeight>window.innerWidth);return window.addEventListener("resize",e,{passive:!0}),()=>window.removeEventListener("resize",e)},[]),!e)return null;const v=Boolean(e.mediaTwo?.video?.webmUrl||e.mediaTwo?.video?.mp4Url),w=p&&i<=c+u,f=p&&i>=100-c-u;return(0,l.FD)("section",{className:"block-type-1",id:"no-ssr",style:{position:"relative"},children:[(0,l.Y)("div",{className:"media-content-1",style:p?w?{height:"0%",width:"100%",position:"absolute",top:0,transition:"height 0.1s ease"}:f?{height:"100%",width:"100%",position:"absolute",top:0,transition:"height 0.1s ease"}:{height:`${i}%`,width:"100%",position:"absolute",top:0}:{width:`${i}%`,height:"100%",position:"absolute",left:0},children:(0,l.Y)(s.A,{sensitivity:2,children:(0,l.Y)(a.A,{type:"image",src:e.mediaOne.image,alt:e.mediaOne.alt||"Ice Cream Scoop media",id:"icecream-media-1",className:"media-item-1 tooltip-ice-scoop",objectPosition:"left center",style:{width:"100%",height:"100%"}})})}),(0,l.Y)(r.A,{split:i,setSplit:m}),(0,l.Y)("div",{className:"media-content-2",style:p?w?{height:"100%",width:"100%",position:"absolute",top:"0%",transition:"height 0.1s ease, top 0.1s ease"}:f?{height:"0%",width:"100%",position:"absolute",top:"100%",transition:"height 0.1s ease, top 0.1s ease"}:{height:100-i+"%",width:"100%",position:"absolute",top:`${i}%`}:{width:100-i+"%",height:"100%",position:"absolute",left:`${i}%`},children:(0,l.Y)(s.A,{children:(0,l.Y)(a.A,{type:v?"video":"image",src:v?e.mediaTwo.video:e.mediaTwo.image,alt:e.mediaTwo.alt||"Ice Cream Scoop media",id:"icecream-media-2",className:"media-item-2 tooltip-ice-scoop",objectPosition:"center bottom",style:{width:"100%",height:"100%"}})})})]})}}};
//# sourceMappingURL=453.server.js.map