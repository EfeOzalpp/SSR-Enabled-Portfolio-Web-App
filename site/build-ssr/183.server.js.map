{"version":3,"file":"183.server.js","mappings":"0KAOe,SAASA,IACtB,MAAOC,EAAMC,IAAWC,EAAAA,EAAAA,UAA6B,OAC9CC,EAAOC,IAAYF,EAAAA,EAAAA,UAAS,IAAOG,OAAOC,WAAa,IAAM,GAAK,KAClEC,EAAYC,IAAiBN,EAAAA,EAAAA,UAASG,OAAOI,YAAcJ,OAAOC,YA4CzE,OA1CAI,EAAAA,EAAAA,MAEAC,EAAAA,EAAAA,WAAU,KACRC,SAASC,eAAe,eAAeC,UAAUC,OAAO,qBAGxD,MAAMC,EAASJ,SAASK,cAAc,+BAChCC,EAASN,SAASK,cAAc,+BAEhCE,EAAQH,GAAQI,SAASC,QACzBC,EAAQJ,GAAQE,SAASC,QAE3BL,GAAUG,GAASH,EAAOO,MAAQJ,IAAOH,EAAOO,IAAMJ,GACtDD,GAAUI,GAASJ,EAAOK,MAAQD,IAAOJ,EAAOK,IAAMD,GAE1DrB,EAAQW,SAASC,eAAe,2BAGhCW,EAAAA,EAAAA,IAAgBrB,EAAOI,EAAY,CACjCkB,GAAI,2BACJC,GAAI,6BAGN,MAAMC,EAAWA,KACf,MAAMC,EAAIvB,OAAOI,YAAcJ,OAAOC,WACtCE,EAAcoB,IACdJ,EAAAA,EAAAA,IAAgBrB,EAAOyB,EAAG,CACxBH,GAAI,2BACJC,GAAI,8BAIR,OADArB,OAAOwB,iBAAiB,SAAUF,EAAU,CAAEG,SAAS,IAChD,IAAMzB,OAAO0B,oBAAoB,SAAUJ,IACjD,KAEHhB,EAAAA,EAAAA,WAAU,MACRa,EAAAA,EAAAA,IAAgBrB,EAAOI,EAAY,CACjCkB,GAAI,2BACJC,GAAI,8BAEL,CAACvB,EAAOI,IAENP,GACEgC,EAAAA,EAAAA,eACLC,EAAAA,EAAAA,GAACC,EAAAA,EAAgB,CACf/B,MAAOA,EACPC,SAAUA,EACV+B,IAAK,CAAEV,GAAI,2BAA4BC,GAAI,8BAE7C1B,GAPgB,IASpB,C","sources":["webpack://personal-site/./src/ssr/projects/rotary.enhancer.tsx"],"sourcesContent":["// src/ssr/projects/RotaryEnhancer.tsx\r\nimport { useEffect, useState } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport SplitDragHandler from '../../utils/split+drag/split-controller';\r\nimport { useTooltipInit } from '../../utils/tooltip/tooltipInit';\r\nimport { applySplitStyle } from '../logic/apply-split-style';\r\n\r\nexport default function RotaryEnhancer() {\r\n  const [host, setHost] = useState<HTMLElement | null>(null);\r\n  const [split, setSplit] = useState(() => (window.innerWidth < 768 ? 55 : 50));\r\n  const [isPortrait, setIsPortrait] = useState(window.innerHeight > window.innerWidth);\r\n\r\n  useTooltipInit();\r\n\r\n  useEffect(() => {\r\n    document.getElementById('rotary-ssr')?.classList.remove('ssr-initial-split');\r\n\r\n    // Upgrade images from SSR medium-quality to high-quality\r\n    const img1El = document.querySelector('#rotary-ssr #rotary-media-1') as HTMLImageElement | null;\r\n    const img2El = document.querySelector('#rotary-ssr #rotary-media-2') as HTMLImageElement | null;\r\n\r\n    const full1 = img1El?.dataset?.srcFull;\r\n    const full2 = img2El?.dataset?.srcFull;\r\n\r\n    if (img1El && full1 && img1El.src !== full1) img1El.src = full1;\r\n    if (img2El && full2 && img2El.src !== full2) img2El.src = full2;\r\n\r\n    setHost(document.getElementById('rotary-enhancer-mount'));\r\n\r\n    // Initial apply\r\n    applySplitStyle(split, isPortrait, {\r\n      m1: 'rotary-media-1-container',\r\n      m2: 'rotary-media-2-container',\r\n    });\r\n\r\n    const onResize = () => {\r\n      const p = window.innerHeight > window.innerWidth;\r\n      setIsPortrait(p);\r\n      applySplitStyle(split, p, {\r\n        m1: 'rotary-media-1-container',\r\n        m2: 'rotary-media-2-container',\r\n      });\r\n    };\r\n    window.addEventListener('resize', onResize, { passive: true });\r\n    return () => window.removeEventListener('resize', onResize);\r\n  }, []); // run once\r\n\r\n  useEffect(() => {\r\n    applySplitStyle(split, isPortrait, {\r\n      m1: 'rotary-media-1-container',\r\n      m2: 'rotary-media-2-container',\r\n    });\r\n  }, [split, isPortrait]);\r\n\r\n  if (!host) return null;\r\n  return createPortal(\r\n    <SplitDragHandler\r\n      split={split}\r\n      setSplit={setSplit}\r\n      ids={{ m1: 'rotary-media-1-container', m2: 'rotary-media-2-container' }}\r\n    />,\r\n    host\r\n  );\r\n}\r\n"],"names":["RotaryEnhancer","host","setHost","useState","split","setSplit","window","innerWidth","isPortrait","setIsPortrait","innerHeight","useTooltipInit","useEffect","document","getElementById","classList","remove","img1El","querySelector","img2El","full1","dataset","srcFull","full2","src","applySplitStyle","m1","m2","onResize","p","addEventListener","passive","removeEventListener","createPortal","_jsx","SplitDragHandler","ids"],"sourceRoot":""}