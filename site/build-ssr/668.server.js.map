{"version":3,"file":"668.server.js","mappings":"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","sources":["webpack://personal-site/./src/dynamic-app/components/title.jsx"],"sourcesContent":["// TitleDivider component (no flicker on enter/leave)\r\nimport { useEffect, useMemo, useRef, useState } from 'react';\r\nimport { useStyleInjection } from '../../utils/context-providers/style-injector.ts';\r\nimport titleCss from '../../styles/dynamic-app/title.css?raw';\r\n\r\nconst isTriplet = (v) => Array.isArray(v) && v.length === 3 && v.every(x => typeof x === 'string');\r\n\r\nconst TitleDivider = ({ svgIcon, movingTextColors, pauseAnimation }) => {\r\n  useStyleInjection(titleCss, 'dynamic-app-style-title');\r\n\r\n  // ----- visibility of this component -----\r\n  const rootRef = useRef(null);\r\n  const [isVisible, setIsVisible] = useState(true);\r\n  useEffect(() => {\r\n    const el = rootRef.current;\r\n    if (!el || typeof IntersectionObserver === 'undefined') return;\r\n    const io = new IntersectionObserver(\r\n      ([entry]) => setIsVisible(!!entry.isIntersecting),\r\n      { threshold: 0.01 }\r\n    );\r\n    io.observe(el);\r\n    return () => io.disconnect();\r\n  }, []);\r\n\r\n  // ----- stable palette that only changes when visible -----\r\n  const defaultTriplet = ['#70c6b0', '#5670b5', '#50b0c5'];\r\n  const incoming = isTriplet(movingTextColors) ? movingTextColors : defaultTriplet;\r\n\r\n  const [stableColors, setStableColors] = useState(incoming);\r\n  const pendingRef = useRef(null);\r\n\r\n  // shallow compare helper\r\n  const sameTriplet = (a, b) => a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\r\n\r\n  // When palette prop changes: apply immediately if visible, else stash it.\r\n  useEffect(() => {\r\n    if (!isTriplet(incoming)) return;\r\n    if (isVisible) {\r\n      setStableColors(prev => (sameTriplet(prev, incoming) ? prev : incoming));\r\n      pendingRef.current = null;\r\n    } else {\r\n      // hold for later to avoid flicker while hidden\r\n      pendingRef.current = incoming;\r\n    }\r\n  }, [incoming, isVisible]);\r\n\r\n  // When we become visible, commit any pending palette once.\r\n  useEffect(() => {\r\n    if (isVisible && pendingRef.current && !sameTriplet(stableColors, pendingRef.current)) {\r\n      setStableColors(pendingRef.current);\r\n      pendingRef.current = null;\r\n    }\r\n  }, [isVisible, stableColors]);\r\n\r\n  // ----- brightness adjust + smooth transition -----\r\n  const adjustBrightness = (hex, mul) => {\r\n    if (!/^#[0-9a-f]{6}$/i.test(hex)) return hex;\r\n    let r = parseInt(hex.slice(1, 3), 16);\r\n    let g = parseInt(hex.slice(3, 5), 16);\r\n    let b = parseInt(hex.slice(5, 7), 16);\r\n    r = Math.min(255, Math.max(0, Math.floor(r * mul)));\r\n    g = Math.min(255, Math.max(0, Math.floor(g * mul)));\r\n    b = Math.min(255, Math.max(0, Math.floor(b * mul)));\r\n    return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;\r\n  };\r\n\r\n  const colors = useMemo(() => ([\r\n    adjustBrightness(stableColors[0], 1.05),\r\n    adjustBrightness(stableColors[1], 1.25),\r\n    adjustBrightness(stableColors[2], 1.10),\r\n  ]), [stableColors]);\r\n\r\n  const textSegments = useMemo(() => ([\r\n    { text: 'Institute Gallery', suffix: '' },\r\n    { text: 'Dyna', suffix: 'mic Media' },\r\n    { text: 'Dyn', suffix: 'mic Media' },\r\n  ]), []);\r\n\r\n  const renderMovingContent = (repeatCount = 2) =>\r\n    [...Array(repeatCount)].flatMap((_, repeatIndex) =>\r\n      textSegments.map((segment, i) => (\r\n        <span\r\n          key={`${repeatIndex}-${i}`}\r\n          className=\"moving-text\"\r\n          style={{\r\n            color: colors[i],\r\n            transition: 'color 120ms linear',\r\n          }}\r\n        >\r\n          {segment.text}\r\n          <span className=\"logo-container\">\r\n            <span\r\n              className=\"svg-icon\"\r\n              // If your injected SVG respects currentColor, you could instead set color here.\r\n              style={{ fill: colors[i], transition: 'fill 120ms linear' }}\r\n              dangerouslySetInnerHTML={{ __html: svgIcon }}\r\n            />\r\n          </span>\r\n          {segment.suffix}\r\n        </span>\r\n      ))\r\n    );\r\n\r\n  return (\r\n    <div className=\"title-container\" ref={rootRef}>\r\n      <div className=\"static-title\">\r\n        <h1>MassArt 2024</h1>\r\n      </div>\r\n      <div className={`moving-title ${pauseAnimation ? 'paused' : ''}`}>\r\n        <h1 className=\"title-with-icon moving-text-wrapper\">\r\n          {renderMovingContent()}\r\n        </h1>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TitleDivider;\r\n"],"names":["isTriplet","v","Array","isArray","length","every","x","TitleDivider","svgIcon","movingTextColors","pauseAnimation","useStyleInjection","titleCss","rootRef","useRef","isVisible","setIsVisible","useState","useEffect","el","current","IntersectionObserver","io","entry","isIntersecting","threshold","observe","disconnect","incoming","stableColors","setStableColors","pendingRef","sameTriplet","a","b","prev","adjustBrightness","hex","mul","test","r","parseInt","slice","g","Math","min","max","floor","toString","padStart","colors","useMemo","textSegments","text","suffix","_jsxs","className","ref","children","_jsx","renderMovingContent","repeatCount","flatMap","_","repeatIndex","map","segment","i","style","color","transition","fill","dangerouslySetInnerHTML","__html"],"sourceRoot":""}