{"version":3,"file":"561.server.js","mappings":"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","sources":["webpack://personal-site/./src/utils/content-utility/lazy-view-mount.tsx","webpack://personal-site/./src/utils/content-utility/color-map.ts","webpack://personal-site/./src/utils/context-providers/project-context.tsx","webpack://personal-site/./src/utils/title/title-context.tsx","webpack://personal-site/./src/utils/title/title-observer.tsx","webpack://personal-site/./src/utils/title/view-project-cta.tsx","webpack://personal-site/./src/utils/title/view-project.tsx","webpack://personal-site/./src/utils/content-utility/lazy-in-view.tsx","webpack://personal-site/./src/utils/content-utility/event-mount.tsx","webpack://personal-site/./src/utils/project-pane.tsx","webpack://personal-site/./src/utils/scroll-controller.tsx","webpack://personal-site/./src/FrontPage.jsx"],"sourcesContent":["// src/utils/content-utility/lazy-view-mount.tsx\r\nimport { useEffect, useRef, useState, Suspense, type ComponentType, lazy } from 'react';\r\n\r\ntype MountMode = 'io' | 'idle' | 'immediate';\r\n\r\ntype Props = {\r\n  load: () => Promise<{ default: ComponentType<any> }>;\r\n  fallback?: React.ReactNode;\r\n\r\n  /** Mount strategy */\r\n  mountMode?: MountMode;            // 'io' | 'idle' | 'immediate' (default 'io')\r\n\r\n  /** IO config (only when mountMode === 'io') */\r\n  enterThreshold?: number;          // default 0.2   -> start showing at/after this ratio\r\n  exitThreshold?: number;           // default 0.05  -> consider out-of-view at/below\r\n  unmountDelayMs?: number;          // default 150ms -> delay before unmounting after exit\r\n  root?: Element | null;            // viewport by default\r\n  rootMargin?: string;              // default '0px'\r\n  observeTargetId?: string;         // observe specific element; else our own wrapper\r\n\r\n  /** Preloading */\r\n  preloadOnIdle?: boolean;          // default true\r\n  preloadIdleTimeout?: number;      // default 2000\r\n  preloadOnFirstIO?: boolean;       // default true\r\n\r\n  /** Layout/UX */\r\n  placeholderMinHeight?: number;    // default 360\r\n  fadeMs?: number;                  // default 300\r\n  fadeEasing?: string;              // default 'ease'\r\n\r\n  /** Forward child props */\r\n  componentProps?: Record<string, any>;\r\n};\r\n\r\nconst hasWindow = typeof window !== 'undefined';\r\nconst hasRIC = hasWindow && 'requestIdleCallback' in (window as any);\r\nconst hasCIC = hasWindow && 'cancelIdleCallback' in (window as any);\r\nconst ric = (cb: any, opts?: any) =>\r\n  hasRIC ? (window as any).requestIdleCallback(cb, opts) : setTimeout(cb, opts?.timeout ?? 0);\r\nconst cic = (id: any) =>\r\n  hasCIC ? (window as any).cancelIdleCallback(id) : clearTimeout(id);\r\n\r\nexport default function LazyViewMount({\r\n  load,\r\n  fallback = null,\r\n\r\n  // strategy\r\n  mountMode = 'io',\r\n\r\n  // IO\r\n  enterThreshold = 0.2,\r\n  exitThreshold = 0.05,\r\n  unmountDelayMs = 150,\r\n  root = null,\r\n  rootMargin = '0px',\r\n  observeTargetId,\r\n\r\n  // preload\r\n  preloadOnIdle = true,\r\n  preloadIdleTimeout = 2000,\r\n  preloadOnFirstIO = true,\r\n\r\n  // layout/UX\r\n  placeholderMinHeight = 360,\r\n  fadeMs = 300,\r\n  fadeEasing = 'ease',\r\n\r\n  componentProps,\r\n}: Props) {\r\n  const isServer = !hasWindow;\r\n\r\n  const selfRef = useRef<HTMLDivElement | null>(null);\r\n  const [Comp, setComp] = useState<ComponentType | null>(null);\r\n\r\n  // mount/visibility\r\n  const mountedRef = useRef(false);\r\n  const [isMounted, setIsMounted] = useState(false);\r\n  const [isVisible, setIsVisible] = useState(false);\r\n\r\n  // timers\r\n  const unmountTimer = useRef<number | null>(null);\r\n  const fadeTimer = useRef<number | null>(null);\r\n  const idleId = useRef<any>(null);\r\n\r\n  // preload promise cache\r\n  const preloadPromiseRef = useRef<Promise<{ default: ComponentType<any> }> | null>(null);\r\n\r\n  // IO edge tracking\r\n  const lastRatio = useRef<number>(0);\r\n  const lastIntersecting = useRef<boolean>(false);\r\n  const firstIOSeen = useRef(false);\r\n\r\n  /** Preload once */\r\n  const ensurePreloaded = () => {\r\n    if (!preloadPromiseRef.current) {\r\n      preloadPromiseRef.current = load();\r\n    }\r\n    return preloadPromiseRef.current;\r\n  };\r\n\r\n  const clearTimers = () => {\r\n    if (unmountTimer.current != null) { window.clearTimeout(unmountTimer.current); unmountTimer.current = null; }\r\n    if (fadeTimer.current != null)     { window.clearTimeout(fadeTimer.current);   fadeTimer.current = null; }\r\n  };\r\n\r\n  const mountNow = () => {\r\n    if (mountedRef.current) {\r\n      // already mounted; just ensure visible\r\n      setIsVisible(true);\r\n      return;\r\n    }\r\n    mountedRef.current = true;\r\n    const p = ensurePreloaded();\r\n    setComp(prev => prev ?? (lazy(() => p) as unknown as ComponentType));\r\n    setIsMounted(true);\r\n    // next frame -> allow CSS transition\r\n    requestAnimationFrame(() => setIsVisible(true));\r\n  };\r\n\r\n  const unmountSoon = () => {\r\n    if (!mountedRef.current) return;\r\n    clearTimers();\r\n    // fade out -> unmount\r\n    unmountTimer.current = window.setTimeout(() => {\r\n      setIsVisible(false);\r\n      fadeTimer.current = window.setTimeout(() => {\r\n        setIsMounted(false);\r\n        mountedRef.current = false;\r\n      }, fadeMs);\r\n    }, unmountDelayMs);\r\n  };\r\n\r\n  /** Preload on idle */\r\n  useEffect(() => {\r\n    if (isServer || !preloadOnIdle) return;\r\n    if (idleId.current) cic(idleId.current);\r\n    idleId.current = ric(() => { void ensurePreloaded(); }, { timeout: preloadIdleTimeout });\r\n    return () => { if (idleId.current) { cic(idleId.current); idleId.current = null; } };\r\n  }, [isServer, preloadOnIdle, preloadIdleTimeout, load]);\r\n\r\n  /** Mount behavior per mode */\r\n  useEffect(() => {\r\n    if (isServer) return;\r\n\r\n    if (mountMode === 'immediate') {\r\n      mountNow();\r\n      return;\r\n    }\r\n\r\n    if (mountMode === 'idle') {\r\n      const id = ric(() => mountNow(), { timeout: preloadIdleTimeout });\r\n      return () => { if (id) cic(id); };\r\n    }\r\n\r\n    // ---- IO MODE ----\r\n    const target =\r\n      (observeTargetId ? document.getElementById(observeTargetId) : null) ||\r\n      selfRef.current;\r\n\r\n    if (!target) return;\r\n\r\n    if (typeof IntersectionObserver === 'undefined') {\r\n      // no IO support -> just mount\r\n      mountNow();\r\n      return;\r\n    }\r\n\r\n    // ensure sensible thresholds (enter > exit)\r\n    const enter = Math.max(0, Math.min(1, enterThreshold));\r\n    const exit  = Math.max(0, Math.min(enter, exitThreshold)); // cap at enter\r\n    const thresholds = Array.from(new Set([0, exit, enter, 1])).sort((a, b) => a - b);\r\n\r\n    const io = new IntersectionObserver(([entry]) => {\r\n      const ratio = entry?.intersectionRatio ?? 0;\r\n      const intersecting = !!entry?.isIntersecting;\r\n\r\n      // first IO → optional preload\r\n      if (!firstIOSeen.current) {\r\n        firstIOSeen.current = true;\r\n        if (preloadOnFirstIO) void ensurePreloaded();\r\n      }\r\n\r\n      // Compute edge crossings (prevents jitter in the gray zone)\r\n      const crossedEnter = lastRatio.current < enter && ratio >= enter;\r\n      const crossedExit  = lastRatio.current > exit  && ratio <= exit;\r\n      const becameIntersecting = !lastIntersecting.current && intersecting;\r\n      const leftIntersecting   = lastIntersecting.current && !intersecting;\r\n\r\n      // ENTER: on intersection or crossing the enter threshold\r\n      if (becameIntersecting || crossedEnter) {\r\n        clearTimers();\r\n        mountNow();\r\n      }\r\n      // EXIT: when leaving intersection OR crossing exit threshold\r\n      else if (leftIntersecting || crossedExit) {\r\n        unmountSoon();\r\n      }\r\n\r\n      // save last values\r\n      lastRatio.current = ratio;\r\n      lastIntersecting.current = intersecting;\r\n    }, { root, rootMargin, threshold: thresholds });\r\n\r\n    io.observe(target);\r\n    return () => { io.disconnect(); clearTimers(); };\r\n  }, [\r\n    isServer,\r\n    mountMode,\r\n    root,\r\n    rootMargin,\r\n    enterThreshold,\r\n    exitThreshold,\r\n    observeTargetId,\r\n    preloadIdleTimeout,\r\n    preloadOnFirstIO,\r\n    fadeMs,\r\n    unmountDelayMs,\r\n  ]);\r\n\r\n  const CompAny = Comp as any;\r\n\r\n  return (\r\n    <div\r\n      ref={selfRef}\r\n      style={{ width: '100%', minHeight: placeholderMinHeight, position: 'relative' }}\r\n    >\r\n      {isMounted && CompAny ? (\r\n        <div\r\n          style={{\r\n            opacity: isVisible ? 1 : 0,                 // 1 in view, 0 out of view\r\n            transition: `opacity ${fadeMs}ms ${fadeEasing}`,\r\n            willChange: 'opacity',\r\n          }}\r\n        >\r\n          <Suspense fallback={fallback}>\r\n            <CompAny {...(componentProps || {})} />\r\n          </Suspense>\r\n        </div>\r\n      ) : (\r\n        fallback\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","// Master color config\r\nexport interface ProjectColor {\r\n  rgb: string;         // \"204, 85, 41\"\r\n  tooltipAlpha?: number;\r\n  defaultAlpha?: number;\r\n  darkThemeTop?: string; // optional override for theme-color\r\n}\r\n\r\nexport const projectColors: Record<string, ProjectColor> = {\r\n  'Rotary Lamp': {\r\n    rgb: '204, 85, 41',\r\n    tooltipAlpha: 0.6,\r\n    defaultAlpha: 0.6,\r\n    darkThemeTop: 'rgba(72, 161, 161, 1)'\r\n  },\r\n  'Ice Cream Scoop': {\r\n    rgb: '234, 103, 97',\r\n    tooltipAlpha: 0.6,\r\n    defaultAlpha: 0.6,\r\n    darkThemeTop: 'rgba(23, 27, 24, 1)'\r\n  },\r\n  'Data Visualization': {\r\n    rgb: '153, 199, 7',\r\n    tooltipAlpha: 0.8,\r\n    defaultAlpha: 0.6,\r\n    darkThemeTop: 'rgba(28, 30, 31, 1)'\r\n  },\r\n  'Evade the Rock': {\r\n    rgb: '101, 86, 175',\r\n    tooltipAlpha: 0.6,\r\n    defaultAlpha: 0.6,\r\n    darkThemeTop: 'rgb(25, 25, 25)'\r\n  },\r\n  'Dynamic App': {\r\n    rgb: '120, 211, 255',\r\n    tooltipAlpha: 0.6,\r\n    defaultAlpha: 0.6,\r\n    darkThemeTop: 'rgba(17, 17, 17, 1)'\r\n  }\r\n};\r\n","// src/utils/context-providers/project-context.tsx\r\nimport React, {\r\n  createContext,\r\n  useState,\r\n  useContext,\r\n  useRef,\r\n  ReactNode,\r\n} from 'react';\r\n\r\ntype ViewportAlignArgs = {\r\n  /** Prefer one of these to identify the block to align */\r\n  id?: string;              // e.g. 'block-game'\r\n  key?: string;             // e.g. 'game' -> resolves to #block-game in your aligner\r\n  el?: HTMLElement | null;  // direct element if you have it\r\n  /** Re-verify/re-apply on next rAF (helps on mobile Safari) */\r\n  retry?: boolean;\r\n};\r\n\r\ninterface ProjectVisibilityContextType {\r\n  activeProject?: string;\r\n  setActiveProject: (title: string) => void;\r\n\r\n  blockGClick: boolean;\r\n  setBlockGClick: (clicked: boolean) => void;\r\n\r\n  currentIndex: number;\r\n  setCurrentIndex: React.Dispatch<React.SetStateAction<number>>;\r\n\r\n  scrollContainerRef: React.RefObject<HTMLDivElement>;\r\n\r\n  isDragging: boolean;\r\n  setIsDragging: React.Dispatch<React.SetStateAction<boolean>>;\r\n\r\n  focusedProjectKey: string | null;\r\n  setFocusedProjectKey: React.Dispatch<React.SetStateAction<string | null>>;\r\n\r\n  previousScrollY: number | null;\r\n  setPreviousScrollY: React.Dispatch<React.SetStateAction<number | null>>;\r\n\r\n  /** Ask ScrollController to instantly align a block to the top (no smooth, no bump) */\r\n  requestViewportAlign: (args: ViewportAlignArgs) => void;\r\n\r\n  /**\r\n   * Register the actual align function (implemented inside ScrollController).\r\n   * ScrollController should call this once on mount and clean up on unmount.\r\n   */\r\n  registerViewportAlign: (fn: (args: ViewportAlignArgs) => void) => void;\r\n}\r\n\r\ninterface ProjectVisibilityProviderProps {\r\n  children: ReactNode;\r\n}\r\n\r\nconst ProjectVisibilityContext = createContext<ProjectVisibilityContextType | undefined>(undefined);\r\n\r\nexport const ProjectVisibilityProvider = ({ children }: ProjectVisibilityProviderProps) => {\r\n  const [activeProject, setActiveProject] = useState<string | undefined>(undefined);\r\n  const [blockGClick, setBlockGClick] = useState(false);\r\n  const [currentIndex, setCurrentIndex] = useState(0);\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [focusedProjectKey, setFocusedProjectKey] = useState<string | null>(null);\r\n  const [previousScrollY, setPreviousScrollY] = useState<number | null>(null);\r\n\r\n  const scrollContainerRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  // The ScrollController will register its implementation here.\r\n  const alignFnRef = useRef<(args: ViewportAlignArgs) => void>(() => { /* no-op by default */ });\r\n\r\n  const requestViewportAlign = React.useCallback((args: ViewportAlignArgs) => {\r\n    alignFnRef.current?.(args);\r\n  }, []);\r\n\r\n  const registerViewportAlign = React.useCallback((fn: (args: ViewportAlignArgs) => void) => {\r\n    alignFnRef.current = fn || (() => {});\r\n  }, []);\r\n\r\n  return (\r\n    <ProjectVisibilityContext.Provider\r\n      value={{\r\n        activeProject,\r\n        setActiveProject,\r\n        blockGClick,\r\n        setBlockGClick,\r\n        currentIndex,\r\n        setCurrentIndex,\r\n        scrollContainerRef,\r\n        isDragging,\r\n        setIsDragging,\r\n        focusedProjectKey,\r\n        setFocusedProjectKey,\r\n        previousScrollY,\r\n        setPreviousScrollY,\r\n        requestViewportAlign,\r\n        registerViewportAlign,\r\n      }}\r\n    >\r\n      {children}\r\n    </ProjectVisibilityContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useProjectVisibility = () => {\r\n  const context = useContext(ProjectVisibilityContext);\r\n  if (!context) {\r\n    throw new Error('useProjectVisibility must be used within ProjectVisibilityProvider');\r\n  }\r\n  return context;\r\n};\r\n","// title-context.tsx\r\nimport React, { createContext, useContext, useState } from 'react';\r\n\r\nexport const TitleContext = createContext<{\r\n  activeTitle: string;\r\n  setActiveTitle: (t: string) => void;\r\n}>({ activeTitle: '', setActiveTitle: () => {} });\r\n\r\nexport const TitleProvider = ({ children }) => {\r\n  const [activeTitle, setActiveTitle] = useState('');\r\n  return (\r\n    <TitleContext.Provider value={{ activeTitle, setActiveTitle }}>\r\n      {children}\r\n    </TitleContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useActiveTitle = () => useContext(TitleContext);\r\n","import { useEffect, useRef } from 'react';\r\nimport { baseProjects } from '../content-utility/component-loader';\r\nimport { useActiveTitle } from './title-context';\r\nimport { useSsrData } from '../context-providers/ssr-data-context';\r\nimport { seededShuffle } from '../seed';\r\nimport { useProjectVisibility } from '../context-providers/project-context';\r\n\r\nconst TitleObserver = () => {\r\n  const { setActiveTitle } = useActiveTitle();\r\n  const { focusedProjectKey } = useProjectVisibility();\r\n  const { seed = 12345 } = useSsrData() || {};\r\n\r\n  // Stable order for this session\r\n  const projectsRef = useRef(seededShuffle(baseProjects, seed));\r\n  const lastTitleRef = useRef<string | null>(null);\r\n  const observerRef = useRef<IntersectionObserver | null>(null);\r\n  const moRef = useRef<MutationObserver | null>(null);\r\n\r\n  // Helper: pick the element whose center is closest to viewport center\r\n  const pickCenteredNow = () => {\r\n    // While focused, never mutate the title from visibility.\r\n    if (focusedProjectKey) return;\r\n\r\n    const vh = window.innerHeight || document.documentElement.clientHeight || 0;\r\n    const viewportCenter = vh * 0.5;\r\n\r\n    let bestTitle: string | null = null;\r\n    let bestDist = Infinity;\r\n\r\n    for (const p of projectsRef.current) {\r\n      const el = document.getElementById(`block-${p.key}`);\r\n      if (!el || el.style.display === 'none') continue;\r\n\r\n      const r = el.getBoundingClientRect();\r\n      if (r.bottom <= 0 || r.top >= vh) continue;\r\n\r\n      const center = r.top + r.height / 2;\r\n      const dist = Math.abs(center - viewportCenter);\r\n      if (dist < bestDist) {\r\n        bestDist = dist;\r\n        bestTitle = p.title;\r\n      }\r\n    }\r\n\r\n    if (bestTitle && bestTitle !== lastTitleRef.current) {\r\n      lastTitleRef.current = bestTitle;\r\n      setActiveTitle(bestTitle);\r\n    }\r\n  };\r\n\r\n  // Build observer once\r\n  useEffect(() => {\r\n    const io = new IntersectionObserver(\r\n      () => {\r\n        if (focusedProjectKey) return; // ignore while focused\r\n        requestAnimationFrame(pickCenteredNow);\r\n      },\r\n      { threshold: [0, 0.25, 0.5, 0.75, 1] }\r\n    );\r\n    observerRef.current = io;\r\n\r\n    // Observe all blocks that exist (will keep observing through display:none)\r\n    for (const p of projectsRef.current) {\r\n      const el = document.getElementById(`block-${p.key}`);\r\n      if (el) io.observe(el);\r\n    }\r\n\r\n    // Also react to late-mounted blocks\r\n    const mo = new MutationObserver(() => {\r\n      const cur = observerRef.current;\r\n      if (!cur) return;\r\n      for (const p of projectsRef.current) {\r\n        const el = document.getElementById(`block-${p.key}`);\r\n        if (el) cur.observe(el);\r\n      }\r\n    });\r\n    mo.observe(document.body, { childList: true, subtree: true });\r\n    moRef.current = mo;\r\n\r\n    // Initial pick\r\n    requestAnimationFrame(pickCenteredNow);\r\n\r\n    return () => {\r\n      io.disconnect();\r\n      mo.disconnect();\r\n      observerRef.current = null;\r\n      moRef.current = null;\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []); // once per mount\r\n\r\n  // NEW: Freeze title on focus & pause the observer; resume on unfocus\r\n  useEffect(() => {\r\n    const io = observerRef.current;\r\n\r\n    if (focusedProjectKey) {\r\n      // 1) Set title to the focused project's title exactly once on enter\r\n      const focused = projectsRef.current.find(p => p.key === focusedProjectKey);\r\n      if (focused && focused.title !== lastTitleRef.current) {\r\n        lastTitleRef.current = focused.title;\r\n        setActiveTitle(focused.title);\r\n      }\r\n      // 2) Pause the observer work during focus\r\n      io?.disconnect();\r\n    } else {\r\n      // Resubscribe and immediately pick based on visibility when leaving focus\r\n      if (io) {\r\n        for (const p of projectsRef.current) {\r\n          const el = document.getElementById(`block-${p.key}`);\r\n          if (el) io.observe(el);\r\n        }\r\n      }\r\n      requestAnimationFrame(pickCenteredNow);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [focusedProjectKey, setActiveTitle]);\r\n\r\n  return null;\r\n};\r\n\r\nexport default TitleObserver;\r\n","// src/utils/title/view-project-cta.tsx\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport lottie from '../../utils/load-lottie';\r\nimport arrowData from '../../svg/arrow.json';\r\nimport arrowData3 from '../../svg/arrow3.json';\r\nimport linkData from '../../svg/link.json';\r\n\r\n// Minimal shape for what we use from Lottie\r\ntype AnimationItemLike = {\r\n  goToAndStop: (value: number, isFrame?: boolean) => void;\r\n  playSegments: (segments: [number, number] | number[], forceFlag?: boolean) => void;\r\n  addEventListener: (name: string, cb: () => void) => void;\r\n  removeEventListener: (name: string, cb: () => void) => void;\r\n  destroy: () => void;\r\n};\r\n\r\ntype BaseProps = {\r\n  displayTitle: string;\r\n  isLink?: boolean;\r\n  currentKey?: string;\r\n  focusedProjectKey: string | null;\r\n  setFocusedProjectKey: (k: string | null) => void;\r\n  showBackground: boolean;\r\n  backgroundColor: string;\r\n  onHover: (v: boolean) => void;\r\n};\r\n\r\ntype Variant = 'title-icon' | 'icon-title';\r\n\r\n/* --------------------------\r\n   Hook: arrow/link animation\r\n   -------------------------- */\r\nfunction useArrowLottie(\r\n  displayTitle: string,\r\n  isLink: boolean | undefined,\r\n  isFocused: boolean,\r\n  container: React.RefObject<HTMLDivElement>\r\n) {\r\n  const animRef = useRef<AnimationItemLike | null>(null);\r\n  const lastTitleRef = useRef<string | null>(null);\r\n\r\n  // Mount: load + play once (recreate when lottie type changes)\r\n  useEffect(() => {\r\n    const el = container.current;\r\n    if (!el) return;\r\n\r\n    let mounted = true;\r\n\r\n    (async () => {\r\n      // keep link.json priority; otherwise use arrow3 when focused, else arrow\r\n      const animationData = isLink ? linkData : (isFocused ? arrowData3 : arrowData);\r\n\r\n      const anim = await lottie.loadAnimation({\r\n        container: el,\r\n        renderer: 'svg',\r\n        loop: false,\r\n        autoplay: false,\r\n        animationData,\r\n      });\r\n\r\n      if (!mounted) return;\r\n      animRef.current = anim;\r\n\r\n      // add CSS hook\r\n      const onDomLoaded = () => {\r\n        const svg = el.querySelector('svg');\r\n        if (svg) svg.classList.add('arrow-svg');\r\n      };\r\n      anim.addEventListener('DOMLoaded', onDomLoaded);\r\n\r\n      // Play initial [0 → 40]\r\n      anim.goToAndStop(0, true);\r\n      anim.playSegments([0, 40], true);\r\n\r\n      lastTitleRef.current = displayTitle;\r\n\r\n      return () => {\r\n        anim.removeEventListener('DOMLoaded', onDomLoaded);\r\n      };\r\n    })();\r\n\r\n    return () => {\r\n      mounted = false;\r\n      animRef.current?.destroy();\r\n      animRef.current = null;\r\n    };\r\n  }, [container, isLink, isFocused]);\r\n\r\n  // On title change: play [40 → 90]\r\n  useEffect(() => {\r\n    if (!animRef.current) return;\r\n    if (lastTitleRef.current !== displayTitle) {\r\n      animRef.current.goToAndStop(40, true);\r\n      animRef.current.playSegments([40, 90], true);\r\n      lastTitleRef.current = displayTitle;\r\n    }\r\n  }, [displayTitle]);\r\n}\r\n\r\n/* --------------------------\r\n   Base Project Button\r\n   -------------------------- */\r\nfunction BaseProjectButton({\r\n  displayTitle,\r\n  isLink,\r\n  currentKey,\r\n  focusedProjectKey,\r\n  setFocusedProjectKey,\r\n  showBackground,\r\n  backgroundColor,\r\n  onHover,\r\n  variant,\r\n}: BaseProps & { variant: Variant }) {\r\n  const arrowContainer = useRef<HTMLDivElement>(null);\r\n  const isFocused = focusedProjectKey === currentKey;\r\n\r\n  // short-lived class for styling the “swipe/toggle” moment\r\n  const [isSwiping, setIsSwiping] = useState(false);\r\n\r\n  // Lottie hook\r\n  useArrowLottie(displayTitle, isLink, isFocused, arrowContainer);\r\n\r\n  // IMPORTANT: when focus state or the rendered key changes, clear hover\r\n  useEffect(() => {\r\n    onHover(false);\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [isFocused, currentKey]);\r\n\r\n  const handleToggleOpen = () => {\r\n    if (!currentKey) return;\r\n\r\n    // flip focus\r\n    const next = focusedProjectKey === currentKey ? null : currentKey;\r\n    setFocusedProjectKey(next);\r\n\r\n    // brief CSS hook\r\n    setIsSwiping(true);\r\n    const t = window.setTimeout(() => setIsSwiping(false), 900);\r\n\r\n    if (next) {\r\n      requestAnimationFrame(() => {\r\n        const el = document.getElementById(`block-${next}`);\r\n        el?.scrollIntoView({ block: 'start', behavior: 'smooth' });\r\n      });\r\n    }\r\n\r\n    return () => window.clearTimeout(t);\r\n  };\r\n\r\n  const Element: any = isLink ? 'a' : 'button';\r\n  const sharedProps = {\r\n    className: [\r\n      'view-project-btn',\r\n      !showBackground ? 'no-bg' : '',\r\n      isFocused ? 'is-focused' : '',\r\n      isSwiping ? 'is-swiping' : '',\r\n    ]\r\n      .filter(Boolean)\r\n      .join(' '),\r\n    onMouseEnter: () => onHover(true),\r\n    onMouseLeave: () => onHover(false),\r\n    'data-project-key': currentKey ?? undefined,\r\n    'aria-pressed': currentKey ? focusedProjectKey === currentKey : undefined,\r\n    ...(isLink\r\n      ? { href: '/dynamic-theme', target: '_blank', rel: 'noopener noreferrer' }\r\n      : { onClick: handleToggleOpen }),\r\n  };\r\n\r\n  const TitleEl = (\r\n    <h2 className=\"project-view\" style={{ position: 'relative', zIndex: 1 }}>\r\n      {displayTitle}\r\n    </h2>\r\n  );\r\n\r\n  const IconEl = (\r\n    <div\r\n      ref={arrowContainer}\r\n      className=\"view-project-arrow\"\r\n      style={{ position: 'relative', zIndex: 1 }}\r\n    />\r\n  );\r\n\r\n  return (\r\n    <Element {...sharedProps}>\r\n      <div\r\n        className={`view-project-background ${!showBackground ? 'no-bg' : ''}`}\r\n        style={{\r\n          backgroundColor,\r\n          position: 'absolute',\r\n          inset: 0,\r\n          borderRadius: 'inherit',\r\n          zIndex: 0,\r\n          pointerEvents: 'none', // ensure bg doesn't swallow hover\r\n        }}\r\n        aria-hidden=\"true\"\r\n      />\r\n      {variant === 'icon-title' ? (\r\n        <>\r\n          {IconEl}\r\n          {TitleEl}\r\n        </>\r\n      ) : (\r\n        <>\r\n          {TitleEl}\r\n          {IconEl}\r\n        </>\r\n      )}\r\n    </Element>\r\n  );\r\n}\r\n\r\n/* --------------------------\r\n   Public Variants\r\n   -------------------------- */\r\nexport function ProjectButtonTitleIcon(props: BaseProps) {\r\n  return <BaseProjectButton {...props} variant=\"title-icon\" />;\r\n}\r\n\r\nexport function ProjectButtonIconTitle(props: BaseProps) {\r\n  return <BaseProjectButton {...props} variant=\"icon-title\" />;\r\n}\r\n","// src/utils/title/view-project.tsx\r\nimport React, { useEffect, useMemo, useRef, useState } from 'react';\r\n\r\nimport { useActiveTitle } from './title-context';\r\nimport { baseProjects } from '../content-utility/component-loader';\r\nimport { projectColors } from '../content-utility/color-map';\r\nimport { useSsrData } from '../context-providers/ssr-data-context';\r\nimport { seededShuffle } from '../seed';\r\n\r\nimport TitleObserver from './title-observer';\r\nimport { useProjectVisibility } from '../context-providers/project-context';\r\n\r\nimport {\r\n  ProjectButtonTitleIcon,\r\n  ProjectButtonIconTitle,\r\n} from './view-project-cta';\r\n\r\nconst ViewProject = () => {\r\n  const { activeTitle } = useActiveTitle();\r\n  const { seed = 12345 } = useSsrData() || {};\r\n  const projects = useMemo(() => seededShuffle(baseProjects, seed), [seed]);\r\n\r\n  const { focusedProjectKey, setFocusedProjectKey } = useProjectVisibility();\r\n\r\n  const focusedProject = useMemo(\r\n    () => projects.find(p => p.key === focusedProjectKey!),\r\n    [projects, focusedProjectKey]\r\n  );\r\n\r\n  // Freeze the title (and everything derived from it) when focused\r\n  const displayTitle = focusedProjectKey ? (focusedProject?.title ?? activeTitle) : activeTitle;\r\n\r\n  const currentProject = useMemo(\r\n    () => projects.find((p) => p.title === displayTitle),\r\n    [projects, displayTitle]\r\n  );\r\n  const isLink = currentProject?.isLink;\r\n  const currentKey = currentProject?.key;\r\n\r\n  // background / hover logic\r\n  const [hovered, _setHovered] = useState(false);\r\n  const hoveredRef = useRef(false);\r\n  const [showBackground, setShowBackground] = useState(true);\r\n  const hideTimeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null);\r\n\r\n  const clearHide = () => {\r\n    if (hideTimeoutRef.current) {\r\n      clearTimeout(hideTimeoutRef.current);\r\n      hideTimeoutRef.current = null;\r\n    }\r\n  };\r\n\r\n  // single place to schedule/clear hides respecting hover\r\n  const scheduleHide = (delay = 1500) => {\r\n    clearHide();\r\n    hideTimeoutRef.current = setTimeout(() => {\r\n      if (!hoveredRef.current) setShowBackground(false);\r\n    }, delay);\r\n  };\r\n\r\n  const setHovered = (v: boolean) => {\r\n    hoveredRef.current = v;\r\n    _setHovered(v);\r\n    if (v) {\r\n      clearHide();\r\n      setShowBackground(true);\r\n    } else {\r\n      scheduleHide(1500);\r\n    }\r\n  };\r\n\r\n  // RESET hover/background appropriately when focus toggles\r\n  useEffect(() => {\r\n    if (focusedProjectKey) {\r\n      // entering focus: make bg visible and don't auto-hide\r\n      clearHide();\r\n      setShowBackground(true);\r\n      hoveredRef.current = false;\r\n      _setHovered(false);\r\n    } else {\r\n      // leaving focus: briefly show, then allow auto-hide if not hovered\r\n      setShowBackground(true);\r\n      hoveredRef.current = false;\r\n      _setHovered(false);\r\n      scheduleHide(1500);\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [focusedProjectKey]);\r\n\r\n  // on title change: flash bg on, then hide later ONLY if not hovered\r\n  const lastTitleRef = useRef(displayTitle);\r\n  useEffect(() => {\r\n    if (lastTitleRef.current !== displayTitle) {\r\n      lastTitleRef.current = displayTitle;\r\n      setShowBackground(true);\r\n      if (!hoveredRef.current && !focusedProjectKey) {\r\n        scheduleHide(1500);\r\n      }\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [displayTitle]);\r\n\r\n  // light “bring it back” when user interacts near bottom — but don't hide if hovered\r\n  useEffect(() => {\r\n    const handleMouseMove = (e: MouseEvent) => {\r\n      const viewportH = window.innerHeight || document.documentElement.clientHeight;\r\n      if (e.clientY >= viewportH * 0.65) {\r\n        setShowBackground(true);\r\n        if (!hoveredRef.current && !focusedProjectKey) scheduleHide(1500);\r\n      }\r\n    };\r\n    const handleTouch = () => {\r\n      setShowBackground(true);\r\n      if (!hoveredRef.current && !focusedProjectKey) scheduleHide(1500);\r\n    };\r\n\r\n    window.addEventListener('mousemove', handleMouseMove);\r\n    window.addEventListener('touchstart', handleTouch, { passive: true });\r\n    window.addEventListener('touchmove', handleTouch, { passive: true });\r\n\r\n    return () => {\r\n      window.removeEventListener('mousemove', handleMouseMove);\r\n      window.removeEventListener('touchstart', handleTouch);\r\n      window.removeEventListener('touchmove', handleTouch);\r\n      clearHide();\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  // compute background color (hovered = higher alpha)\r\n  const backgroundColor = useMemo(() => {\r\n    const colorInfo = projectColors[displayTitle];\r\n    if (!colorInfo) return 'rgba(240, 240, 240, 0.5)';\r\n    const alpha = hovered ? 1 : (colorInfo.defaultAlpha ?? 0.8);\r\n    return `rgba(${colorInfo.rgb}, ${alpha})`;\r\n  }, [displayTitle, hovered]);\r\n\r\n  // choose variant based on focus state\r\n  const ButtonComp = focusedProjectKey ? ProjectButtonIconTitle : ProjectButtonTitleIcon;\r\n\r\n  return (\r\n    <div className=\"view-project-wrapper\">\r\n      {/* Don’t observe while focused, so title stays frozen */}\r\n      {!focusedProjectKey && <TitleObserver />}\r\n\r\n      <ButtonComp\r\n        displayTitle={displayTitle}\r\n        isLink={isLink}\r\n        currentKey={currentKey}\r\n        focusedProjectKey={focusedProjectKey}\r\n        setFocusedProjectKey={setFocusedProjectKey}\r\n        showBackground={showBackground}\r\n        backgroundColor={backgroundColor}\r\n        onHover={setHovered}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ViewProject;\r\n","// src/utils/content-utility/lazy-in-view.tsx\r\nimport { useEffect, useRef, useState, Suspense, type ComponentType } from 'react';\r\n\r\ntype Props = {\r\n  load?: () => Promise<{ default: ComponentType<any> }>;\r\n  fallback?: React.ReactNode;\r\n  serverRender?: React.ReactNode; // SSR-provided markup for first paint\r\n  eager?: boolean;                // start visible immediately (SSR and client)\r\n  allowIdle?: boolean;\r\n\r\n  // NEW\r\n  observeTargetId?: string;      // observe external element if provided\r\n  rootMargin?: string;           // IO margin\r\n  threshold?: number | number[]; // IO threshold(s)\r\n  placeholderMinHeight?: number;\r\n  debugLabel?: string;           // console tag\r\n};\r\n\r\nconst hasWindow = typeof window !== 'undefined';\r\nconst hasRIC = hasWindow && 'requestIdleCallback' in (window as any);\r\nconst hasCIC = hasWindow && 'cancelIdleCallback' in (window as any);\r\nconst ric = (cb: any, opts?: any) =>\r\n  hasRIC ? (window as any).requestIdleCallback(cb, opts) : setTimeout(cb, opts?.timeout ?? 0);\r\nconst cic = (id: any) =>\r\n  hasCIC ? (window as any).cancelIdleCallback(id) : clearTimeout(id);\r\n\r\nexport default function LazyInView({\r\n  load,\r\n  fallback = null,\r\n  serverRender,\r\n  eager = false,\r\n  allowIdle = false,\r\n\r\n  observeTargetId,\r\n  rootMargin = '0px',\r\n  threshold = 0.05,\r\n  placeholderMinHeight = 360,\r\n  debugLabel,\r\n}: Props) {\r\n  const isServer = !hasWindow;\r\n\r\n  // Make SSR and client's first render agree:\r\n  // If we SSR-ed content (serverRender) or set eager, start visible; otherwise start hidden.\r\n  const initialVisible = eager || !!serverRender;\r\n  const [isVisible, setIsVisible] = useState<boolean>(initialVisible);\r\n\r\n  const [Component, setComponent] = useState<ComponentType | null>(null);\r\n  const selfRef = useRef<HTMLDivElement | null>(null);\r\n  const idleId = useRef<any>(null);\r\n\r\n  // IntersectionObserver: flip visible when in view\r\n  useEffect(() => {\r\n    // If already visible (SSR or eager), nothing to observe.\r\n    if (isVisible) return;\r\n\r\n    const target =\r\n      (observeTargetId ? document.getElementById(observeTargetId) : null) ||\r\n      selfRef.current;\r\n\r\n    if (!target || typeof IntersectionObserver === 'undefined') {\r\n      setIsVisible(true);\r\n      return;\r\n    }\r\n\r\n    const io = new IntersectionObserver(([entry]) => {\r\n      const vis = !!entry.isIntersecting;\r\n      const ratio = entry.intersectionRatio ?? 0;\r\n      if (debugLabel) console.log(`[LazyInView:${debugLabel}] IO`, { ratio, vis });\r\n\r\n      if (vis) {\r\n        setIsVisible(true);\r\n        io.disconnect();\r\n        if (idleId.current) {\r\n          cic(idleId.current);\r\n          idleId.current = null;\r\n        }\r\n      }\r\n    }, { threshold, root: null, rootMargin });\r\n\r\n    io.observe(target);\r\n    return () => io.disconnect();\r\n  }, [isVisible, observeTargetId, rootMargin, threshold, debugLabel]);\r\n\r\n  // Idle preloading (optional): if still hidden and allowed, show after an idle slot\r\n  useEffect(() => {\r\n    if (isVisible || !allowIdle) return;\r\n    idleId.current = ric(() => setIsVisible(true), { timeout: 2000 });\r\n    return () => {\r\n      if (idleId.current) {\r\n        cic(idleId.current);\r\n        idleId.current = null;\r\n      }\r\n    };\r\n  }, [isVisible, allowIdle]);\r\n\r\n  // Load component when visible\r\n  useEffect(() => {\r\n    if (!isVisible || Component || !load) return;\r\n    let cancelled = false;\r\n    load().then((mod) => { if (!cancelled) setComponent(() => mod.default); });\r\n    return () => { cancelled = true; };\r\n  }, [isVisible, Component, load]);\r\n\r\n  const content = Component\r\n    ? <Suspense fallback={fallback}><Component /></Suspense>\r\n    : (serverRender ?? fallback);\r\n\r\n  return (\r\n    <div\r\n      ref={selfRef}\r\n      className={debugLabel ? `liv--${debugLabel}` : undefined}\r\n      style={{\r\n        width: '100%',\r\n        height: '100%',\r\n        minHeight: placeholderMinHeight,\r\n        position: 'relative',\r\n        // 👇 First render matches SSR exactly via initialVisible\r\n        opacity: isVisible ? 1 : 0,\r\n        transition: 'opacity 220ms ease',\r\n      }}\r\n    >\r\n      {content}\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect, useRef, useState, type ComponentType } from 'react';\r\n\r\ntype Props = {\r\n  /** dynamic import that returns { default: ReactComponent } */\r\n  load: () => Promise<{ default: ComponentType<any> }>;\r\n  /** when true: mount immediately; when false: unmount (but keep chunk in memory) */\r\n  active: boolean;\r\n  /** optional loading UI while the chunk fetches */\r\n  fallback?: React.ReactNode;\r\n  /** pass arbitrary props to the loaded component */\r\n  componentProps?: Record<string, any>;\r\n  /** simple fade; 0 disables */\r\n  fadeMs?: number;\r\n};\r\n\r\nexport default function EventMount({\r\n  load,\r\n  active,\r\n  fallback = null,\r\n  componentProps,\r\n  fadeMs = 200,\r\n}: Props) {\r\n  const [Comp, setComp] = useState<ComponentType<any> | null>(null);\r\n  const [visible, setVisible] = useState(false);\r\n  const loadingRef = useRef<Promise<any> | null>(null);\r\n\r\n  // Load code-split chunk when first activated\r\n  useEffect(() => {\r\n    if (!active) { setVisible(false); return; }\r\n    if (!Comp) {\r\n      if (!loadingRef.current) loadingRef.current = load().then(mod => {\r\n        setComp(() => mod.default);\r\n      });\r\n    }\r\n    // show as soon as we have the component\r\n    let alive = true;\r\n    (async () => {\r\n      if (!Comp && loadingRef.current) await loadingRef.current;\r\n      if (alive) setVisible(true);\r\n    })();\r\n    return () => { alive = false; };\r\n  }, [active, load, Comp]);\r\n\r\n  if (!active) return null;               // unmount when not active\r\n  if (!Comp) return <>{fallback}</>;      // show fallback until chunk arrives\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        opacity: fadeMs ? (visible ? 1 : 0) : 1,\r\n        transition: fadeMs ? `opacity ${fadeMs}ms ease` : undefined,\r\n        willChange: fadeMs ? 'opacity' : undefined,\r\n      }}\r\n    >\r\n      <Comp {...(componentProps ?? {})} />\r\n    </div>\r\n  );\r\n}\r\n","// src/utils/project-pane.tsx\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport LazyInView from './content-utility/lazy-in-view';\r\nimport LazyViewMount from './content-utility/lazy-view-mount';\r\nimport LoadingScreen from './loading/loading';\r\nimport { useProjectLoader } from './content-utility/component-loader';\r\nimport { useProjectVisibility } from './context-providers/project-context';\r\nimport { useSsrData } from './context-providers/ssr-data-context';\r\nimport { ssrRegistry } from '../ssr/registry';\r\n\r\n/* event-driven details for case study section */\r\nimport EventMount from './content-utility/event-mount';\r\n\r\n// Map project keys to their detail component loaders\r\nconst caseStudyLoaders: Record<string, () => Promise<any>> = {\r\n  game: () => import('../components/case-studies/project-case-studies/rock-escapade'),\r\n  rotary: () => import('../components/case-studies/project-case-studies/rotary'),\r\n};\r\n\r\ntype Props = {\r\n  item: any;\r\n  isFocused: boolean;\r\n  setRef: (el: HTMLDivElement | null) => void;\r\n  isFirst?: boolean;\r\n  /** When true AND not focused, hide this pane completely (display:none) */\r\n  collapseBelow?: boolean;\r\n};\r\n\r\nexport function ProjectPane({\r\n  item,\r\n  isFocused,\r\n  setRef,\r\n  isFirst = false,\r\n  collapseBelow = false,\r\n}: Props) {\r\n  const { scrollContainerRef } = useProjectVisibility();\r\n  const load = useProjectLoader(item.key);\r\n  const ssr = useSsrData();\r\n  const payload = ssr?.preloaded?.[item.key];\r\n  const desc = ssrRegistry[item.key];\r\n  const hasSSR = Boolean(payload && desc?.render);\r\n\r\n  const [isHydrated, setIsHydrated] = useState(false);\r\n  useEffect(() => { setIsHydrated(true); }, []);\r\n\r\n  const serverRender =\r\n    payload && desc?.render ? desc.render((payload as any).data ?? payload) : null;\r\n\r\n  const isDynamic = item.key === 'dynamic';\r\n  const isGame = item.key === 'game';\r\n  const usesCustomLoader = isDynamic || isGame;\r\n\r\n  const fallbackNode =\r\n    !payload && isHydrated && !usesCustomLoader ? (\r\n      <LoadingScreen isFullScreen={false} />\r\n    ) : null;\r\n\r\n  const blockId = `block-${item.key}`;\r\n  const rootRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  // --- Collapsed state (must NOT short-circuit hooks) ---\r\n  const isCollapsed = collapseBelow && !isFocused;\r\n\r\n  // --- Delay unmount on unfocus ---\r\n  const EXIT_DELAY_MS = 100;\r\n  const FADE_MS = 100; // keep in sync with <EventMount fadeMs>\r\n  const [activeDelayed, setActiveDelayed] = useState<boolean>(isFocused);\r\n  const exitTimerRef = useRef<number | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (isCollapsed) return; // do nothing while collapsed\r\n    if (isFocused) {\r\n      if (exitTimerRef.current) {\r\n        clearTimeout(exitTimerRef.current);\r\n        exitTimerRef.current = null;\r\n      }\r\n      setActiveDelayed(true);\r\n    } else {\r\n      exitTimerRef.current = window.setTimeout(() => {\r\n        setActiveDelayed(false);\r\n        exitTimerRef.current = null;\r\n      }, EXIT_DELAY_MS);\r\n    }\r\n    return () => {\r\n      if (exitTimerRef.current) {\r\n        clearTimeout(exitTimerRef.current);\r\n        exitTimerRef.current = null;\r\n      }\r\n    };\r\n  }, [isFocused, isCollapsed]);\r\n\r\n  // --- Height reservation during exit fade to prevent layout jump ---\r\n  const [reserveH, setReserveH] = useState<number | null>(null);\r\n  const detailsHostRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (isCollapsed) return; // no reservation when collapsed\r\n    if (!isFocused) {\r\n      const rafId = requestAnimationFrame(() => {\r\n        const h = detailsHostRef.current?.getBoundingClientRect().height ?? 0;\r\n        if (h > 0) setReserveH(h);\r\n\r\n        const release = window.setTimeout(() => {\r\n          setReserveH(null);\r\n        }, EXIT_DELAY_MS + FADE_MS + 50);\r\n\r\n        const cleanup = () => clearTimeout(release);\r\n        (detailsHostRef as any)._cleanup = cleanup;\r\n      });\r\n\r\n      return () => {\r\n        cancelAnimationFrame(rafId);\r\n        (detailsHostRef as any)._cleanup?.();\r\n        (detailsHostRef as any)._cleanup = undefined;\r\n      };\r\n    } else {\r\n      setReserveH(null);\r\n    }\r\n  }, [isFocused, isCollapsed]);\r\n\r\n  // --- Local opacity control (per-pane observer) ---\r\n  useEffect(() => {\r\n    const el = rootRef.current;\r\n    if (!el) return;\r\n    if (isCollapsed) {\r\n      el.style.opacity = '1';\r\n      return;\r\n    }\r\n\r\n    if (isFocused || (!isFocused && activeDelayed)) {\r\n      el.style.opacity = '1';\r\n      return;\r\n    }\r\n\r\n    const isRealMobile = (() => {\r\n      const coarse = window.matchMedia?.('(pointer: coarse)').matches ?? false;\r\n      const touch = (navigator as any).maxTouchPoints > 0;\r\n      const vv = (window as any).visualViewport;\r\n      if (vv) {\r\n        const gap = window.innerHeight - vv.height;\r\n        return coarse && touch && (gap > 48);\r\n      }\r\n      return coarse && touch;\r\n    })();\r\n\r\n    const baseMin = isRealMobile ? 0.1 : 0.3;\r\n    const thresholds = Array.from({ length: 101 }, (_, i) => i / 100);\r\n\r\n    const io = new IntersectionObserver(\r\n      (entries) => {\r\n        for (const entry of entries) {\r\n          const ratio = entry.intersectionRatio ?? 0;\r\n          if (ratio >= 0.75) {\r\n            el.style.opacity = '1';\r\n          } else {\r\n            const mapped = baseMin + (ratio / 0.75) * (1 - baseMin);\r\n            el.style.opacity = String(mapped);\r\n          }\r\n        }\r\n      },\r\n      { threshold: thresholds, root: scrollContainerRef?.current ?? null }\r\n    );\r\n\r\n    io.observe(el);\r\n    el.style.opacity = '1';\r\n\r\n    return () => io.disconnect();\r\n  }, [isFocused, activeDelayed, scrollContainerRef, isCollapsed]);\r\n\r\n  return (\r\n    <div\r\n      id={blockId}\r\n      ref={(el) => { setRef(el); rootRef.current = el; }}\r\n      className={`project-pane ${isFocused ? 'is-focused' : ''} ${isGame ? 'is-game' : ''}`}\r\n      data-viewport-lock={isGame ? 'true' : undefined}\r\n      data-project-key={item.key}\r\n      style={{\r\n        display: isCollapsed ? 'none' : undefined,\r\n        scrollSnapAlign: 'start',\r\n        scrollSnapStop: 'always',\r\n        contentVisibility: 'auto' as any,\r\n        contain: 'layout paint style',\r\n        overflow: isFocused ? 'visible' : 'hidden',\r\n      }}\r\n    >\r\n      {/* Skip heavy children entirely when collapsed */}\r\n      {!isCollapsed && (\r\n        <>\r\n          <div className=\"project-pane-wrapper\">\r\n            {isDynamic ? (\r\n              <>\r\n                <LazyInView\r\n                  load={load}\r\n                  serverRender={serverRender}\r\n                  eager={isFirst}\r\n                  allowIdle\r\n                />\r\n                {!hasSSR && (\r\n                  <LazyViewMount\r\n                    load={() => import('../components/dynamic-app/shadow-entry')}\r\n                    mountMode=\"idle\"\r\n                    preloadOnIdle\r\n                    preloadIdleTimeout={2000}\r\n                    preloadOnFirstIO\r\n                    observeTargetId={blockId}\r\n                    rootMargin=\"0px\"\r\n                    placeholderMinHeight={0}\r\n                    componentProps={{ blockId }}\r\n                  />\r\n                )}\r\n              </>\r\n            ) : isGame ? (\r\n              <LazyInView\r\n                load={load}\r\n                serverRender={serverRender}\r\n                eager={isFirst}\r\n                allowIdle\r\n                observeTargetId={blockId}\r\n                placeholderMinHeight={0}\r\n              />\r\n            ) : (\r\n              <LazyInView\r\n                load={load}\r\n                fallback={fallbackNode}\r\n                serverRender={serverRender}\r\n                eager={isFirst}\r\n                allowIdle={false}\r\n                placeholderMinHeight={0}\r\n              />\r\n            )}\r\n          </div>\r\n\r\n          {/* details host: force visible during fade + freeze height to avoid jank */}\r\n          <div\r\n            ref={detailsHostRef}\r\n            style={{\r\n              height: reserveH != null ? `${reserveH}px` : undefined,\r\n              contentVisibility: activeDelayed ? ('visible' as any) : undefined,\r\n              contain: 'paint',\r\n            }}\r\n          >\r\n            {caseStudyLoaders[item.key] && (\r\n              <EventMount\r\n                load={caseStudyLoaders[item.key]}\r\n                active={activeDelayed}\r\n                fallback={<div style={{ height: '100dvh' }} />}\r\n                componentProps={{ title: item.title ?? item.key }}\r\n                fadeMs={FADE_MS}\r\n              />\r\n            )}\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","// src/utils/scroll-controller.tsx\r\nimport { useEffect, useRef, useState, useMemo } from 'react';\r\nimport { useProjectVisibility } from './context-providers/project-context';\r\nimport { baseProjects } from './content-utility/component-loader';\r\nimport { ProjectPane } from './project-pane';\r\nimport { useSsrData } from './context-providers/ssr-data-context';\r\nimport { seededShuffle } from './seed';\r\n\r\n/* ===========================\r\n   Synthetic Drag & Exit Events\r\n   =========================== */\r\ndeclare global {\r\n  interface DocumentEventMap {\r\n    'synthetic-drag': CustomEvent<{\r\n      phase: 'start' | 'move' | 'end';\r\n      direction: 'up' | 'down';\r\n      magnitude: number;     // px intention applied to the OUTER scroller\r\n      velocity?: number;     // px/ms (optional)\r\n      source: 'touch' | 'wheel';\r\n      ts: number;            // performance.now()\r\n    }>;\r\n    'focus-exit-start': CustomEvent<{ key: string }>;\r\n    'focus-exit-unlock': CustomEvent<{ key: string }>;\r\n  }\r\n}\r\n\r\nconst ScrollController = () => {\r\n  const { scrollContainerRef, focusedProjectKey, currentIndex, setFocusedProjectKey } =\r\n    useProjectVisibility();\r\n  const { seed = 12345 } = useSsrData() || {};\r\n\r\n  // Shuffle once on mount; never recompute order during this session\r\n  const projectsRef = useRef(seededShuffle(baseProjects, seed));\r\n  const projects = projectsRef.current;\r\n\r\n  // Keep DOM refs to each block for precise scrolling\r\n  const projectRefs = useRef<Record<string, HTMLDivElement | null>>({});\r\n\r\n  // Track last outer scrollTop and direction while focused\r\n  const lastScrollTopRef = useRef<number>(0);\r\n  const lastScrollDirRef = useRef<'up' | 'down'>('down');\r\n\r\n  // ---- Tunables ----\r\n  const VIS_RATIO_TO_EXIT = 0.2;     // 20% of any OTHER pane => auto-unfocus\r\n  const VIS_DWELL_MS      = 120;     // must remain candidate for this long\r\n  const MIN_LINGER_MS     = 200;     // shorter: require at least this much time before unlock\r\n  const SNAP_RAMP_MS      = 300;     // proximity ramp\r\n  const KB_FALLBACK_MS    = 900;     // snap re-enable fallback\r\n  const UNLOCK_FALLBACK_MS= 1100;    // unlock fallback if scroll events don’t fire\r\n\r\n  // Track the last non-null focused key so we can anchor (fallback) on exit\r\n  const lastFocusedKeyRef = useRef<string | null>(null);\r\n  useEffect(() => {\r\n    if (focusedProjectKey) lastFocusedKeyRef.current = focusedProjectKey;\r\n  }, [focusedProjectKey]);\r\n\r\n  // Preferred exit target (set when user scrolls away during focus)\r\n  const exitTargetKeyRef = useRef<string | null>(null);\r\n\r\n  // Helper: element's offsetTop within a custom scroller\r\n  const getOffsetTopWithin = (el: HTMLElement, scroller: HTMLElement | any) => {\r\n    const r1 = el.getBoundingClientRect();\r\n    const r2 = (scroller as HTMLElement).getBoundingClientRect?.() ?? { top: 0 };\r\n    const st = ('scrollTop' in scroller ? scroller.scrollTop : document.documentElement.scrollTop) || 0;\r\n    return r1.top - r2.top + st;\r\n  };\r\n\r\n  // Temporarily disable snap after index changes, to allow smooth momentum handoff\r\n  // Only do this while focused; when NOT focused we want strong snap.\r\n  useEffect(() => {\r\n    const container = scrollContainerRef.current;\r\n    if (!container) return;\r\n    if (!focusedProjectKey) return; // keep snap strong outside focus\r\n    container.classList.add('no-snap');\r\n    const timeout = setTimeout(() => container.classList.remove('no-snap'), 800);\r\n    return () => clearTimeout(timeout);\r\n  }, [currentIndex, focusedProjectKey, scrollContainerRef]);\r\n\r\n  /* ===========================\r\n     Focus entry scroll choreography\r\n     - On entering focus: align the focused block, then bump ~90dvh\r\n     =========================== */\r\n  useEffect(() => {\r\n    if (!focusedProjectKey) return;\r\n\r\n    const scroller = scrollContainerRef.current ?? (document.scrollingElement as any);\r\n    if (!scroller) return;\r\n\r\n    const targetEl =\r\n      projectRefs.current[focusedProjectKey] ??\r\n      (document.getElementById(`block-${focusedProjectKey}`) as HTMLDivElement | null);\r\n\r\n    const getViewportH = () =>\r\n      (scroller?.clientHeight as number) ||\r\n      (scroller?.getBoundingClientRect?.().height as number) ||\r\n      (window.visualViewport?.height ?? window.innerHeight ?? document.documentElement.clientHeight ?? 0);\r\n\r\n    requestAnimationFrame(() => {\r\n      if (targetEl?.scrollIntoView) {\r\n        targetEl.scrollIntoView({ block: 'start', behavior: 'smooth' });\r\n      }\r\n      const bump = Math.round(getViewportH() * 0.9);\r\n      requestAnimationFrame(() => {\r\n        requestAnimationFrame(() => {\r\n          scroller.scrollBy?.({ top: bump, left: 0, behavior: 'smooth' });\r\n        });\r\n      });\r\n    });\r\n  }, [focusedProjectKey, scrollContainerRef]);\r\n\r\n  // --------------------------\r\n  // Scrolling helpers\r\n  // --------------------------\r\n  const setScrollTop = (scroller: any, top: number) => {\r\n    if ('scrollTop' in scroller) {\r\n      scroller.scrollTop = top;\r\n    } else {\r\n      scroller.scrollTo?.({ top, left: 0, behavior: 'auto' });\r\n    }\r\n  };\r\n\r\n  // Kill inertia, then instantly place (used for re-anchors after layout changes)\r\n  const hardPlaceAtKey = (key: string) => {\r\n    const scroller = scrollContainerRef.current ?? (document.scrollingElement as any);\r\n    if (!scroller) return;\r\n    const el =\r\n      projectRefs.current[key] ??\r\n      (document.getElementById(`block-${key}`) as HTMLDivElement | null);\r\n    if (!el) return;\r\n\r\n    const targetTop = getOffsetTopWithin(el, scroller);\r\n\r\n    const prevBehavior = (scroller as HTMLElement).style.scrollBehavior;\r\n    const prevOverflow = (scroller as HTMLElement).style.overflowY;\r\n\r\n    (scroller as HTMLElement).style.scrollBehavior = 'auto';\r\n    (scroller as HTMLElement).style.overflowY = 'hidden';\r\n    // @ts-ignore force sync\r\n    void scroller.offsetHeight;\r\n\r\n    setScrollTop(scroller, targetTop);\r\n\r\n    // @ts-ignore force sync\r\n    void scroller.offsetHeight;\r\n\r\n    (scroller as HTMLElement).style.overflowY = prevOverflow || 'scroll';\r\n    (scroller as HTMLElement).style.scrollBehavior = prevBehavior || '';\r\n\r\n    lastScrollTopRef.current = scroller.scrollTop || 0;\r\n  };\r\n\r\n  // Kill inertia, then tween to a key over ~260ms ease-out (nice transition)\r\n  const animatePlaceToKey = (key: string, ms = 260) => {\r\n    const scroller = scrollContainerRef.current ?? (document.scrollingElement as any);\r\n    if (!scroller) return;\r\n\r\n    const el =\r\n      projectRefs.current[key] ??\r\n      (document.getElementById(`block-${key}`) as HTMLDivElement | null);\r\n    if (!el) return;\r\n\r\n    const targetTop = getOffsetTopWithin(el, scroller);\r\n    const startTop = scroller.scrollTop || 0;\r\n    const delta = targetTop - startTop;\r\n    if (Math.abs(delta) < 1) {\r\n      hardPlaceAtKey(key);\r\n      return;\r\n    }\r\n\r\n    const reduce =\r\n      typeof window !== 'undefined' &&\r\n      (window.matchMedia?.('(prefers-reduced-motion: reduce)').matches ?? false);\r\n\r\n    const duration = reduce ? 80 : ms;\r\n    const start = performance.now();\r\n\r\n    const prevBehavior = (scroller as HTMLElement).style.scrollBehavior;\r\n    const prevOverflow = (scroller as HTMLElement).style.overflowY;\r\n    (scroller as HTMLElement).style.scrollBehavior = 'auto';\r\n    (scroller as HTMLElement).style.overflowY = 'hidden';\r\n\r\n    // cubic ease-out\r\n    const easeOutCubic = (t: number) => 1 - Math.pow(1 - t, 3);\r\n\r\n    let raf = 0;\r\n    const step = (now: number) => {\r\n      const t = Math.min(1, (now - start) / duration);\r\n      const y = startTop + delta * easeOutCubic(t);\r\n      setScrollTop(scroller, y);\r\n      if (t < 1) {\r\n        raf = requestAnimationFrame(step);\r\n      } else {\r\n        // restore\r\n        (scroller as HTMLElement).style.overflowY = prevOverflow || 'scroll';\r\n        (scroller as HTMLElement).style.scrollBehavior = prevBehavior || '';\r\n        lastScrollTopRef.current = scroller.scrollTop || 0;\r\n      }\r\n    };\r\n\r\n    // start\r\n    // @ts-ignore\r\n    void scroller.offsetHeight;\r\n    raf = requestAnimationFrame(step);\r\n    return () => {\r\n      if (raf) cancelAnimationFrame(raf);\r\n      // Always restore styles if cancelled mid-flight\r\n      (scroller as HTMLElement).style.overflowY = 'scroll';\r\n      (scroller as HTMLElement).style.scrollBehavior = '';\r\n    };\r\n  };\r\n\r\n  /* ===========================\r\n     AUTO-UNFOCUS while focused\r\n     =========================== */\r\n  useEffect(() => {\r\n    const scroller = scrollContainerRef.current ?? (document.scrollingElement as any);\r\n    if (!focusedProjectKey || !scroller) return;\r\n\r\n    let raf = 0;\r\n    let dwellTimer: number | null = null;\r\n    let pendingKey: string | null = null;\r\n\r\n    const getViewportH = () =>\r\n      (scroller?.clientHeight as number) ||\r\n      (scroller?.getBoundingClientRect?.().height as number) ||\r\n      (window.visualViewport?.height ?? window.innerHeight ?? document.documentElement.clientHeight ?? 0);\r\n\r\n    const focusedIdx = projects.findIndex(p => p.key === focusedProjectKey);\r\n    const clampAdjacentKey = (dir: 'up' | 'down') => {\r\n      if (focusedIdx < 0) return null;\r\n      const nextIdx = dir === 'down' ? Math.min(focusedIdx + 1, projects.length - 1)\r\n                                     : Math.max(focusedIdx - 1, 0);\r\n      if (nextIdx === focusedIdx) return null;\r\n      return projects[nextIdx].key;\r\n    };\r\n\r\n    const pickCandidate = () => {\r\n      const vh = getViewportH();\r\n      const viewportCenter = vh * 0.5;\r\n\r\n      let bestKey: string | null = null;\r\n      let bestDist = Infinity;\r\n\r\n      for (const p of projects) {\r\n        if (p.key === focusedProjectKey) continue;\r\n        const el = document.getElementById(`block-${p.key}`) as HTMLElement | null;\r\n        if (!el) continue;\r\n\r\n        const r = el.getBoundingClientRect();\r\n        if (r.bottom <= 0 || r.top >= vh) continue;\r\n\r\n        const visible = Math.min(r.bottom, vh) - Math.max(r.top, 0);\r\n        const ratio = Math.max(0, visible) / Math.max(1, r.height);\r\n        if (ratio < VIS_RATIO_TO_EXIT) continue;\r\n\r\n        const center = r.top + r.height / 2;\r\n        const dist = Math.abs(center - viewportCenter);\r\n        if (dist < bestDist) {\r\n          bestDist = dist;\r\n          bestKey = p.key;\r\n        }\r\n      }\r\n      return bestKey;\r\n    };\r\n\r\n    const onTick = () => {\r\n      raf = 0;\r\n      const curr = scroller.scrollTop || 0;\r\n      const dir: 'up' | 'down' = curr < lastScrollTopRef.current ? 'up'\r\n                            : curr > lastScrollTopRef.current ? 'down'\r\n                            : lastScrollDirRef.current;\r\n      lastScrollDirRef.current = dir;\r\n      lastScrollTopRef.current = curr;\r\n\r\n      const anyVisibleOther = Boolean(pickCandidate());\r\n      if (anyVisibleOther) {\r\n        const neighbor = clampAdjacentKey(dir) ?? pickCandidate();\r\n        if (neighbor && pendingKey !== neighbor) {\r\n          pendingKey = neighbor;\r\n          if (dwellTimer) window.clearTimeout(dwellTimer);\r\n          dwellTimer = window.setTimeout(() => {\r\n            exitTargetKeyRef.current = neighbor; // lock to adjacent pane\r\n            setFocusedProjectKey(null);          // triggers robust exit\r\n          }, VIS_DWELL_MS);\r\n        }\r\n      } else {\r\n        pendingKey = null;\r\n        if (dwellTimer) {\r\n          window.clearTimeout(dwellTimer);\r\n          dwellTimer = null;\r\n        }\r\n      }\r\n    };\r\n\r\n    const onScroll = () => { if (!raf) raf = requestAnimationFrame(onTick); };\r\n\r\n    scroller.addEventListener('scroll', onScroll, { passive: true });\r\n    onScroll(); // prime once\r\n\r\n    return () => {\r\n      scroller.removeEventListener('scroll', onScroll as any);\r\n      if (raf) cancelAnimationFrame(raf);\r\n      if (dwellTimer) window.clearTimeout(dwellTimer);\r\n    };\r\n  }, [focusedProjectKey, projects, scrollContainerRef, setFocusedProjectKey]);\r\n\r\n  /* ===========================\r\n     Focus EXIT choreography (now user-cancelable)\r\n     =========================== */\r\n  const exitOrchRef = useRef<{\r\n    cancelTween?: () => void;\r\n    timers: number[];\r\n    inputAttached: boolean;\r\n  }>({ timers: [], inputAttached: false });\r\n\r\n  useEffect(() => {\r\n    const container = scrollContainerRef.current;\r\n    if (!container) return;\r\n\r\n    // Only act when we EXIT focus (focusedProjectKey === null)\r\n    if (focusedProjectKey) return;\r\n\r\n    const preferredKey = exitTargetKeyRef.current || lastFocusedKeyRef.current;\r\n    if (!preferredKey) return;\r\n\r\n    const scroller = scrollContainerRef.current ?? (document.scrollingElement as any);\r\n    const state = exitOrchRef.current;\r\n\r\n    // prevent native snap fighting during handoff\r\n    container.classList.add('no-snap');\r\n\r\n    // helper: cleanup everything\r\n    const cleanup = () => {\r\n      state.cancelTween?.();\r\n      state.cancelTween = undefined;\r\n      state.timers.forEach(t => clearTimeout(t));\r\n      state.timers = [];\r\n      if (state.inputAttached) {\r\n        detachInputCancels();\r\n      }\r\n      container.classList.remove('no-snap');\r\n      container.classList.remove('snap-proximity');\r\n    };\r\n\r\n    // tell panes which key is exiting (for listeners)\r\n    document.dispatchEvent(new CustomEvent('focus-exit-start', { detail: { key: preferredKey } }));\r\n\r\n    // 1) Tween to the intended neighbor after killing inertia\r\n    state.cancelTween = animatePlaceToKey(preferredKey, 240);\r\n\r\n    // 1a) If the user interacts, cancel choreography immediately\r\n    const INTERACTION_EVENTS: Array<keyof DocumentEventMap | 'mousedown'> =\r\n      ['wheel', 'touchstart', 'keydown', 'mousedown', 'synthetic-drag'];\r\n    const onUserCancel = () => {\r\n      // cancel everything and re-enable input/snap right away\r\n      cleanup();\r\n      // small snap proximity to let native snap settle, then fully restore\r\n      container.classList.add('snap-proximity');\r\n      const t = window.setTimeout(() => container.classList.remove('snap-proximity'), SNAP_RAMP_MS);\r\n      state.timers.push(t);\r\n    };\r\n\r\n    const attachInputCancels = () => {\r\n      if (state.inputAttached) return;\r\n      state.inputAttached = true;\r\n      for (const ev of INTERACTION_EVENTS) {\r\n        // @ts-ignore\r\n        document.addEventListener(ev, onUserCancel, { passive: true });\r\n      }\r\n    };\r\n    const detachInputCancels = () => {\r\n      state.inputAttached = false;\r\n      for (const ev of INTERACTION_EVENTS) {\r\n        // @ts-ignore\r\n        document.removeEventListener(ev, onUserCancel as any);\r\n      }\r\n    };\r\n    attachInputCancels();\r\n\r\n    // 2) Re-anchor once the old focused block actually shrinks (details unmount)\r\n    const oldKey = lastFocusedKeyRef.current;\r\n    const oldEl = oldKey\r\n      ? (projectRefs.current[oldKey] ??\r\n         (document.getElementById(`block-${oldKey}`) as HTMLDivElement | null))\r\n      : null;\r\n\r\n    let ro: ResizeObserver | null = null;\r\n    if (oldEl && typeof ResizeObserver !== 'undefined') {\r\n      let prevH = oldEl.offsetHeight || 0;\r\n      ro = new ResizeObserver(() => {\r\n        const h = oldEl.offsetHeight || 0;\r\n        if (h < prevH - 8) {\r\n          hardPlaceAtKey(preferredKey);\r\n          ro?.disconnect();\r\n          ro = null;\r\n        }\r\n        prevH = h;\r\n      });\r\n      ro.observe(oldEl);\r\n    }\r\n\r\n    // 3) Small dwell, then unlock + gently re-enable snapping (proximity ramp)\r\n    const unlockTimer = window.setTimeout(() => {\r\n      document.dispatchEvent(new CustomEvent('focus-exit-unlock', { detail: { key: preferredKey } }));\r\n\r\n      requestAnimationFrame(() => {\r\n        container.classList.add('snap-proximity');\r\n        container.classList.remove('no-snap');\r\n        const ramp = window.setTimeout(() => container.classList.remove('snap-proximity'), SNAP_RAMP_MS);\r\n        state.timers.push(ramp);\r\n      });\r\n\r\n      // Clear the used target\r\n      exitTargetKeyRef.current = null;\r\n      detachInputCancels();\r\n    }, MIN_LINGER_MS);\r\n    state.timers.push(unlockTimer);\r\n\r\n    // Fallback re-anchor and final cleanup\r\n    const postAnchor = window.setTimeout(() => hardPlaceAtKey(preferredKey), 600);\r\n    const kbFallback = window.setTimeout(() => container.classList.remove('no-snap'), KB_FALLBACK_MS);\r\n    const unlockFallback = window.setTimeout(() => {\r\n      document.dispatchEvent(new CustomEvent('focus-exit-unlock', { detail: { key: preferredKey } }));\r\n      container.classList.add('snap-proximity');\r\n      const ramp = window.setTimeout(() => container.classList.remove('snap-proximity'), SNAP_RAMP_MS);\r\n      state.timers.push(ramp);\r\n      detachInputCancels();\r\n    }, UNLOCK_FALLBACK_MS);\r\n    state.timers.push(postAnchor, kbFallback, unlockFallback);\r\n\r\n    return () => {\r\n      ro?.disconnect();\r\n      cleanup();\r\n    };\r\n  }, [focusedProjectKey, scrollContainerRef]);\r\n\r\n  /* ===========================\r\n     Edge signalling only (no cancel, no programmatic scroll)\r\n     =========================== */\r\n  useEffect(() => {\r\n    const scrollContainer = scrollContainerRef.current;\r\n    if (!scrollContainer) return;\r\n\r\n    let attachedEl: HTMLElement | null = null;\r\n\r\n    const atTop = (el: HTMLElement) => el.scrollTop <= 0;\r\n    const atBottom = (el: HTMLElement) => {\r\n      const EPS = Math.max(8, Math.ceil((window.devicePixelRatio || 1) * 12));\r\n      const max = (el.scrollHeight - el.clientHeight);\r\n      return (max - el.scrollTop) <= EPS;\r\n    };\r\n\r\n    const fireSyntheticDrag = (\r\n      phase: 'start' | 'move' | 'end',\r\n      direction: 'up' | 'down',\r\n      magnitude: number,\r\n      source: 'touch' | 'wheel',\r\n      velocity?: number\r\n    ) => {\r\n      const evt = new CustomEvent('synthetic-drag', {\r\n        detail: { phase, direction, magnitude, velocity, source, ts: performance.now() },\r\n        bubbles: true,\r\n        composed: true,\r\n      });\r\n      scrollContainer.dispatchEvent(evt);\r\n    };\r\n\r\n    let lastY = 0;\r\n    let lastTs = 0;\r\n\r\n    const handleTouchStart = (e: TouchEvent) => {\r\n      if (!attachedEl) return;\r\n      if (e.touches.length === 1) {\r\n        lastY = e.touches[0].clientY;\r\n        lastTs = performance.now();\r\n        fireSyntheticDrag('start', 'down', 0, 'touch');\r\n      }\r\n    };\r\n\r\n    const handleTouchMove = (e: TouchEvent) => {\r\n      if (!attachedEl) return;\r\n      if (e.touches.length !== 1) return;\r\n      const y = e.touches[0].clientY;\r\n      const dy = y - lastY; // >0 down, <0 up\r\n      const now = performance.now();\r\n      const dt = Math.max(1, now - lastTs);\r\n      const velocity = Math.abs(dy) / dt;\r\n      lastY = y;\r\n      lastTs = now;\r\n\r\n      if ((dy > 0 && atTop(attachedEl)) || (dy < 0 && atBottom(attachedEl))) {\r\n        fireSyntheticDrag('move', dy < 0 ? 'down' : 'up', Math.min(600, Math.abs(dy)), 'touch', velocity);\r\n      }\r\n    };\r\n\r\n    const handleTouchEnd = () => {\r\n      fireSyntheticDrag('end', 'down', 0, 'touch');\r\n    };\r\n\r\n    const handleWheel = (e: WheelEvent) => {\r\n      if (!attachedEl) return;\r\n      const { deltaY } = e;\r\n      const top = atTop(attachedEl);\r\n      const bottom = atBottom(attachedEl);\r\n      if ((deltaY < 0 && top) || (deltaY > 0 && bottom)) {\r\n        fireSyntheticDrag('move', deltaY > 0 ? 'down' : 'up', Math.min(600, Math.abs(deltaY)), 'wheel');\r\n      }\r\n    };\r\n\r\n    const cleanupFrom = (el: HTMLElement | null) => {\r\n      if (!el) return;\r\n      el.removeEventListener('touchstart', handleTouchStart as any);\r\n      el.removeEventListener('touchmove', handleTouchMove as any);\r\n      el.removeEventListener('touchend', handleTouchEnd as any);\r\n      el.removeEventListener('wheel', handleWheel as any);\r\n    };\r\n\r\n    const maybeAttach = () => {\r\n      const el = document.querySelector('.embedded-app') as HTMLElement | null;\r\n      if (!el || el === attachedEl) return;\r\n      cleanupFrom(attachedEl);\r\n      attachedEl = el;\r\n      attachedEl.addEventListener('touchstart', handleTouchStart, { passive: true });\r\n      attachedEl.addEventListener('touchmove', handleTouchMove, { passive: true });\r\n      attachedEl.addEventListener('touchend', handleTouchEnd, { passive: true });\r\n      attachedEl.addEventListener('wheel', handleWheel, { passive: true });\r\n    };\r\n\r\n    const mo = new MutationObserver(maybeAttach);\r\n    mo.observe(document.body, { childList: true, subtree: true });\r\n    maybeAttach();\r\n\r\n    return () => {\r\n      mo.disconnect();\r\n      cleanupFrom(attachedEl);\r\n      attachedEl = null;\r\n    };\r\n  }, [scrollContainerRef, focusedProjectKey]);\r\n\r\n  const blockIds = useMemo(() => projects.map(p => `#block-${p.key}`), [projects]);\r\n\r\n  // Example consumer — left in place to react to synthetic-drag if you want\r\n  useEffect(() => {\r\n    const el = scrollContainerRef.current;\r\n    if (!el) return;\r\n    const onSynthetic = (_e: Event) => {};\r\n    el.addEventListener('synthetic-drag', onSynthetic as EventListener);\r\n    return () => el.removeEventListener('synthetic-drag', onSynthetic as EventListener);\r\n  }, [scrollContainerRef]);\r\n\r\n  // Compute once per render: which index is focused?\r\n  const focusedIdx = focusedProjectKey\r\n    ? projects.findIndex(p => p.key === focusedProjectKey)\r\n    : -1;\r\n\r\n  return (\r\n    <div\r\n      ref={scrollContainerRef}\r\n      className=\"SnappyScrollThingy\"\r\n      style={{\r\n        overflowY: 'scroll',\r\n        // STRONG snap whenever not focused; focus mode disables via inline/logic above.\r\n        scrollSnapType: focusedProjectKey ? 'none' : 'y mandatory',\r\n        scrollBehavior: 'smooth',\r\n        scrollbarWidth: 'none',\r\n        msOverflowStyle: 'none',\r\n      }}\r\n    >\r\n      <style>{`\r\n        .SnappyScrollThingy::-webkit-scrollbar { display: none; }\r\n        /* Allow native edge handoff */\r\n        .SnappyScrollThingy { overscroll-behavior: auto; }\r\n        .embedded-app { touch-action: pan-y; overscroll-behavior: auto; }\r\n\r\n        /* Snap control helpers */\r\n        .SnappyScrollThingy.no-snap { scroll-snap-type: none !important; }\r\n        .SnappyScrollThingy.snap-proximity { scroll-snap-type: y proximity !important; }\r\n      `}</style>\r\n\r\n      {projects.map((item, idx) => {\r\n        const isFocused = focusedProjectKey === item.key;\r\n        const collapseBelow = focusedIdx >= 0 && idx > focusedIdx;\r\n        return (\r\n          <ProjectPane\r\n            key={item.key}\r\n            item={item}\r\n            isFocused={isFocused}\r\n            collapseBelow={collapseBelow}\r\n            isFirst={idx === 0}\r\n            setRef={(el) => { projectRefs.current[item.key] = el; }}\r\n          />\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ScrollController;\r\n","import { useEffect } from 'react';\nimport loadable from '@loadable/component';\nimport ViewProject from './utils/title/view-project.tsx';\nimport { TitleProvider } from './utils/title/title-context.tsx';\nimport ScrollController from './utils/scroll-controller.tsx';\nimport { ProjectVisibilityProvider } from './utils/context-providers/project-context.tsx';\n\n// NavMenu is client-only; SSR markup stays identical.\nconst NavMenu = loadable(() => import('./utils/navigation/nav-menu.tsx'), {\n  ssr: false,\n  fallback: null,\n});\n\nfunction Frontpage() {\n  useEffect(() => {\n    // --- Clear prehydrate flag ASAP after hydration ---\n    const root = document.getElementById('landing');\n    requestAnimationFrame(() => root?.removeAttribute('data-prehydrate'));\n\n    // Allow pinch-zoom only inside elements that explicitly opt in.\n    const isAllowZoomTarget = (ev) => {\n      const el = ev?.target;\n      if (!el || typeof el.closest !== 'function') return false;\n      return Boolean(el.closest('[data-allow-zoom=\"1\"], .allow-pinch'));\n    };\n\n    // Prevent global pinch zoom (iOS/Android touchmove and Safari gesture*)\n    const preventPinchZoom = (event) => {\n      const tag = event?.target?.tagName?.toLowerCase?.() || '';\n      if (tag === 'video') return;                // let videos use native gestures\n      if (isAllowZoomTarget(event)) return;       // opt-in: allow inside pannable\n      if ('touches' in event && event.touches?.length > 1) event.preventDefault();\n    };\n\n    const preventGesture = (e) => {\n      // Safari iOS fires these for pinch\n      const tag = e?.target?.tagName?.toLowerCase?.() || '';\n      if (tag === 'video') return;\n      if (isAllowZoomTarget(e)) return;           // opt-in: allow inside pannable\n      e.preventDefault();\n    };\n\n    document.addEventListener('touchmove', preventPinchZoom, { passive: false });\n    document.addEventListener('gesturestart', preventGesture);\n    document.addEventListener('gesturechange', preventGesture);\n    document.addEventListener('gestureend', preventGesture);\n\n    return () => {\n      document.removeEventListener('touchmove', preventPinchZoom);\n      document.removeEventListener('gesturestart', preventGesture);\n      document.removeEventListener('gesturechange', preventGesture);\n      document.removeEventListener('gestureend', preventGesture);\n    };\n  }, []);\n\n  return (\n    <ProjectVisibilityProvider>\n      <div\n        className=\"HereGoesNothing\"\n        id=\"landing\"\n        data-prehydrate\n        style={{ position: 'relative' }}\n      >\n        <NavMenu />\n        <TitleProvider>\n          <ViewProject />\n        </TitleProvider>\n        <ScrollController />\n      </div>\n    </ProjectVisibilityProvider>\n  );\n}\n\nexport default Frontpage;\n"],"names":["hasWindow","window","hasRIC","hasCIC","ric","cb","opts","requestIdleCallback","setTimeout","timeout","cic","id","cancelIdleCallback","clearTimeout","LazyViewMount","load","fallback","mountMode","enterThreshold","exitThreshold","unmountDelayMs","root","rootMargin","observeTargetId","preloadOnIdle","preloadIdleTimeout","preloadOnFirstIO","placeholderMinHeight","fadeMs","fadeEasing","componentProps","isServer","selfRef","useRef","Comp","setComp","useState","mountedRef","isMounted","setIsMounted","isVisible","setIsVisible","unmountTimer","fadeTimer","idleId","preloadPromiseRef","lastRatio","lastIntersecting","firstIOSeen","ensurePreloaded","current","clearTimers","mountNow","p","prev","lazy","requestAnimationFrame","useEffect","target","document","getElementById","IntersectionObserver","enter","Math","max","min","exit","thresholds","Array","from","Set","sort","a","b","io","entry","ratio","intersectionRatio","intersecting","isIntersecting","crossedEnter","crossedExit","becameIntersecting","leftIntersecting","threshold","observe","disconnect","CompAny","_jsx","ref","style","width","minHeight","position","children","opacity","transition","willChange","Suspense","projectColors","rgb","tooltipAlpha","defaultAlpha","darkThemeTop","ProjectVisibilityContext","createContext","undefined","ProjectVisibilityProvider","activeProject","setActiveProject","blockGClick","setBlockGClick","currentIndex","setCurrentIndex","isDragging","setIsDragging","focusedProjectKey","setFocusedProjectKey","previousScrollY","setPreviousScrollY","scrollContainerRef","alignFnRef","requestViewportAlign","React","args","registerViewportAlign","fn","Provider","value","useProjectVisibility","context","useContext","Error","TitleContext","activeTitle","setActiveTitle","TitleProvider","useActiveTitle","TitleObserver","seed","useSsrData","projectsRef","seededShuffle","baseProjects","lastTitleRef","observerRef","moRef","pickCenteredNow","vh","innerHeight","documentElement","clientHeight","viewportCenter","bestTitle","bestDist","Infinity","el","key","display","r","getBoundingClientRect","bottom","top","center","height","dist","abs","title","mo","MutationObserver","cur","body","childList","subtree","focused","find","BaseProjectButton","displayTitle","isLink","currentKey","showBackground","backgroundColor","onHover","variant","arrowContainer","isFocused","isSwiping","setIsSwiping","container","animRef","mounted","animationData","linkData","arrowData3","arrowData","anim","lottie","loadAnimation","renderer","loop","autoplay","addEventListener","onDomLoaded","svg","querySelector","classList","add","goToAndStop","playSegments","destroy","useArrowLottie","Element","sharedProps","className","filter","Boolean","join","onMouseEnter","onMouseLeave","href","rel","onClick","handleToggleOpen","next","t","scrollIntoView","block","behavior","TitleEl","zIndex","IconEl","_jsxs","inset","borderRadius","pointerEvents","_Fragment","ProjectButtonTitleIcon","props","ProjectButtonIconTitle","ViewProject","projects","useMemo","focusedProject","currentProject","hovered","_setHovered","hoveredRef","setShowBackground","hideTimeoutRef","clearHide","scheduleHide","delay","handleMouseMove","e","viewportH","clientY","handleTouch","passive","removeEventListener","colorInfo","alpha","ButtonComp","v","LazyInView","serverRender","eager","allowIdle","debugLabel","initialVisible","Component","setComponent","vis","console","log","cancelled","then","mod","default","content","EventMount","active","visible","setVisible","loadingRef","alive","caseStudyLoaders","game","rotary","ProjectPane","item","setRef","isFirst","collapseBelow","useProjectLoader","ssr","payload","preloaded","desc","ssrRegistry","hasSSR","render","isHydrated","setIsHydrated","data","isDynamic","isGame","fallbackNode","LoadingScreen","isFullScreen","blockId","rootRef","isCollapsed","activeDelayed","setActiveDelayed","exitTimerRef","reserveH","setReserveH","detailsHostRef","rafId","h","release","EXIT_DELAY_MS","_cleanup","cleanup","cancelAnimationFrame","baseMin","coarse","matchMedia","matches","touch","navigator","maxTouchPoints","vv","visualViewport","gap","length","_","i","entries","mapped","String","scrollSnapAlign","scrollSnapStop","contentVisibility","contain","overflow","ScrollController","projectRefs","lastScrollTopRef","lastScrollDirRef","lastFocusedKeyRef","exitTargetKeyRef","getOffsetTopWithin","scroller","r1","r2","st","scrollTop","remove","scrollingElement","targetEl","bump","round","scrollBy","left","setScrollTop","scrollTo","hardPlaceAtKey","targetTop","prevBehavior","scrollBehavior","prevOverflow","overflowY","offsetHeight","raf","dwellTimer","pendingKey","focusedIdx","findIndex","pickCandidate","bestKey","onTick","curr","dir","neighbor","nextIdx","clampAdjacentKey","onScroll","exitOrchRef","timers","inputAttached","preferredKey","state","cancelTween","forEach","detachInputCancels","dispatchEvent","CustomEvent","detail","animatePlaceToKey","ms","startTop","delta","duration","start","performance","now","step","y","pow","easeOutCubic","INTERACTION_EVENTS","onUserCancel","push","ev","attachInputCancels","oldKey","oldEl","ro","ResizeObserver","prevH","unlockTimer","ramp","postAnchor","kbFallback","unlockFallback","scrollContainer","attachedEl","atTop","atBottom","EPS","ceil","devicePixelRatio","scrollHeight","fireSyntheticDrag","phase","direction","magnitude","source","velocity","evt","ts","bubbles","composed","lastY","lastTs","handleTouchStart","touches","handleTouchMove","dy","dt","handleTouchEnd","handleWheel","deltaY","cleanupFrom","maybeAttach","map","onSynthetic","_e","scrollSnapType","scrollbarWidth","msOverflowStyle","idx","NavMenu","loadable","resolved","chunkName","isReady","resolve","__webpack_modules__","importAsync","requireAsync","requireSync","__webpack_require__","removeAttribute","isAllowZoomTarget","closest","preventPinchZoom","event","tagName","toLowerCase","preventDefault","preventGesture"],"sourceRoot":""}