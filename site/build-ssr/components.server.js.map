{"version":3,"file":"components.server.js","mappings":"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","sources":["webpack://personal-site/./src/components/rock-escapade/block-g-host.tsx","webpack://personal-site/./src/components/rock-escapade/block-g-onboarding.tsx","webpack://personal-site/./src/utils/content-utility/color-map.ts","webpack://personal-site/./src/utils/context-providers/project-context.tsx","webpack://personal-site/./src/utils/tooltip/tooltip.ts","webpack://personal-site/./src/utils/tooltip/tooltipInit.ts"],"sourcesContent":["import { useCallback, useEffect, useRef, useState } from 'react';\r\nimport lottie from 'lottie-web';\r\n\r\nimport BlockGOnboarding from './block-g-onboarding';\r\nimport CoinCounter from './block-g-coin-counter';\r\nimport ExitButton from './block-g-exit';\r\nimport GameOverController from '../../ssr/logic/game-over-controller';\r\n\r\nimport { useRealMobileViewport } from '../../utils/content-utility/real-mobile';\r\nimport desktopOnboarding from '../../svg/desktop-onboarding.json';\r\nimport mobileOnboarding from '../../svg/mobile-onboarding.json';\r\n\r\nimport LazyViewMount from '../../utils/content-utility/lazy-view-mount';\r\nimport { gameLoaders } from '../../utils/content-utility/component-loader';\r\nimport { useHighScoreSubscription } from './useHighScoreSubscription';\r\nimport GameInputGuards from '../../ssr/logic/game-input-guards';\r\n\r\nimport '../../styles/block-type-g.css';\r\n\r\nconst GAME_MODE_CLASS = 'game-mode-active';\r\nfunction activateGameMode() { if (typeof document !== 'undefined') document.body.classList.add(GAME_MODE_CLASS); }\r\nfunction deactivateGameMode() { if (typeof document !== 'undefined') document.body.classList.remove(GAME_MODE_CLASS); }\r\nfunction isFullscreen() { return typeof document !== 'undefined' && !!document.fullscreenElement; }\r\n\r\nexport default function BlockGHost({ blockId }: { blockId: string }) {\r\n  const isRealMobile = useRealMobileViewport();\r\n\r\n  // lifecycle\r\n  const [started, setStarted] = useState(false);\r\n  const [fakeFS, setFakeFS] = useState(false);\r\n\r\n  // gate CTA until canvas reports ready\r\n  const [stageReady, setStageReady] = useState(false);\r\n\r\n  // HUD + meta\r\n  const [coins, setCoins] = useState(0);\r\n  const [countdownPhase, setCountdownPhase] = useState<null | 'lottie' | 'begin'>(null);\r\n  const [showBeginText, setShowBeginText] = useState(false);\r\n  const [showOverlayBg, setShowOverlayBg] = useState(false);\r\n  const [shouldRenderOverlayBg, setShouldRenderOverlayBg] = useState(false);\r\n\r\n  const lottieRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  // NEW: game-over final score (controls overlay)\r\n  const [finalScore, setFinalScore] = useState<number | null>(null);\r\n\r\n  // High score (remote)\r\n  const remoteHighScore = useHighScoreSubscription();\r\n  const stableHigh = typeof remoteHighScore === 'number' ? remoteHighScore : 0;\r\n\r\n  // API from GameCanvas\r\n  const restartApi = useRef<{ restart: () => void } | null>(null);\r\n\r\n  const enterFullscreen = useCallback(async () => {\r\n    if (typeof document === 'undefined') return;\r\n    const el = document.getElementById(blockId);\r\n    if (!el) return;\r\n    const req =\r\n      (el as any).requestFullscreen ||\r\n      (el as any).webkitRequestFullscreen ||\r\n      (el as any).msRequestFullscreen ||\r\n      (el as any).mozRequestFullScreen;\r\n    try {\r\n      const p = req?.call(el);\r\n      if (p?.then) await p;\r\n      setFakeFS(false);\r\n    } catch {\r\n      setFakeFS(true);\r\n    }\r\n  }, [blockId]);\r\n\r\n  const onStart = useCallback(async () => {\r\n    void gameLoaders.game();\r\n    await enterFullscreen();\r\n    activateGameMode();\r\n    setStarted(true);\r\n    setCoins(0);\r\n    setFinalScore(null);        // hide any lingering overlay\r\n    setCountdownPhase('lottie');\r\n\r\n    requestAnimationFrame(() => {\r\n      const el = document.getElementById(blockId);\r\n      (el as HTMLElement | null)?.focus?.();\r\n    });\r\n  }, [enterFullscreen, blockId]);\r\n\r\n  // Lottie countdown\r\n  useEffect(() => {\r\n    if (countdownPhase !== 'lottie' || !lottieRef.current) return;\r\n    const anim = lottie.loadAnimation({\r\n      container: lottieRef.current,\r\n      renderer: 'svg',\r\n      loop: false,\r\n      autoplay: true,\r\n      animationData: isRealMobile ? mobileOnboarding : desktopOnboarding,\r\n    });\r\n    const onComplete = () => setCountdownPhase('begin');\r\n    anim.addEventListener('complete', onComplete);\r\n    return () => { anim.removeEventListener('complete', onComplete); anim.destroy(); };\r\n  }, [countdownPhase, isRealMobile]);\r\n\r\n  useEffect(() => {\r\n    if (countdownPhase === 'begin') {\r\n      setShowBeginText(true);\r\n      const t = setTimeout(() => { setShowBeginText(false); setCountdownPhase(null); }, 1000);\r\n      return () => clearTimeout(t);\r\n    }\r\n  }, [countdownPhase]);\r\n\r\n  useEffect(() => {\r\n    if (countdownPhase === 'lottie') { setShowOverlayBg(true); setShouldRenderOverlayBg(true); }\r\n    else if (countdownPhase === null) {\r\n      setShowOverlayBg(false);\r\n      const t = setTimeout(() => setShouldRenderOverlayBg(false), 400);\r\n      return () => clearTimeout(t);\r\n    }\r\n  }, [countdownPhase]);\r\n\r\n  // Canvas bridges\r\n  const handleReady = (api: { restart: () => void }) => {\r\n    restartApi.current = api;\r\n    setStageReady(true); // flip CTA from \"Loadingâ€¦\" to \"Click Here to Play!\"\r\n  };\r\n\r\n  const handleCoinsChange = (n: number) => { setCoins(n); };\r\n  const handleGameOver = (finalCoins: number) => { setFinalScore(finalCoins); };\r\n  const handleRestart = () => { setCountdownPhase(null); restartApi.current?.restart(); setCoins(0); };\r\n  const handleExit = () => {\r\n    setStarted(false);\r\n    setCountdownPhase(null);\r\n    setCoins(0);\r\n    setFinalScore(null);\r\n    deactivateGameMode();\r\n    setFakeFS(false);\r\n    if (isFullscreen()) {\r\n      const exit =\r\n        (document as any).exitFullscreen ||\r\n        (document as any).webkitExitFullscreen ||\r\n        (document as any).msExitFullscreen ||\r\n        (document as any).mozCancelFullScreen;\r\n      try { exit?.call(document); } catch {}\r\n    }\r\n  };\r\n  useEffect(() => () => deactivateGameMode(), []);\r\n\r\n  const displayHigh = (finalScore == null ? coins : finalScore) > stableHigh\r\n    ? (finalScore == null ? coins : finalScore)\r\n    : stableHigh;\r\n  const beatingHighNow = finalScore == null && coins > stableHigh;\r\n\r\n  return (\r\n    <section\r\n      id={blockId}\r\n      tabIndex={-1}\r\n      className={`block-type-g ${fakeFS ? 'fake-fs' : ''} ${started ? 'ingame' : ''}`}\r\n      style={{ position: 'relative' }}\r\n    >\r\n      <GameInputGuards\r\n        active={started || fakeFS}\r\n        lockBodyScroll\r\n        alsoBlockWheel\r\n        alsoBlockTouch\r\n        allowWhenTyping\r\n      />\r\n\r\n      {!started && (\r\n        <BlockGOnboarding\r\n          onStart={onStart}\r\n          resetTrigger={started ? 1 : 0}\r\n          // NEW: text + interactivity gated on stage readiness\r\n          label={stageReady ? 'Click Here to Play!' : 'Loading Gameâ€¦'}\r\n          ctaEnabled={stageReady}\r\n        />\r\n      )}\r\n\r\n      {started && (\r\n        <>\r\n          <ExitButton onExit={handleExit} />\r\n          <CoinCounter coins={coins} highScore={displayHigh} newHighScore={beatingHighNow} />\r\n\r\n          {shouldRenderOverlayBg && (\r\n            <div className={`countdown-bg-overlay ${!showOverlayBg ? 'hide' : ''}`} style={{ pointerEvents: 'none' }} />\r\n          )}\r\n\r\n          {(countdownPhase === 'lottie' || countdownPhase === 'begin') && (\r\n            <div ref={lottieRef} id=\"lottie-onboarding\" className=\"countdown-lottie\" style={{ pointerEvents: 'none' }} />\r\n          )}\r\n\r\n          <GameOverController\r\n            score={finalScore}\r\n            highScore={stableHigh}\r\n            onRestart={handleRestart}\r\n            onHide={() => setFinalScore(null)}\r\n          />\r\n        </>\r\n      )}\r\n\r\n      {/* Lazy + Re-mountable:\r\n          - Preloads chunk on idle & first IO\r\n          - Mounts when in view, unmounts when out of view\r\n          - Placeholder keeps height so IO can measure */}\r\n<LazyViewMount\r\n        load={() => import('./game-canvas')}\r\n        fallback={null}\r\n        mountMode=\"io\"\r\n        observeTargetId={blockId}\r\n        rootMargin=\"0px\"\r\n        enterThreshold={0.2}      // start showing after ~20% visible\r\n        exitThreshold={0.05}      // consider out-of-view at/below 5%\r\n        unmountDelayMs={150}      // ms! small delay to avoid micro-jitter\r\n        preloadOnIdle\r\n        preloadIdleTimeout={2000}\r\n        preloadOnFirstIO\r\n        placeholderMinHeight={360}\r\n        componentProps={{\r\n          onReady: handleReady,\r\n          onCoinsChange: handleCoinsChange,\r\n          onGameOver: handleGameOver,\r\n          highScore: stableHigh,\r\n          pauseWhenHidden: true,\r\n          demoMode: !started,\r\n          overlayActive: countdownPhase === 'lottie' || countdownPhase === 'begin',\r\n          allowSpawns: !started || (started && (countdownPhase === 'begin' || countdownPhase === null)),\r\n        }}\r\n      />\r\n    </section>\r\n  );\r\n}\r\n","// src/components/rock-escapade/block-g-onboarding.tsx\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport lottie from 'lottie-web';\r\nimport onboardingAnimation from '../../svg/coin.json';\r\nimport { useProjectVisibility } from '../../utils/context-providers/project-context';\r\nimport { useTooltipInit } from '../../utils/tooltip/tooltipInit';\r\n\r\nimport LoadingHub from '../../utils/loading/loading-hub';\r\n\r\ntype Props = {\r\n  onStart?: () => void;\r\n  resetTrigger?: number;\r\n  label?: string;          // CTA label\r\n  ctaEnabled?: boolean;    // gate readiness (pointer events)\r\n  loadingLines?: string[];\r\n};\r\n\r\nconst BlockGOnboarding: React.FC<Props> = ({\r\n  onStart,\r\n  resetTrigger,\r\n  label = 'Click Here to Play!',\r\n  ctaEnabled = true,\r\n  loadingLines = [\r\n  \"Loading engineâ€¦\",\r\n  \"Creating game canvasâ€¦\",\r\n  \"Configuring frame loopâ€¦\",\r\n  \"Setting up input controlsâ€¦\",\r\n  \"Applying display settingsâ€¦\",\r\n  \"Initializing game stateâ€¦\",\r\n  \"Spawning playerâ€¦\",\r\n  \"Almost readyâ€¦\"\r\n  ],\r\n}) => {\r\n  const [visible, setVisible] = useState(true);\r\n  const [isFadingOut, setIsFadingOut] = useState(false);\r\n  const lottieRef = useRef<HTMLDivElement | null>(null);\r\n  const containerRef = useRef<HTMLDivElement | null>(null);\r\n  const lottieInstance = useRef<ReturnType<typeof lottie.loadAnimation> | null>(null);\r\n\r\n  useTooltipInit();\r\n  const {\r\n    focusedProjectKey,\r\n    scrollContainerRef,\r\n    previousScrollY,\r\n    setPreviousScrollY,\r\n  } = useProjectVisibility();\r\n\r\n  const handleClick = () => {\r\n    if (!ctaEnabled) return; // gate until ready\r\n    if (focusedProjectKey) {\r\n      setPreviousScrollY(window.scrollY);\r\n      setTimeout(() => {\r\n        if (scrollContainerRef.current) {\r\n          scrollContainerRef.current.scrollTo({ top: 0, behavior: 'auto' });\r\n        } else {\r\n          window.scrollTo({ top: 0, behavior: 'auto' });\r\n        }\r\n      }, 0);\r\n    }\r\n    onStart?.();\r\n    setIsFadingOut(true);\r\n  };\r\n\r\n  // Restore scroll pos on exit from focus mode\r\n  useEffect(() => {\r\n    // (kept from your version â€” omitted focusedProjectKey setter, just restore)\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  const initializeLottie = () => {\r\n    if (!lottieRef.current) return;\r\n    lottieInstance.current?.destroy();\r\n    lottieInstance.current = lottie.loadAnimation({\r\n      container: lottieRef.current,\r\n      renderer: 'svg',\r\n      loop: false,\r\n      autoplay: false,\r\n      animationData: onboardingAnimation,\r\n    });\r\n    lottieInstance.current.addEventListener('complete', () => {\r\n      if (!lottieInstance.current) return;\r\n      lottieInstance.current.playSegments([41, lottieInstance.current.totalFrames], true);\r\n      lottieInstance.current.loop = true;\r\n    });\r\n  };\r\n\r\n  const destroyLottie = () => {\r\n    lottieInstance.current?.destroy();\r\n    lottieInstance.current = null;\r\n  };\r\n\r\n  // IO mount/unmount of the Lottie\r\n  useEffect(() => {\r\n    const observer = new IntersectionObserver(\r\n      (entries) => {\r\n        entries.forEach((entry) => {\r\n          if (entry.isIntersecting) {\r\n            initializeLottie();\r\n            if (lottieInstance.current) {\r\n              lottieInstance.current.stop();\r\n              lottieInstance.current.playSegments([0, lottieInstance.current.totalFrames], true);\r\n            }\r\n          } else {\r\n            destroyLottie();\r\n          }\r\n        });\r\n      },\r\n      { threshold: 0.1 }\r\n    );\r\n\r\n    if (containerRef.current) observer.observe(containerRef.current);\r\n    return () => {\r\n      observer.disconnect();\r\n      destroyLottie();\r\n    };\r\n  }, [resetTrigger]);\r\n\r\n  useEffect(() => {\r\n    if (isFadingOut) {\r\n      const t = setTimeout(() => setVisible(false), 300);\r\n      return () => clearTimeout(t);\r\n    }\r\n  }, [isFadingOut]);\r\n\r\n  useEffect(() => {\r\n    if (resetTrigger) {\r\n      setVisible(true);\r\n      setIsFadingOut(false);\r\n    }\r\n  }, [resetTrigger]);\r\n\r\n  if (!visible) return null;\r\n\r\n  return (\r\n    <div\r\n      className=\"block-g-onboarding tooltip-block-g\"\r\n      ref={containerRef}\r\n      aria-busy={!ctaEnabled}\r\n      style={{\r\n        opacity: isFadingOut ? 0 : 1,\r\n        transition: 'opacity 0.3s ease',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n      }}\r\n    >\r\n      <div\r\n        ref={lottieRef}\r\n        className=\"coin\"\r\n        onClick={handleClick}\r\n        style={{\r\n          pointerEvents: ctaEnabled ? 'auto' : 'none',\r\n          cursor: ctaEnabled ? 'pointer' : 'default',\r\n        }}\r\n      />\r\n\r\n      {/* Keep your CTA label exactly as before */}\r\n      <h1\r\n        className=\"onboarding-text\"\r\n        onClick={handleClick}\r\n        aria-disabled={!ctaEnabled}\r\n        style={{\r\n          pointerEvents: ctaEnabled ? 'auto' : 'none',\r\n          cursor: ctaEnabled ? 'pointer' : 'default',\r\n        }}\r\n      >\r\n        {label}\r\n      </h1>\r\n\r\n      {!ctaEnabled && (\r\n        <LoadingHub\r\n          className=\"loading-hub--game loading-hub--left\"\r\n          keyword=\"game\"\r\n          minHeight={72}\r\n          lines={loadingLines}\r\n          ariaLabel=\"Loading game\"\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BlockGOnboarding;\r\n","// Master color config\r\nexport interface ProjectColor {\r\n  rgb: string;         // \"204, 85, 41\"\r\n  tooltipAlpha?: number;\r\n  defaultAlpha?: number;\r\n  darkThemeTop?: string; // optional override for theme-color\r\n}\r\n\r\nexport const projectColors: Record<string, ProjectColor> = {\r\n  'Rotary Lamp': {\r\n    rgb: '204, 85, 41',\r\n    tooltipAlpha: 0.6,\r\n    defaultAlpha: 0.6,\r\n    darkThemeTop: 'rgba(72, 161, 161, 1)'\r\n  },\r\n  'Ice Cream Scoop': {\r\n    rgb: '234, 103, 97',\r\n    tooltipAlpha: 0.6,\r\n    defaultAlpha: 0.6,\r\n    darkThemeTop: 'rgba(23, 27, 24, 1)'\r\n  },\r\n  'Data Visualization': {\r\n    rgb: '153, 199, 7',\r\n    tooltipAlpha: 0.8,\r\n    defaultAlpha: 0.6,\r\n    darkThemeTop: 'rgba(28, 30, 31, 1)'\r\n  },\r\n  'Evade the Rock': {\r\n    rgb: '101, 86, 175',\r\n    tooltipAlpha: 0.6,\r\n    defaultAlpha: 0.6,\r\n    darkThemeTop: 'rgb(25, 25, 25)'\r\n  },\r\n  'Dynamic App': {\r\n    rgb: '120, 211, 255',\r\n    tooltipAlpha: 0.6,\r\n    defaultAlpha: 0.6,\r\n    darkThemeTop: 'rgba(17, 17, 17, 1)'\r\n  }\r\n};\r\n","import React, {\r\n  createContext,\r\n  useState,\r\n  useContext,\r\n  useRef,\r\n  ReactNode,\r\n} from 'react';\r\n\r\ninterface ProjectVisibilityContextType {\r\n  activeProject?: string;\r\n  setActiveProject: (title: string) => void;\r\n\r\n  blockGClick: boolean;\r\n  setBlockGClick: (clicked: boolean) => void;\r\n\r\n  currentIndex: number;\r\n  setCurrentIndex: React.Dispatch<React.SetStateAction<number>>;\r\n\r\n  scrollContainerRef: React.RefObject<HTMLDivElement>;\r\n\r\n  isDragging: boolean;\r\n  setIsDragging: React.Dispatch<React.SetStateAction<boolean>>;\r\n\r\n  focusedProjectKey: string | null;\r\n  setFocusedProjectKey: React.Dispatch<React.SetStateAction<string | null>>;\r\n\r\n  previousScrollY: number | null;\r\n  setPreviousScrollY: React.Dispatch<React.SetStateAction<number | null>>;\r\n}\r\n\r\ninterface ProjectVisibilityProviderProps {\r\n  children: ReactNode;\r\n}\r\n\r\nconst ProjectVisibilityContext = createContext<ProjectVisibilityContextType | undefined>(undefined);\r\n\r\nexport const ProjectVisibilityProvider = ({ children }: ProjectVisibilityProviderProps) => {\r\n  const [activeProject, setActiveProject] = useState<string | undefined>(undefined);\r\n  const [blockGClick, setBlockGClick] = useState(false);\r\n  const [currentIndex, setCurrentIndex] = useState(0);\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [focusedProjectKey, setFocusedProjectKey] = useState<string | null>(null);\r\n  const [previousScrollY, setPreviousScrollY] = useState<number | null>(null);\r\n\r\n  const scrollContainerRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  return (\r\n    <ProjectVisibilityContext.Provider\r\n      value={{\r\n        activeProject,\r\n        setActiveProject,\r\n        blockGClick,\r\n        setBlockGClick,\r\n        currentIndex,\r\n        setCurrentIndex,\r\n        scrollContainerRef,\r\n        isDragging,\r\n        setIsDragging,\r\n        focusedProjectKey,\r\n        setFocusedProjectKey,\r\n        previousScrollY,\r\n        setPreviousScrollY,\r\n      }}\r\n    >\r\n      {children}\r\n    </ProjectVisibilityContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useProjectVisibility = () => {\r\n  const context = useContext(ProjectVisibilityContext);\r\n  if (!context) {\r\n    throw new Error('useProjectVisibility must be used within ProjectVisibilityProvider');\r\n  }\r\n  return context;\r\n};\r\n","// utils/tooltip/global-tooltip.ts\r\nimport '../../styles/tooltip.css';\r\nimport { projectColors } from '../content-utility/color-map';\r\n\r\ntype TooltipInfo = { tags: string[]; backgroundColor: string };\r\nconst tooltipDataCache: Record<string, TooltipInfo> = {};\r\n\r\nconst LOCAL_FALLBACK_TAGS: Record<string, string[]> = {\r\n  'block-g': ['#q5.js Canvas', '#Gamification', '#Lottie Animation'],\r\n};\r\n\r\nconst TITLE_BY_KEY: Record<string, string> = {\r\n  'rotary-lamp': 'Rotary Lamp',\r\n  'ice-scoop': 'Ice Cream Scoop',\r\n  'data-viz': 'Data Visualization',\r\n  'block-g': 'Evade the Rock',\r\n  'dynamic': 'Dynamic App',\r\n};\r\n\r\nfunction bgForKey(key: string) {\r\n  const colorInfo = projectColors[TITLE_BY_KEY[key]];\r\n  const alpha = colorInfo?.tooltipAlpha ?? 0.6;\r\n  return colorInfo ? `rgba(${colorInfo.rgb}, ${alpha})` : 'rgba(85,95,90,0.6)';\r\n}\r\n\r\nfunction createTooltipDOM() {\r\n  const el = document.createElement('div');\r\n  el.id = 'custom-global-tooltip';\r\n  el.style.position = 'fixed';\r\n  el.style.pointerEvents = 'none';\r\n  el.style.zIndex = '9999';\r\n  el.style.opacity = '0';\r\n  el.style.visibility = 'hidden';\r\n  el.style.backdropFilter = 'blur(8px)';\r\n  el.style.color = '#fff';\r\n  el.style.transition = 'opacity 0.3s ease, visibility 0.3s ease';\r\n  el.className = 'custom-tooltip-blur';\r\n  const root = document.getElementById('efe-portfolio') || document.body;\r\n  root.appendChild(el);\r\n  return el as HTMLDivElement;\r\n}\r\n\r\nlet tooltipEl: HTMLDivElement | null = null;\r\nlet currentKey = '';\r\nlet hideTimeout: ReturnType<typeof setTimeout> | null = null;\r\n\r\n// IO gating state\r\nlet io: IntersectionObserver | null = null;\r\nlet observedEl: Element | null = null;\r\nlet visibleEnough = true; // only show/apply when true\r\n\r\nexport const fetchTooltipDataForKey = async (key: string): Promise<TooltipInfo> => {\r\n  if (tooltipDataCache[key]) return tooltipDataCache[key];\r\n\r\n  const bg = bgForKey(key);\r\n\r\n  if (LOCAL_FALLBACK_TAGS[key]) {\r\n    const info = { tags: LOCAL_FALLBACK_TAGS[key], backgroundColor: bg };\r\n    tooltipDataCache[key] = info;\r\n    return info;\r\n  }\r\n\r\n  try {\r\n    const client = (await import('../sanity')).default;\r\n    const res = await client.fetch<{ tags?: string[] } | null>(\r\n      `*[_type==\"mediaBlock\" && slug.current == $key][0]{ tags }`,\r\n      { key }\r\n    );\r\n    const info: TooltipInfo = { tags: res?.tags ?? [], backgroundColor: bg };\r\n    tooltipDataCache[key] = info;\r\n    return info;\r\n  } catch {\r\n    const info: TooltipInfo = { tags: [], backgroundColor: bg };\r\n    tooltipDataCache[key] = info;\r\n    return info;\r\n  }\r\n};\r\n\r\nconst showTooltip = () => {\r\n  if (!tooltipEl) return;\r\n  if (!visibleEnough) return; // ðŸš« gate: do not show if target < 0.3 visible\r\n  if (hideTimeout) clearTimeout(hideTimeout);\r\n  tooltipEl.style.opacity = '1';\r\n  tooltipEl.style.visibility = 'visible';\r\n  hideTimeout = setTimeout(() => hideTooltip(), 1_500);\r\n};\r\n\r\nconst hideTooltip = () => {\r\n  if (!tooltipEl) return;\r\n  if (hideTimeout) clearTimeout(hideTimeout);\r\n  tooltipEl.style.opacity = '0';\r\n  tooltipEl.style.visibility = 'hidden';\r\n  // keep currentKey so we can re-show quickly if still over same element\r\n};\r\n\r\nfunction positionTooltip(x: number, y: number) {\r\n  if (!tooltipEl) return;\r\n  const rect = tooltipEl.getBoundingClientRect();\r\n  const padding = 0;\r\n  const vw = window.innerWidth;\r\n  const vh = window.innerHeight;\r\n\r\n  const nearTop = y < rect.height + padding + 20;\r\n  const nearBottom = y + rect.height + padding > vh - 20;\r\n  const nearRight = x + rect.width + padding > vw - 20;\r\n  const nearLeft = x < rect.width + padding + 20;\r\n\r\n  let left: number, top: number;\r\n  if (nearBottom) { top = y - rect.height - padding - 8; left = x - rect.width * 0; }\r\n  else if (nearTop) { top = y + padding - 14; left = x - rect.width * 0; }\r\n  else if (nearRight) { top = y - rect.height / 2; left = x - rect.width - padding - 24; }\r\n  else if (nearLeft) { top = y - rect.height / 2; left = x + padding - 4; }\r\n  else { top = y - rect.height / 1.6; left = x + padding - 2; }\r\n\r\n  left = Math.max(padding, Math.min(left, vw - rect.width - padding));\r\n  top  = Math.max(padding, Math.min(top,  vh - rect.height - padding));\r\n\r\n  tooltipEl.style.left = `${left}px`;\r\n  tooltipEl.style.top  = `${top}px`;\r\n}\r\n\r\n// (new) observe hovered/attached element and gate visibility\r\nfunction observeTargetForVisibility(el: Element | null) {\r\n  if (!('IntersectionObserver' in window)) {\r\n    visibleEnough = true;\r\n    return;\r\n  }\r\n  if (!io) {\r\n    io = new IntersectionObserver(\r\n      (entries) => {\r\n        const e = entries[0];\r\n        const ratio = e?.intersectionRatio ?? 0;\r\n        visibleEnough = !!e?.isIntersecting && ratio >= 0.3; // ðŸ”‘ gate at 0.3\r\n        if (!visibleEnough) hideTooltip();\r\n      },\r\n      { root: null, threshold: [0, 0.3, 1] }\r\n    );\r\n  }\r\n  if (observedEl) io.unobserve(observedEl);\r\n  observedEl = el || null;\r\n  if (observedEl) io.observe(observedEl);\r\n}\r\n\r\nexport function initGlobalTooltip(isRealMobile: boolean) {\r\n  if (tooltipEl) return () => {};\r\n  tooltipEl = createTooltipDOM();\r\n\r\n  let lastMouseX = -1;\r\n  let lastMouseY = -1;\r\n  let ticking = false;\r\n  let scrollCheckTimeout: ReturnType<typeof setTimeout> | null = null;\r\n\r\n  const updateForElement = async (el: Element | null) => {\r\n    if (!(el instanceof HTMLElement)) { hideTooltip(); return; }\r\n\r\n    // find a tooltip-* class on the element or ancestors\r\n    const tooltipHost = el.closest('[class*=\"tooltip-\"]') as HTMLElement | null;\r\n    if (!tooltipHost) { hideTooltip(); observeTargetForVisibility(null); return; }\r\n\r\n    const tooltipClass = Array.from(tooltipHost.classList).find(c => c.startsWith('tooltip-'));\r\n    if (!tooltipClass) { hideTooltip(); observeTargetForVisibility(null); return; }\r\n\r\n    // observe this specific element for visibility gating\r\n    observeTargetForVisibility(tooltipHost);\r\n\r\n    if (!visibleEnough) { hideTooltip(); return; } // donâ€™t apply if under threshold\r\n\r\n    const key = tooltipClass.replace('tooltip-', '');\r\n    if (key !== currentKey) {\r\n      currentKey = key;\r\n      const info = await fetchTooltipDataForKey(key);\r\n\r\n      if (!info.tags.length) { hideTooltip(); return; }\r\n      tooltipEl!.innerHTML = info.tags.map(t => `<p class=\"tooltip-tag\">${t}</p>`).join('');\r\n      tooltipEl!.style.backgroundColor = info.backgroundColor;\r\n      showTooltip();\r\n    } else if (tooltipEl!.style.opacity === '0' || tooltipEl!.style.visibility === 'hidden') {\r\n      showTooltip();\r\n    }\r\n  };\r\n\r\n  const onMouseMove = (e: MouseEvent) => {\r\n    lastMouseX = e.clientX;\r\n    lastMouseY = e.clientY;\r\n    requestAnimationFrame(() => positionTooltip(lastMouseX, lastMouseY));\r\n    updateForElement(e.target as Element);\r\n  };\r\n\r\n  const checkHoveredElementOnScroll = () => {\r\n    if (lastMouseX < 0 || lastMouseY < 0) return;\r\n    const el = document.elementFromPoint(lastMouseX, lastMouseY);\r\n    updateForElement(el);\r\n    requestAnimationFrame(() => positionTooltip(lastMouseX, lastMouseY));\r\n  };\r\n\r\n  const onScroll = () => {\r\n    if (!ticking) {\r\n      window.requestAnimationFrame(() => { checkHoveredElementOnScroll(); ticking = false; });\r\n      ticking = true;\r\n    }\r\n    if (scrollCheckTimeout) clearTimeout(scrollCheckTimeout);\r\n    scrollCheckTimeout = setTimeout(() => {}, 120);\r\n  };\r\n\r\n  const onMouseOut = (e: MouseEvent) => {\r\n    if (!e.relatedTarget) hideTooltip();\r\n  };\r\n\r\n  if (!isRealMobile) window.addEventListener('scroll', onScroll, true);\r\n  document.addEventListener('mousemove', onMouseMove, { passive: true });\r\n  document.addEventListener('mouseout', onMouseOut, { passive: true });\r\n\r\n  return () => {\r\n    if (!tooltipEl) return;\r\n    if (!isRealMobile) window.removeEventListener('scroll', onScroll, true);\r\n    document.removeEventListener('mousemove', onMouseMove);\r\n    document.removeEventListener('mouseout', onMouseOut);\r\n    if (io) {\r\n      if (observedEl) io.unobserve(observedEl);\r\n      io.disconnect();\r\n      io = null;\r\n      observedEl = null;\r\n    }\r\n    tooltipEl.remove();\r\n    tooltipEl = null;\r\n    if (hideTimeout) clearTimeout(hideTimeout);\r\n  };\r\n}\r\n","// utils/tooltip/tooltipInit.ts\r\nimport { useEffect } from 'react';\r\nimport { initGlobalTooltip } from './tooltip';\r\nimport { useRealMobileViewport } from '../content-utility/real-mobile';\r\n\r\nexport const useTooltipInit = () => {\r\n  const isRealMobile = useRealMobileViewport();\r\n\r\n  useEffect(() => {\r\n    const dispose = initGlobalTooltip(isRealMobile);\r\n    return () => dispose?.();\r\n  }, [isRealMobile]);\r\n};\r\n"],"names":["useCallback","useEffect","useRef","useState","lottie","BlockGOnboarding","CoinCounter","ExitButton","GameOverController","useRealMobileViewport","desktopOnboarding","mobileOnboarding","LazyViewMount","gameLoaders","useHighScoreSubscription","GameInputGuards","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","GAME_MODE_CLASS","activateGameMode","document","body","classList","add","deactivateGameMode","remove","isFullscreen","fullscreenElement","BlockGHost","blockId","isRealMobile","started","setStarted","fakeFS","setFakeFS","stageReady","setStageReady","coins","setCoins","countdownPhase","setCountdownPhase","showBeginText","setShowBeginText","showOverlayBg","setShowOverlayBg","shouldRenderOverlayBg","setShouldRenderOverlayBg","lottieRef","finalScore","setFinalScore","remoteHighScore","stableHigh","restartApi","enterFullscreen","el","getElementById","req","requestFullscreen","webkitRequestFullscreen","msRequestFullscreen","mozRequestFullScreen","p","call","then","onStart","game","requestAnimationFrame","focus","current","anim","loadAnimation","container","renderer","loop","autoplay","animationData","onComplete","addEventListener","removeEventListener","destroy","t","setTimeout","clearTimeout","handleReady","api","handleCoinsChange","n","handleGameOver","finalCoins","handleRestart","restart","handleExit","exit","exitFullscreen","webkitExitFullscreen","msExitFullscreen","mozCancelFullScreen","displayHigh","beatingHighNow","id","tabIndex","className","style","position","children","active","lockBodyScroll","alsoBlockWheel","alsoBlockTouch","allowWhenTyping","resetTrigger","label","ctaEnabled","onExit","highScore","newHighScore","pointerEvents","ref","score","onRestart","onHide","load","fallback","mountMode","observeTargetId","rootMargin","enterThreshold","exitThreshold","unmountDelayMs","preloadOnIdle","preloadIdleTimeout","preloadOnFirstIO","placeholderMinHeight","componentProps","onReady","onCoinsChange","onGameOver","pauseWhenHidden","demoMode","overlayActive","allowSpawns","React","onboardingAnimation","useProjectVisibility","useTooltipInit","LoadingHub","loadingLines","visible","setVisible","isFadingOut","setIsFadingOut","containerRef","lottieInstance","focusedProjectKey","scrollContainerRef","previousScrollY","setPreviousScrollY","handleClick","window","scrollY","scrollTo","top","behavior","initializeLottie","playSegments","totalFrames","destroyLottie","observer","IntersectionObserver","entries","forEach","entry","isIntersecting","stop","threshold","observe","disconnect","opacity","transition","display","alignItems","onClick","cursor","keyword","minHeight","lines","ariaLabel","projectColors","rgb","tooltipAlpha","defaultAlpha","darkThemeTop","createContext","useContext","ProjectVisibilityContext","undefined","ProjectVisibilityProvider","activeProject","setActiveProject","blockGClick","setBlockGClick","currentIndex","setCurrentIndex","isDragging","setIsDragging","setFocusedProjectKey","Provider","value","context","Error","tooltipDataCache","LOCAL_FALLBACK_TAGS","TITLE_BY_KEY","bgForKey","key","colorInfo","alpha","createTooltipDOM","createElement","zIndex","visibility","backdropFilter","color","root","appendChild","tooltipEl","currentKey","hideTimeout","io","observedEl","visibleEnough","fetchTooltipDataForKey","bg","info","tags","backgroundColor","client","default","res","fetch","showTooltip","hideTooltip","positionTooltip","x","y","rect","getBoundingClientRect","padding","vw","innerWidth","vh","innerHeight","nearTop","height","nearBottom","nearRight","width","nearLeft","left","Math","max","min","observeTargetForVisibility","e","ratio","intersectionRatio","unobserve","initGlobalTooltip","lastMouseX","lastMouseY","ticking","scrollCheckTimeout","updateForElement","HTMLElement","tooltipHost","closest","tooltipClass","Array","from","find","c","startsWith","replace","length","innerHTML","map","join","onMouseMove","clientX","clientY","target","checkHoveredElementOnScroll","elementFromPoint","onScroll","onMouseOut","relatedTarget","passive","dispose"],"sourceRoot":""}